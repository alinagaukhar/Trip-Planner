/*! For license information please see main.f4eb4151.js.LICENSE.txt */
(()=>{var t={9138:t=>{var e="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,i="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function o(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var s,l,u,c;if(Array.isArray(t)){if((s=t.length)!=a.length)return!1;for(l=s;0!==l--;)if(!o(t[l],a[l]))return!1;return!0}if(n&&t instanceof Map&&a instanceof Map){if(t.size!==a.size)return!1;for(c=t.entries();!(l=c.next()).done;)if(!a.has(l.value[0]))return!1;for(c=t.entries();!(l=c.next()).done;)if(!o(l.value[1],a.get(l.value[0])))return!1;return!0}if(r&&t instanceof Set&&a instanceof Set){if(t.size!==a.size)return!1;for(c=t.entries();!(l=c.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(a)){if((s=t.length)!=a.length)return!1;for(l=s;0!==l--;)if(t[l]!==a[l])return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((s=(u=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(l=s;0!==l--;)if(!Object.prototype.hasOwnProperty.call(a,u[l]))return!1;if(e&&t instanceof Element)return!1;for(l=s;0!==l--;)if(("_owner"!==u[l]&&"__v"!==u[l]&&"__o"!==u[l]||!t.$$typeof)&&!o(t[u[l]],a[u[l]]))return!1;return!0}return t!==t&&a!==a}t.exports=function(t,e){try{return o(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},2127:(t,e,n)=>{"use strict";var r=n(2538);function i(t){var e=[1/0,1/0,-1/0,-1/0];return r.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}i.default=i,e.Z=i},7872:(t,e)=>{"use strict";function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(t[0])||!p(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function a(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function s(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function c(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function d(t){return 180*(t%(2*Math.PI))/Math.PI}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return r(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return s(e).geometry;case"MultiPolygon":return u(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return r(t,e)})),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return i(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return o(t,e)})),n)},e.featureCollection=a,e.multiLineString=s,e.multiPoint=l,e.multiPolygon=u,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=c,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return d(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=d,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=p,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!p(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},3663:(t,e,n)=>{var r=n(4892),i=n(5450),o=n(3454),a=n(1146),s=n(3535),l=n(2833),u=Date.prototype.getTime;function c(t,e,n){var p=n||{};return!!(p.strict?o(t,e):t===e)||(!t||!e||"object"!==typeof t&&"object"!==typeof e?p.strict?o(t,e):t==e:function(t,e,n){var o,p;if(typeof t!==typeof e)return!1;if(h(t)||h(e))return!1;if(t.prototype!==e.prototype)return!1;if(i(t)!==i(e))return!1;var f=a(t),m=a(e);if(f!==m)return!1;if(f||m)return t.source===e.source&&s(t)===s(e);if(l(t)&&l(e))return u.call(t)===u.call(e);var g=d(t),y=d(e);if(g!==y)return!1;if(g||y){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}if(typeof t!==typeof e)return!1;try{var v=r(t),_=r(e)}catch(b){return!1}if(v.length!==_.length)return!1;for(v.sort(),_.sort(),o=v.length-1;o>=0;o--)if(v[o]!=_[o])return!1;for(o=v.length-1;o>=0;o--)if(!c(t[p=v[o]],e[p],n))return!1;return!0}(t,e,p))}function h(t){return null===t||void 0===t}function d(t){return!(!t||"object"!==typeof t||"number"!==typeof t.length)&&("function"===typeof t.copy&&"function"===typeof t.slice&&!(t.length>0&&"number"!==typeof t[0]))}t.exports=c},2538:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7872);function i(t,e,n){if(null!==t)for(var r,o,a,s,l,u,c,h,d=0,p=0,f=t.type,m="FeatureCollection"===f,g="Feature"===f,y=m?t.features.length:1,v=0;v<y;v++){l=(h=!!(c=m?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var _=0;_<l;_++){var b=0,x=0;if(null!==(s=h?c.geometries[_]:c)){u=s.coordinates;var w=s.type;switch(d=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(u,p,v,b,x))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],p,v,b,x))return!1;p++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(o=0;o<u[r].length-d;o++){if(!1===e(u[r][o],p,v,b,x))return!1;p++}"MultiLineString"===w&&b++,"Polygon"===w&&x++}"Polygon"===w&&b++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(x=0,o=0;o<u[r].length;o++){for(a=0;a<u[r][o].length-d;a++){if(!1===e(u[r][o][a],p,v,b,x))return!1;p++}x++}b++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===i(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function s(t,e){var n,r,i,o,a,s,l,u,c,h,d=0,p="FeatureCollection"===t.type,f="Feature"===t.type,m=p?t.features.length:1;for(n=0;n<m;n++){for(s=p?t.features[n].geometry:f?t.geometry:t,u=p?t.features[n].properties:f?t.properties:{},c=p?t.features[n].bbox:f?t.bbox:void 0,h=p?t.features[n].id:f?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=l?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,d,u,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],d,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,d,u,c,h))return!1;d++}}function l(t,e){s(t,(function(t,n,i,o,a){var s,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==e(r.feature(t,i,{bbox:o,id:a}),n,0)&&void 0}switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var c={type:s,coordinates:t.coordinates[u]};if(!1===e(r.feature(c,i),n,u))return!1}}))}function u(t,e){l(t,(function(t,n,o){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var l,u=0,c=0,h=0;return!1!==i(t,(function(i,s,d,p,f){if(void 0===l||n>u||p>c||f>h)return l=i,u=n,c=p,h=f,void(a=0);var m=r.lineString([l,i],t.properties);if(!1===e(m,n,o,f,a))return!1;a++,l=i}))&&void 0}}}))}function c(t,e){if(!t)throw new Error("geojson is required");l(t,(function(t,n,i){if(null!==t.geometry){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===e(r.lineString(a[s],t.properties),n,i,s))return!1}}}))}e.coordAll=function(t){var e=[];return i(t,(function(t){e.push(t)})),e},e.coordEach=i,e.coordReduce=function(t,e,n,r){var o=n;return i(t,(function(t,r,i,a,s){o=0===r&&void 0===n?t:e(o,t,r,i,a,s)}),r),o},e.featureEach=a,e.featureReduce=function(t,e,n){var r=n;return a(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.findPoint=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.coordIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),l=l||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return r.point(u,l,e);case"MultiPoint":return o<0&&(o=u.length+o),r.point(u[o],l,e);case"LineString":return s<0&&(s=u.length+s),r.point(u[s],l,e);case"Polygon":return a<0&&(a=u.length+a),s<0&&(s=u[a].length+s),r.point(u[a][s],l,e);case"MultiLineString":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),r.point(u[o][s],l,e);case"MultiPolygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),s<0&&(s=u[o][a].length-s),r.point(u[o][a][s],l,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.segmentIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),l=l||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),r.lineString([u[s],u[s+1]],l,e);case"Polygon":return a<0&&(a=u.length+a),s<0&&(s=u[a].length+s-1),r.lineString([u[a][s],u[a][s+1]],l,e);case"MultiLineString":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),r.lineString([u[o][s],u[o][s+1]],l,e);case"MultiPolygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),s<0&&(s=u[o][a].length-s-1),r.lineString([u[o][a][s],u[o][a][s+1]],l,e)}throw new Error("geojson is invalid")},e.flattenEach=l,e.flattenReduce=function(t,e,n){var r=n;return l(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},e.geomEach=s,e.geomReduce=function(t,e,n){var r=n;return s(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r},e.lineEach=c,e.lineReduce=function(t,e,n){var r=n;return c(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r},e.propEach=o,e.propReduce=function(t,e,n){var r=n;return o(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.segmentEach=u,e.segmentReduce=function(t,e,n){var r=n,i=!1;return u(t,(function(t,o,a,s,l){r=!1===i&&void 0===n?t:e(r,t,o,a,s,l),i=!0})),r}},4037:(t,e,n)=>{"use strict";var r=n(2506),i=n(9722),o=i(r("String.prototype.indexOf"));t.exports=function(t,e){var n=r(t,!!e);return"function"===typeof n&&o(t,".prototype.")>-1?i(n):n}},9722:(t,e,n)=>{"use strict";var r=n(3350),i=n(2506),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(a,o),l=i("%Object.getOwnPropertyDescriptor%",!0),u=i("%Object.defineProperty%",!0),c=i("%Math.max%");if(u)try{u({},"a",{value:1})}catch(d){u=null}t.exports=function(t){var e=s(r,a,arguments);l&&u&&(l(e,"length").configurable&&u(e,"length",{value:1+c(0,t.length-(arguments.length-1))}));return e};var h=function(){return s(r,o,arguments)};u?u(t.exports,"apply",{value:h}):t.exports.apply=h},1694:(t,e)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var o=typeof n;if("string"===o||"number"===o)t.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&t.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){t.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&t.push(s)}}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(n=function(){return i}.apply(e,[]))||(t.exports=n)}()},4161:(t,e,n)=>{"use strict";var r=n(384),i=n(4613),o=n(5021),a=n(4460).orient2d;function s(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;var i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],a=0;a<t.length;a++){var s=t[a];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}var l=[e,n,r,i],u=l.slice();for(a=0;a<t.length;a++)o(t[a],l)||u.push(t[a]);return function(t){t.sort(_);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&p(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var r=[],i=t.length-1;i>=0;i--){for(;r.length>=2&&p(r[r.length-2],r[r.length-1],t[i])<=0;)r.pop();r.push(t[i])}return r.pop(),e.pop(),e.concat(r)}(u)}(t),a=new r(16);a.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},a.compareMinX=function(t,e){return t[0]-e[0]},a.compareMinY=function(t,e){return t[1]-e[1]},a.load(t);for(var s,u=[],c=0;c<i.length;c++){var h=i[c];a.remove(h),s=m(h,s),u.push(s)}var d=new r(16);for(c=0;c<u.length;c++)d.insert(f(u[c]));for(var y=e*e,v=n*n;u.length;){var b=u.shift(),x=b.p,w=b.next.p,E=g(x,w);if(!(E<v)){var S=E/y;(h=l(a,b.prev.p,x,w,b.next.next.p,S,d))&&Math.min(g(h,x),g(h,w))<=S&&(u.push(b),u.push(m(h,b)),a.remove(h),d.remove(b),d.insert(f(b)),d.insert(f(b.next)))}}b=s;var C=[];do{C.push(b.p),b=b.next}while(b!==s);return C.push(b.p),C}function l(t,e,n,r,o,a,s){for(var l=new i([],u),h=t.data;h;){for(var p=0;p<h.children.length;p++){var f=h.children[p],m=h.leaf?y(f,n,r):c(n,r,f);m>a||l.push({node:f,dist:m})}for(;l.length&&!l.peek().node.children;){var g=l.pop(),v=g.node,_=y(v,e,n),b=y(v,r,o);if(g.dist<_&&g.dist<b&&d(n,v,s)&&d(r,v,s))return v}(h=l.pop())&&(h=h.node)}return null}function u(t,e){return t.dist-e.dist}function c(t,e,n){if(h(t,n)||h(e,n))return 0;var r=v(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=v(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=v(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=v(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,i,o,a)}function h(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function d(t,e,n){for(var r,i,o,a,s=Math.min(t[0],e[0]),l=Math.min(t[1],e[1]),u=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),h=n.search({minX:s,minY:l,maxX:u,maxY:c}),d=0;d<h.length;d++)if(r=h[d].p,i=h[d].next.p,o=t,r!==(a=e)&&i!==o&&p(r,i,o)>0!==p(r,i,a)>0&&p(o,a,r)>0!==p(o,a,i)>0)return!1;return!0}function p(t,e,n){return a(t[0],t[1],e[0],e[1],n[0],n[1])}function f(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function m(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function g(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function y(t,e,n){var r=e[0],i=e[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-i)*a)/(o*o+a*a);s>1?(r=n[0],i=n[1]):s>0&&(r+=o*s,i+=a*s)}return(o=t[0]-r)*o+(a=t[1]-i)*a}function v(t,e,n,r,i,o,a,s){var l,u,c,h,d=n-t,p=r-e,f=a-i,m=s-o,g=t-i,y=e-o,v=d*d+p*p,_=d*f+p*m,b=f*f+m*m,x=d*g+p*y,w=f*g+m*y,E=v*b-_*_,S=E,C=E;0===E?(u=0,S=1,h=w,C=b):(h=v*w-_*x,(u=_*w-b*x)<0?(u=0,h=w,C=b):u>S&&(u=S,h=w+_,C=b)),h<0?(h=0,-x<0?u=0:-x>v?u=S:(u=-x,S=v)):h>C&&(h=C,-x+_<0?u=0:-x+_>v?u=S:(u=-x+_,S=v));var T=(1-(c=0===h?0:h/C))*i+c*a-((1-(l=0===u?0:u/S))*t+l*n),I=(1-c)*o+c*s-((1-l)*e+l*r);return T*T+I*I}function _(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}i.default&&(i=i.default),t.exports=s,t.exports.default=s},384:function(t){t.exports=function(){"use strict";function t(t,r,i,o,a){!function t(n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=r-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-l*c/s+h)),Math.min(o,Math.floor(r+(s-l)*c/s+h)),a)}var d=n[r],p=i,f=o;for(e(n,i,r),a(n[o],d)>0&&e(n,i,o);p<f;){for(e(n,p,f),p++,f--;a(n[p],d)<0;)p++;for(;a(n[f],d)>0;)f--}0===a(n[i],d)?e(n,i,f):e(n,++f,o),f<=r&&(i=f+1),r<=f&&(o=f-1)}}(t,r,i||0,o||t.length-1,a||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,r,i){i||(i=f(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var a=t.children[o];s(i,t.leaf?r(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function f(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,n,r,i,o){for(var a=[n,r];a.length;)if(!((r=a.pop())-(n=a.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;t(e,s,n,r,o),a.push(n,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!p(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?r(a):a;p(t,s)&&(e.leaf?n.push(a):d(t,s)?this._all(a,n):i.push(a))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(p(t,o)){if(e.leaf||d(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=f([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,a=this.data,s=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),a.leaf){var c=i(t,a.children,e);if(-1!==c)return a.children.splice(c,1),l.push(a),this._condense(l),this}o||a.leaf||!d(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),u.push(n),n=0,r=a,a=a.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,a=n-e+1,s=this._maxEntries;if(a<=s)return o(i=f(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(i=f([])).leaf=!1,i.height=r;var l=Math.ceil(a/s),u=l*Math.ceil(Math.sqrt(s));m(t,e,n,u,this.compareMinX);for(var c=e;c<=n;c+=u){var h=Math.min(c+u-1,n);m(t,c,h,l,this.compareMinY);for(var d=c;d<=h;d+=l){var p=Math.min(d+l-1,h);i.children.push(this._build(t,d,p,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],u=c(l),h=(d=t,p=l,(Math.max(p.maxX,d.maxX)-Math.min(p.minX,d.minX))*(Math.max(p.maxY,d.maxY)-Math.min(p.minY,d.minY))-u);h<o?(o=h,i=u<i?u:i,a=l):h===o&&u<i&&(i=u,a=l)}e=a||e.children[0]}var d,p;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),s(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),s=f(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},r.prototype._splitRoot=function(t,e){this.data=f([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,s,l,u,h,d=1/0,p=1/0,f=e;f<=n-e;f++){var m=a(t,0,f,this.toBBox),g=a(t,f,n,this.toBBox),y=(i=m,o=g,s=void 0,l=void 0,u=void 0,h=void 0,s=Math.max(i.minX,o.minX),l=Math.max(i.minY,o.minY),u=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,u-s)*Math.max(0,h-l)),v=c(m)+c(g);y<d?(d=y,r=f,p=v<p?v:p):y===d&&v<p&&(p=v,r=f)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=a(t,0,e,i),l=a(t,n-e,n,i),u=h(o)+h(l),c=e;c<n-e;c++){var d=t.children[c];s(o,t.leaf?i(d):d),u+=h(o)}for(var p=n-e-1;p>=e;p--){var f=t.children[p];s(l,t.leaf?i(f):f),u+=h(l)}return u},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)s(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},6674:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const i=function(t,e,n){var i,o=r[t];return i="string"===typeof o?o:1===e?o.one:o.other.replace("{{count}}",e.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function o(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}var a={date:o({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:o({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:o({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var s={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function l(t){return function(e,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):i;r=t.formattingValues[o]||t.formattingValues[i]}else{var a=t.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):t.defaultWidth;r=t.values[s]||t.values[a]}return r[t.argumentCallback?t.argumentCallback(e):e]}}function u(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;var a,s=o[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(l)?function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return}(l,(function(t){return t.test(s)})):function(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n;return}(l,(function(t){return t.test(s)}));return a=t.valueCallback?t.valueCallback(u):u,{value:a=n.valueCallback?n.valueCallback(a):a,rest:e.slice(s.length)}}}var c;const h={code:"en-US",formatDistance:i,formatLong:a,formatRelative:function(t,e,n,r){return s[t]},localize:{ordinalNumber:function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:l({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:l({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:l({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:l({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:l({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(c={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.match(c.matchPattern);if(!n)return null;var r=n[0],i=t.match(c.parsePattern);if(!i)return null;var o=c.valueCallback?c.valueCallback(i[0]):i[0];return{value:o=e.valueCallback?e.valueCallback(o):o,rest:t.slice(r.length)}}),era:u({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:u({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:u({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:u({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:u({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}}},4408:(t,e,n)=>{"use strict";n.d(e,{j:()=>i});var r={};function i(){return r}},3462:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=function(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},i=function(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}};const o={p:i,P:function(t,e){var n,o=t.match(/(P+)(p+)?/)||[],a=o[1],s=o[2];if(!s)return r(t,e);switch(a){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;default:n=e.dateTime({width:"full"})}return n.replace("{{date}}",r(a,e)).replace("{{time}}",i(s,e))}}},4697:(t,e,n)=>{"use strict";function r(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}n.d(e,{Z:()=>r})},9153:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var r=n(8527),i=n(9853),o=n(5611),a=n(4522);var s=6048e5;function l(t){(0,a.Z)(1,arguments);var e=(0,r.default)(t),n=(0,i.Z)(e).getTime()-function(t){(0,a.Z)(1,arguments);var e=(0,o.Z)(t),n=new Date(0);return n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0),(0,i.Z)(n)}(e).getTime();return Math.round(n/s)+1}},5611:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(8527),i=n(4522),o=n(9853);function a(t){(0,i.Z)(1,arguments);var e=(0,r.default)(t),n=e.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(n+1,0,4),a.setUTCHours(0,0,0,0);var s=(0,o.Z)(a),l=new Date(0);l.setUTCFullYear(n,0,4),l.setUTCHours(0,0,0,0);var u=(0,o.Z)(l);return e.getTime()>=s.getTime()?n+1:e.getTime()>=u.getTime()?n:n-1}},9934:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var r=n(8527),i=n(1230),o=n(9726),a=n(4522),s=n(9297),l=n(4408);var u=6048e5;function c(t,e){(0,a.Z)(1,arguments);var n=(0,r.default)(t),c=(0,i.Z)(n,e).getTime()-function(t,e){var n,r,u,c,h,d,p,f;(0,a.Z)(1,arguments);var m=(0,l.j)(),g=(0,s.Z)(null!==(n=null!==(r=null!==(u=null!==(c=null===e||void 0===e?void 0:e.firstWeekContainsDate)&&void 0!==c?c:null===e||void 0===e||null===(h=e.locale)||void 0===h||null===(d=h.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==u?u:m.firstWeekContainsDate)&&void 0!==r?r:null===(p=m.locale)||void 0===p||null===(f=p.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==n?n:1),y=(0,o.Z)(t,e),v=new Date(0);return v.setUTCFullYear(y,0,g),v.setUTCHours(0,0,0,0),(0,i.Z)(v,e)}(n,e).getTime();return Math.round(c/u)+1}},9726:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var r=n(8527),i=n(4522),o=n(1230),a=n(9297),s=n(4408);function l(t,e){var n,l,u,c,h,d,p,f;(0,i.Z)(1,arguments);var m=(0,r.default)(t),g=m.getUTCFullYear(),y=(0,s.j)(),v=(0,a.Z)(null!==(n=null!==(l=null!==(u=null!==(c=null===e||void 0===e?void 0:e.firstWeekContainsDate)&&void 0!==c?c:null===e||void 0===e||null===(h=e.locale)||void 0===h||null===(d=h.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==u?u:y.firstWeekContainsDate)&&void 0!==l?l:null===(p=y.locale)||void 0===p||null===(f=p.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==n?n:1);if(!(v>=1&&v<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var _=new Date(0);_.setUTCFullYear(g+1,0,v),_.setUTCHours(0,0,0,0);var b=(0,o.Z)(_,e),x=new Date(0);x.setUTCFullYear(g,0,v),x.setUTCHours(0,0,0,0);var w=(0,o.Z)(x,e);return m.getTime()>=b.getTime()?g+1:m.getTime()>=w.getTime()?g:g-1}},8552:(t,e,n)=>{"use strict";n.d(e,{Do:()=>a,Iu:()=>o,qp:()=>s});var r=["D","DD"],i=["YY","YYYY"];function o(t){return-1!==r.indexOf(t)}function a(t){return-1!==i.indexOf(t)}function s(t,e,n){if("YYYY"===t)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===t)throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===t)throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===t)throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}},4522:(t,e,n)=>{"use strict";function r(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}n.d(e,{Z:()=>r})},9853:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(8527),i=n(4522);function o(t){(0,i.Z)(1,arguments);var e=(0,r.default)(t),n=e.getUTCDay(),o=(n<1?7:0)+n-1;return e.setUTCDate(e.getUTCDate()-o),e.setUTCHours(0,0,0,0),e}},1230:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(8527),i=n(4522),o=n(9297),a=n(4408);function s(t,e){var n,s,l,u,c,h,d,p;(0,i.Z)(1,arguments);var f=(0,a.j)(),m=(0,o.Z)(null!==(n=null!==(s=null!==(l=null!==(u=null===e||void 0===e?void 0:e.weekStartsOn)&&void 0!==u?u:null===e||void 0===e||null===(c=e.locale)||void 0===c||null===(h=c.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==l?l:f.weekStartsOn)&&void 0!==s?s:null===(d=f.locale)||void 0===d||null===(p=d.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==n?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=(0,r.default)(t),y=g.getUTCDay(),v=(y<m?7:0)+y-m;return g.setUTCDate(g.getUTCDate()-v),g.setUTCHours(0,0,0,0),g}},9297:(t,e,n)=>{"use strict";function r(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}n.d(e,{Z:()=>r})},9040:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(9297),i=n(8527),o=n(4522);function a(t,e){(0,o.Z)(2,arguments);var n=(0,i.default)(t),a=(0,r.Z)(e);return isNaN(a)?new Date(NaN):a?(n.setDate(n.getDate()+a),n):n}},2074:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var r=n(9297),i=n(4377),o=n(4522),a=36e5;function s(t,e){(0,o.Z)(2,arguments);var n=(0,r.Z)(e);return(0,i.Z)(t,n*a)}},4377:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(9297),i=n(8527),o=n(4522);function a(t,e){(0,o.Z)(2,arguments);var n=(0,i.default)(t).getTime(),a=(0,r.Z)(e);return new Date(n+a)}},1518:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var r=n(9297),i=n(4377),o=n(4522),a=6e4;function s(t,e){(0,o.Z)(2,arguments);var n=(0,r.Z)(e);return(0,i.Z)(t,n*a)}},1104:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(9297),i=n(8527),o=n(4522);function a(t,e){(0,o.Z)(2,arguments);var n=(0,i.default)(t),a=(0,r.Z)(e);if(isNaN(a))return new Date(NaN);if(!a)return n;var s=n.getDate(),l=new Date(n.getTime());return l.setMonth(n.getMonth()+a+1,0),s>=l.getDate()?l:(n.setFullYear(l.getFullYear(),l.getMonth(),s),n)}},6689:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(9297),i=n(1104),o=n(4522);function a(t,e){(0,o.Z)(2,arguments);var n=3*(0,r.Z)(e);return(0,i.default)(t,n)}},20:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(9297),i=n(9040),o=n(4522);function a(t,e){(0,o.Z)(2,arguments);var n=7*(0,r.Z)(e);return(0,i.default)(t,n)}},5105:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(9297),i=n(1104),o=n(4522);function a(t,e){(0,o.Z)(2,arguments);var n=(0,r.Z)(e);return(0,i.default)(t,12*n)}},2729:(t,e,n)=>{"use strict";n.d(e,{qk:()=>o,vh:()=>i,yJ:()=>r});Math.pow(10,8);var r=6e4,i=36e5,o=1e3},9759:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var r=n(4697),i=n(8347),o=n(4522),a=864e5;function s(t,e){(0,o.Z)(2,arguments);var n=(0,i.default)(t),s=(0,i.default)(e),l=n.getTime()-(0,r.Z)(n),u=s.getTime()-(0,r.Z)(s);return Math.round((l-u)/a)}},5951:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t,e){(0,i.Z)(2,arguments);var n=(0,r.default)(t),o=(0,r.default)(e);return 12*(n.getFullYear()-o.getFullYear())+(n.getMonth()-o.getMonth())}},7223:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var r=n(3629),i=n(4697),o=n(4522),a=6048e5;function s(t,e,n){(0,o.Z)(2,arguments);var s=(0,r.default)(t,n),l=(0,r.default)(e,n),u=s.getTime()-(0,i.Z)(s),c=l.getTime()-(0,i.Z)(l);return Math.round((u-c)/a)}},7415:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t,e){(0,i.Z)(2,arguments);var n=(0,r.default)(t),o=(0,r.default)(e);return n.getFullYear()-o.getFullYear()}},786:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t){(0,i.Z)(1,arguments);var e=(0,r.default)(t);return e.setHours(23,59,59,999),e}},4888:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t){(0,i.Z)(1,arguments);var e=(0,r.default)(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}},4565:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var r=n(4408),i=n(8527),o=n(9297),a=n(4522);function s(t,e){var n,s,l,u,c,h,d,p;(0,a.Z)(1,arguments);var f=(0,r.j)(),m=(0,o.Z)(null!==(n=null!==(s=null!==(l=null!==(u=null===e||void 0===e?void 0:e.weekStartsOn)&&void 0!==u?u:null===e||void 0===e||null===(c=e.locale)||void 0===c||null===(h=c.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==l?l:f.weekStartsOn)&&void 0!==s?s:null===(d=f.locale)||void 0===d||null===(p=d.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==n?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=(0,i.default)(t),y=g.getDay(),v=6+(y<m?-7:0)-(y-m);return g.setDate(g.getDate()+v),g.setHours(23,59,59,999),g}},4675:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t){(0,i.Z)(1,arguments);var e=(0,r.default)(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}},1951:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>N});var r=n(9314),i=n(1633),o=n(8527),a=n(4522),s=864e5;var l=n(9153),u=n(5611),c=n(9934),h=n(9726);function d(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}const p={y:function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return d("yy"===e?r%100:r,e.length)},M:function(t,e){var n=t.getUTCMonth();return"M"===e?String(n+1):d(n+1,2)},d:function(t,e){return d(t.getUTCDate(),e.length)},a:function(t,e){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(t,e){return d(t.getUTCHours()%12||12,e.length)},H:function(t,e){return d(t.getUTCHours(),e.length)},m:function(t,e){return d(t.getUTCMinutes(),e.length)},s:function(t,e){return d(t.getUTCSeconds(),e.length)},S:function(t,e){var n=e.length,r=t.getUTCMilliseconds();return d(Math.floor(r*Math.pow(10,n-3)),e.length)}};var f="midnight",m="noon",g="morning",y="afternoon",v="evening",_="night";function b(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=e||"";return n+String(i)+a+d(o,2)}function x(t,e){return t%60===0?(t>0?"-":"+")+d(Math.abs(t)/60,2):w(t,e)}function w(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t);return r+d(Math.floor(i/60),2)+n+d(i%60,2)}const E={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if("yo"===e){var r=t.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return p.y(t,e)},Y:function(t,e,n,r){var i=(0,h.Z)(t,r),o=i>0?i:1-i;return"YY"===e?d(o%100,2):"Yo"===e?n.ordinalNumber(o,{unit:"year"}):d(o,e.length)},R:function(t,e){return d((0,u.Z)(t),e.length)},u:function(t,e){return d(t.getUTCFullYear(),e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return d(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return d(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return p.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return d(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var i=(0,c.Z)(t,r);return"wo"===e?n.ordinalNumber(i,{unit:"week"}):d(i,e.length)},I:function(t,e,n){var r=(0,l.Z)(t);return"Io"===e?n.ordinalNumber(r,{unit:"week"}):d(r,e.length)},d:function(t,e,n){return"do"===e?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):p.d(t,e)},D:function(t,e,n){var r=function(t){(0,a.Z)(1,arguments);var e=(0,o.default)(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=n-e.getTime();return Math.floor(r/s)+1}(t);return"Do"===e?n.ordinalNumber(r,{unit:"dayOfYear"}):d(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return d(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return d(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),i=0===r?7:r;switch(e){case"i":return String(i);case"ii":return d(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r,i=t.getUTCHours();switch(r=12===i?m:0===i?f:i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r,i=t.getUTCHours();switch(r=i>=17?v:i>=12?y:i>=4?g:_,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if("ho"===e){var r=t.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return p.h(t,e)},H:function(t,e,n){return"Ho"===e?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):p.H(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return"Ko"===e?n.ordinalNumber(r,{unit:"hour"}):d(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return 0===r&&(r=24),"ko"===e?n.ordinalNumber(r,{unit:"hour"}):d(r,e.length)},m:function(t,e,n){return"mo"===e?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):p.m(t,e)},s:function(t,e,n){return"so"===e?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):p.s(t,e)},S:function(t,e){return p.S(t,e)},X:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();if(0===i)return"Z";switch(e){case"X":return x(i);case"XXXX":case"XX":return w(i);default:return w(i,":")}},x:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"x":return x(i);case"xxxx":case"xx":return w(i);default:return w(i,":")}},O:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+b(i,":");default:return"GMT"+w(i,":")}},z:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+b(i,":");default:return"GMT"+w(i,":")}},t:function(t,e,n,r){var i=r._originalDate||t;return d(Math.floor(i.getTime()/1e3),e.length)},T:function(t,e,n,r){return d((r._originalDate||t).getTime(),e.length)}};var S=n(3462),C=n(4697),T=n(8552),I=n(9297),k=n(4408),A=n(6674),P=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,D=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,M=/^'([^]*?)'?$/,O=/''/g,R=/[a-zA-Z]/;function N(t,e,n){var s,l,u,c,h,d,p,f,m,g,y,v,_,b,x,w,N,L;(0,a.Z)(2,arguments);var F=String(e),z=(0,k.j)(),B=null!==(s=null!==(l=null===n||void 0===n?void 0:n.locale)&&void 0!==l?l:z.locale)&&void 0!==s?s:A.Z,j=(0,I.Z)(null!==(u=null!==(c=null!==(h=null!==(d=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==d?d:null===n||void 0===n||null===(p=n.locale)||void 0===p||null===(f=p.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==h?h:z.firstWeekContainsDate)&&void 0!==c?c:null===(m=z.locale)||void 0===m||null===(g=m.options)||void 0===g?void 0:g.firstWeekContainsDate)&&void 0!==u?u:1);if(!(j>=1&&j<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var U=(0,I.Z)(null!==(y=null!==(v=null!==(_=null!==(b=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==b?b:null===n||void 0===n||null===(x=n.locale)||void 0===x||null===(w=x.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==_?_:z.weekStartsOn)&&void 0!==v?v:null===(N=z.locale)||void 0===N||null===(L=N.options)||void 0===L?void 0:L.weekStartsOn)&&void 0!==y?y:0);if(!(U>=0&&U<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!B.localize)throw new RangeError("locale must contain localize property");if(!B.formatLong)throw new RangeError("locale must contain formatLong property");var V=(0,o.default)(t);if(!(0,r.default)(V))throw new RangeError("Invalid time value");var q=(0,C.Z)(V),G=(0,i.Z)(V,q),Y={firstWeekContainsDate:j,weekStartsOn:U,locale:B,_originalDate:V};return F.match(D).map((function(t){var e=t[0];return"p"===e||"P"===e?(0,S.Z[e])(t,B.formatLong):t})).join("").match(P).map((function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return function(t){var e=t.match(M);if(!e)return t;return e[1].replace(O,"'")}(r);var o=E[i];if(o)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!(0,T.Do)(r)||(0,T.qp)(r,e,String(t)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!(0,T.Iu)(r)||(0,T.qp)(r,e,String(t)),o(G,r,B.localize,Y);if(i.match(R))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r})).join("")}},6114:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t){return(0,i.Z)(1,arguments),(0,r.default)(t).getDate()}},467:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t){return(0,i.Z)(1,arguments),(0,r.default)(t).getDay()}},1537:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t){return(0,i.Z)(1,arguments),(0,r.default)(t).getHours()}},6975:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>u});var r=n(8527),i=n(3629),o=n(4522);function a(t){return(0,o.Z)(1,arguments),(0,i.default)(t,{weekStartsOn:1})}function s(t){(0,o.Z)(1,arguments);var e=function(t){(0,o.Z)(1,arguments);var e=(0,r.default)(t),n=e.getFullYear(),i=new Date(0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);var s=a(i),l=new Date(0);l.setFullYear(n,0,4),l.setHours(0,0,0,0);var u=a(l);return e.getTime()>=s.getTime()?n+1:e.getTime()>=u.getTime()?n:n-1}(t),n=new Date(0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),a(n)}var l=6048e5;function u(t){(0,o.Z)(1,arguments);var e=(0,r.default)(t),n=a(e).getTime()-s(e).getTime();return Math.round(n/l)+1}},4424:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t){return(0,i.Z)(1,arguments),(0,r.default)(t).getMinutes()}},3747:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t){return(0,i.Z)(1,arguments),(0,r.default)(t).getMonth()}},639:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t){(0,i.Z)(1,arguments);var e=(0,r.default)(t);return Math.floor(e.getMonth()/3)+1}},2295:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t){return(0,i.Z)(1,arguments),(0,r.default)(t).getSeconds()}},5544:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t){return(0,i.Z)(1,arguments),(0,r.default)(t).getTime()}},2599:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t){return(0,i.Z)(1,arguments),(0,r.default)(t).getFullYear()}},9420:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t,e){(0,i.Z)(2,arguments);var n=(0,r.default)(t),o=(0,r.default)(e);return n.getTime()>o.getTime()}},9579:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t,e){(0,i.Z)(2,arguments);var n=(0,r.default)(t),o=(0,r.default)(e);return n.getTime()<o.getTime()}},6971:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(4522);function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t){return(0,r.Z)(1,arguments),t instanceof Date||"object"===i(t)&&"[object Date]"===Object.prototype.toString.call(t)}},7508:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t,e){(0,i.Z)(2,arguments);var n=(0,r.default)(t),o=(0,r.default)(e);return n.getTime()===o.getTime()}},4690:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8347),i=n(4522);function o(t,e){(0,i.Z)(2,arguments);var n=(0,r.default)(t),o=(0,r.default)(e);return n.getTime()===o.getTime()}},5375:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t,e){(0,i.Z)(2,arguments);var n=(0,r.default)(t),o=(0,r.default)(e);return n.getFullYear()===o.getFullYear()&&n.getMonth()===o.getMonth()}},4845:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(3006),i=n(4522);function o(t,e){(0,i.Z)(2,arguments);var n=(0,r.default)(t),o=(0,r.default)(e);return n.getTime()===o.getTime()}},1750:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t,e){(0,i.Z)(2,arguments);var n=(0,r.default)(t),o=(0,r.default)(e);return n.getFullYear()===o.getFullYear()}},9314:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(6971),i=n(8527),o=n(4522);function a(t){if((0,o.Z)(1,arguments),!(0,r.default)(t)&&"number"!==typeof t)return!1;var e=(0,i.default)(t);return!isNaN(Number(e))}},7262:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t,e){(0,i.Z)(2,arguments);var n=(0,r.default)(t).getTime(),o=(0,r.default)(e.start).getTime(),a=(0,r.default)(e.end).getTime();if(!(o<=a))throw new RangeError("Invalid interval");return n>=o&&n<=a}},9333:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(8527),i=n(4522);function o(t){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t){var e,n;if((0,i.Z)(1,arguments),t&&"function"===typeof t.forEach)e=t;else{if("object"!==o(t)||null===t)return new Date(NaN);e=Array.prototype.slice.call(t)}return e.forEach((function(t){var e=(0,r.default)(t);(void 0===n||n<e||isNaN(Number(e)))&&(n=e)})),n||new Date(NaN)}},1056:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(8527),i=n(4522);function o(t){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t){var e,n;if((0,i.Z)(1,arguments),t&&"function"===typeof t.forEach)e=t;else{if("object"!==o(t)||null===t)return new Date(NaN);e=Array.prototype.slice.call(t)}return e.forEach((function(t){var e=(0,r.default)(t);(void 0===n||n>e||isNaN(e.getDate()))&&(n=e)})),n||new Date(NaN)}},3216:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>Vi});var r=n(6674),i=n(1633),o=n(8527);function a(t,e){if(null==t)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}var s=n(3462),l=n(4697),u=n(8552),c=n(9297),h=n(4522);function d(t){return d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function p(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},f(t,e)}function m(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y(t);if(e){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===d(e)||"function"===typeof e))return e;return g(t)}(this,n)}}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e,n){return e&&_(t.prototype,e),n&&_(t,n),t}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w=10,E=function(){function t(){v(this,t),x(this,"subPriority",0)}return b(t,[{key:"validate",value:function(t,e){return!0}}]),t}(),S=function(t){p(n,t);var e=m(n);function n(t,r,i,o,a){var s;return v(this,n),(s=e.call(this)).value=t,s.validateValue=r,s.setValue=i,s.priority=o,a&&(s.subPriority=a),s}return b(n,[{key:"validate",value:function(t,e){return this.validateValue(t,this.value,e)}},{key:"set",value:function(t,e,n){return this.setValue(t,e,this.value,n)}}]),n}(E),C=function(t){p(n,t);var e=m(n);function n(){var t;v(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return x(g(t=e.call.apply(e,[this].concat(i))),"priority",w),x(g(t),"subPriority",-1),t}return b(n,[{key:"set",value:function(t,e){if(e.timestampIsSet)return t;var n=new Date(0);return n.setFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),n.setHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),n}}]),n}(E);function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var I=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"run",value:function(t,e,n,r){var i=this.parse(t,e,n,r);return i?{setter:new S(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(t,e,n){return!0}}])&&T(e.prototype,n),r&&T(e,r),t}();function k(t){return k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function P(t,e){return P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},P(t,e)}function D(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O(t);if(e){var i=O(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===k(e)||"function"===typeof e))return e;return M(t)}(this,n)}}function M(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(t){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},O(t)}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var N=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(o,t);var e,n,r,i=D(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return R(M(t=i.call.apply(i,[this].concat(n))),"priority",140),R(M(t),"incompatibleTokens",["R","u","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n){switch(e){case"G":case"GG":case"GGG":return n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"});case"GGGGG":return n.era(t,{width:"narrow"});default:return n.era(t,{width:"wide"})||n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"})}}},{key:"set",value:function(t,e,n){return e.era=n,t.setUTCFullYear(n,0,1),t.setUTCHours(0,0,0,0),t}}])&&A(e.prototype,n),r&&A(e,r),o}(I),L=n(2729),F={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},z=/^([+-])(\d{2})(\d{2})?|Z/,B=/^([+-])(\d{2})(\d{2})|Z/,j=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,U=/^([+-])(\d{2}):(\d{2})|Z/,V=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function q(t,e){return t?{value:e(t.value),rest:t.rest}:t}function G(t,e){var n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Y(t,e){var n=e.match(t);if(!n)return null;if("Z"===n[0])return{value:0,rest:e.slice(1)};var r="+"===n[1]?1:-1,i=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,a=n[5]?parseInt(n[5],10):0;return{value:r*(i*L.vh+o*L.yJ+a*L.qk),rest:e.slice(n[0].length)}}function $(t){return G(F.anyDigitsSigned,t)}function W(t,e){switch(t){case 1:return G(F.singleDigit,e);case 2:return G(F.twoDigits,e);case 3:return G(F.threeDigits,e);case 4:return G(F.fourDigits,e);default:return G(new RegExp("^\\d{1,"+t+"}"),e)}}function H(t,e){switch(t){case 1:return G(F.singleDigitSigned,e);case 2:return G(F.twoDigitsSigned,e);case 3:return G(F.threeDigitsSigned,e);case 4:return G(F.fourDigitsSigned,e);default:return G(new RegExp("^-?\\d{1,"+t+"}"),e)}}function X(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function Z(t,e){var n,r=e>0,i=r?e:1-e;if(i<=50)n=t||100;else{var o=i+50;n=t+100*Math.floor(o/100)-(t>=o%100?100:0)}return r?n:1-n}function K(t){return t%400===0||t%4===0&&t%100!==0}function Q(t){return Q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tt(t,e){return tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},tt(t,e)}function et(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rt(t);if(e){var i=rt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Q(e)||"function"===typeof e))return e;return nt(t)}(this,n)}}function nt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rt(t){return rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},rt(t)}function it(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ot=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tt(t,e)}(o,t);var e,n,r,i=et(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return it(nt(t=i.call.apply(i,[this].concat(n))),"priority",130),it(nt(t),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n){var r=function(t){return{year:t,isTwoDigitYear:"yy"===e}};switch(e){case"y":return q(W(4,t),r);case"yo":return q(n.ordinalNumber(t,{unit:"year"}),r);default:return q(W(e.length,t),r)}}},{key:"validate",value:function(t,e){return e.isTwoDigitYear||e.year>0}},{key:"set",value:function(t,e,n){var r=t.getUTCFullYear();if(n.isTwoDigitYear){var i=Z(n.year,r);return t.setUTCFullYear(i,0,1),t.setUTCHours(0,0,0,0),t}var o="era"in e&&1!==e.era?1-n.year:n.year;return t.setUTCFullYear(o,0,1),t.setUTCHours(0,0,0,0),t}}])&&J(e.prototype,n),r&&J(e,r),o}(I),at=n(9726),st=n(1230);function lt(t){return lt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ct(t,e){return ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ct(t,e)}function ht(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=pt(t);if(e){var i=pt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===lt(e)||"function"===typeof e))return e;return dt(t)}(this,n)}}function dt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pt(t){return pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},pt(t)}function ft(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var mt=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ct(t,e)}(o,t);var e,n,r,i=ht(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ft(dt(t=i.call.apply(i,[this].concat(n))),"priority",130),ft(dt(t),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n){var r=function(t){return{year:t,isTwoDigitYear:"YY"===e}};switch(e){case"Y":return q(W(4,t),r);case"Yo":return q(n.ordinalNumber(t,{unit:"year"}),r);default:return q(W(e.length,t),r)}}},{key:"validate",value:function(t,e){return e.isTwoDigitYear||e.year>0}},{key:"set",value:function(t,e,n,r){var i=(0,at.Z)(t,r);if(n.isTwoDigitYear){var o=Z(n.year,i);return t.setUTCFullYear(o,0,r.firstWeekContainsDate),t.setUTCHours(0,0,0,0),(0,st.Z)(t,r)}var a="era"in e&&1!==e.era?1-n.year:n.year;return t.setUTCFullYear(a,0,r.firstWeekContainsDate),t.setUTCHours(0,0,0,0),(0,st.Z)(t,r)}}])&&ut(e.prototype,n),r&&ut(e,r),o}(I),gt=n(9853);function yt(t){return yt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _t(t,e){return _t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_t(t,e)}function bt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wt(t);if(e){var i=wt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===yt(e)||"function"===typeof e))return e;return xt(t)}(this,n)}}function xt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wt(t){return wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},wt(t)}function Et(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var St=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_t(t,e)}(o,t);var e,n,r,i=bt(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Et(xt(t=i.call.apply(i,[this].concat(n))),"priority",130),Et(xt(t),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e){return H("R"===e?4:e.length,t)}},{key:"set",value:function(t,e,n){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),(0,gt.Z)(r)}}])&&vt(e.prototype,n),r&&vt(e,r),o}(I);function Ct(t){return Ct="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function It(t,e){return It=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},It(t,e)}function kt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Pt(t);if(e){var i=Pt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Ct(e)||"function"===typeof e))return e;return At(t)}(this,n)}}function At(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pt(t){return Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Pt(t)}function Dt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Mt=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&It(t,e)}(o,t);var e,n,r,i=kt(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Dt(At(t=i.call.apply(i,[this].concat(n))),"priority",130),Dt(At(t),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e){return H("u"===e?4:e.length,t)}},{key:"set",value:function(t,e,n){return t.setUTCFullYear(n,0,1),t.setUTCHours(0,0,0,0),t}}])&&Tt(e.prototype,n),r&&Tt(e,r),o}(I);function Ot(t){return Ot="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function Rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nt(t,e){return Nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Nt(t,e)}function Lt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=zt(t);if(e){var i=zt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Ot(e)||"function"===typeof e))return e;return Ft(t)}(this,n)}}function Ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zt(t){return zt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},zt(t)}function Bt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var jt=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nt(t,e)}(o,t);var e,n,r,i=Lt(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Bt(Ft(t=i.call.apply(i,[this].concat(n))),"priority",120),Bt(Ft(t),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n){switch(e){case"Q":case"QQ":return W(e.length,t);case"Qo":return n.ordinalNumber(t,{unit:"quarter"});case"QQQ":return n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(t,{width:"narrow",context:"formatting"});default:return n.quarter(t,{width:"wide",context:"formatting"})||n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(t,e){return e>=1&&e<=4}},{key:"set",value:function(t,e,n){return t.setUTCMonth(3*(n-1),1),t.setUTCHours(0,0,0,0),t}}])&&Rt(e.prototype,n),r&&Rt(e,r),o}(I);function Ut(t){return Ut="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ut(t)}function Vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qt(t,e){return qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},qt(t,e)}function Gt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$t(t);if(e){var i=$t(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Ut(e)||"function"===typeof e))return e;return Yt(t)}(this,n)}}function Yt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $t(t){return $t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},$t(t)}function Wt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ht=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qt(t,e)}(o,t);var e,n,r,i=Gt(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Wt(Yt(t=i.call.apply(i,[this].concat(n))),"priority",120),Wt(Yt(t),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n){switch(e){case"q":case"qq":return W(e.length,t);case"qo":return n.ordinalNumber(t,{unit:"quarter"});case"qqq":return n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(t,{width:"narrow",context:"standalone"});default:return n.quarter(t,{width:"wide",context:"standalone"})||n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(t,e){return e>=1&&e<=4}},{key:"set",value:function(t,e,n){return t.setUTCMonth(3*(n-1),1),t.setUTCHours(0,0,0,0),t}}])&&Vt(e.prototype,n),r&&Vt(e,r),o}(I);function Xt(t){return Xt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xt(t)}function Zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kt(t,e){return Kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Kt(t,e)}function Qt(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=te(t);if(e){var i=te(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Xt(e)||"function"===typeof e))return e;return Jt(t)}(this,n)}}function Jt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function te(t){return te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},te(t)}function ee(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ne=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kt(t,e)}(o,t);var e,n,r,i=Qt(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ee(Jt(t=i.call.apply(i,[this].concat(n))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),ee(Jt(t),"priority",110),t}return e=o,(n=[{key:"parse",value:function(t,e,n){var r=function(t){return t-1};switch(e){case"M":return q(G(F.month,t),r);case"MM":return q(W(2,t),r);case"Mo":return q(n.ordinalNumber(t,{unit:"month"}),r);case"MMM":return n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(t,{width:"narrow",context:"formatting"});default:return n.month(t,{width:"wide",context:"formatting"})||n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(t,e){return e>=0&&e<=11}},{key:"set",value:function(t,e,n){return t.setUTCMonth(n,1),t.setUTCHours(0,0,0,0),t}}])&&Zt(e.prototype,n),r&&Zt(e,r),o}(I);function re(t){return re="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},re(t)}function ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function oe(t,e){return oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},oe(t,e)}function ae(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=le(t);if(e){var i=le(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===re(e)||"function"===typeof e))return e;return se(t)}(this,n)}}function se(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function le(t){return le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},le(t)}function ue(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ce=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oe(t,e)}(o,t);var e,n,r,i=ae(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ue(se(t=i.call.apply(i,[this].concat(n))),"priority",110),ue(se(t),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n){var r=function(t){return t-1};switch(e){case"L":return q(G(F.month,t),r);case"LL":return q(W(2,t),r);case"Lo":return q(n.ordinalNumber(t,{unit:"month"}),r);case"LLL":return n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(t,{width:"narrow",context:"standalone"});default:return n.month(t,{width:"wide",context:"standalone"})||n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(t,e){return e>=0&&e<=11}},{key:"set",value:function(t,e,n){return t.setUTCMonth(n,1),t.setUTCHours(0,0,0,0),t}}])&&ie(e.prototype,n),r&&ie(e,r),o}(I),he=n(9934);function de(t){return de="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},de(t)}function pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fe(t,e){return fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},fe(t,e)}function me(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ye(t);if(e){var i=ye(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===de(e)||"function"===typeof e))return e;return ge(t)}(this,n)}}function ge(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ye(t){return ye=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ye(t)}function ve(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _e=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fe(t,e)}(a,t);var e,n,r,i=me(a);function a(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ve(ge(t=i.call.apply(i,[this].concat(n))),"priority",100),ve(ge(t),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),t}return e=a,n=[{key:"parse",value:function(t,e,n){switch(e){case"w":return G(F.week,t);case"wo":return n.ordinalNumber(t,{unit:"week"});default:return W(e.length,t)}}},{key:"validate",value:function(t,e){return e>=1&&e<=53}},{key:"set",value:function(t,e,n,r){return(0,st.Z)(function(t,e,n){(0,h.Z)(2,arguments);var r=(0,o.default)(t),i=(0,c.Z)(e),a=(0,he.Z)(r,n)-i;return r.setUTCDate(r.getUTCDate()-7*a),r}(t,n,r),r)}}],n&&pe(e.prototype,n),r&&pe(e,r),a}(I),be=n(9153);function xe(t){return xe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xe(t)}function we(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ee(t,e){return Ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ee(t,e)}function Se(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Te(t);if(e){var i=Te(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===xe(e)||"function"===typeof e))return e;return Ce(t)}(this,n)}}function Ce(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Te(t){return Te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Te(t)}function Ie(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ke=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ee(t,e)}(a,t);var e,n,r,i=Se(a);function a(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ie(Ce(t=i.call.apply(i,[this].concat(n))),"priority",100),Ie(Ce(t),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),t}return e=a,n=[{key:"parse",value:function(t,e,n){switch(e){case"I":return G(F.week,t);case"Io":return n.ordinalNumber(t,{unit:"week"});default:return W(e.length,t)}}},{key:"validate",value:function(t,e){return e>=1&&e<=53}},{key:"set",value:function(t,e,n){return(0,gt.Z)(function(t,e){(0,h.Z)(2,arguments);var n=(0,o.default)(t),r=(0,c.Z)(e),i=(0,be.Z)(n)-r;return n.setUTCDate(n.getUTCDate()-7*i),n}(t,n))}}],n&&we(e.prototype,n),r&&we(e,r),a}(I);function Ae(t){return Ae="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(t)}function Pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function De(t,e){return De=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},De(t,e)}function Me(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Re(t);if(e){var i=Re(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Ae(e)||"function"===typeof e))return e;return Oe(t)}(this,n)}}function Oe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Re(t){return Re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Re(t)}function Ne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Le=[31,28,31,30,31,30,31,31,30,31,30,31],Fe=[31,29,31,30,31,30,31,31,30,31,30,31],ze=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&De(t,e)}(o,t);var e,n,r,i=Me(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ne(Oe(t=i.call.apply(i,[this].concat(n))),"priority",90),Ne(Oe(t),"subPriority",1),Ne(Oe(t),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n){switch(e){case"d":return G(F.date,t);case"do":return n.ordinalNumber(t,{unit:"date"});default:return W(e.length,t)}}},{key:"validate",value:function(t,e){var n=K(t.getUTCFullYear()),r=t.getUTCMonth();return n?e>=1&&e<=Fe[r]:e>=1&&e<=Le[r]}},{key:"set",value:function(t,e,n){return t.setUTCDate(n),t.setUTCHours(0,0,0,0),t}}])&&Pe(e.prototype,n),r&&Pe(e,r),o}(I);function Be(t){return Be="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Be(t)}function je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ue(t,e){return Ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ue(t,e)}function Ve(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ge(t);if(e){var i=Ge(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Be(e)||"function"===typeof e))return e;return qe(t)}(this,n)}}function qe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ge(t){return Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ge(t)}function Ye(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $e=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ue(t,e)}(o,t);var e,n,r,i=Ve(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ye(qe(t=i.call.apply(i,[this].concat(n))),"priority",90),Ye(qe(t),"subpriority",1),Ye(qe(t),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n){switch(e){case"D":case"DD":return G(F.dayOfYear,t);case"Do":return n.ordinalNumber(t,{unit:"date"});default:return W(e.length,t)}}},{key:"validate",value:function(t,e){return K(t.getUTCFullYear())?e>=1&&e<=366:e>=1&&e<=365}},{key:"set",value:function(t,e,n){return t.setUTCMonth(0,n),t.setUTCHours(0,0,0,0),t}}])&&je(e.prototype,n),r&&je(e,r),o}(I),We=n(4408);function He(t,e,n){var r,i,a,s,l,u,d,p;(0,h.Z)(2,arguments);var f=(0,We.j)(),m=(0,c.Z)(null!==(r=null!==(i=null!==(a=null!==(s=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==s?s:null===n||void 0===n||null===(l=n.locale)||void 0===l||null===(u=l.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==a?a:f.weekStartsOn)&&void 0!==i?i:null===(d=f.locale)||void 0===d||null===(p=d.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==r?r:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=(0,o.default)(t),y=(0,c.Z)(e),v=((y%7+7)%7<m?7:0)+y-g.getUTCDay();return g.setUTCDate(g.getUTCDate()+v),g}function Xe(t){return Xe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xe(t)}function Ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ke(t,e){return Ke=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ke(t,e)}function Qe(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tn(t);if(e){var i=tn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Xe(e)||"function"===typeof e))return e;return Je(t)}(this,n)}}function Je(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tn(t){return tn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},tn(t)}function en(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var nn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ke(t,e)}(o,t);var e,n,r,i=Qe(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return en(Je(t=i.call.apply(i,[this].concat(n))),"priority",90),en(Je(t),"incompatibleTokens",["D","i","e","c","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n){switch(e){case"E":case"EE":case"EEE":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(t,e){return e>=0&&e<=6}},{key:"set",value:function(t,e,n,r){return(t=He(t,n,r)).setUTCHours(0,0,0,0),t}}])&&Ze(e.prototype,n),r&&Ze(e,r),o}(I);function rn(t){return rn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rn(t)}function on(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function an(t,e){return an=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},an(t,e)}function sn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=un(t);if(e){var i=un(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===rn(e)||"function"===typeof e))return e;return ln(t)}(this,n)}}function ln(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function un(t){return un=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},un(t)}function cn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var hn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&an(t,e)}(o,t);var e,n,r,i=sn(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return cn(ln(t=i.call.apply(i,[this].concat(n))),"priority",90),cn(ln(t),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n,r){var i=function(t){var e=7*Math.floor((t-1)/7);return(t+r.weekStartsOn+6)%7+e};switch(e){case"e":case"ee":return q(W(e.length,t),i);case"eo":return q(n.ordinalNumber(t,{unit:"day"}),i);case"eee":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeeee":return n.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(t,e){return e>=0&&e<=6}},{key:"set",value:function(t,e,n,r){return(t=He(t,n,r)).setUTCHours(0,0,0,0),t}}])&&on(e.prototype,n),r&&on(e,r),o}(I);function dn(t){return dn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dn(t)}function pn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fn(t,e){return fn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},fn(t,e)}function mn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yn(t);if(e){var i=yn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===dn(e)||"function"===typeof e))return e;return gn(t)}(this,n)}}function gn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yn(t){return yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},yn(t)}function vn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _n=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fn(t,e)}(o,t);var e,n,r,i=mn(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return vn(gn(t=i.call.apply(i,[this].concat(n))),"priority",90),vn(gn(t),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n,r){var i=function(t){var e=7*Math.floor((t-1)/7);return(t+r.weekStartsOn+6)%7+e};switch(e){case"c":case"cc":return q(W(e.length,t),i);case"co":return q(n.ordinalNumber(t,{unit:"day"}),i);case"ccc":return n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"ccccc":return n.day(t,{width:"narrow",context:"standalone"});case"cccccc":return n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});default:return n.day(t,{width:"wide",context:"standalone"})||n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(t,e){return e>=0&&e<=6}},{key:"set",value:function(t,e,n,r){return(t=He(t,n,r)).setUTCHours(0,0,0,0),t}}])&&pn(e.prototype,n),r&&pn(e,r),o}(I);function bn(t){return bn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bn(t)}function xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wn(t,e){return wn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},wn(t,e)}function En(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Cn(t);if(e){var i=Cn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===bn(e)||"function"===typeof e))return e;return Sn(t)}(this,n)}}function Sn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cn(t){return Cn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Cn(t)}function Tn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var In=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wn(t,e)}(a,t);var e,n,r,i=En(a);function a(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Tn(Sn(t=i.call.apply(i,[this].concat(n))),"priority",90),Tn(Sn(t),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),t}return e=a,n=[{key:"parse",value:function(t,e,n){var r=function(t){return 0===t?7:t};switch(e){case"i":case"ii":return W(e.length,t);case"io":return n.ordinalNumber(t,{unit:"day"});case"iii":return q(n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),r);case"iiiii":return q(n.day(t,{width:"narrow",context:"formatting"}),r);case"iiiiii":return q(n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),r);default:return q(n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),r)}}},{key:"validate",value:function(t,e){return e>=1&&e<=7}},{key:"set",value:function(t,e,n){return t=function(t,e){(0,h.Z)(2,arguments);var n=(0,c.Z)(e);n%7===0&&(n-=7);var r=(0,o.default)(t),i=((n%7+7)%7<1?7:0)+n-r.getUTCDay();return r.setUTCDate(r.getUTCDate()+i),r}(t,n),t.setUTCHours(0,0,0,0),t}}],n&&xn(e.prototype,n),r&&xn(e,r),a}(I);function kn(t){return kn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kn(t)}function An(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pn(t,e){return Pn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Pn(t,e)}function Dn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=On(t);if(e){var i=On(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===kn(e)||"function"===typeof e))return e;return Mn(t)}(this,n)}}function Mn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function On(t){return On=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},On(t)}function Rn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Nn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pn(t,e)}(o,t);var e,n,r,i=Dn(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Rn(Mn(t=i.call.apply(i,[this].concat(n))),"priority",80),Rn(Mn(t),"incompatibleTokens",["b","B","H","k","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n){switch(e){case"a":case"aa":case"aaa":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(t,{width:"narrow",context:"formatting"});default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(t,e,n){return t.setUTCHours(X(n),0,0,0),t}}])&&An(e.prototype,n),r&&An(e,r),o}(I);function Ln(t){return Ln="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ln(t)}function Fn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zn(t,e){return zn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},zn(t,e)}function Bn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Un(t);if(e){var i=Un(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Ln(e)||"function"===typeof e))return e;return jn(t)}(this,n)}}function jn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Un(t){return Un=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Un(t)}function Vn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zn(t,e)}(o,t);var e,n,r,i=Bn(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Vn(jn(t=i.call.apply(i,[this].concat(n))),"priority",80),Vn(jn(t),"incompatibleTokens",["a","B","H","k","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n){switch(e){case"b":case"bb":case"bbb":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(t,{width:"narrow",context:"formatting"});default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(t,e,n){return t.setUTCHours(X(n),0,0,0),t}}])&&Fn(e.prototype,n),r&&Fn(e,r),o}(I);function Gn(t){return Gn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gn(t)}function Yn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $n(t,e){return $n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},$n(t,e)}function Wn(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Xn(t);if(e){var i=Xn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Gn(e)||"function"===typeof e))return e;return Hn(t)}(this,n)}}function Hn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xn(t){return Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Xn(t)}function Zn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Kn=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$n(t,e)}(o,t);var e,n,r,i=Wn(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Zn(Hn(t=i.call.apply(i,[this].concat(n))),"priority",80),Zn(Hn(t),"incompatibleTokens",["a","b","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n){switch(e){case"B":case"BB":case"BBB":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(t,{width:"narrow",context:"formatting"});default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(t,e,n){return t.setUTCHours(X(n),0,0,0),t}}])&&Yn(e.prototype,n),r&&Yn(e,r),o}(I);function Qn(t){return Qn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qn(t)}function Jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tr(t,e){return tr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},tr(t,e)}function er(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rr(t);if(e){var i=rr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Qn(e)||"function"===typeof e))return e;return nr(t)}(this,n)}}function nr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rr(t){return rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},rr(t)}function ir(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var or=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tr(t,e)}(o,t);var e,n,r,i=er(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ir(nr(t=i.call.apply(i,[this].concat(n))),"priority",70),ir(nr(t),"incompatibleTokens",["H","K","k","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n){switch(e){case"h":return G(F.hour12h,t);case"ho":return n.ordinalNumber(t,{unit:"hour"});default:return W(e.length,t)}}},{key:"validate",value:function(t,e){return e>=1&&e<=12}},{key:"set",value:function(t,e,n){var r=t.getUTCHours()>=12;return r&&n<12?t.setUTCHours(n+12,0,0,0):r||12!==n?t.setUTCHours(n,0,0,0):t.setUTCHours(0,0,0,0),t}}])&&Jn(e.prototype,n),r&&Jn(e,r),o}(I);function ar(t){return ar="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ar(t)}function sr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lr(t,e){return lr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},lr(t,e)}function ur(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=hr(t);if(e){var i=hr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===ar(e)||"function"===typeof e))return e;return cr(t)}(this,n)}}function cr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hr(t){return hr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},hr(t)}function dr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lr(t,e)}(o,t);var e,n,r,i=ur(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return dr(cr(t=i.call.apply(i,[this].concat(n))),"priority",70),dr(cr(t),"incompatibleTokens",["a","b","h","K","k","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n){switch(e){case"H":return G(F.hour23h,t);case"Ho":return n.ordinalNumber(t,{unit:"hour"});default:return W(e.length,t)}}},{key:"validate",value:function(t,e){return e>=0&&e<=23}},{key:"set",value:function(t,e,n){return t.setUTCHours(n,0,0,0),t}}])&&sr(e.prototype,n),r&&sr(e,r),o}(I);function fr(t){return fr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fr(t)}function mr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gr(t,e){return gr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},gr(t,e)}function yr(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_r(t);if(e){var i=_r(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===fr(e)||"function"===typeof e))return e;return vr(t)}(this,n)}}function vr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _r(t){return _r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_r(t)}function br(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gr(t,e)}(o,t);var e,n,r,i=yr(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return br(vr(t=i.call.apply(i,[this].concat(n))),"priority",70),br(vr(t),"incompatibleTokens",["h","H","k","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n){switch(e){case"K":return G(F.hour11h,t);case"Ko":return n.ordinalNumber(t,{unit:"hour"});default:return W(e.length,t)}}},{key:"validate",value:function(t,e){return e>=0&&e<=11}},{key:"set",value:function(t,e,n){return t.getUTCHours()>=12&&n<12?t.setUTCHours(n+12,0,0,0):t.setUTCHours(n,0,0,0),t}}])&&mr(e.prototype,n),r&&mr(e,r),o}(I);function wr(t){return wr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wr(t)}function Er(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sr(t,e){return Sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Sr(t,e)}function Cr(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ir(t);if(e){var i=Ir(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===wr(e)||"function"===typeof e))return e;return Tr(t)}(this,n)}}function Tr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ir(t){return Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ir(t)}function kr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ar=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sr(t,e)}(o,t);var e,n,r,i=Cr(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return kr(Tr(t=i.call.apply(i,[this].concat(n))),"priority",70),kr(Tr(t),"incompatibleTokens",["a","b","h","H","K","t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n){switch(e){case"k":return G(F.hour24h,t);case"ko":return n.ordinalNumber(t,{unit:"hour"});default:return W(e.length,t)}}},{key:"validate",value:function(t,e){return e>=1&&e<=24}},{key:"set",value:function(t,e,n){var r=n<=24?n%24:n;return t.setUTCHours(r,0,0,0),t}}])&&Er(e.prototype,n),r&&Er(e,r),o}(I);function Pr(t){return Pr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pr(t)}function Dr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mr(t,e){return Mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Mr(t,e)}function Or(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Nr(t);if(e){var i=Nr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Pr(e)||"function"===typeof e))return e;return Rr(t)}(this,n)}}function Rr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nr(t){return Nr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Nr(t)}function Lr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Fr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mr(t,e)}(o,t);var e,n,r,i=Or(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Lr(Rr(t=i.call.apply(i,[this].concat(n))),"priority",60),Lr(Rr(t),"incompatibleTokens",["t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n){switch(e){case"m":return G(F.minute,t);case"mo":return n.ordinalNumber(t,{unit:"minute"});default:return W(e.length,t)}}},{key:"validate",value:function(t,e){return e>=0&&e<=59}},{key:"set",value:function(t,e,n){return t.setUTCMinutes(n,0,0),t}}])&&Dr(e.prototype,n),r&&Dr(e,r),o}(I);function zr(t){return zr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zr(t)}function Br(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jr(t,e){return jr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},jr(t,e)}function Ur(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=qr(t);if(e){var i=qr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===zr(e)||"function"===typeof e))return e;return Vr(t)}(this,n)}}function Vr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qr(t){return qr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},qr(t)}function Gr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Yr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jr(t,e)}(o,t);var e,n,r,i=Ur(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Gr(Vr(t=i.call.apply(i,[this].concat(n))),"priority",50),Gr(Vr(t),"incompatibleTokens",["t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e,n){switch(e){case"s":return G(F.second,t);case"so":return n.ordinalNumber(t,{unit:"second"});default:return W(e.length,t)}}},{key:"validate",value:function(t,e){return e>=0&&e<=59}},{key:"set",value:function(t,e,n){return t.setUTCSeconds(n,0),t}}])&&Br(e.prototype,n),r&&Br(e,r),o}(I);function $r(t){return $r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$r(t)}function Wr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hr(t,e){return Hr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Hr(t,e)}function Xr(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Kr(t);if(e){var i=Kr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===$r(e)||"function"===typeof e))return e;return Zr(t)}(this,n)}}function Zr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kr(t){return Kr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Kr(t)}function Qr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Jr=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hr(t,e)}(o,t);var e,n,r,i=Xr(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Qr(Zr(t=i.call.apply(i,[this].concat(n))),"priority",30),Qr(Zr(t),"incompatibleTokens",["t","T"]),t}return e=o,(n=[{key:"parse",value:function(t,e){return q(W(e.length,t),(function(t){return Math.floor(t*Math.pow(10,3-e.length))}))}},{key:"set",value:function(t,e,n){return t.setUTCMilliseconds(n),t}}])&&Wr(e.prototype,n),r&&Wr(e,r),o}(I);function ti(t){return ti="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ti(t)}function ei(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ni(t,e){return ni=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ni(t,e)}function ri(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=oi(t);if(e){var i=oi(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===ti(e)||"function"===typeof e))return e;return ii(t)}(this,n)}}function ii(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oi(t){return oi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},oi(t)}function ai(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var si=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ni(t,e)}(o,t);var e,n,r,i=ri(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ai(ii(t=i.call.apply(i,[this].concat(n))),"priority",10),ai(ii(t),"incompatibleTokens",["t","T","x"]),t}return e=o,(n=[{key:"parse",value:function(t,e){switch(e){case"X":return Y(z,t);case"XX":return Y(B,t);case"XXXX":return Y(j,t);case"XXXXX":return Y(V,t);default:return Y(U,t)}}},{key:"set",value:function(t,e,n){return e.timestampIsSet?t:new Date(t.getTime()-n)}}])&&ei(e.prototype,n),r&&ei(e,r),o}(I);function li(t){return li="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},li(t)}function ui(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ci(t,e){return ci=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ci(t,e)}function hi(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=pi(t);if(e){var i=pi(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===li(e)||"function"===typeof e))return e;return di(t)}(this,n)}}function di(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pi(t){return pi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},pi(t)}function fi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var mi=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ci(t,e)}(o,t);var e,n,r,i=hi(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return fi(di(t=i.call.apply(i,[this].concat(n))),"priority",10),fi(di(t),"incompatibleTokens",["t","T","X"]),t}return e=o,(n=[{key:"parse",value:function(t,e){switch(e){case"x":return Y(z,t);case"xx":return Y(B,t);case"xxxx":return Y(j,t);case"xxxxx":return Y(V,t);default:return Y(U,t)}}},{key:"set",value:function(t,e,n){return e.timestampIsSet?t:new Date(t.getTime()-n)}}])&&ui(e.prototype,n),r&&ui(e,r),o}(I);function gi(t){return gi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gi(t)}function yi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vi(t,e){return vi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},vi(t,e)}function _i(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xi(t);if(e){var i=xi(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===gi(e)||"function"===typeof e))return e;return bi(t)}(this,n)}}function bi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xi(t){return xi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},xi(t)}function wi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ei=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vi(t,e)}(o,t);var e,n,r,i=_i(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return wi(bi(t=i.call.apply(i,[this].concat(n))),"priority",40),wi(bi(t),"incompatibleTokens","*"),t}return e=o,(n=[{key:"parse",value:function(t){return $(t)}},{key:"set",value:function(t,e,n){return[new Date(1e3*n),{timestampIsSet:!0}]}}])&&yi(e.prototype,n),r&&yi(e,r),o}(I);function Si(t){return Si="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Si(t)}function Ci(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ti(t,e){return Ti=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ti(t,e)}function Ii(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ai(t);if(e){var i=Ai(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Si(e)||"function"===typeof e))return e;return ki(t)}(this,n)}}function ki(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ai(t){return Ai=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ai(t)}function Pi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Di=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ti(t,e)}(o,t);var e,n,r,i=Ii(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Pi(ki(t=i.call.apply(i,[this].concat(n))),"priority",20),Pi(ki(t),"incompatibleTokens","*"),t}return e=o,(n=[{key:"parse",value:function(t){return $(t)}},{key:"set",value:function(t,e,n){return[new Date(n),{timestampIsSet:!0}]}}])&&Ci(e.prototype,n),r&&Ci(e,r),o}(I),Mi={G:new N,y:new ot,Y:new mt,R:new St,u:new Mt,Q:new jt,q:new Ht,M:new ne,L:new ce,w:new _e,I:new ke,d:new ze,D:new $e,E:new nn,e:new hn,c:new _n,i:new In,a:new Nn,b:new qn,B:new Kn,h:new or,H:new pr,K:new xr,k:new Ar,m:new Fr,s:new Yr,S:new Jr,X:new si,x:new mi,t:new Ei,T:new Di};function Oi(t){return Oi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oi(t)}function Ri(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return Ni(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ni(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ni(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Li=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Fi=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,zi=/^'([^]*?)'?$/,Bi=/''/g,ji=/\S/,Ui=/[a-zA-Z]/;function Vi(t,e,n,d){var p,f,m,g,y,v,_,b,x,w,E,S,T,I,k,A,P,D;(0,h.Z)(3,arguments);var M=String(t),O=String(e),R=(0,We.j)(),N=null!==(p=null!==(f=null===d||void 0===d?void 0:d.locale)&&void 0!==f?f:R.locale)&&void 0!==p?p:r.Z;if(!N.match)throw new RangeError("locale must contain match property");var L=(0,c.Z)(null!==(m=null!==(g=null!==(y=null!==(v=null===d||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==v?v:null===d||void 0===d||null===(_=d.locale)||void 0===_||null===(b=_.options)||void 0===b?void 0:b.firstWeekContainsDate)&&void 0!==y?y:R.firstWeekContainsDate)&&void 0!==g?g:null===(x=R.locale)||void 0===x||null===(w=x.options)||void 0===w?void 0:w.firstWeekContainsDate)&&void 0!==m?m:1);if(!(L>=1&&L<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var F=(0,c.Z)(null!==(E=null!==(S=null!==(T=null!==(I=null===d||void 0===d?void 0:d.weekStartsOn)&&void 0!==I?I:null===d||void 0===d||null===(k=d.locale)||void 0===k||null===(A=k.options)||void 0===A?void 0:A.weekStartsOn)&&void 0!==T?T:R.weekStartsOn)&&void 0!==S?S:null===(P=R.locale)||void 0===P||null===(D=P.options)||void 0===D?void 0:D.weekStartsOn)&&void 0!==E?E:0);if(!(F>=0&&F<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===O)return""===M?(0,o.default)(n):new Date(NaN);var z,B={firstWeekContainsDate:L,weekStartsOn:F,locale:N},j=[new C],U=O.match(Fi).map((function(t){var e=t[0];return e in s.Z?(0,s.Z[e])(t,N.formatLong):t})).join("").match(Li),V=[],q=Ri(U);try{var G=function(){var e=z.value;null!==d&&void 0!==d&&d.useAdditionalWeekYearTokens||!(0,u.Do)(e)||(0,u.qp)(e,O,t),null!==d&&void 0!==d&&d.useAdditionalDayOfYearTokens||!(0,u.Iu)(e)||(0,u.qp)(e,O,t);var n=e[0],r=Mi[n];if(r){var i=r.incompatibleTokens;if(Array.isArray(i)){var o=V.find((function(t){return i.includes(t.token)||t.token===n}));if(o)throw new RangeError("The format string mustn't contain `".concat(o.fullToken,"` and `").concat(e,"` at the same time"))}else if("*"===r.incompatibleTokens&&V.length>0)throw new RangeError("The format string mustn't contain `".concat(e,"` and any other token at the same time"));V.push({token:n,fullToken:e});var a=r.run(M,e,N.match,B);if(!a)return{v:new Date(NaN)};j.push(a.setter),M=a.rest}else{if(n.match(Ui))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===e?e="'":"'"===n&&(e=e.match(zi)[1].replace(Bi,"'")),0!==M.indexOf(e))return{v:new Date(NaN)};M=M.slice(e.length)}};for(q.s();!(z=q.n()).done;){var Y=G();if("object"===Oi(Y))return Y.v}}catch(tt){q.e(tt)}finally{q.f()}if(M.length>0&&ji.test(M))return new Date(NaN);var $=j.map((function(t){return t.priority})).sort((function(t,e){return e-t})).filter((function(t,e,n){return n.indexOf(t)===e})).map((function(t){return j.filter((function(e){return e.priority===t})).sort((function(t,e){return e.subPriority-t.subPriority}))})).map((function(t){return t[0]})),W=(0,o.default)(n);if(isNaN(W.getTime()))return new Date(NaN);var H,X=(0,i.Z)(W,(0,l.Z)(W)),Z={},K=Ri($);try{for(K.s();!(H=K.n()).done;){var Q=H.value;if(!Q.validate(X,B))return new Date(NaN);var J=Q.set(X,Z,B);Array.isArray(J)?(X=J[0],a(Z,J[1])):X=J}}catch(tt){K.e(tt)}finally{K.f()}return X}},9831:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(2729),i=n(4522),o=n(9297);function a(t,e){var n;(0,i.Z)(1,arguments);var a=(0,o.Z)(null!==(n=null===e||void 0===e?void 0:e.additionalDigits)&&void 0!==n?n:2);if(2!==a&&1!==a&&0!==a)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!==typeof t&&"[object String]"!==Object.prototype.toString.call(t))return new Date(NaN);var m,g=function(t){var e,n={},r=t.split(s.dateTimeDelimiter);if(r.length>2)return n;/:/.test(r[0])?e=r[0]:(n.date=r[0],e=r[1],s.timeZoneDelimiter.test(n.date)&&(n.date=t.split(s.timeZoneDelimiter)[0],e=t.substr(n.date.length,t.length)));if(e){var i=s.timezone.exec(e);i?(n.time=e.replace(i[1],""),n.timezone=i[1]):n.time=e}return n}(t);if(g.date){var y=function(t,e){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:null===o?i:100*o,restDateString:t.slice((r[1]||r[2]).length)}}(g.date,a);m=function(t,e){if(null===e)return new Date(NaN);var n=t.match(l);if(!n)return new Date(NaN);var r=!!n[4],i=h(n[1]),o=h(n[2])-1,a=h(n[3]),s=h(n[4]),u=h(n[5])-1;if(r)return function(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}(0,s,u)?function(t,e,n){var r=new Date(0);r.setUTCFullYear(t,0,4);var i=r.getUTCDay()||7,o=7*(e-1)+n+1-i;return r.setUTCDate(r.getUTCDate()+o),r}(e,s,u):new Date(NaN);var c=new Date(0);return function(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(p[e]||(f(t)?29:28))}(e,o,a)&&function(t,e){return e>=1&&e<=(f(t)?366:365)}(e,i)?(c.setUTCFullYear(e,o,Math.max(i,a)),c):new Date(NaN)}(y.restDateString,y.year)}if(!m||isNaN(m.getTime()))return new Date(NaN);var v,_=m.getTime(),b=0;if(g.time&&(b=function(t){var e=t.match(u);if(!e)return NaN;var n=d(e[1]),i=d(e[2]),o=d(e[3]);if(!function(t,e,n){if(24===t)return 0===e&&0===n;return n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}(n,i,o))return NaN;return n*r.vh+i*r.yJ+1e3*o}(g.time),isNaN(b)))return new Date(NaN);if(!g.timezone){var x=new Date(_+b),w=new Date(0);return w.setFullYear(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate()),w.setHours(x.getUTCHours(),x.getUTCMinutes(),x.getUTCSeconds(),x.getUTCMilliseconds()),w}return v=function(t){if("Z"===t)return 0;var e=t.match(c);if(!e)return 0;var n="+"===e[1]?-1:1,i=parseInt(e[2]),o=e[3]&&parseInt(e[3])||0;if(!function(t,e){return e>=0&&e<=59}(0,o))return NaN;return n*(i*r.vh+o*r.yJ)}(g.timezone),isNaN(v)?new Date(NaN):new Date(_+b+v)}var s={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,u=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,c=/^([+-])(\d{2})(?::?(\d{2}))?$/;function h(t){return t?parseInt(t):1}function d(t){return t&&parseFloat(t.replace(",","."))||0}var p=[31,null,31,30,31,30,31,31,30,31,30,31];function f(t){return t%400===0||t%4===0&&t%100!==0}},7152:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>l});var r=n(8527),i=n(2363),o=n(9297),a=n(4522);function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(t,e){if((0,a.Z)(2,arguments),"object"!==s(e)||null===e)throw new RangeError("values parameter must be an object");var n=(0,r.default)(t);return isNaN(n.getTime())?new Date(NaN):(null!=e.year&&n.setFullYear(e.year),null!=e.month&&(n=(0,i.default)(n,e.month)),null!=e.date&&n.setDate((0,o.Z)(e.date)),null!=e.hours&&n.setHours((0,o.Z)(e.hours)),null!=e.minutes&&n.setMinutes((0,o.Z)(e.minutes)),null!=e.seconds&&n.setSeconds((0,o.Z)(e.seconds)),null!=e.milliseconds&&n.setMilliseconds((0,o.Z)(e.milliseconds)),n)}},2618:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(9297),i=n(8527),o=n(4522);function a(t,e){(0,o.Z)(2,arguments);var n=(0,i.default)(t),a=(0,r.Z)(e);return n.setHours(a),n}},7227:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(9297),i=n(8527),o=n(4522);function a(t,e){(0,o.Z)(2,arguments);var n=(0,i.default)(t),a=(0,r.Z)(e);return n.setMinutes(a),n}},2363:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(9297),i=n(8527),o=n(4522);function a(t,e){(0,o.Z)(2,arguments);var n=(0,i.default)(t),a=(0,r.Z)(e),s=n.getFullYear(),l=n.getDate(),u=new Date(0);u.setFullYear(s,a,15),u.setHours(0,0,0,0);var c=function(t){(0,o.Z)(1,arguments);var e=(0,i.default)(t),n=e.getFullYear(),r=e.getMonth(),a=new Date(0);return a.setFullYear(n,r+1,0),a.setHours(0,0,0,0),a.getDate()}(u);return n.setMonth(a,Math.min(l,c)),n}},5765:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var r=n(9297),i=n(8527),o=n(2363),a=n(4522);function s(t,e){(0,a.Z)(2,arguments);var n=(0,i.default)(t),s=(0,r.Z)(e)-(Math.floor(n.getMonth()/3)+1);return(0,o.default)(n,n.getMonth()+3*s)}},9292:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(9297),i=n(8527),o=n(4522);function a(t,e){(0,o.Z)(2,arguments);var n=(0,i.default)(t),a=(0,r.Z)(e);return n.setSeconds(a),n}},5617:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(9297),i=n(8527),o=n(4522);function a(t,e){(0,o.Z)(2,arguments);var n=(0,i.default)(t),a=(0,r.Z)(e);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(a),n)}},8347:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t){(0,i.Z)(1,arguments);var e=(0,r.default)(t);return e.setHours(0,0,0,0),e}},5719:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t){(0,i.Z)(1,arguments);var e=(0,r.default)(t);return e.setDate(1),e.setHours(0,0,0,0),e}},3006:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t){(0,i.Z)(1,arguments);var e=(0,r.default)(t),n=e.getMonth(),o=n-n%3;return e.setMonth(o,1),e.setHours(0,0,0,0),e}},3629:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var r=n(8527),i=n(9297),o=n(4522),a=n(4408);function s(t,e){var n,s,l,u,c,h,d,p;(0,o.Z)(1,arguments);var f=(0,a.j)(),m=(0,i.Z)(null!==(n=null!==(s=null!==(l=null!==(u=null===e||void 0===e?void 0:e.weekStartsOn)&&void 0!==u?u:null===e||void 0===e||null===(c=e.locale)||void 0===c||null===(h=c.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==l?l:f.weekStartsOn)&&void 0!==s?s:null===(d=f.locale)||void 0===d||null===(p=d.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==n?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=(0,r.default)(t),y=g.getDay(),v=(y<m?7:0)+y-m;return g.setDate(g.getDate()-v),g.setHours(0,0,0,0),g}},7235:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(8527),i=n(4522);function o(t){(0,i.Z)(1,arguments);var e=(0,r.default)(t),n=new Date(0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}},6753:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(9040),i=n(4522),o=n(9297);function a(t,e){(0,i.Z)(2,arguments);var n=(0,o.Z)(e);return(0,r.default)(t,-n)}},4433:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(2074),i=n(4522),o=n(9297);function a(t,e){(0,i.Z)(2,arguments);var n=(0,o.Z)(e);return(0,r.default)(t,-n)}},1633:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4377),i=n(4522),o=n(9297);function a(t,e){(0,i.Z)(2,arguments);var n=(0,o.Z)(e);return(0,r.Z)(t,-n)}},4851:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(1518),i=n(4522),o=n(9297);function a(t,e){(0,i.Z)(2,arguments);var n=(0,o.Z)(e);return(0,r.default)(t,-n)}},8030:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(9297),i=n(1104),o=n(4522);function a(t,e){(0,o.Z)(2,arguments);var n=(0,r.Z)(e);return(0,i.default)(t,-n)}},6794:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(9297),i=n(6689),o=n(4522);function a(t,e){(0,o.Z)(2,arguments);var n=(0,r.Z)(e);return(0,i.default)(t,-n)}},7503:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(9297),i=n(20),o=n(4522);function a(t,e){(0,o.Z)(2,arguments);var n=(0,r.Z)(e);return(0,i.default)(t,-n)}},7602:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(9297),i=n(5105),o=n(4522);function a(t,e){(0,o.Z)(2,arguments);var n=(0,r.Z)(e);return(0,i.default)(t,-n)}},8527:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});var r=n(4522);function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t){(0,r.Z)(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"===i(t)&&"[object Date]"===e?new Date(t.getTime()):"number"===typeof t||"[object Number]"===e?new Date(t):("string"!==typeof t&&"[object String]"!==e||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}},9396:(t,e,n)=>{"use strict";var r=n(4892),i="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),o=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,l=n(4510)(),u=s&&l,c=function(t,e,n,r){if(e in t)if(!0===r){if(t[e]===n)return}else if("function"!==typeof(i=r)||"[object Function]"!==o.call(i)||!r())return;var i;u?s(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n},h=function(t,e){var n=arguments.length>2?arguments[2]:{},o=r(e);i&&(o=a.call(o,Object.getOwnPropertySymbols(e)));for(var s=0;s<o.length;s+=1)c(t,o[s],e[o[s]],n[o[s]])};h.supportsDescriptors=!!u,t.exports=h},7861:t=>{function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(i,a),this._expandCluster(a,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++){this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n)}return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)},2601:t=>{function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],"undefined"!==typeof t&&(this.dataset=t),"undefined"!==typeof e&&(this.k=e),"undefined"!==typeof n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(c),s=0,l=0;l<c;l++)a[l]=0;for(var u=0;u<n;u++){var c=this.dataset[u].length;if(o===this.assignments[u]){for(l=0;l<c;l++)a[l]+=this.dataset[u][l];s++}}if(s>0){for(l=0;l<c;l++)a[l]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)"undefined"===typeof e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(r=n(t,e[s]))<i&&(i=r,o=s);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)},3163:(t,e,n)=>{if(t.exports)var r=n(5047);function i(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}i.prototype.run=function(t,e,n,i){this._init(t,e,n,i);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var l=new r(null,null,"asc"),u=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,u,l),this._expandCluster(s,l))}return this.clusters},i.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},i.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},i.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},i.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},i.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++){if(this._regionQuery(t,n).length>=this.minPts)return n}},i.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},i.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=i)},5047:t=>{function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;){if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)},5107:(t,e,n)=>{t.exports&&(t.exports={DBSCAN:n(7861),KMEANS:n(2601),OPTICS:n(3163),PriorityQueue:n(5047)})},7089:t=>{"use strict";function e(t,e,r){r=r||2;var o,a,s,l,h,d,f,m=e&&e.length,g=m?e[0]*r:t.length,y=n(t,0,g,r,!0),v=[];if(!y||y.next===y.prev)return v;if(m&&(y=function(t,e,r,i){var o,a,s,l=[];for(o=0,a=e.length;o<a;o++)(s=n(t,e[o]*i,o<a-1?e[o+1]*i:t.length,i,!1))===s.next&&(s.steiner=!0),l.push(p(s));for(l.sort(u),o=0;o<l.length;o++)r=c(l[o],r);return r}(t,e,y,r)),t.length>80*r){o=s=t[0],a=l=t[1];for(var _=r;_<g;_+=r)(h=t[_])<o&&(o=h),(d=t[_+1])<a&&(a=d),h>s&&(s=h),d>l&&(l=d);f=0!==(f=Math.max(s-o,l-a))?32767/f:0}return i(y,v,r,o,a,f,0),v}function n(t,e,n,r,i){var o,a;if(i===T(t,e,n,r)>0)for(o=e;o<n;o+=r)a=E(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=E(o,t[o],t[o+1],a);return a&&y(a,a.next)&&(S(a),a=a.next),a}function r(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(S(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function i(t,e,n,u,c,h,p){if(t){!p&&h&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=d(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,l,u=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<u&&(s++,r=r.nextZ);e++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(t,u,c,h);for(var f,m,g=t;t.prev!==t.next;)if(f=t.prev,m=t.next,h?a(t,u,c,h):o(t))e.push(f.i/n|0),e.push(t.i/n|0),e.push(m.i/n|0),S(t),t=m.next,g=m.next;else if((t=m)===g){p?1===p?i(t=s(r(t),e,n),e,n,u,c,h,2):2===p&&l(t,e,n,u,c,h):i(r(t),e,n,u,c,h,1);break}}}function o(t){var e=t.prev,n=t,r=t.next;if(g(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,a=r.x,s=e.y,l=n.y,u=r.y,c=i<o?i<a?i:a:o<a?o:a,h=s<l?s<u?s:u:l<u?l:u,d=i>o?i>a?i:a:o>a?o:a,p=s>l?s>u?s:u:l>u?l:u,m=r.next;m!==e;){if(m.x>=c&&m.x<=d&&m.y>=h&&m.y<=p&&f(i,s,o,l,a,u,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function a(t,e,n,r){var i=t.prev,o=t,a=t.next;if(g(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,u=a.x,c=i.y,h=o.y,p=a.y,m=s<l?s<u?s:u:l<u?l:u,y=c<h?c<p?c:p:h<p?h:p,v=s>l?s>u?s:u:l>u?l:u,_=c>h?c>p?c:p:h>p?h:p,b=d(m,y,e,n,r),x=d(v,_,e,n,r),w=t.prevZ,E=t.nextZ;w&&w.z>=b&&E&&E.z<=x;){if(w.x>=m&&w.x<=v&&w.y>=y&&w.y<=_&&w!==i&&w!==a&&f(s,c,l,h,u,p,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,E.x>=m&&E.x<=v&&E.y>=y&&E.y<=_&&E!==i&&E!==a&&f(s,c,l,h,u,p,E.x,E.y)&&g(E.prev,E,E.next)>=0)return!1;E=E.nextZ}for(;w&&w.z>=b;){if(w.x>=m&&w.x<=v&&w.y>=y&&w.y<=_&&w!==i&&w!==a&&f(s,c,l,h,u,p,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;E&&E.z<=x;){if(E.x>=m&&E.x<=v&&E.y>=y&&E.y<=_&&E!==i&&E!==a&&f(s,c,l,h,u,p,E.x,E.y)&&g(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function s(t,e,n){var i=t;do{var o=i.prev,a=i.next.next;!y(o,a)&&v(o,i,i.next,a)&&x(o,a)&&x(a,o)&&(e.push(o.i/n|0),e.push(i.i/n|0),e.push(a.i/n|0),S(i),S(i.next),i=t=a),i=i.next}while(i!==t);return r(i)}function l(t,e,n,o,a,s){var l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&m(l,u)){var c=w(l,u);return l=r(l,l.next),c=r(c,c.next),i(l,e,n,o,a,s,0),void i(c,e,n,o,a,s,0)}u=u.next}l=l.next}while(l!==t)}function u(t,e){return t.x-e.x}function c(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==e);if(!n)return null;var l,u=n,c=n.x,d=n.y,p=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&f(o<d?i:a,o,c,d,o<d?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),x(r,t)&&(l<p||l===p&&(r.x>n.x||r.x===n.x&&h(n,r)))&&(n=r,p=l)),r=r.next}while(r!==u);return n}(t,e);if(!n)return e;var i=w(n,t);return r(i,i.next),r(n,n.next)}function h(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function d(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function f(t,e,n,r,i,o,a,s){return(i-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(n-a)*(e-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&v(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(x(t,e)&&x(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||y(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function v(t,e,n,r){var i=b(g(t,e,n)),o=b(g(t,e,r)),a=b(g(n,r,t)),s=b(g(n,r,e));return i!==o&&a!==s||(!(0!==i||!_(t,n,e))||(!(0!==o||!_(t,r,e))||(!(0!==a||!_(n,t,r))||!(0!==s||!_(n,e,r)))))}function _(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function b(t){return t>0?1:t<0?-1:0}function x(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function w(t,e){var n=new C(t.i,t.x,t.y),r=new C(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function E(t,e,n,r){var i=new C(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(T(t,0,o,n));if(i)for(var s=0,l=e.length;s<l;s++){var u=e[s]*n,c=s<l-1?e[s+1]*n:t.length;a-=Math.abs(T(t,u,c,n))}var h=0;for(s=0;s<r.length;s+=3){var d=r[s]*n,p=r[s+1]*n,f=r[s+2]*n;h+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},222:t=>{"use strict";var e="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,r=Object.prototype.toString,i="[object Function]";t.exports=function(t){var o=this;if("function"!==typeof o||r.call(o)!==i)throw new TypeError(e+o);for(var a,s=n.call(arguments,1),l=Math.max(0,o.length-s.length),u=[],c=0;c<l;c++)u.push("$"+c);if(a=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof a){var e=o.apply(this,s.concat(n.call(arguments)));return Object(e)===e?e:this}return o.apply(t,s.concat(n.call(arguments)))})),o.prototype){var h=function(){};h.prototype=o.prototype,a.prototype=new h,h.prototype=null}return a}},3350:(t,e,n)=>{"use strict";var r=n(222);t.exports=Function.prototype.bind||r},4583:t=>{"use strict";var e=function(){return"string"===typeof function(){}.name},n=Object.getOwnPropertyDescriptor;if(n)try{n([],"length")}catch(i){n=null}e.functionsHaveConfigurableNames=function(){if(!e()||!n)return!1;var t=n((function(){}),"name");return!!t&&!!t.configurable};var r=Function.prototype.bind;e.boundFunctionsHaveNames=function(){return e()&&"function"===typeof r&&""!==function(){}.bind().name},t.exports=e},4042:(t,e,n)=>{var r=n(9951),i=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:s};function o(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function a(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function s(t,e){return r(t,e,{strict:!0})}i.prototype.compare=function(t,e){if(t.type!==e.type||!a(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=o(t),i=o(e);return r.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),i)}}return!1},i.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},i.prototype.compareLine=function(t,e,n,r){if(!a(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[n],o[n]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},i.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},i.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},i.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every((function(t){return this.some((function(e){return i.compareLine(t,e,1,!0)}))}),r)}return!1},i.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},i.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},i.prototype.removePseudo=function(t){return t},t.exports=i},9951:(t,e,n)=>{var r=n(4892),i=n(5450),o=n(3454),a=n(1146),s=n(3535),l=n(2833),u=Date.prototype.getTime;function c(t,e,n){var p=n||{};return!!(p.strict?o(t,e):t===e)||(!t||!e||"object"!==typeof t&&"object"!==typeof e?p.strict?o(t,e):t==e:function(t,e,n){var o,p;if(typeof t!==typeof e)return!1;if(h(t)||h(e))return!1;if(t.prototype!==e.prototype)return!1;if(i(t)!==i(e))return!1;var f=a(t),m=a(e);if(f!==m)return!1;if(f||m)return t.source===e.source&&s(t)===s(e);if(l(t)&&l(e))return u.call(t)===u.call(e);var g=d(t),y=d(e);if(g!==y)return!1;if(g||y){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}if(typeof t!==typeof e)return!1;try{var v=r(t),_=r(e)}catch(b){return!1}if(v.length!==_.length)return!1;for(v.sort(),_.sort(),o=v.length-1;o>=0;o--)if(v[o]!=_[o])return!1;for(o=v.length-1;o>=0;o--)if(!c(t[p=v[o]],e[p],n))return!1;return!0}(t,e,p))}function h(t){return null===t||void 0===t}function d(t){return!(!t||"object"!==typeof t||"number"!==typeof t.length)&&("function"===typeof t.copy&&"function"===typeof t.slice&&!(t.length>0&&"number"!==typeof t[0]))}t.exports=c},9234:(t,e,n)=>{var r=n(2968),i=n(7872),o=n(2538),a=n(2127).Z,s=o.featureEach,l=(o.coordEach,i.polygon,i.featureCollection);function u(t){var e=new r(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),r.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})):s(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})),r.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),r.prototype.remove.call(this,t,e)},e.clear=function(){return r.prototype.clear.call(this)},e.search=function(t){var e=r.prototype.search.call(this,this.toBBox(t));return l(e)},e.collides=function(t){return r.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=r.prototype.all.call(this);return l(t)},e.toJSON=function(){return r.prototype.toJSON.call(this)},e.fromJSON=function(t){return r.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=a(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=a(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=u,t.exports.default=u},2968:function(t){t.exports=function(){"use strict";function t(t,r,i,o,a){!function t(n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=r-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-l*c/s+h)),Math.min(o,Math.floor(r+(s-l)*c/s+h)),a)}var d=n[r],p=i,f=o;for(e(n,i,r),a(n[o],d)>0&&e(n,i,o);p<f;){for(e(n,p,f),p++,f--;a(n[p],d)<0;)p++;for(;a(n[f],d)>0;)f--}0===a(n[i],d)?e(n,i,f):e(n,++f,o),f<=r&&(i=f+1),r<=f&&(o=f-1)}}(t,r,i||0,o||t.length-1,a||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,r,i){i||(i=f(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var a=t.children[o];s(i,t.leaf?r(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function f(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,n,r,i,o){for(var a=[n,r];a.length;)if(!((r=a.pop())-(n=a.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;t(e,s,n,r,o),a.push(n,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!p(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?r(a):a;p(t,s)&&(e.leaf?n.push(a):d(t,s)?this._all(a,n):i.push(a))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(p(t,o)){if(e.leaf||d(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=f([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,a=this.data,s=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),a.leaf){var c=i(t,a.children,e);if(-1!==c)return a.children.splice(c,1),l.push(a),this._condense(l),this}o||a.leaf||!d(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),u.push(n),n=0,r=a,a=a.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,a=n-e+1,s=this._maxEntries;if(a<=s)return o(i=f(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(i=f([])).leaf=!1,i.height=r;var l=Math.ceil(a/s),u=l*Math.ceil(Math.sqrt(s));m(t,e,n,u,this.compareMinX);for(var c=e;c<=n;c+=u){var h=Math.min(c+u-1,n);m(t,c,h,l,this.compareMinY);for(var d=c;d<=h;d+=l){var p=Math.min(d+l-1,h);i.children.push(this._build(t,d,p,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],u=c(l),h=(d=t,p=l,(Math.max(p.maxX,d.maxX)-Math.min(p.minX,d.minX))*(Math.max(p.maxY,d.maxY)-Math.min(p.minY,d.minY))-u);h<o?(o=h,i=u<i?u:i,a=l):h===o&&u<i&&(i=u,a=l)}e=a||e.children[0]}var d,p;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),s(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),s=f(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},r.prototype._splitRoot=function(t,e){this.data=f([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,s,l,u,h,d=1/0,p=1/0,f=e;f<=n-e;f++){var m=a(t,0,f,this.toBBox),g=a(t,f,n,this.toBBox),y=(i=m,o=g,s=void 0,l=void 0,u=void 0,h=void 0,s=Math.max(i.minX,o.minX),l=Math.max(i.minY,o.minY),u=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,u-s)*Math.max(0,h-l)),v=c(m)+c(g);y<d?(d=y,r=f,p=v<p?v:p):y===d&&v<p&&(p=v,r=f)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=a(t,0,e,i),l=a(t,n-e,n,i),u=h(o)+h(l),c=e;c<n-e;c++){var d=t.children[c];s(o,t.leaf?i(d):d),u+=h(o)}for(var p=n-e-1;p>=e;p--){var f=t.children[p];s(l,t.leaf?i(f):f),u+=h(l)}return u},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)s(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},2506:(t,e,n)=>{"use strict";var r,i=SyntaxError,o=Function,a=TypeError,s=function(t){try{return o('"use strict"; return ('+t+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(P){l=null}var u=function(){throw new a},c=l?function(){try{return u}catch(t){try{return l(arguments,"callee").get}catch(e){return u}}}():u,h=n(697)(),d=Object.getPrototypeOf||function(t){return t.__proto__},p={},f="undefined"===typeof Uint8Array?r:d(Uint8Array),m={"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":h?d([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?d(d([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&h?d((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&h?d((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?d(""[Symbol.iterator]()):r,"%Symbol%":h?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":c,"%TypedArray%":f,"%TypeError%":a,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet};try{null.error}catch(P){var g=d(d(P));m["%Error.prototype%"]=g}var y=function t(e){var n;if("%AsyncFunction%"===e)n=s("async function () {}");else if("%GeneratorFunction%"===e)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=s("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&(n=d(i.prototype))}return m[e]=n,n},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_=n(3350),b=n(8316),x=_.call(Function.call,Array.prototype.concat),w=_.call(Function.apply,Array.prototype.splice),E=_.call(Function.call,String.prototype.replace),S=_.call(Function.call,String.prototype.slice),C=_.call(Function.call,RegExp.prototype.exec),T=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,I=/\\(\\)?/g,k=function(t){var e=S(t,0,1),n=S(t,-1);if("%"===e&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return E(t,T,(function(t,e,n,i){r[r.length]=n?E(i,I,"$1"):e||t})),r},A=function(t,e){var n,r=t;if(b(v,r)&&(r="%"+(n=v[r])[0]+"%"),b(m,r)){var o=m[r];if(o===p&&(o=y(r)),"undefined"===typeof o&&!e)throw new a("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!==typeof t||0===t.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof e)throw new a('"allowMissing" argument must be a boolean');if(null===C(/^%?[^%]*%?$/,t))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=k(t),r=n.length>0?n[0]:"",o=A("%"+r+"%",e),s=o.name,u=o.value,c=!1,h=o.alias;h&&(r=h[0],w(n,x([0,1],h)));for(var d=1,p=!0;d<n.length;d+=1){var f=n[d],g=S(f,0,1),y=S(f,-1);if(('"'===g||"'"===g||"`"===g||'"'===y||"'"===y||"`"===y)&&g!==y)throw new i("property names with quotes must have matching quotes");if("constructor"!==f&&p||(c=!0),b(m,s="%"+(r+="."+f)+"%"))u=m[s];else if(null!=u){if(!(f in u)){if(!e)throw new a("base intrinsic for "+t+" exists, but the property is not available.");return}if(l&&d+1>=n.length){var v=l(u,f);u=(p=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:u[f]}else p=b(u,f),u=u[f];p&&!c&&(m[s]=u)}}return u}},4510:(t,e,n)=>{"use strict";var r=n(2506)("%Object.defineProperty%",!0),i=function(){if(r)try{return r({},"a",{value:1}),!0}catch(t){return!1}return!1};i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return 1!==r([],"length",{value:1}).length}catch(t){return!0}},t.exports=i},697:(t,e,n)=>{"use strict";var r="undefined"!==typeof Symbol&&Symbol,i=n(3297);t.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},3297:t=>{"use strict";t.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"===typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"===typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},4707:(t,e,n)=>{"use strict";var r=n(3297);t.exports=function(){return r()&&!!Symbol.toStringTag}},8316:(t,e,n)=>{"use strict";var r=n(3350);t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},2110:(t,e,n)=>{"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(t){return r.isMemo(t)?a:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(f){var i=p(n);i&&i!==f&&t(e,i,r)}var a=c(n);h&&(a=a.concat(h(n)));for(var s=l(e),m=l(n),g=0;g<a.length;++g){var y=a[g];if(!o[y]&&(!r||!r[y])&&(!m||!m[y])&&(!s||!s[y])){var v=d(n,y);try{u(e,y,v)}catch(_){}}}}return e}},746:(t,e)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function x(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case c:case h:case o:case s:case a:case p:return t;default:switch(t=t&&t.$$typeof){case u:case d:case g:case m:case l:return t;default:return e}}case i:return e}}}function w(t){return x(t)===h}e.AsyncMode=c,e.ConcurrentMode=h,e.ContextConsumer=u,e.ContextProvider=l,e.Element=r,e.ForwardRef=d,e.Fragment=o,e.Lazy=g,e.Memo=m,e.Portal=i,e.Profiler=s,e.StrictMode=a,e.Suspense=p,e.isAsyncMode=function(t){return w(t)||x(t)===c},e.isConcurrentMode=w,e.isContextConsumer=function(t){return x(t)===u},e.isContextProvider=function(t){return x(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return x(t)===d},e.isFragment=function(t){return x(t)===o},e.isLazy=function(t){return x(t)===g},e.isMemo=function(t){return x(t)===m},e.isPortal=function(t){return x(t)===i},e.isProfiler=function(t){return x(t)===s},e.isStrictMode=function(t){return x(t)===a},e.isSuspense=function(t){return x(t)===p},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===h||t===s||t===a||t===p||t===f||"object"===typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===m||t.$$typeof===l||t.$$typeof===u||t.$$typeof===d||t.$$typeof===v||t.$$typeof===_||t.$$typeof===b||t.$$typeof===y)},e.typeOf=x},8309:(t,e,n)=>{"use strict";t.exports=n(746)},5450:(t,e,n)=>{"use strict";var r=n(4707)(),i=n(4037)("Object.prototype.toString"),o=function(t){return!(r&&t&&"object"===typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===i(t)},a=function(t){return!!o(t)||null!==t&&"object"===typeof t&&"number"===typeof t.length&&t.length>=0&&"[object Array]"!==i(t)&&"[object Function]"===i(t.callee)},s=function(){return o(arguments)}();o.isLegacyArguments=a,t.exports=s?o:a},2833:(t,e,n)=>{"use strict";var r=Date.prototype.getDay,i=Object.prototype.toString,o=n(4707)();t.exports=function(t){return"object"===typeof t&&null!==t&&(o?function(t){try{return r.call(t),!0}catch(e){return!1}}(t):"[object Date]"===i.call(t))}},1146:(t,e,n)=>{"use strict";var r,i,o,a,s=n(4037),l=n(4707)();if(l){r=s("Object.prototype.hasOwnProperty"),i=s("RegExp.prototype.exec"),o={};var u=function(){throw o};a={toString:u,valueOf:u},"symbol"===typeof Symbol.toPrimitive&&(a[Symbol.toPrimitive]=u)}var c=s("Object.prototype.toString"),h=Object.getOwnPropertyDescriptor;t.exports=l?function(t){if(!t||"object"!==typeof t)return!1;var e=h(t,"lastIndex");if(!(e&&r(e,"value")))return!1;try{i(t,a)}catch(n){return n===o}}:function(t){return!(!t||"object"!==typeof t&&"function"!==typeof t)&&"[object RegExp]"===c(t)}},6198:(t,e,n)=>{t=n.nmd(t);var r=200,i="__lodash_hash_undefined__",o=800,a=16,s=9007199254740991,l="[object Arguments]",u="[object AsyncFunction]",c="[object Function]",h="[object GeneratorFunction]",d="[object Null]",p="[object Object]",f="[object Proxy]",m="[object Undefined]",g=/^\[object .+?Constructor\]$/,y=/^(?:0|[1-9]\d*)$/,v={};v["[object Float32Array]"]=v["[object Float64Array]"]=v["[object Int8Array]"]=v["[object Int16Array]"]=v["[object Int32Array]"]=v["[object Uint8Array]"]=v["[object Uint8ClampedArray]"]=v["[object Uint16Array]"]=v["[object Uint32Array]"]=!0,v[l]=v["[object Array]"]=v["[object ArrayBuffer]"]=v["[object Boolean]"]=v["[object DataView]"]=v["[object Date]"]=v["[object Error]"]=v[c]=v["[object Map]"]=v["[object Number]"]=v[p]=v["[object RegExp]"]=v["[object Set]"]=v["[object String]"]=v["[object WeakMap]"]=!1;var _="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,b="object"==typeof self&&self&&self.Object===Object&&self,x=_||b||Function("return this")(),w=e&&!e.nodeType&&e,E=w&&t&&!t.nodeType&&t,S=E&&E.exports===w,C=S&&_.process,T=function(){try{var t=E&&E.require&&E.require("util").types;return t||C&&C.binding&&C.binding("util")}catch(e){}}(),I=T&&T.isTypedArray;var k,A,P=Array.prototype,D=Function.prototype,M=Object.prototype,O=x["__core-js_shared__"],R=D.toString,N=M.hasOwnProperty,L=function(){var t=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),F=M.toString,z=R.call(Object),B=RegExp("^"+R.call(N).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),j=S?x.Buffer:void 0,U=x.Symbol,V=x.Uint8Array,q=j?j.allocUnsafe:void 0,G=(k=Object.getPrototypeOf,A=Object,function(t){return k(A(t))}),Y=Object.create,$=M.propertyIsEnumerable,W=P.splice,H=U?U.toStringTag:void 0,X=function(){try{var t=xt(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),Z=j?j.isBuffer:void 0,K=Math.max,Q=Date.now,J=xt(x,"Map"),tt=xt(Object,"create"),et=function(){function t(){}return function(e){if(!Ot(e))return{};if(Y)return Y(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function rt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function it(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function ot(t){var e=this.__data__=new rt(t);this.size=e.size}function at(t,e){var n=kt(t),r=!n&&It(t),i=!n&&!r&&Pt(t),o=!n&&!r&&!i&&Nt(t),a=n||r||i||o,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],l=s.length;for(var u in t)!e&&!N.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||wt(u,l))||s.push(u);return s}function st(t,e,n){(void 0!==n&&!Tt(t[e],n)||void 0===n&&!(e in t))&&ct(t,e,n)}function lt(t,e,n){var r=t[e];N.call(t,e)&&Tt(r,n)&&(void 0!==n||e in t)||ct(t,e,n)}function ut(t,e){for(var n=t.length;n--;)if(Tt(t[n][0],e))return n;return-1}function ct(t,e,n){"__proto__"==e&&X?X(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}nt.prototype.clear=function(){this.__data__=tt?tt(null):{},this.size=0},nt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},nt.prototype.get=function(t){var e=this.__data__;if(tt){var n=e[t];return n===i?void 0:n}return N.call(e,t)?e[t]:void 0},nt.prototype.has=function(t){var e=this.__data__;return tt?void 0!==e[t]:N.call(e,t)},nt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=tt&&void 0===e?i:e,this},rt.prototype.clear=function(){this.__data__=[],this.size=0},rt.prototype.delete=function(t){var e=this.__data__,n=ut(e,t);return!(n<0)&&(n==e.length-1?e.pop():W.call(e,n,1),--this.size,!0)},rt.prototype.get=function(t){var e=this.__data__,n=ut(e,t);return n<0?void 0:e[n][1]},rt.prototype.has=function(t){return ut(this.__data__,t)>-1},rt.prototype.set=function(t,e){var n=this.__data__,r=ut(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},it.prototype.clear=function(){this.size=0,this.__data__={hash:new nt,map:new(J||rt),string:new nt}},it.prototype.delete=function(t){var e=bt(this,t).delete(t);return this.size-=e?1:0,e},it.prototype.get=function(t){return bt(this,t).get(t)},it.prototype.has=function(t){return bt(this,t).has(t)},it.prototype.set=function(t,e){var n=bt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},ot.prototype.clear=function(){this.__data__=new rt,this.size=0},ot.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},ot.prototype.get=function(t){return this.__data__.get(t)},ot.prototype.has=function(t){return this.__data__.has(t)},ot.prototype.set=function(t,e){var n=this.__data__;if(n instanceof rt){var i=n.__data__;if(!J||i.length<r-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new it(i)}return n.set(t,e),this.size=n.size,this};var ht,dt=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),a=o.length;a--;){var s=o[ht?a:++r];if(!1===e(i[s],s,i))break}return t};function pt(t){return null==t?void 0===t?m:d:H&&H in Object(t)?function(t){var e=N.call(t,H),n=t[H];try{t[H]=void 0;var r=!0}catch(o){}var i=F.call(t);r&&(e?t[H]=n:delete t[H]);return i}(t):function(t){return F.call(t)}(t)}function ft(t){return Rt(t)&&pt(t)==l}function mt(t){return!(!Ot(t)||function(t){return!!L&&L in t}(t))&&(Dt(t)?B:g).test(function(t){if(null!=t){try{return R.call(t)}catch(e){}try{return t+""}catch(e){}}return""}(t))}function gt(t){if(!Ot(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Et(t),n=[];for(var r in t)("constructor"!=r||!e&&N.call(t,r))&&n.push(r);return n}function yt(t,e,n,r,i){t!==e&&dt(e,(function(o,a){if(i||(i=new ot),Ot(o))!function(t,e,n,r,i,o,a){var s=St(t,n),l=St(e,n),u=a.get(l);if(u)return void st(t,n,u);var c=o?o(s,l,n+"",t,e,a):void 0,h=void 0===c;if(h){var d=kt(l),f=!d&&Pt(l),m=!d&&!f&&Nt(l);c=l,d||f||m?kt(s)?c=s:Rt(g=s)&&At(g)?c=function(t,e){var n=-1,r=t.length;e||(e=Array(r));for(;++n<r;)e[n]=t[n];return e}(s):f?(h=!1,c=function(t,e){if(e)return t.slice();var n=t.length,r=q?q(n):new t.constructor(n);return t.copy(r),r}(l,!0)):m?(h=!1,c=function(t,e){var n=e?function(t){var e=new t.constructor(t.byteLength);return new V(e).set(new V(t)),e}(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(l,!0)):c=[]:function(t){if(!Rt(t)||pt(t)!=p)return!1;var e=G(t);if(null===e)return!0;var n=N.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&R.call(n)==z}(l)||It(l)?(c=s,It(s)?c=function(t){return function(t,e,n,r){var i=!n;n||(n={});var o=-1,a=e.length;for(;++o<a;){var s=e[o],l=r?r(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),i?ct(n,s,l):lt(n,s,l)}return n}(t,Lt(t))}(s):Ot(s)&&!Dt(s)||(c=function(t){return"function"!=typeof t.constructor||Et(t)?{}:et(G(t))}(l))):h=!1}var g;h&&(a.set(l,c),i(c,l,r,o,a),a.delete(l));st(t,n,c)}(t,e,a,n,yt,r,i);else{var s=r?r(St(t,a),o,a+"",t,e,i):void 0;void 0===s&&(s=o),st(t,a,s)}}),Lt)}function vt(t,e){return Ct(function(t,e,n){return e=K(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=K(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,s)}}(t,e,Bt),t+"")}var _t=X?function(t,e){return X(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:Bt;function bt(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function xt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return mt(n)?n:void 0}function wt(t,e){var n=typeof t;return!!(e=null==e?s:e)&&("number"==n||"symbol"!=n&&y.test(t))&&t>-1&&t%1==0&&t<e}function Et(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||M)}function St(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var Ct=function(t){var e=0,n=0;return function(){var r=Q(),i=a-(r-n);if(n=r,i>0){if(++e>=o)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(_t);function Tt(t,e){return t===e||t!==t&&e!==e}var It=ft(function(){return arguments}())?ft:function(t){return Rt(t)&&N.call(t,"callee")&&!$.call(t,"callee")},kt=Array.isArray;function At(t){return null!=t&&Mt(t.length)&&!Dt(t)}var Pt=Z||function(){return!1};function Dt(t){if(!Ot(t))return!1;var e=pt(t);return e==c||e==h||e==u||e==f}function Mt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=s}function Ot(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Rt(t){return null!=t&&"object"==typeof t}var Nt=I?function(t){return function(e){return t(e)}}(I):function(t){return Rt(t)&&Mt(t.length)&&!!v[pt(t)]};function Lt(t){return At(t)?at(t,!0):gt(t)}var Ft,zt=(Ft=function(t,e,n,r){yt(t,e,n,r)},vt((function(t,e){var n=-1,r=e.length,i=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(i=Ft.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(t,e,n){if(!Ot(n))return!1;var r=typeof e;return!!("number"==r?At(n)&&wt(e,n.length):"string"==r&&e in n)&&Tt(n[e],t)}(e[0],e[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++n<r;){var a=e[n];a&&Ft(t,a,n,i)}return t})));function Bt(t){return t}t.exports=zt},1725:t=>{"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,i){for(var o,a,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var u in o=Object(arguments[l]))n.call(o,u)&&(s[u]=o[u]);if(e){a=e(o);for(var c=0;c<a.length;c++)r.call(o,a[c])&&(s[a[c]]=o[a[c]])}}return s}},2592:t=>{"use strict";var e=function(t){return t!==t};t.exports=function(t,n){return 0===t&&0===n?1/t===1/n:t===n||!(!e(t)||!e(n))}},3454:(t,e,n)=>{"use strict";var r=n(9396),i=n(9722),o=n(2592),a=n(3355),s=n(3118),l=i(a(),Object);r(l,{getPolyfill:a,implementation:o,shim:s}),t.exports=l},3355:(t,e,n)=>{"use strict";var r=n(2592);t.exports=function(){return"function"===typeof Object.is?Object.is:r}},3118:(t,e,n)=>{"use strict";var r=n(3355),i=n(9396);t.exports=function(){var t=r();return i(Object,{is:t},{is:function(){return Object.is!==t}}),t}},1949:(t,e,n)=>{"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=n(7635),s=Object.prototype.propertyIsEnumerable,l=!s.call({toString:null},"toString"),u=s.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(t){var e=t.constructor;return e&&e.prototype===t},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"===typeof window)return!1;for(var t in window)try{if(!d["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"===typeof window[t])try{h(window[t])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(t){var e=null!==t&&"object"===typeof t,n="[object Function]"===o.call(t),r=a(t),s=e&&"[object String]"===o.call(t),d=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var f=u&&n;if(s&&t.length>0&&!i.call(t,0))for(var m=0;m<t.length;++m)d.push(String(m));if(r&&t.length>0)for(var g=0;g<t.length;++g)d.push(String(g));else for(var y in t)f&&"prototype"===y||!i.call(t,y)||d.push(String(y));if(l)for(var v=function(t){if("undefined"===typeof window||!p)return h(t);try{return h(t)}catch(e){return!1}}(t),_=0;_<c.length;++_)v&&"constructor"===c[_]||!i.call(t,c[_])||d.push(c[_]);return d}}t.exports=r},4892:(t,e,n)=>{"use strict";var r=Array.prototype.slice,i=n(7635),o=Object.keys,a=o?function(t){return o(t)}:n(1949),s=Object.keys;a.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return i(t)?s(r.call(t)):s(t)})}else Object.keys=a;return Object.keys||a},t.exports=a},7635:t=>{"use strict";var e=Object.prototype.toString;t.exports=function(t){var n=e.call(t),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==t&&"object"===typeof t&&"number"===typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),r}},5164:t=>{t.exports=function(t,e,n,r){var i=t[0],o=t[1],a=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var s=(r-n)/2,l=0,u=s-1;l<s;u=l++){var c=e[n+2*l+0],h=e[n+2*l+1],d=e[n+2*u+0],p=e[n+2*u+1];h>o!==p>o&&i<(d-c)*(o-h)/(p-h)+c&&(a=!a)}return a}},5021:(t,e,n)=>{var r=n(5164),i=n(1850);t.exports=function(t,e,n,o){return e.length>0&&Array.isArray(e[0])?i(t,e,n,o):r(t,e,n,o)},t.exports.nested=i,t.exports.flat=r},1850:t=>{t.exports=function(t,e,n,r){var i=t[0],o=t[1],a=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var s=r-n,l=0,u=s-1;l<s;u=l++){var c=e[l+n][0],h=e[l+n][1],d=e[u+n][0],p=e[u+n][1];h>o!==p>o&&i<(d-c)*(o-h)/(p-h)+c&&(a=!a)}return a}},9056:function(t){t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}var r=function(){function t(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return t}();function i(t,e){return t>e?1:t<e?-1:0}function o(t,e,n){for(var i=new r(null,null),o=i,a=i;;){var s=n(t,e.key);if(s<0){if(null===e.left)break;if(n(t,e.left.key)<0){var l=e.left;if(e.left=l.right,l.right=e,null===(e=l).left)break}a.left=e,a=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(l=e.right,e.right=l.left,l.left=e,null===(e=l).right))break;o.right=e,o=e,e=e.right}}return o.right=e.left,a.left=e.right,e.left=i.right,e.right=i.left,e}function a(t,e,n,i){var a=new r(t,e);if(null===n)return a.left=a.right=null,a;var s=i(t,(n=o(t,n,i)).key);return s<0?(a.left=n.left,a.right=n,n.left=null):s>=0&&(a.right=n.right,a.left=n,n.right=null),a}function s(t,e,n){var r=null,i=null;if(e){var a=n((e=o(t,e,n)).key,t);0===a?(r=e.left,i=e.right):a<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function l(t,e,n){return null===e?t:(null===t||((e=o(t.key,e,n)).left=t),e)}function u(t,e,n,r,i){if(t){r(e+(n?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+i(t)+"\n");var o=e+(n?"    ":"\u2502   ");t.left&&u(t.left,o,!1,r,i),t.right&&u(t.right,o,!0,r,i)}}var c=function(){function t(t){void 0===t&&(t=i),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=a(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new r(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,a=o(t,this._root,i),s=i(t,a.key);return 0===s?this._root=a:(s<0?(n.left=a.left,n.right=a,a.left=null):s>0&&(n.right=a.right,n.left=a,a.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=o(t,e,n)).key)?(null===e.left?r=e.right:(r=o(t,e.left,n)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=o(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=o(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,a=this._root;0!==i.length||a;)if(a)i.push(a),a=a.left;else{if(o((a=i.pop()).key,e)>0)break;if(o(a.key,t)>=0&&n.call(r,a))return this;a=a.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return p(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&g(t,e,0,r-1,i),null===this._root)this._root=h(t,e,0,r),this._size=r;else{var o=m(this.toList(),d(t,e),i);r=this._size+r,this._root=f({head:o},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return u(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=s(t,this._root,r),o=i.left,u=i.right;r(t,e)<0?u=a(e,n,u,r):o=a(e,n,o,r),this._root=l(o,u,r)},t.prototype.split=function(t){return s(t,this._root,this._comparator)},t}();function h(t,e,n,i){var o=i-n;if(o>0){var a=n+Math.floor(o/2),s=t[a],l=e[a],u=new r(s,l);return u.left=h(t,e,n,a),u.right=h(t,e,a+1,i),u}return null}function d(t,e){for(var n=new r(null,null),i=n,o=0;o<t.length;o++)i=i.next=new r(t[o],e[o]);return i.next=null,n.next}function p(t){for(var e=t,n=[],i=!1,o=new r(null,null),a=o;!i;)e?(n.push(e),e=e.left):n.length>0?e=(e=a=a.next=n.pop()).right:i=!0;return a.next=null,o.next}function f(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=f(t,e,i),a=t.head;return a.left=o,t.head=t.head.next,a.right=f(t,i+1,n),a}return null}function m(t,e,n){for(var i=new r(null,null),o=i,a=t,s=e;null!==a&&null!==s;)n(a.key,s.key)<0?(o.next=a,a=a.next):(o.next=s,s=s.next),o=o.next;return null!==a?o.next=a:null!==s&&(o.next=s),i.next}function g(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],a=n-1,s=r+1;;){do{a++}while(i(t[a],o)<0);do{s--}while(i(t[s],o)>0);if(a>=s)break;var l=t[a];t[a]=t[s],t[s]=l,l=e[a],e[a]=e[s],e[s]=l}g(t,e,n,s,i),g(t,e,s+1,r,i)}}var y=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},v=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},_=Number.EPSILON;void 0===_&&(_=Math.pow(2,-52));var b=_*_,x=function(t,e){if(-_<t&&t<_&&-_<e&&e<_)return 0;var n=t-e;return n*n<b*t*e?0:t<e?-1:1},w=function(){function e(){t(this,e),this.reset()}return n(e,[{key:"reset",value:function(){this.xRounder=new E,this.yRounder=new E}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),E=function(){function e(){t(this,e),this.tree=new c,this.round(0)}return n(e,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===x(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===x(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),e}(),S=new w,C=function(t,e){return t.x*e.y-t.y*e.x},T=function(t,e){return t.x*e.x+t.y*e.y},I=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=C(r,i);return x(o,0)},k=function(t){return Math.sqrt(T(t,t))},A=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return C(i,r)/k(i)/k(r)},P=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return T(i,r)/k(i)/k(r)},D=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},M=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},O=function(t,e,n,r){if(0===e.x)return M(n,r,t.x);if(0===r.x)return M(t,e,n.x);if(0===e.y)return D(n,r,t.y);if(0===r.y)return D(t,e,n.y);var i=C(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},a=C(o,e)/i,s=C(o,r)/i;return{x:(t.x+s*e.x+(n.x+a*r.x))/2,y:(t.y+s*e.y+(n.y+a*r.y))/2}},R=function(){function e(n,r){t(this,e),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return n(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return 0!==r?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:L.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),n(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i=r.otherSE;n.set(r,{sine:A(e.point,t.point,i.point),cosine:P(e.point,t.point,i.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,a=i.cosine,s=n.get(e),l=s.sine,u=s.cosine;return o>=0&&l>=0?a<u?1:a>u?-1:0:o<0&&l<0?a<u?-1:a>u?1:0:l<o?-1:l>o?1:0}}}]),e}(),N=0,L=function(){function e(n,r,i,o){t(this,e),this.id=++N,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=i,this.windings=o}return n(e,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var a=t.leftSE.point.y,s=e.leftSE.point.y,l=t.rightSE.point.y,u=e.rightSE.point.y;if(n<r){if(s<a&&s<l)return 1;if(s>a&&s>l)return-1;var c=t.comparePoint(e.leftSE.point);if(c<0)return 1;if(c>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n>r){if(a<s&&a<u)return-1;if(a>s&&a>u)return 1;var d=e.comparePoint(t.leftSE.point);if(0!==d)return d;var p=t.comparePoint(e.rightSE.point);return p<0?1:p>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(i<o){var f=e.comparePoint(t.rightSE.point);if(0!==f)return f}if(i>o){var m=t.comparePoint(e.rightSE.point);if(m<0)return 1;if(m>0)return-1}if(i!==o){var g=l-a,y=i-n,v=u-s,_=o-r;if(g>y&&v<_)return 1;if(g<y&&v>_)return-1}return i>o?1:i<o||l<u?-1:l>u?1:t.id<e.id?-1:t.id>e.id?1:0}}]),n(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var a=(t.x-e.x)/r.x,s=e.y+a*r.y;return t.y===s?0:t.y<s?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=v(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,a=t.leftSE.point,s=t.rightSE.point,l=y(e,a)&&0===this.comparePoint(a),u=y(n,i)&&0===t.comparePoint(i),c=y(e,s)&&0===this.comparePoint(s),h=y(n,o)&&0===t.comparePoint(o);if(u&&l)return h&&!c?o:!h&&c?s:null;if(u)return c&&i.x===s.x&&i.y===s.y?null:i;if(l)return h&&o.x===a.x&&o.y===a.y?null:a;if(h&&c)return null;if(h)return o;if(c)return s;var d=O(i,this.vector(),a,t.vector());return null===d?null:y(r,d)?S.round(d.x,d.y):null}},{key:"split",value:function(t){var n=[],r=void 0!==t.events,i=new R(t,!0),o=new R(t,!1),a=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var s=new e(i,a,this.rings.slice(),this.windings.slice());return R.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),R.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=e.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var a=n;n=r,r=a}for(var s=0,l=r.rings.length;s<l;s++){var u=r.rings[s],c=r.windings[s],h=n.rings.indexOf(u);-1===h?(n.rings.push(u),n.windings.push(c)):n.windings[h]+=c}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var a=this.rings[i],s=this.windings[i],l=e.indexOf(a);-1===l?(e.push(a),n.push(s)):n[l]+=s}for(var u=[],c=[],h=0,d=e.length;h<d;h++)if(0!==n[h]){var p=e[h],f=p.poly;if(-1===c.indexOf(f))if(p.isExterior)u.push(f);else{-1===c.indexOf(f)&&c.push(f);var m=u.indexOf(p.poly);-1!==m&&u.splice(m,1)}}for(var g=0,y=u.length;g<y;g++){var v=u[g].multiPoly;-1===r.indexOf(v)&&r.push(v)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch($.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===$.numMultiPolys&&i<o;break;case"xor":var a=Math.abs(t.length-e.length);this._isInResult=a%2===1;break;case"difference":var s=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=s(t)!==s(e);break;default:throw new Error("Unrecognized operation type found ".concat($.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,o,a,s=R.comparePoints(t,n);if(s<0)i=t,o=n,a=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));i=n,o=t,a=-1}return new e(new R(i,!0),new R(o,!1),[r],[a])}}]),e}(),F=function(){function e(n,r,i){if(t(this,e),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=i,this.segments=[],"number"!==typeof n[0][0]||"number"!==typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=S.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var a=o,s=1,l=n.length;s<l;s++){if("number"!==typeof n[s][0]||"number"!==typeof n[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=S.round(n[s][0],n[s][1]);u.x===a.x&&u.y===a.y||(this.segments.push(L.fromRing(a,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),a=u)}o.x===a.x&&o.y===a.y||this.segments.push(L.fromRing(a,o,this))}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),e}(),z=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new F(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=n.length;i<o;i++){var a=new F(n[i],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),B=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"===typeof n[0][0][0]&&(n=[n])}catch(s){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=n.length;i<o;i++){var a=new z(n[i],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),j=function(){function e(n){t(this,e),this.events=n;for(var r=0,i=n.length;r<i;r++)n[r].segment.ringOut=this;this.poly=null}return n(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(o.isInResult()&&!o.ringOut){for(var a=null,s=o.leftSE,l=o.rightSE,u=[s],c=s.point,h=[];a=s,s=l,u.push(s),s.point!==c;)for(;;){var d=s.getAvailableLinkedEvents();if(0===d.length){var p=u[0].point,f=u[u.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(f.x,", ").concat(f.y,"]."))}if(1===d.length){l=d[0].otherSE;break}for(var m=null,g=0,y=h.length;g<y;g++)if(h[g].point===s.point){m=g;break}if(null===m){h.push({index:u.length,point:s.point});var v=s.getLeftmostComparator(a);l=d.sort(v)[0].otherSE;break}var _=h.splice(m)[0],b=u.splice(_.index);b.unshift(b[0].otherSE),n.push(new e(b.reverse()))}n.push(new e(u))}}return n}}]),n(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==I(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var a=e[0],s=e[1];0===I(a,t,s)&&e.shift(),e.push(e[0]);for(var l=this.isExteriorRing()?1:-1,u=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,h=[],d=u;d!=c;d+=l)h.push([e[d].x,e[d].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];R.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),e}(),U=function(){function e(n){t(this,e),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return n(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),e}(),V=function(){function e(n){t(this,e),this.rings=n,this.polys=this._composePolys(n)}return n(e,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new U(i));else{var o=i.enclosingRing();o.poly||e.push(new U(o)),o.poly.addInterior(i)}}return e}}]),e}(),q=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.compare;t(this,e),this.queue=n,this.tree=new c(r),this.segments=[]}return n(e,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,a=void 0,s=void 0;void 0===a;)null===(i=this.tree.prev(i))?a=null:void 0===i.key.consumedBy&&(a=i.key);for(;void 0===s;)null===(o=this.tree.next(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);if(t.isLeft){var l=null;if(a){var u=a.getIntersection(e);if(null!==u&&(e.isAnEndpoint(u)||(l=u),!a.isAnEndpoint(u)))for(var c=this._splitSafely(a,u),h=0,d=c.length;h<d;h++)n.push(c[h])}var p=null;if(s){var f=s.getIntersection(e);if(null!==f&&(e.isAnEndpoint(f)||(p=f),!s.isAnEndpoint(f)))for(var m=this._splitSafely(s,f),g=0,y=m.length;g<y;g++)n.push(m[g])}if(null!==l||null!==p){var v=null;v=null===l?p:null===p||R.comparePoints(l,p)<=0?l:p,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var _=e.split(v),b=0,x=_.length;b<x;b++)n.push(_[b])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=a)}else{if(a&&s){var w=a.getIntersection(s);if(null!==w){if(!a.isAnEndpoint(w))for(var E=this._splitSafely(a,w),S=0,C=E.length;S<C;S++)n.push(E[S]);if(!s.isAnEndpoint(w))for(var T=this._splitSafely(s,w),I=0,k=T.length;I<k;I++)n.push(T[I])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),e}(),G="undefined"!==typeof process&&{NODE_ENV:"production",PUBLIC_URL:"/Trip-Planner",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Y="undefined"!==typeof process&&{NODE_ENV:"production",PUBLIC_URL:"/Trip-Planner",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,$=new(function(){function e(){t(this,e)}return n(e,[{key:"run",value:function(t,e,n){$.type=t,S.reset();for(var r=[new B(e,!0)],i=0,o=n.length;i<o;i++)r.push(new B(n[i],!1));if($.numMultiPolys=r.length,"difference"===$.type)for(var a=r[0],s=1;s<r.length;)null!==v(r[s].bbox,a.bbox)?s++:r.splice(s,1);if("intersection"===$.type)for(var l=0,u=r.length;l<u;l++)for(var h=r[l],d=l+1,p=r.length;d<p;d++)if(null===v(h.bbox,r[d].bbox))return[];for(var f=new c(R.compare),m=0,g=r.length;m<g;m++)for(var y=r[m].getSweepEvents(),_=0,b=y.length;_<b;_++)if(f.insert(y[_]),f.size>G)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var x=new q(f),w=f.size,E=f.pop();E;){var C=E.key;if(f.size===w){var T=C.segment;throw new Error("Unable to pop() ".concat(C.isLeft?"left":"right"," SweepEvent ")+"[".concat(C.point.x,", ").concat(C.point.y,"] from segment #").concat(T.id," ")+"[".concat(T.leftSE.point.x,", ").concat(T.leftSE.point.y,"] -> ")+"[".concat(T.rightSE.point.x,", ").concat(T.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(f.size>G)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(x.segments.length>Y)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var I=x.process(C),k=0,A=I.length;k<A;k++){var P=I[k];void 0===P.consumedBy&&f.insert(P)}w=f.size,E=f.pop()}S.reset();var D=j.factory(x.segments);return new V(D).getGeom()}}]),e}()),W=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return $.run("union",t,n)},H=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return $.run("intersection",t,n)},X=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return $.run("xor",t,n)},Z=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return $.run("difference",t,n)};return{union:W,intersection:H,xor:X,difference:Z}}()},888:(t,e,n)=>{"use strict";var r=n(9047);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},2007:(t,e,n)=>{t.exports=n(888)()},9047:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},1977:(t,e,n)=>{"use strict";t.exports=i,t.exports.default=i;var r=n(5287);function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=g(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],l(i,t.leaf?r(o):o);return i}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function m(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,n,i,o){for(var a,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=i||(a=e+Math.ceil((n-e)/i/2)*i,r(t,a,e,n,o),s.push(e,a,a,n))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!m(t,e))return n;for(var i,o,a,s,l=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],m(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):f(t,s)?this._all(a,n):l.push(a));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!m(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],m(t,a=e.leaf?n(o):o)){if(e.leaf||f(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,a,s=this.data,l=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=c.pop(),a=!0),s.leaf&&-1!==(i=o(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;a||s.leaf||!f(s,l)?r?(n++,s=r.children[n],a=!1):s=null:(u.push(s),c.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return a(i=g(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=g([])).leaf=!1,i.height=r;var l,u,c,h,d=Math.ceil(o/s),p=d*Math.ceil(Math.sqrt(s));for(y(t,e,n,p,this.compareMinX),l=e;l<=n;l+=p)for(y(t,l,c=Math.min(l+p-1,n),d,this.compareMinY),u=l;u<=c;u+=d)h=Math.min(u+d-1,c),i.children.push(this._build(t,u,h,r-1));return a(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,l,u,c,d,p,f;r.push(e),!e.leaf&&r.length-1!==n;){for(c=d=1/0,i=0,o=e.children.length;i<o;i++)l=h(a=e.children[i]),p=t,f=a,(u=(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-l)<d?(d=u,c=l<c?l:c,s=a):u===d&&l<c&&(c=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),l(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=g(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,l,u,c,d;for(u=c=1/0,r=e;r<=n-e;r++)a=p(i=s(t,0,r,this.toBBox),o=s(t,r,n,this.toBBox)),l=h(i)+h(o),a<u?(u=a,d=r,c=l<c?l:c):a===u&&l<c&&(c=l,d=r);return d},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,u=s(t,0,e,a),c=s(t,n-e,n,a),h=d(u)+d(c);for(i=e;i<n-e;i++)o=t.children[i],l(u,t.leaf?a(o):o),h+=d(u);for(i=n-e-1;i>=e;i--)o=t.children[i],l(c,t.leaf?a(o):o),h+=d(c);return h},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)l(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():a(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},5287:function(t){t.exports=function(){"use strict";function t(t,n,i,o,a){e(t,n,i||0,o||t.length-1,a||r)}function e(t,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=r-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);e(t,r,Math.max(i,Math.floor(r-l*c/s+h)),Math.min(o,Math.floor(r+(s-l)*c/s+h)),a)}var d=t[r],p=i,f=o;for(n(t,i,r),a(t[o],d)>0&&n(t,i,o);p<f;){for(n(t,p,f),p++,f--;a(t[p],d)<0;)p++;for(;a(t[f],d)>0;)f--}0===a(t[i],d)?n(t,i,f):n(t,++f,o),f<=r&&(i=f+1),r<=f&&(o=f-1)}}function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e){return t<e?-1:t>e?1:0}return t}()},9513:function(t,e,n){!function(t,e,n,r,i,o,a,s,l,u,c,h,d,p,f,m,g,y,v,_,b,x,w,E,S,C,T,I,k,A,P,D,M,O,R,N,L,F,z,B,j,U,V,q,G,Y,$,W,H,X,Z,K,Q,J,tt,et,nt,rt,it,ot,at,st,lt,ut,ct,ht,dt){"use strict";function pt(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var ft=pt(e),mt=pt(r),gt=pt(i),yt=pt(o),vt=pt(a),_t=pt(s),bt=pt(l),xt=pt(u),wt=pt(c),Et=pt(h),St=pt(d),Ct=pt(p),Tt=pt(g),It=pt(y),kt=pt(v),At=pt(_),Pt=pt(b),Dt=pt(x),Mt=pt(w),Ot=pt(E),Rt=pt(S),Nt=pt(C),Lt=pt(T),Ft=pt(I),zt=pt(k),Bt=pt(A),jt=pt(P),Ut=pt(D),Vt=pt(M),qt=pt(O),Gt=pt(R),Yt=pt(N),$t=pt(L),Wt=pt(F),Ht=pt(z),Xt=pt(B),Zt=pt(j),Kt=pt(V),Qt=pt(q),Jt=pt(G),te=pt(Y),ee=pt($),ne=pt(W),re=pt(H),ie=pt(Z),oe=pt(K),ae=pt(Q),se=pt(J),le=pt(tt),ue=pt(et),ce=pt(nt),he=pt(rt),de=pt(it),pe=pt(ot),fe=pt(at),me=pt(st),ge=pt(lt),ye=pt(ut),ve=pt(ct),_e=pt(dt);function be(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?be(Object(n),!0).forEach((function(e){Te(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function we(t){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Le(r.key),r)}}function Ce(t,e,n){return e&&Se(t.prototype,e),n&&Se(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Te(t,e,n){return(e=Le(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ie(){return(Ie=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function ke(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pe(t,e)}function Ae(t){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pe(t,e){return(Pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function De(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Me(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return De(t)}function Oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ae(t);if(e){var i=Ae(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Me(this,n)}}function Re(t){return function(t){if(Array.isArray(t))return Ne(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ne(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ne(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Le(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var Fe=12;function ze(t){var e=t?"string"==typeof t||t instanceof String?ge.default(t):fe.default(t):new Date;return je(e)?e:null}function Be(t,e,n,r,i){var o=an(n)||an(on()),a=Array.isArray(e)?e:[e];i=i||ze();for(var s=0,l=a.length;s<l;s++){var u=a[s],c=me.default(t,u,i,{locale:o});if(je(c)&&(!r||t===Ue(c,u,n)))return c}return null}function je(t,e){return e=e||new Date("1/1/1000"),yt.default(t)&&!de.default(t,e)}function Ue(t,e,n){if("en"===n)return vt.default(t,e,{awareOfUnicodeTokens:!0});var r=an(n)||an(on())||null;return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),vt.default(t,e,{locale:r,awareOfUnicodeTokens:!0})}function Ve(t,e){var n=e.dateFormat,r=e.locale;return t&&Ue(t,Array.isArray(n)?n[0]:n,r)||""}function qe(t,e){var n=e.hour,r=void 0===n?0:n,i=e.minute,o=void 0===i?0:i,a=e.second,s=void 0===a?0:a;return qt.default(Vt.default(Ut.default(t,s),o),r)}function Ge(t,e){var n=e&&an(e)||on()&&an(on());return Lt.default(t,n?{locale:n}:null)}function Ye(t,e){return Ue(t,"ddd",e)}function $e(t){return Qt.default(t)}function We(t,e,n){var r=an(e||on());return Jt.default(t,{locale:r,weekStartsOn:n})}function He(t){return te.default(t)}function Xe(t){return ne.default(t)}function Ze(t){return ee.default(t)}function Ke(){return Qt.default(ze())}function Qe(t,e){return t&&e?ue.default(t,e):!t&&!e}function Je(t,e){return t&&e?le.default(t,e):!t&&!e}function tn(t,e){return t&&e?ce.default(t,e):!t&&!e}function en(t,e){return t&&e?se.default(t,e):!t&&!e}function nn(t,e){return t&&e?ae.default(t,e):!t&&!e}function rn(t,e,n){var r,i=Qt.default(e),o=re.default(n);try{r=pe.default(t,{start:i,end:o})}catch(t){r=!1}return r}function on(){return("undefined"!=typeof window?window:globalThis).__localeId__}function an(t){if("string"==typeof t){var e="undefined"!=typeof window?window:globalThis;return e.__localeData__?e.__localeData__[t]:null}return t}function sn(t,e){return Ue(Gt.default(ze(),t),"LLLL",e)}function ln(t,e){return Ue(Gt.default(ze(),t),"LLL",e)}function un(t,e){return Ue(Yt.default(ze(),t),"QQQ",e)}function cn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.minDate,r=e.maxDate,i=e.excludeDates,o=e.excludeDateIntervals,a=e.includeDates,s=e.includeDateIntervals,l=e.filterDate;return yn(t,{minDate:n,maxDate:r})||i&&i.some((function(e){return en(t,e)}))||o&&o.some((function(e){var n=e.start,r=e.end;return pe.default(t,{start:n,end:r})}))||a&&!a.some((function(e){return en(t,e)}))||s&&!s.some((function(e){var n=e.start,r=e.end;return pe.default(t,{start:n,end:r})}))||l&&!l(ze(t))||!1}function hn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.excludeDates,r=e.excludeDateIntervals;return r&&r.length>0?r.some((function(e){var n=e.start,r=e.end;return pe.default(t,{start:n,end:r})})):n&&n.some((function(e){return en(t,e)}))||!1}function dn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.minDate,r=e.maxDate,i=e.excludeDates,o=e.includeDates,a=e.filterDate;return yn(t,{minDate:te.default(n),maxDate:ie.default(r)})||i&&i.some((function(e){return Je(t,e)}))||o&&!o.some((function(e){return Je(t,e)}))||a&&!a(ze(t))||!1}function pn(t,e,n,r){var i=Bt.default(t),o=Ft.default(t),a=Bt.default(e),s=Ft.default(e),l=Bt.default(r);return i===a&&i===l?o<=n&&n<=s:i<a?l===i&&o<=n||l===a&&s>=n||l<a&&l>i:void 0}function fn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.minDate,r=e.maxDate,i=e.excludeDates,o=e.includeDates,a=e.filterDate;return yn(t,{minDate:n,maxDate:r})||i&&i.some((function(e){return tn(t,e)}))||o&&!o.some((function(e){return tn(t,e)}))||a&&!a(ze(t))||!1}function mn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.minDate,r=e.maxDate,i=e.excludeDates,o=e.includeDates,a=e.filterDate,s=new Date(t,0,1);return yn(s,{minDate:ne.default(n),maxDate:oe.default(r)})||i&&i.some((function(t){return Qe(s,t)}))||o&&!o.some((function(t){return Qe(s,t)}))||a&&!a(ze(s))||!1}function gn(t,e,n,r){var i=Bt.default(t),o=zt.default(t),a=Bt.default(e),s=zt.default(e),l=Bt.default(r);return i===a&&i===l?o<=n&&n<=s:i<a?l===i&&o<=n||l===a&&s>=n||l<a&&l>i:void 0}function yn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.minDate,r=e.maxDate;return n&&Xt.default(t,n)<0||r&&Xt.default(t,r)>0}function vn(t,e){return e.some((function(e){return Ot.default(e)===Ot.default(t)&&Mt.default(e)===Mt.default(t)}))}function _n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.excludeTimes,r=e.includeTimes,i=e.filterTime;return n&&vn(t,n)||r&&!vn(t,r)||i&&!i(t)||!1}function bn(t,e){var n=e.minTime,r=e.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var i,o=ze(),a=qt.default(Vt.default(o,Mt.default(t)),Ot.default(t)),s=qt.default(Vt.default(o,Mt.default(n)),Ot.default(n)),l=qt.default(Vt.default(o,Mt.default(r)),Ot.default(r));try{i=!pe.default(a,{start:s,end:l})}catch(t){i=!1}return i}function xn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.minDate,r=e.includeDates,i=kt.default(t,1);return n&&Zt.default(n,i)>0||r&&r.every((function(t){return Zt.default(t,i)>0}))||!1}function wn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.maxDate,r=e.includeDates,i=Et.default(t,1);return n&&Zt.default(i,n)>0||r&&r.every((function(t){return Zt.default(i,t)>0}))||!1}function En(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.minDate,r=e.includeDates,i=Pt.default(t,1);return n&&Kt.default(n,i)>0||r&&r.every((function(t){return Kt.default(t,i)>0}))||!1}function Sn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.maxDate,r=e.includeDates,i=Ct.default(t,1);return n&&Kt.default(i,n)>0||r&&r.every((function(t){return Kt.default(i,t)>0}))||!1}function Cn(t){var e=t.minDate,n=t.includeDates;if(n&&e){var r=n.filter((function(t){return Xt.default(t,e)>=0}));return Wt.default(r)}return n?Wt.default(n):e}function Tn(t){var e=t.maxDate,n=t.includeDates;if(n&&e){var r=n.filter((function(t){return Xt.default(t,e)<=0}));return Ht.default(r)}return n?Ht.default(n):e}function In(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"react-datepicker__day--highlighted",n=new Map,r=0,i=t.length;r<i;r++){var o=t[r];if(gt.default(o)){var a=Ue(o,"MM.dd.yyyy"),s=n.get(a)||[];s.includes(e)||(s.push(e),n.set(a,s))}else if("object"===we(o)){var l=Object.keys(o),u=l[0],c=o[l[0]];if("string"==typeof u&&c.constructor===Array)for(var h=0,d=c.length;h<d;h++){var p=Ue(c[h],"MM.dd.yyyy"),f=n.get(p)||[];f.includes(u)||(f.push(u),n.set(p,f))}}}return n}function kn(t,e,n,r,i){for(var o=i.length,a=[],s=0;s<o;s++){var l=_t.default(bt.default(t,Ot.default(i[s])),Mt.default(i[s])),u=_t.default(t,(n+1)*r);he.default(l,e)&&de.default(l,u)&&a.push(i[s])}return a}function An(t){return t<10?"0".concat(t):"".concat(t)}function Pn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fe,n=Math.ceil(Bt.default(t)/e)*e;return{startPeriod:n-(e-1),endPeriod:n}}function Dn(t,e,n,r){for(var i=[],o=0;o<2*e+1;o++){var a=t+e-o,s=!0;n&&(s=Bt.default(n)<=a),r&&s&&(s=Bt.default(r)>=a),s&&i.push(a)}return i}var Mn=function(t){ke(r,t);var n=Oe(r);function r(t){var i;Ee(this,r),Te(De(i=n.call(this,t)),"renderOptions",(function(){var t=i.props.year,e=i.state.yearsList.map((function(e){return ft.default.createElement("div",{className:t===e?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:e,onClick:i.onChange.bind(De(i),e),"aria-selected":t===e?"true":void 0},t===e?ft.default.createElement("span",{className:"react-datepicker__year-option--selected"},"\u2713"):"",e)})),n=i.props.minDate?Bt.default(i.props.minDate):null,r=i.props.maxDate?Bt.default(i.props.maxDate):null;return r&&i.state.yearsList.find((function(t){return t===r}))||e.unshift(ft.default.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:i.incrementYears},ft.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),n&&i.state.yearsList.find((function(t){return t===n}))||e.push(ft.default.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:i.decrementYears},ft.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),e})),Te(De(i),"onChange",(function(t){i.props.onChange(t)})),Te(De(i),"handleClickOutside",(function(){i.props.onCancel()})),Te(De(i),"shiftYears",(function(t){var e=i.state.yearsList.map((function(e){return e+t}));i.setState({yearsList:e})})),Te(De(i),"incrementYears",(function(){return i.shiftYears(1)})),Te(De(i),"decrementYears",(function(){return i.shiftYears(-1)}));var o=t.yearDropdownItemNumber,a=t.scrollableYearDropdown,s=o||(a?10:5);return i.state={yearsList:Dn(i.props.year,s,i.props.minDate,i.props.maxDate)},i.dropdownRef=e.createRef(),i}return Ce(r,[{key:"componentDidMount",value:function(){var t=this.dropdownRef.current;if(t){var e=t.children?Array.from(t.children):null,n=e?e.find((function(t){return t.ariaSelected})):null;t.scrollTop=n?n.offsetTop+(n.clientHeight-t.clientHeight)/2:(t.scrollHeight-t.clientHeight)/2}}},{key:"render",value:function(){var t=mt.default({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return ft.default.createElement("div",{className:t,ref:this.dropdownRef},this.renderOptions())}}]),r}(ft.default.Component),On=ye.default(Mn),Rn=function(t){ke(n,t);var e=Oe(n);function n(){var t;Ee(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Te(De(t=e.call.apply(e,[this].concat(i))),"state",{dropdownVisible:!1}),Te(De(t),"renderSelectOptions",(function(){for(var e=t.props.minDate?Bt.default(t.props.minDate):1900,n=t.props.maxDate?Bt.default(t.props.maxDate):2100,r=[],i=e;i<=n;i++)r.push(ft.default.createElement("option",{key:i,value:i},i));return r})),Te(De(t),"onSelectChange",(function(e){t.onChange(e.target.value)})),Te(De(t),"renderSelectMode",(function(){return ft.default.createElement("select",{value:t.props.year,className:"react-datepicker__year-select",onChange:t.onSelectChange},t.renderSelectOptions())})),Te(De(t),"renderReadView",(function(e){return ft.default.createElement("div",{key:"read",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(e){return t.toggleDropdown(e)}},ft.default.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),ft.default.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},t.props.year))})),Te(De(t),"renderDropdown",(function(){return ft.default.createElement(On,{key:"dropdown",year:t.props.year,onChange:t.onChange,onCancel:t.toggleDropdown,minDate:t.props.minDate,maxDate:t.props.maxDate,scrollableYearDropdown:t.props.scrollableYearDropdown,yearDropdownItemNumber:t.props.yearDropdownItemNumber})})),Te(De(t),"renderScrollMode",(function(){var e=t.state.dropdownVisible,n=[t.renderReadView(!e)];return e&&n.unshift(t.renderDropdown()),n})),Te(De(t),"onChange",(function(e){t.toggleDropdown(),e!==t.props.year&&t.props.onChange(e)})),Te(De(t),"toggleDropdown",(function(e){t.setState({dropdownVisible:!t.state.dropdownVisible},(function(){t.props.adjustDateOnChange&&t.handleYearChange(t.props.date,e)}))})),Te(De(t),"handleYearChange",(function(e,n){t.onSelect(e,n),t.setOpen()})),Te(De(t),"onSelect",(function(e,n){t.props.onSelect&&t.props.onSelect(e,n)})),Te(De(t),"setOpen",(function(){t.props.setOpen&&t.props.setOpen(!0)})),t}return Ce(n,[{key:"render",value:function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode()}return ft.default.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},t)}}]),n}(ft.default.Component),Nn=function(t){ke(n,t);var e=Oe(n);function n(){var t;Ee(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Te(De(t=e.call.apply(e,[this].concat(i))),"isSelectedMonth",(function(e){return t.props.month===e})),Te(De(t),"renderOptions",(function(){return t.props.monthNames.map((function(e,n){return ft.default.createElement("div",{className:t.isSelectedMonth(n)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:e,onClick:t.onChange.bind(De(t),n),"aria-selected":t.isSelectedMonth(n)?"true":void 0},t.isSelectedMonth(n)?ft.default.createElement("span",{className:"react-datepicker__month-option--selected"},"\u2713"):"",e)}))})),Te(De(t),"onChange",(function(e){return t.props.onChange(e)})),Te(De(t),"handleClickOutside",(function(){return t.props.onCancel()})),t}return Ce(n,[{key:"render",value:function(){return ft.default.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())}}]),n}(ft.default.Component),Ln=ye.default(Nn),Fn=function(t){ke(n,t);var e=Oe(n);function n(){var t;Ee(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Te(De(t=e.call.apply(e,[this].concat(i))),"state",{dropdownVisible:!1}),Te(De(t),"renderSelectOptions",(function(t){return t.map((function(t,e){return ft.default.createElement("option",{key:e,value:e},t)}))})),Te(De(t),"renderSelectMode",(function(e){return ft.default.createElement("select",{value:t.props.month,className:"react-datepicker__month-select",onChange:function(e){return t.onChange(e.target.value)}},t.renderSelectOptions(e))})),Te(De(t),"renderReadView",(function(e,n){return ft.default.createElement("div",{key:"read",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:t.toggleDropdown},ft.default.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),ft.default.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},n[t.props.month]))})),Te(De(t),"renderDropdown",(function(e){return ft.default.createElement(Ln,{key:"dropdown",month:t.props.month,monthNames:e,onChange:t.onChange,onCancel:t.toggleDropdown})})),Te(De(t),"renderScrollMode",(function(e){var n=t.state.dropdownVisible,r=[t.renderReadView(!n,e)];return n&&r.unshift(t.renderDropdown(e)),r})),Te(De(t),"onChange",(function(e){t.toggleDropdown(),e!==t.props.month&&t.props.onChange(e)})),Te(De(t),"toggleDropdown",(function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})})),t}return Ce(n,[{key:"render",value:function(){var t,e=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(t){return ln(t,e.props.locale)}:function(t){return sn(t,e.props.locale)});switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode(n);break;case"select":t=this.renderSelectMode(n)}return ft.default.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},t)}}]),n}(ft.default.Component);function zn(t,e){for(var n=[],r=He(t),i=He(e);!he.default(r,i);)n.push(ze(r)),r=Et.default(r,1);return n}var Bn=function(t){ke(n,t);var e=Oe(n);function n(t){var r;return Ee(this,n),Te(De(r=e.call(this,t)),"renderOptions",(function(){return r.state.monthYearsList.map((function(t){var e=jt.default(t),n=Qe(r.props.date,t)&&Je(r.props.date,t);return ft.default.createElement("div",{className:n?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:e,onClick:r.onChange.bind(De(r),e),"aria-selected":n?"true":void 0},n?ft.default.createElement("span",{className:"react-datepicker__month-year-option--selected"},"\u2713"):"",Ue(t,r.props.dateFormat,r.props.locale))}))})),Te(De(r),"onChange",(function(t){return r.props.onChange(t)})),Te(De(r),"handleClickOutside",(function(){r.props.onCancel()})),r.state={monthYearsList:zn(r.props.minDate,r.props.maxDate)},r}return Ce(n,[{key:"render",value:function(){var t=mt.default({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return ft.default.createElement("div",{className:t},this.renderOptions())}}]),n}(ft.default.Component),jn=ye.default(Bn),Un=function(t){ke(n,t);var e=Oe(n);function n(){var t;Ee(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Te(De(t=e.call.apply(e,[this].concat(i))),"state",{dropdownVisible:!1}),Te(De(t),"renderSelectOptions",(function(){for(var e=He(t.props.minDate),n=He(t.props.maxDate),r=[];!he.default(e,n);){var i=jt.default(e);r.push(ft.default.createElement("option",{key:i,value:i},Ue(e,t.props.dateFormat,t.props.locale))),e=Et.default(e,1)}return r})),Te(De(t),"onSelectChange",(function(e){t.onChange(e.target.value)})),Te(De(t),"renderSelectMode",(function(){return ft.default.createElement("select",{value:jt.default(He(t.props.date)),className:"react-datepicker__month-year-select",onChange:t.onSelectChange},t.renderSelectOptions())})),Te(De(t),"renderReadView",(function(e){var n=Ue(t.props.date,t.props.dateFormat,t.props.locale);return ft.default.createElement("div",{key:"read",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:function(e){return t.toggleDropdown(e)}},ft.default.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),ft.default.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},n))})),Te(De(t),"renderDropdown",(function(){return ft.default.createElement(jn,{key:"dropdown",date:t.props.date,dateFormat:t.props.dateFormat,onChange:t.onChange,onCancel:t.toggleDropdown,minDate:t.props.minDate,maxDate:t.props.maxDate,scrollableMonthYearDropdown:t.props.scrollableMonthYearDropdown,locale:t.props.locale})})),Te(De(t),"renderScrollMode",(function(){var e=t.state.dropdownVisible,n=[t.renderReadView(!e)];return e&&n.unshift(t.renderDropdown()),n})),Te(De(t),"onChange",(function(e){t.toggleDropdown();var n=ze(parseInt(e));Qe(t.props.date,n)&&Je(t.props.date,n)||t.props.onChange(n)})),Te(De(t),"toggleDropdown",(function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})})),t}return Ce(n,[{key:"render",value:function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode()}return ft.default.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},t)}}]),n}(ft.default.Component),Vn=function(t){ke(n,t);var e=Oe(n);function n(){var t;Ee(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Te(De(t=e.call.apply(e,[this].concat(i))),"dayEl",ft.default.createRef()),Te(De(t),"handleClick",(function(e){!t.isDisabled()&&t.props.onClick&&t.props.onClick(e)})),Te(De(t),"handleMouseEnter",(function(e){!t.isDisabled()&&t.props.onMouseEnter&&t.props.onMouseEnter(e)})),Te(De(t),"handleOnKeyDown",(function(e){" "===e.key&&(e.preventDefault(),e.key="Enter"),t.props.handleOnKeyDown(e)})),Te(De(t),"isSameDay",(function(e){return en(t.props.day,e)})),Te(De(t),"isKeyboardSelected",(function(){return!t.props.disabledKeyboardNavigation&&!t.isSameDay(t.props.selected)&&t.isSameDay(t.props.preSelection)})),Te(De(t),"isDisabled",(function(){return cn(t.props.day,t.props)})),Te(De(t),"isExcluded",(function(){return hn(t.props.day,t.props)})),Te(De(t),"getHighLightedClass",(function(e){var n=t.props,r=n.day,i=n.highlightDates;if(!i)return!1;var o=Ue(r,"MM.dd.yyyy");return i.get(o)})),Te(De(t),"isInRange",(function(){var e=t.props,n=e.day,r=e.startDate,i=e.endDate;return!(!r||!i)&&rn(n,r,i)})),Te(De(t),"isInSelectingRange",(function(){var e,n=t.props,r=n.day,i=n.selectsStart,o=n.selectsEnd,a=n.selectsRange,s=n.selectsDisabledDaysInRange,l=n.startDate,u=n.endDate,c=null!==(e=t.props.selectingDate)&&void 0!==e?e:t.props.preSelection;return!(!(i||o||a)||!c||!s&&t.isDisabled())&&(i&&u&&(de.default(c,u)||nn(c,u))?rn(r,c,u):(o&&l&&(he.default(c,l)||nn(c,l))||!(!a||!l||u||!he.default(c,l)&&!nn(c,l)))&&rn(r,l,c))})),Te(De(t),"isSelectingRangeStart",(function(){var e;if(!t.isInSelectingRange())return!1;var n=t.props,r=n.day,i=n.startDate,o=n.selectsStart,a=null!==(e=t.props.selectingDate)&&void 0!==e?e:t.props.preSelection;return en(r,o?a:i)})),Te(De(t),"isSelectingRangeEnd",(function(){var e;if(!t.isInSelectingRange())return!1;var n=t.props,r=n.day,i=n.endDate,o=n.selectsEnd,a=n.selectsRange,s=null!==(e=t.props.selectingDate)&&void 0!==e?e:t.props.preSelection;return en(r,o||a?s:i)})),Te(De(t),"isRangeStart",(function(){var e=t.props,n=e.day,r=e.startDate,i=e.endDate;return!(!r||!i)&&en(r,n)})),Te(De(t),"isRangeEnd",(function(){var e=t.props,n=e.day,r=e.startDate,i=e.endDate;return!(!r||!i)&&en(i,n)})),Te(De(t),"isWeekend",(function(){var e=Rt.default(t.props.day);return 0===e||6===e})),Te(De(t),"isAfterMonth",(function(){return void 0!==t.props.month&&(t.props.month+1)%12===Ft.default(t.props.day)})),Te(De(t),"isBeforeMonth",(function(){return void 0!==t.props.month&&(Ft.default(t.props.day)+1)%12===t.props.month})),Te(De(t),"isCurrentDay",(function(){return t.isSameDay(ze())})),Te(De(t),"isSelected",(function(){return t.isSameDay(t.props.selected)})),Te(De(t),"getClassNames",(function(e){var n=t.props.dayClassName?t.props.dayClassName(e):void 0;return mt.default("react-datepicker__day",n,"react-datepicker__day--"+Ye(t.props.day),{"react-datepicker__day--disabled":t.isDisabled(),"react-datepicker__day--excluded":t.isExcluded(),"react-datepicker__day--selected":t.isSelected(),"react-datepicker__day--keyboard-selected":t.isKeyboardSelected(),"react-datepicker__day--range-start":t.isRangeStart(),"react-datepicker__day--range-end":t.isRangeEnd(),"react-datepicker__day--in-range":t.isInRange(),"react-datepicker__day--in-selecting-range":t.isInSelectingRange(),"react-datepicker__day--selecting-range-start":t.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":t.isSelectingRangeEnd(),"react-datepicker__day--today":t.isCurrentDay(),"react-datepicker__day--weekend":t.isWeekend(),"react-datepicker__day--outside-month":t.isAfterMonth()||t.isBeforeMonth()},t.getHighLightedClass("react-datepicker__day--highlighted"))})),Te(De(t),"getAriaLabel",(function(){var e=t.props,n=e.day,r=e.ariaLabelPrefixWhenEnabled,i=void 0===r?"Choose":r,o=e.ariaLabelPrefixWhenDisabled,a=void 0===o?"Not available":o,s=t.isDisabled()||t.isExcluded()?a:i;return"".concat(s," ").concat(Ue(n,"PPPP",t.props.locale))})),Te(De(t),"getTabIndex",(function(e,n){var r=e||t.props.selected,i=n||t.props.preSelection;return t.isKeyboardSelected()||t.isSameDay(r)&&en(i,r)?0:-1})),Te(De(t),"handleFocusDay",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!1;0===t.getTabIndex()&&!e.isInputFocused&&t.isSameDay(t.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(n=!0),t.props.inline&&!t.props.shouldFocusDayInline&&(n=!1),t.props.containerRef&&t.props.containerRef.current&&t.props.containerRef.current.contains(document.activeElement)&&document.activeElement.classList.contains("react-datepicker__day")&&(n=!0)),n&&t.dayEl.current.focus({preventScroll:!0})})),Te(De(t),"renderDayContents",(function(){return t.props.monthShowsDuplicateDaysEnd&&t.isAfterMonth()||t.props.monthShowsDuplicateDaysStart&&t.isBeforeMonth()?null:t.props.renderDayContents?t.props.renderDayContents(Nt.default(t.props.day),t.props.day):Nt.default(t.props.day)})),Te(De(t),"render",(function(){return ft.default.createElement("div",{ref:t.dayEl,className:t.getClassNames(t.props.day),onKeyDown:t.handleOnKeyDown,onClick:t.handleClick,onMouseEnter:t.handleMouseEnter,tabIndex:t.getTabIndex(),"aria-label":t.getAriaLabel(),role:"option","aria-disabled":t.isDisabled(),"aria-current":t.isCurrentDay()?"date":void 0,"aria-selected":t.isSelected()},t.renderDayContents())})),t}return Ce(n,[{key:"componentDidMount",value:function(){this.handleFocusDay()}},{key:"componentDidUpdate",value:function(t){this.handleFocusDay(t)}}]),n}(ft.default.Component),qn=function(t){ke(n,t);var e=Oe(n);function n(){var t;Ee(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Te(De(t=e.call.apply(e,[this].concat(i))),"handleClick",(function(e){t.props.onClick&&t.props.onClick(e)})),t}return Ce(n,[{key:"render",value:function(){var t=this.props,e=t.weekNumber,n=t.ariaLabelPrefix,r=void 0===n?"week ":n,i={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!t.onClick};return ft.default.createElement("div",{className:mt.default(i),"aria-label":"".concat(r," ").concat(this.props.weekNumber),onClick:this.handleClick},e)}}]),n}(ft.default.Component),Gn=function(t){ke(n,t);var e=Oe(n);function n(){var t;Ee(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Te(De(t=e.call.apply(e,[this].concat(i))),"handleDayClick",(function(e,n){t.props.onDayClick&&t.props.onDayClick(e,n)})),Te(De(t),"handleDayMouseEnter",(function(e){t.props.onDayMouseEnter&&t.props.onDayMouseEnter(e)})),Te(De(t),"handleWeekClick",(function(e,n,r){"function"==typeof t.props.onWeekSelect&&t.props.onWeekSelect(e,n,r),t.props.shouldCloseOnSelect&&t.props.setOpen(!1)})),Te(De(t),"formatWeekNumber",(function(e){return t.props.formatWeekNumber?t.props.formatWeekNumber(e):Ge(e)})),Te(De(t),"renderDays",(function(){var e=We(t.props.day,t.props.locale,t.props.calendarStartDay),n=[],r=t.formatWeekNumber(e);if(t.props.showWeekNumber){var i=t.props.onWeekSelect?t.handleWeekClick.bind(De(t),e,r):void 0;n.push(ft.default.createElement(qn,{key:"W",weekNumber:r,onClick:i,ariaLabelPrefix:t.props.ariaLabelPrefix}))}return n.concat([0,1,2,3,4,5,6].map((function(n){var r=xt.default(e,n);return ft.default.createElement(Vn,{ariaLabelPrefixWhenEnabled:t.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:t.props.disabledDayAriaLabelPrefix,key:r.valueOf(),day:r,month:t.props.month,onClick:t.handleDayClick.bind(De(t),r),onMouseEnter:t.handleDayMouseEnter.bind(De(t),r),minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDates:t.props.includeDates,includeDateIntervals:t.props.includeDateIntervals,highlightDates:t.props.highlightDates,selectingDate:t.props.selectingDate,filterDate:t.props.filterDate,preSelection:t.props.preSelection,selected:t.props.selected,selectsStart:t.props.selectsStart,selectsEnd:t.props.selectsEnd,selectsRange:t.props.selectsRange,selectsDisabledDaysInRange:t.props.selectsDisabledDaysInRange,startDate:t.props.startDate,endDate:t.props.endDate,dayClassName:t.props.dayClassName,renderDayContents:t.props.renderDayContents,disabledKeyboardNavigation:t.props.disabledKeyboardNavigation,handleOnKeyDown:t.props.handleOnKeyDown,isInputFocused:t.props.isInputFocused,containerRef:t.props.containerRef,inline:t.props.inline,shouldFocusDayInline:t.props.shouldFocusDayInline,monthShowsDuplicateDaysEnd:t.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:t.props.monthShowsDuplicateDaysStart,locale:t.props.locale})})))})),t}return Ce(n,[{key:"render",value:function(){return ft.default.createElement("div",{className:"react-datepicker__week"},this.renderDays())}}],[{key:"defaultProps",get:function(){return{shouldCloseOnSelect:!0}}}]),n}(ft.default.Component),Yn=function(t){ke(n,t);var e=Oe(n);function n(){var t;Ee(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Te(De(t=e.call.apply(e,[this].concat(i))),"MONTH_REFS",Re(Array(12)).map((function(){return ft.default.createRef()}))),Te(De(t),"QUARTER_REFS",Re(Array(4)).map((function(){return ft.default.createRef()}))),Te(De(t),"isDisabled",(function(e){return cn(e,t.props)})),Te(De(t),"isExcluded",(function(e){return hn(e,t.props)})),Te(De(t),"handleDayClick",(function(e,n){t.props.onDayClick&&t.props.onDayClick(e,n,t.props.orderInDisplay)})),Te(De(t),"handleDayMouseEnter",(function(e){t.props.onDayMouseEnter&&t.props.onDayMouseEnter(e)})),Te(De(t),"handleMouseLeave",(function(){t.props.onMouseLeave&&t.props.onMouseLeave()})),Te(De(t),"isRangeStartMonth",(function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&Je(Gt.default(r,e),i)})),Te(De(t),"isRangeStartQuarter",(function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&tn(Yt.default(r,e),i)})),Te(De(t),"isRangeEndMonth",(function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&Je(Gt.default(r,e),o)})),Te(De(t),"isRangeEndQuarter",(function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate;return!(!i||!o)&&tn(Yt.default(r,e),o)})),Te(De(t),"isWeekInMonth",(function(e){var n=t.props.day,r=xt.default(e,6);return Je(e,n)||Je(r,n)})),Te(De(t),"isCurrentMonth",(function(t,e){return Bt.default(t)===Bt.default(ze())&&e===Ft.default(ze())})),Te(De(t),"isCurrentQuarter",(function(t,e){return Bt.default(t)===Bt.default(ze())&&e===zt.default(ze())})),Te(De(t),"isSelectedMonth",(function(t,e,n){return Ft.default(t)===e&&Bt.default(t)===Bt.default(n)})),Te(De(t),"isSelectedQuarter",(function(t,e,n){return zt.default(t)===e&&Bt.default(t)===Bt.default(n)})),Te(De(t),"renderWeeks",(function(){for(var e=[],n=t.props.fixedHeight,r=0,i=!1,o=We(He(t.props.day),t.props.locale,t.props.calendarStartDay);e.push(ft.default.createElement(Gn,{ariaLabelPrefix:t.props.weekAriaLabelPrefix,chooseDayAriaLabelPrefix:t.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:t.props.disabledDayAriaLabelPrefix,key:r,day:o,month:Ft.default(t.props.day),onDayClick:t.handleDayClick,onDayMouseEnter:t.handleDayMouseEnter,onWeekSelect:t.props.onWeekSelect,formatWeekNumber:t.props.formatWeekNumber,locale:t.props.locale,minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDates:t.props.includeDates,includeDateIntervals:t.props.includeDateIntervals,inline:t.props.inline,shouldFocusDayInline:t.props.shouldFocusDayInline,highlightDates:t.props.highlightDates,selectingDate:t.props.selectingDate,filterDate:t.props.filterDate,preSelection:t.props.preSelection,selected:t.props.selected,selectsStart:t.props.selectsStart,selectsEnd:t.props.selectsEnd,selectsRange:t.props.selectsRange,selectsDisabledDaysInRange:t.props.selectsDisabledDaysInRange,showWeekNumber:t.props.showWeekNumbers,startDate:t.props.startDate,endDate:t.props.endDate,dayClassName:t.props.dayClassName,setOpen:t.props.setOpen,shouldCloseOnSelect:t.props.shouldCloseOnSelect,disabledKeyboardNavigation:t.props.disabledKeyboardNavigation,renderDayContents:t.props.renderDayContents,handleOnKeyDown:t.props.handleOnKeyDown,isInputFocused:t.props.isInputFocused,containerRef:t.props.containerRef,calendarStartDay:t.props.calendarStartDay,monthShowsDuplicateDaysEnd:t.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:t.props.monthShowsDuplicateDaysStart})),!i;){r++,o=wt.default(o,1);var a=n&&r>=6,s=!n&&!t.isWeekInMonth(o);if(a||s){if(!t.props.peekNextMonth)break;i=!0}}return e})),Te(De(t),"onMonthClick",(function(e,n){t.handleDayClick(He(Gt.default(t.props.day,n)),e)})),Te(De(t),"handleMonthNavigation",(function(e,n){t.isDisabled(n)||t.isExcluded(n)||(t.props.setPreSelection(n),t.MONTH_REFS[e].current&&t.MONTH_REFS[e].current.focus())})),Te(De(t),"onMonthKeyDown",(function(e,n){e.preventDefault();var r=e.key;if(!t.props.disabledKeyboardNavigation)switch(r){case"Enter":t.onMonthClick(e,n),t.props.setPreSelection(t.props.selected);break;case"ArrowRight":t.handleMonthNavigation(11===n?0:n+1,Et.default(t.props.preSelection,1));break;case"ArrowLeft":t.handleMonthNavigation(0===n?11:n-1,kt.default(t.props.preSelection,1));break;case"ArrowUp":t.handleMonthNavigation(n>=0&&n<=2?n+9:n-3,kt.default(t.props.preSelection,3));break;case"ArrowDown":t.handleMonthNavigation(n>=9&&n<=11?n-9:n+3,Et.default(t.props.preSelection,3))}})),Te(De(t),"onQuarterClick",(function(e,n){t.handleDayClick(Ze(Yt.default(t.props.day,n)),e)})),Te(De(t),"handleQuarterNavigation",(function(e,n){t.isDisabled(n)||t.isExcluded(n)||(t.props.setPreSelection(n),t.QUARTER_REFS[e-1].current&&t.QUARTER_REFS[e-1].current.focus())})),Te(De(t),"onQuarterKeyDown",(function(e,n){var r=e.key;if(!t.props.disabledKeyboardNavigation)switch(r){case"Enter":t.onQuarterClick(e,n),t.props.setPreSelection(t.props.selected);break;case"ArrowRight":t.handleQuarterNavigation(4===n?1:n+1,St.default(t.props.preSelection,1));break;case"ArrowLeft":t.handleQuarterNavigation(1===n?4:n-1,At.default(t.props.preSelection,1))}})),Te(De(t),"getMonthClassNames",(function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate,a=n.selected,s=n.minDate,l=n.maxDate,u=n.preSelection,c=n.monthClassName,h=n.excludeDates,d=n.includeDates,p=c?c(Gt.default(r,e)):void 0,f=Gt.default(r,e);return mt.default("react-datepicker__month-text","react-datepicker__month-".concat(e),p,{"react-datepicker__month--disabled":(s||l||h||d)&&dn(f,t.props),"react-datepicker__month--selected":t.isSelectedMonth(r,e,a),"react-datepicker__month-text--keyboard-selected":!t.props.disabledKeyboardNavigation&&Ft.default(u)===e,"react-datepicker__month--in-range":pn(i,o,e,r),"react-datepicker__month--range-start":t.isRangeStartMonth(e),"react-datepicker__month--range-end":t.isRangeEndMonth(e),"react-datepicker__month-text--today":t.isCurrentMonth(r,e)})})),Te(De(t),"getTabIndex",(function(e){var n=Ft.default(t.props.preSelection);return t.props.disabledKeyboardNavigation||e!==n?"-1":"0"})),Te(De(t),"getQuarterTabIndex",(function(e){var n=zt.default(t.props.preSelection);return t.props.disabledKeyboardNavigation||e!==n?"-1":"0"})),Te(De(t),"getAriaLabel",(function(e){var n=t.props,r=n.chooseDayAriaLabelPrefix,i=void 0===r?"Choose":r,o=n.disabledDayAriaLabelPrefix,a=void 0===o?"Not available":o,s=n.day,l=Gt.default(s,e),u=t.isDisabled(l)||t.isExcluded(l)?a:i;return"".concat(u," ").concat(Ue(l,"MMMM yyyy"))})),Te(De(t),"getQuarterClassNames",(function(e){var n=t.props,r=n.day,i=n.startDate,o=n.endDate,a=n.selected,s=n.minDate,l=n.maxDate,u=n.preSelection;return mt.default("react-datepicker__quarter-text","react-datepicker__quarter-".concat(e),{"react-datepicker__quarter--disabled":(s||l)&&fn(Yt.default(r,e),t.props),"react-datepicker__quarter--selected":t.isSelectedQuarter(r,e,a),"react-datepicker__quarter-text--keyboard-selected":zt.default(u)===e,"react-datepicker__quarter--in-range":gn(i,o,e,r),"react-datepicker__quarter--range-start":t.isRangeStartQuarter(e),"react-datepicker__quarter--range-end":t.isRangeEndQuarter(e)})})),Te(De(t),"renderMonths",(function(){var e=t.props,n=e.showFullMonthYearPicker,r=e.showTwoColumnMonthYearPicker,i=e.showFourColumnMonthYearPicker,o=e.locale,a=e.day,s=e.selected;return(i?[[0,1,2,3],[4,5,6,7],[8,9,10,11]]:r?[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]]:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]]).map((function(e,r){return ft.default.createElement("div",{className:"react-datepicker__month-wrapper",key:r},e.map((function(e,r){return ft.default.createElement("div",{ref:t.MONTH_REFS[e],key:r,onClick:function(n){t.onMonthClick(n,e)},onKeyDown:function(n){t.onMonthKeyDown(n,e)},tabIndex:t.getTabIndex(e),className:t.getMonthClassNames(e),role:"option","aria-label":t.getAriaLabel(e),"aria-current":t.isCurrentMonth(a,e)?"date":void 0,"aria-selected":t.isSelectedMonth(a,e,s)},n?sn(e,o):ln(e,o))})))}))})),Te(De(t),"renderQuarters",(function(){var e=t.props,n=e.day,r=e.selected;return ft.default.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map((function(e,i){return ft.default.createElement("div",{key:i,ref:t.QUARTER_REFS[i],role:"option",onClick:function(n){t.onQuarterClick(n,e)},onKeyDown:function(n){t.onQuarterKeyDown(n,e)},className:t.getQuarterClassNames(e),"aria-selected":t.isSelectedQuarter(n,e,r),tabIndex:t.getQuarterTabIndex(e),"aria-current":t.isCurrentQuarter(n,e)?"date":void 0},un(e,t.props.locale))})))})),Te(De(t),"getClassNames",(function(){var e=t.props;e.day;var n=e.selectingDate,r=e.selectsStart,i=e.selectsEnd,o=e.showMonthYearPicker,a=e.showQuarterYearPicker;return mt.default("react-datepicker__month",{"react-datepicker__month--selecting-range":n&&(r||i)},{"react-datepicker__monthPicker":o},{"react-datepicker__quarterPicker":a})})),t}return Ce(n,[{key:"render",value:function(){var t=this.props,e=t.showMonthYearPicker,n=t.showQuarterYearPicker,r=t.day,i=t.ariaLabelPrefix,o=void 0===i?"month ":i;return ft.default.createElement("div",{className:this.getClassNames(),onMouseLeave:this.handleMouseLeave,"aria-label":"".concat(o," ").concat(Ue(r,"yyyy-MM")),role:"listbox"},e?this.renderMonths():n?this.renderQuarters():this.renderWeeks())}}]),n}(ft.default.Component),$n=function(t){ke(n,t);var e=Oe(n);function n(){var t;Ee(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Te(De(t=e.call.apply(e,[this].concat(i))),"state",{height:null}),Te(De(t),"handleClick",(function(e){(t.props.minTime||t.props.maxTime)&&bn(e,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&_n(e,t.props)||t.props.onChange(e)})),Te(De(t),"isSelectedTime",(function(e,n,r){return t.props.selected&&n===Ot.default(e)&&r===Mt.default(e)})),Te(De(t),"liClasses",(function(e,n,r){var i=["react-datepicker__time-list-item",t.props.timeClassName?t.props.timeClassName(e,n,r):void 0];return t.isSelectedTime(e,n,r)&&i.push("react-datepicker__time-list-item--selected"),((t.props.minTime||t.props.maxTime)&&bn(e,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&_n(e,t.props))&&i.push("react-datepicker__time-list-item--disabled"),t.props.injectTimes&&(60*Ot.default(e)+Mt.default(e))%t.props.intervals!=0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")})),Te(De(t),"handleOnKeyDown",(function(e,n){" "===e.key&&(e.preventDefault(),e.key="Enter"),"Enter"===e.key&&t.handleClick(n),t.props.handleOnKeyDown(e)})),Te(De(t),"renderTimes",(function(){for(var e=[],n=t.props.format?t.props.format:"p",r=t.props.intervals,i=$e(ze(t.props.selected)),o=1440/r,a=t.props.injectTimes&&t.props.injectTimes.sort((function(t,e){return t-e})),s=t.props.selected||t.props.openToDate||ze(),l=Ot.default(s),u=Mt.default(s),c=qt.default(Vt.default(i,u),l),h=0;h<o;h++){var d=_t.default(i,h*r);if(e.push(d),a){var p=kn(i,d,h,r,a);e=e.concat(p)}}return e.map((function(e,r){return ft.default.createElement("li",{key:r,onClick:t.handleClick.bind(De(t),e),className:t.liClasses(e,l,u),ref:function(n){(de.default(e,c)||nn(e,c))&&(t.centerLi=n)},onKeyDown:function(n){t.handleOnKeyDown(n,e)},tabIndex:"0","aria-selected":t.isSelectedTime(e,l,u)?"true":void 0},Ue(e,n,t.props.locale))}))})),t}return Ce(n,[{key:"componentDidMount",value:function(){this.list.scrollTop=this.centerLi&&n.calcCenterPosition(this.props.monthRef?this.props.monthRef.clientHeight-this.header.clientHeight:this.list.clientHeight,this.centerLi),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})}},{key:"render",value:function(){var t=this,e=this.state.height;return ft.default.createElement("div",{className:"react-datepicker__time-container ".concat(this.props.todayButton?"react-datepicker__time-container--with-today-button":"")},ft.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(e){t.header=e}},ft.default.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),ft.default.createElement("div",{className:"react-datepicker__time"},ft.default.createElement("div",{className:"react-datepicker__time-box"},ft.default.createElement("ul",{className:"react-datepicker__time-list",ref:function(e){t.list=e},style:e?{height:e}:{},tabIndex:"0"},this.renderTimes()))))}}],[{key:"defaultProps",get:function(){return{intervals:30,onTimeChange:function(){},todayButton:null,timeCaption:"Time"}}}]),n}(ft.default.Component);Te($n,"calcCenterPosition",(function(t,e){return e.offsetTop-(t/2-e.clientHeight/2)}));var Wn=function(t){ke(n,t);var e=Oe(n);function n(t){var r;return Ee(this,n),Te(De(r=e.call(this,t)),"YEAR_REFS",Re(Array(r.props.yearItemNumber)).map((function(){return ft.default.createRef()}))),Te(De(r),"isDisabled",(function(t){return cn(t,r.props)})),Te(De(r),"isExcluded",(function(t){return hn(t,r.props)})),Te(De(r),"updateFocusOnPaginate",(function(t){var e=function(){this.YEAR_REFS[t].current.focus()}.bind(De(r));window.requestAnimationFrame(e)})),Te(De(r),"handleYearClick",(function(t,e){r.props.onDayClick&&r.props.onDayClick(t,e)})),Te(De(r),"handleYearNavigation",(function(t,e){var n=r.props,i=n.date,o=n.yearItemNumber,a=Pn(i,o).startPeriod;r.isDisabled(e)||r.isExcluded(e)||(r.props.setPreSelection(e),t-a==-1?r.updateFocusOnPaginate(o-1):t-a===o?r.updateFocusOnPaginate(0):r.YEAR_REFS[t-a].current.focus())})),Te(De(r),"isSameDay",(function(t,e){return en(t,e)})),Te(De(r),"isCurrentYear",(function(t){return t===Bt.default(ze())})),Te(De(r),"isKeyboardSelected",(function(t){var e=Xe($t.default(r.props.date,t));return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!en(e,Xe(r.props.selected))&&en(e,Xe(r.props.preSelection))})),Te(De(r),"onYearClick",(function(t,e){var n=r.props.date;r.handleYearClick(Xe($t.default(n,e)),t)})),Te(De(r),"onYearKeyDown",(function(t,e){var n=t.key;if(!r.props.disabledKeyboardNavigation)switch(n){case"Enter":r.onYearClick(t,e),r.props.setPreSelection(r.props.selected);break;case"ArrowRight":r.handleYearNavigation(e+1,Ct.default(r.props.preSelection,1));break;case"ArrowLeft":r.handleYearNavigation(e-1,Pt.default(r.props.preSelection,1))}})),Te(De(r),"getYearClassNames",(function(t){var e=r.props,n=e.minDate,i=e.maxDate,o=e.selected,a=e.excludeDates,s=e.includeDates,l=e.filterDate;return mt.default("react-datepicker__year-text",{"react-datepicker__year-text--selected":t===Bt.default(o),"react-datepicker__year-text--disabled":(n||i||a||s||l)&&mn(t,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(t),"react-datepicker__year-text--today":r.isCurrentYear(t)})})),Te(De(r),"getYearTabIndex",(function(t){return r.props.disabledKeyboardNavigation?"-1":t===Bt.default(r.props.preSelection)?"0":"-1"})),r}return Ce(n,[{key:"render",value:function(){for(var t=this,e=[],n=this.props,r=Pn(n.date,n.yearItemNumber),i=r.startPeriod,o=r.endPeriod,a=function(n){e.push(ft.default.createElement("div",{ref:t.YEAR_REFS[n-i],onClick:function(e){t.onYearClick(e,n)},onKeyDown:function(e){t.onYearKeyDown(e,n)},tabIndex:t.getYearTabIndex(n),className:t.getYearClassNames(n),key:n,"aria-current":t.isCurrentYear(n)?"date":void 0},n))},s=i;s<=o;s++)a(s);return ft.default.createElement("div",{className:"react-datepicker__year"},ft.default.createElement("div",{className:"react-datepicker__year-wrapper"},e))}}]),n}(ft.default.Component),Hn=function(t){ke(n,t);var e=Oe(n);function n(t){var r;return Ee(this,n),Te(De(r=e.call(this,t)),"onTimeChange",(function(t){r.setState({time:t});var e=new Date;e.setHours(t.split(":")[0]),e.setMinutes(t.split(":")[1]),r.props.onChange(e)})),Te(De(r),"renderTimeInput",(function(){var t=r.state.time,e=r.props,n=e.date,i=e.timeString,o=e.customTimeInput;return o?ft.default.cloneElement(o,{date:n,value:t,onChange:r.onTimeChange}):ft.default.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:t,onChange:function(t){r.onTimeChange(t.target.value||i)}})})),r.state={time:r.props.timeString},r}return Ce(n,[{key:"render",value:function(){return ft.default.createElement("div",{className:"react-datepicker__input-time-container"},ft.default.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),ft.default.createElement("div",{className:"react-datepicker-time__input-container"},ft.default.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))}}],[{key:"getDerivedStateFromProps",value:function(t,e){return t.timeString!==e.time?{time:t.timeString}:null}}]),n}(ft.default.Component);function Xn(t){var e=t.className,n=t.children,r=t.showPopperArrow,i=t.arrowProps,o=void 0===i?{}:i;return ft.default.createElement("div",{className:e},r&&ft.default.createElement("div",Ie({className:"react-datepicker__triangle"},o)),n)}var Zn=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],Kn=function(t){ke(n,t);var e=Oe(n);function n(t){var r;return Ee(this,n),Te(De(r=e.call(this,t)),"handleClickOutside",(function(t){r.props.onClickOutside(t)})),Te(De(r),"setClickOutsideRef",(function(){return r.containerRef.current})),Te(De(r),"handleDropdownFocus",(function(t){(function(){var t=((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).className||"").split(/\s+/);return Zn.some((function(e){return t.indexOf(e)>=0}))})(t.target)&&r.props.onDropdownFocus()})),Te(De(r),"getDateInView",(function(){var t=r.props,e=t.preSelection,n=t.selected,i=t.openToDate,o=Cn(r.props),a=Tn(r.props),s=ze();return i||n||e||(o&&de.default(s,o)?o:a&&he.default(s,a)?a:s)})),Te(De(r),"increaseMonth",(function(){r.setState((function(t){var e=t.date;return{date:Et.default(e,1)}}),(function(){return r.handleMonthChange(r.state.date)}))})),Te(De(r),"decreaseMonth",(function(){r.setState((function(t){var e=t.date;return{date:kt.default(e,1)}}),(function(){return r.handleMonthChange(r.state.date)}))})),Te(De(r),"handleDayClick",(function(t,e,n){r.props.onSelect(t,e,n),r.props.setPreSelection&&r.props.setPreSelection(t)})),Te(De(r),"handleDayMouseEnter",(function(t){r.setState({selectingDate:t}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(t)})),Te(De(r),"handleMonthMouseLeave",(function(){r.setState({selectingDate:null}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()})),Te(De(r),"handleYearChange",(function(t){r.props.onYearChange&&(r.props.onYearChange(t),r.setState({isRenderAriaLiveMessage:!0})),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(t),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(t)})),Te(De(r),"handleMonthChange",(function(t){r.props.onMonthChange&&(r.props.onMonthChange(t),r.setState({isRenderAriaLiveMessage:!0})),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(t),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(t)})),Te(De(r),"handleMonthYearChange",(function(t){r.handleYearChange(t),r.handleMonthChange(t)})),Te(De(r),"changeYear",(function(t){r.setState((function(e){var n=e.date;return{date:$t.default(n,t)}}),(function(){return r.handleYearChange(r.state.date)}))})),Te(De(r),"changeMonth",(function(t){r.setState((function(e){var n=e.date;return{date:Gt.default(n,t)}}),(function(){return r.handleMonthChange(r.state.date)}))})),Te(De(r),"changeMonthYear",(function(t){r.setState((function(e){var n=e.date;return{date:$t.default(Gt.default(n,Ft.default(t)),Bt.default(t))}}),(function(){return r.handleMonthYearChange(r.state.date)}))})),Te(De(r),"header",(function(){var t=We(arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.state.date,r.props.locale,r.props.calendarStartDay),e=[];return r.props.showWeekNumbers&&e.push(ft.default.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),e.concat([0,1,2,3,4,5,6].map((function(e){var n=xt.default(t,e),i=r.formatWeekday(n,r.props.locale),o=r.props.weekDayClassName?r.props.weekDayClassName(n):void 0;return ft.default.createElement("div",{key:e,className:mt.default("react-datepicker__day-name",o)},i)})))})),Te(De(r),"formatWeekday",(function(t,e){return r.props.formatWeekDay?function(t,e,n){return"function"==typeof e?e(t,n):Ue(t,"EEEE",n)}(t,r.props.formatWeekDay,e):r.props.useWeekdaysShort?function(t,e){return Ue(t,"EEE",e)}(t,e):function(t,e){return Ue(t,"EEEEEE",e)}(t,e)})),Te(De(r),"decreaseYear",(function(){r.setState((function(t){var e=t.date;return{date:Pt.default(e,r.props.showYearPicker?r.props.yearItemNumber:1)}}),(function(){return r.handleYearChange(r.state.date)}))})),Te(De(r),"renderPreviousButton",(function(){if(!r.props.renderCustomHeader){var t;switch(!0){case r.props.showMonthYearPicker:t=En(r.state.date,r.props);break;case r.props.showYearPicker:t=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.minDate,r=e.yearItemNumber,i=void 0===r?Fe:r,o=Pn(Xe(Pt.default(t,i)),i).endPeriod,a=n&&Bt.default(n);return a&&a>o||!1}(r.state.date,r.props);break;default:t=xn(r.state.date,r.props)}if((r.props.forceShowMonthNavigation||r.props.showDisabledMonthNavigation||!t)&&!r.props.showTimeSelectOnly){var e=["react-datepicker__navigation","react-datepicker__navigation--previous"],n=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(n=r.decreaseYear),t&&r.props.showDisabledMonthNavigation&&(e.push("react-datepicker__navigation--previous--disabled"),n=null);var i=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,o=r.props,a=o.previousMonthButtonLabel,s=o.previousYearButtonLabel,l=r.props,u=l.previousMonthAriaLabel,c=void 0===u?"string"==typeof a?a:"Previous Month":u,h=l.previousYearAriaLabel,d=void 0===h?"string"==typeof s?s:"Previous Year":h;return ft.default.createElement("button",{type:"button",className:e.join(" "),onClick:n,onKeyDown:r.props.handleOnKeyDown,"aria-label":i?d:c},ft.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},i?r.props.previousYearButtonLabel:r.props.previousMonthButtonLabel))}}})),Te(De(r),"increaseYear",(function(){r.setState((function(t){var e=t.date;return{date:Ct.default(e,r.props.showYearPicker?r.props.yearItemNumber:1)}}),(function(){return r.handleYearChange(r.state.date)}))})),Te(De(r),"renderNextButton",(function(){if(!r.props.renderCustomHeader){var t;switch(!0){case r.props.showMonthYearPicker:t=Sn(r.state.date,r.props);break;case r.props.showYearPicker:t=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.maxDate,r=e.yearItemNumber,i=void 0===r?Fe:r,o=Pn(Ct.default(t,i),i).startPeriod,a=n&&Bt.default(n);return a&&a<o||!1}(r.state.date,r.props);break;default:t=wn(r.state.date,r.props)}if((r.props.forceShowMonthNavigation||r.props.showDisabledMonthNavigation||!t)&&!r.props.showTimeSelectOnly){var e=["react-datepicker__navigation","react-datepicker__navigation--next"];r.props.showTimeSelect&&e.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&e.push("react-datepicker__navigation--next--with-today-button");var n=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(n=r.increaseYear),t&&r.props.showDisabledMonthNavigation&&(e.push("react-datepicker__navigation--next--disabled"),n=null);var i=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,o=r.props,a=o.nextMonthButtonLabel,s=o.nextYearButtonLabel,l=r.props,u=l.nextMonthAriaLabel,c=void 0===u?"string"==typeof a?a:"Next Month":u,h=l.nextYearAriaLabel,d=void 0===h?"string"==typeof s?s:"Next Year":h;return ft.default.createElement("button",{type:"button",className:e.join(" "),onClick:n,onKeyDown:r.props.handleOnKeyDown,"aria-label":i?d:c},ft.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},i?r.props.nextYearButtonLabel:r.props.nextMonthButtonLabel))}}})),Te(De(r),"renderCurrentMonth",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.state.date,e=["react-datepicker__current-month"];return r.props.showYearDropdown&&e.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&e.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&e.push("react-datepicker__current-month--hasMonthYearDropdown"),ft.default.createElement("div",{className:e.join(" ")},Ue(t,r.props.dateFormat,r.props.locale))})),Te(De(r),"renderYearDropdown",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.props.showYearDropdown&&!t)return ft.default.createElement(Rn,{adjustDateOnChange:r.props.adjustDateOnChange,date:r.state.date,onSelect:r.props.onSelect,setOpen:r.props.setOpen,dropdownMode:r.props.dropdownMode,onChange:r.changeYear,minDate:r.props.minDate,maxDate:r.props.maxDate,year:Bt.default(r.state.date),scrollableYearDropdown:r.props.scrollableYearDropdown,yearDropdownItemNumber:r.props.yearDropdownItemNumber})})),Te(De(r),"renderMonthDropdown",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.props.showMonthDropdown&&!t)return ft.default.createElement(Fn,{dropdownMode:r.props.dropdownMode,locale:r.props.locale,onChange:r.changeMonth,month:Ft.default(r.state.date),useShortMonthInDropdown:r.props.useShortMonthInDropdown})})),Te(De(r),"renderMonthYearDropdown",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.props.showMonthYearDropdown&&!t)return ft.default.createElement(Un,{dropdownMode:r.props.dropdownMode,locale:r.props.locale,dateFormat:r.props.dateFormat,onChange:r.changeMonthYear,minDate:r.props.minDate,maxDate:r.props.maxDate,date:r.state.date,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown})})),Te(De(r),"handleTodayButtonClick",(function(t){r.props.onSelect(Ke(),t),r.props.setPreSelection&&r.props.setPreSelection(Ke())})),Te(De(r),"renderTodayButton",(function(){if(r.props.todayButton&&!r.props.showTimeSelectOnly)return ft.default.createElement("div",{className:"react-datepicker__today-button",onClick:function(t){return r.handleTodayButtonClick(t)}},r.props.todayButton)})),Te(De(r),"renderDefaultHeader",(function(t){var e=t.monthDate,n=t.i;return ft.default.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(e),ft.default.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(0!==n),r.renderMonthYearDropdown(0!==n),r.renderYearDropdown(0!==n)),ft.default.createElement("div",{className:"react-datepicker__day-names"},r.header(e)))})),Te(De(r),"renderCustomHeader",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.monthDate,n=t.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var i=xn(r.state.date,r.props),o=wn(r.state.date,r.props),a=En(r.state.date,r.props),s=Sn(r.state.date,r.props),l=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return ft.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},r.props.renderCustomHeader(xe(xe({},r.state),{},{customHeaderCount:n,monthDate:e,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:i,nextMonthButtonDisabled:o,prevYearButtonDisabled:a,nextYearButtonDisabled:s})),l&&ft.default.createElement("div",{className:"react-datepicker__day-names"},r.header(e)))})),Te(De(r),"renderYearHeader",(function(){var t=r.state.date,e=r.props,n=e.showYearPicker,i=Pn(t,e.yearItemNumber),o=i.startPeriod,a=i.endPeriod;return ft.default.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},n?"".concat(o," - ").concat(a):Bt.default(t))})),Te(De(r),"renderHeader",(function(t){switch(!0){case void 0!==r.props.renderCustomHeader:return r.renderCustomHeader(t);case r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker:return r.renderYearHeader(t);default:return r.renderDefaultHeader(t)}})),Te(De(r),"renderMonths",(function(){if(!r.props.showTimeSelectOnly&&!r.props.showYearPicker){for(var t=[],e=r.props.showPreviousMonths?r.props.monthsShown-1:0,n=kt.default(r.state.date,e),i=0;i<r.props.monthsShown;++i){var o=i-r.props.monthSelectedIn,a=Et.default(n,o),s="month-".concat(i),l=i<r.props.monthsShown-1,u=i>0;t.push(ft.default.createElement("div",{key:s,ref:function(t){r.monthContainer=t},className:"react-datepicker__month-container"},r.renderHeader({monthDate:a,i:i}),ft.default.createElement(Yn,{chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:r.props.weekAriaLabelPrefix,ariaLabelPrefix:r.props.monthAriaLabelPrefix,onChange:r.changeMonthYear,day:a,dayClassName:r.props.dayClassName,calendarStartDay:r.props.calendarStartDay,monthClassName:r.props.monthClassName,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,onWeekSelect:r.props.onWeekSelect,orderInDisplay:i,formatWeekNumber:r.props.formatWeekNumber,locale:r.props.locale,minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,highlightDates:r.props.highlightDates,selectingDate:r.state.selectingDate,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,inline:r.props.inline,shouldFocusDayInline:r.props.shouldFocusDayInline,fixedHeight:r.props.fixedHeight,filterDate:r.props.filterDate,preSelection:r.props.preSelection,setPreSelection:r.props.setPreSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showWeekNumbers:r.props.showWeekNumbers,startDate:r.props.startDate,endDate:r.props.endDate,peekNextMonth:r.props.peekNextMonth,setOpen:r.props.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,renderDayContents:r.props.renderDayContents,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,showMonthYearPicker:r.props.showMonthYearPicker,showFullMonthYearPicker:r.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:r.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:r.props.showFourColumnMonthYearPicker,showYearPicker:r.props.showYearPicker,showQuarterYearPicker:r.props.showQuarterYearPicker,isInputFocused:r.props.isInputFocused,containerRef:r.containerRef,monthShowsDuplicateDaysEnd:l,monthShowsDuplicateDaysStart:u})))}return t}})),Te(De(r),"renderYears",(function(){if(!r.props.showTimeSelectOnly)return r.props.showYearPicker?ft.default.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader(),ft.default.createElement(Wn,Ie({onDayClick:r.handleDayClick,date:r.state.date},r.props))):void 0})),Te(De(r),"renderTimeSection",(function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return ft.default.createElement($n,{selected:r.props.selected,openToDate:r.props.openToDate,onChange:r.props.onTimeChange,timeClassName:r.props.timeClassName,format:r.props.timeFormat,includeTimes:r.props.includeTimes,intervals:r.props.timeIntervals,minTime:r.props.minTime,maxTime:r.props.maxTime,excludeTimes:r.props.excludeTimes,filterTime:r.props.filterTime,timeCaption:r.props.timeCaption,todayButton:r.props.todayButton,showMonthDropdown:r.props.showMonthDropdown,showMonthYearDropdown:r.props.showMonthYearDropdown,showYearDropdown:r.props.showYearDropdown,withPortal:r.props.withPortal,monthRef:r.state.monthContainer,injectTimes:r.props.injectTimes,locale:r.props.locale,handleOnKeyDown:r.props.handleOnKeyDown,showTimeSelectOnly:r.props.showTimeSelectOnly})})),Te(De(r),"renderInputTimeSection",(function(){var t=new Date(r.props.selected),e=je(t)&&Boolean(r.props.selected)?"".concat(An(t.getHours()),":").concat(An(t.getMinutes())):"";if(r.props.showTimeInput)return ft.default.createElement(Hn,{date:t,timeString:e,timeInputLabel:r.props.timeInputLabel,onChange:r.props.onTimeChange,customTimeInput:r.props.customTimeInput})})),Te(De(r),"renderAriaLiveRegion",(function(){var t,e=Pn(r.state.date,r.props.yearItemNumber),n=e.startPeriod,i=e.endPeriod;return t=r.props.showYearPicker?"".concat(n," - ").concat(i):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Bt.default(r.state.date):"".concat(sn(Ft.default(r.state.date),r.props.locale)," ").concat(Bt.default(r.state.date)),ft.default.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&t)})),Te(De(r),"renderChildren",(function(){if(r.props.children)return ft.default.createElement("div",{className:"react-datepicker__children-container"},r.props.children)})),r.containerRef=ft.default.createRef(),r.state={date:r.getDateInView(),selectingDate:null,monthContainer:null,isRenderAriaLiveMessage:!1},r}return Ce(n,[{key:"componentDidMount",value:function(){var t=this;this.props.showTimeSelect&&(this.assignMonthContainer=void t.setState({monthContainer:t.monthContainer}))}},{key:"componentDidUpdate",value:function(t){!this.props.preSelection||en(this.props.preSelection,t.preSelection)&&this.props.monthSelectedIn===t.monthSelectedIn?this.props.openToDate&&!en(this.props.openToDate,t.openToDate)&&this.setState({date:this.props.openToDate}):this.setState({date:this.props.preSelection})}},{key:"render",value:function(){var t=this.props.container||Xn;return ft.default.createElement("div",{ref:this.containerRef},ft.default.createElement(t,{className:mt.default("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showPopperArrow:this.props.showPopperArrow,arrowProps:this.props.arrowProps},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))}}],[{key:"defaultProps",get:function(){return{onDropdownFocus:function(){},monthsShown:1,monthSelectedIn:0,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",customTimeInput:null,yearItemNumber:Fe}}}]),n}(ft.default.Component),Qn=function(t){ke(n,t);var e=Oe(n);function n(t){var r;return Ee(this,n),(r=e.call(this,t)).el=document.createElement("div"),r}return Ce(n,[{key:"componentDidMount",value:function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.portalRoot.removeChild(this.el)}},{key:"render",value:function(){return ve.default.createPortal(this.props.children,this.el)}}]),n}(ft.default.Component),Jn=function(t){return!t.disabled&&-1!==t.tabIndex},tr=function(t){ke(n,t);var e=Oe(n);function n(t){var r;return Ee(this,n),Te(De(r=e.call(this,t)),"getTabChildren",(function(){return Array.prototype.slice.call(r.tabLoopRef.current.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(Jn)})),Te(De(r),"handleFocusStart",(function(t){var e=r.getTabChildren();e&&e.length>1&&e[e.length-1].focus()})),Te(De(r),"handleFocusEnd",(function(t){var e=r.getTabChildren();e&&e.length>1&&e[0].focus()})),r.tabLoopRef=ft.default.createRef(),r}return Ce(n,[{key:"render",value:function(){return this.props.enableTabLoop?ft.default.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},ft.default.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:"0",onFocus:this.handleFocusStart}),this.props.children,ft.default.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:"0",onFocus:this.handleFocusEnd})):this.props.children}}],[{key:"defaultProps",get:function(){return{enableTabLoop:!0}}}]),n}(ft.default.Component),er=function(t){ke(n,t);var e=Oe(n);function n(){return Ee(this,n),e.apply(this,arguments)}return Ce(n,[{key:"render",value:function(){var t,e=this.props,n=e.className,r=e.wrapperClassName,i=e.hidePopper,o=e.popperComponent,a=e.popperModifiers,s=e.popperPlacement,l=e.popperProps,u=e.targetComponent,c=e.enableTabLoop,h=e.popperOnKeyDown,d=e.portalId,p=e.portalHost;if(!i){var f=mt.default("react-datepicker-popper",n);t=ft.default.createElement(ht.Popper,Ie({modifiers:a,placement:s},l),(function(t){var e=t.ref,n=t.style,r=t.placement,i=t.arrowProps;return ft.default.createElement(tr,{enableTabLoop:c},ft.default.createElement("div",{ref:e,style:n,className:f,"data-placement":r,onKeyDown:h},ft.default.cloneElement(o,{arrowProps:i})))}))}this.props.popperContainer&&(t=ft.default.createElement(this.props.popperContainer,{},t)),d&&!i&&(t=ft.default.createElement(Qn,{portalId:d,portalHost:p},t));var m=mt.default("react-datepicker-wrapper",r);return ft.default.createElement(ht.Manager,{className:"react-datepicker-manager"},ft.default.createElement(ht.Reference,null,(function(t){var e=t.ref;return ft.default.createElement("div",{ref:e,className:m},u)})),t)}}],[{key:"defaultProps",get:function(){return{hidePopper:!0,popperModifiers:[],popperProps:{},popperPlacement:"bottom-start"}}}]),n}(ft.default.Component),nr="react-datepicker-ignore-onclickoutside",rr=ye.default(Kn),ir="Date input not valid.",or=function(t){ke(n,t);var e=Oe(n);function n(t){var r;return Ee(this,n),Te(De(r=e.call(this,t)),"getPreSelection",(function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:ze()})),Te(De(r),"calcInitialState",(function(){var t,e=r.getPreSelection(),n=Cn(r.props),i=Tn(r.props),o=n&&de.default(e,Qt.default(n))?n:i&&he.default(e,re.default(i))?i:e;return{open:r.props.startOpen||!1,preventFocus:!1,preSelection:null!==(t=r.props.selectsRange?r.props.startDate:r.props.selected)&&void 0!==t?t:o,highlightDates:In(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1}})),Te(De(r),"clearPreventFocusTimeout",(function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)})),Te(De(r),"setFocus",(function(){r.input&&r.input.focus&&r.input.focus({preventScroll:!0})})),Te(De(r),"setBlur",(function(){r.input&&r.input.blur&&r.input.blur(),r.cancelFocusInput()})),Te(De(r),"setOpen",(function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r.setState({open:t,preSelection:t&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:sr},(function(){t||r.setState((function(t){return{focused:!!e&&t.focused}}),(function(){!e&&r.setBlur(),r.setState({inputValue:null})}))}))})),Te(De(r),"inputOk",(function(){return gt.default(r.state.preSelection)})),Te(De(r),"isCalendarOpen",(function(){return void 0===r.props.open?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open})),Te(De(r),"handleFocus",(function(t){r.state.preventFocus||(r.props.onFocus(t),r.props.preventOpenOnFocus||r.props.readOnly||r.setOpen(!0)),r.setState({focused:!0})})),Te(De(r),"cancelFocusInput",(function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=null})),Te(De(r),"deferFocusInput",(function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout((function(){return r.setFocus()}),1)})),Te(De(r),"handleDropdownFocus",(function(){r.cancelFocusInput()})),Te(De(r),"handleBlur",(function(t){(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&r.props.onBlur(t),r.setState({focused:!1})})),Te(De(r),"handleCalendarClickOutside",(function(t){r.props.inline||r.setOpen(!1),r.props.onClickOutside(t),r.props.withPortal&&t.preventDefault()})),Te(De(r),"handleChange",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e[0];if(!r.props.onChangeRaw||(r.props.onChangeRaw.apply(De(r),e),"function"==typeof i.isDefaultPrevented&&!i.isDefaultPrevented())){r.setState({inputValue:i.target.value,lastPreSelectChange:ar});var o=Be(i.target.value,r.props.dateFormat,r.props.locale,r.props.strictParsing,r.props.selected,r.props.minDate);r.props.showTimeSelectOnly&&!en(o,r.props.selected)&&(o=null==o?_e.default(r.props.selected,{hours:Ot.default(r.props.selected),minutes:Mt.default(r.props.selected),seconds:Dt.default(r.props.selected)}):_e.default(r.props.selected,{hours:Ot.default(o),minutes:Mt.default(o),seconds:Dt.default(o)})),!o&&i.target.value||r.setSelected(o,i,!0)}})),Te(De(r),"handleSelect",(function(t,e,n){if(r.setState({preventFocus:!0},(function(){return r.preventFocusTimeout=setTimeout((function(){return r.setState({preventFocus:!1})}),50),r.preventFocusTimeout})),r.props.onChangeRaw&&r.props.onChangeRaw(e),r.setSelected(t,e,!1,n),r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(t);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var i=r.props,o=i.startDate,a=i.endDate;!o||a||de.default(t,o)||r.setOpen(!1)}})),Te(De(r),"setSelected",(function(t,e,n,i){var o=t;if(r.props.showYearPicker){if(null!==o&&mn(Bt.default(o),r.props))return}else if(r.props.showMonthYearPicker){if(null!==o&&dn(o,r.props))return}else if(null!==o&&cn(o,r.props))return;var a=r.props,s=a.onChange,l=a.selectsRange,u=a.startDate,c=a.endDate;if(!nn(r.props.selected,o)||r.props.allowSameDay||l)if(null!==o&&(!r.props.selected||n&&(r.props.showTimeSelect||r.props.showTimeSelectOnly||r.props.showTimeInput)||(o=qe(o,{hour:Ot.default(r.props.selected),minute:Mt.default(r.props.selected),second:Dt.default(r.props.selected)})),r.props.inline||r.setState({preSelection:o}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:i})),l){var h=u&&c;u||c?u&&!c&&(de.default(o,u)?s([o,null],e):s([u,o],e)):s([o,null],e),h&&s([o,null],e)}else s(o,e);n||(r.props.onSelect(o,e),r.setState({inputValue:null}))})),Te(De(r),"setPreSelection",(function(t){var e=void 0!==r.props.minDate,n=void 0!==r.props.maxDate,i=!0;if(t){var o=Qt.default(t);if(e&&n)i=rn(t,r.props.minDate,r.props.maxDate);else if(e){var a=Qt.default(r.props.minDate);i=he.default(t,a)||nn(o,a)}else if(n){var s=re.default(r.props.maxDate);i=de.default(t,s)||nn(o,s)}}i&&r.setState({preSelection:t})})),Te(De(r),"handleTimeChange",(function(t){var e=qe(r.props.selected?r.props.selected:r.getPreSelection(),{hour:Ot.default(t),minute:Mt.default(t)});r.setState({preSelection:e}),r.props.onChange(e),r.props.shouldCloseOnSelect&&r.setOpen(!1),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})})),Te(De(r),"onInputClick",(function(){r.props.disabled||r.props.readOnly||r.setOpen(!0),r.props.onInputClick()})),Te(De(r),"onInputKeyDown",(function(t){r.props.onKeyDown(t);var e=t.key;if(r.state.open||r.props.inline||r.props.preventOpenOnFocus){if(r.state.open){if("ArrowDown"===e||"ArrowUp"===e){t.preventDefault();var n=r.calendar.componentNode&&r.calendar.componentNode.querySelector('.react-datepicker__day[tabindex="0"]');return void(n&&n.focus({preventScroll:!0}))}var i=ze(r.state.preSelection);"Enter"===e?(t.preventDefault(),r.inputOk()&&r.state.lastPreSelectChange===sr?(r.handleSelect(i,t),!r.props.shouldCloseOnSelect&&r.setPreSelection(i)):r.setOpen(!1)):"Escape"===e&&(t.preventDefault(),r.setOpen(!1)),r.inputOk()||r.props.onInputError({code:1,msg:ir})}}else"ArrowDown"!==e&&"ArrowUp"!==e&&"Enter"!==e||r.onInputClick()})),Te(De(r),"onPortalKeyDown",(function(t){"Escape"===t.key&&(t.preventDefault(),r.setState({preventFocus:!0},(function(){r.setOpen(!1),setTimeout((function(){r.setFocus(),r.setState({preventFocus:!1})}))})))})),Te(De(r),"onDayKeyDown",(function(t){r.props.onKeyDown(t);var e=t.key,n=ze(r.state.preSelection);if("Enter"===e)t.preventDefault(),r.handleSelect(n,t),!r.props.shouldCloseOnSelect&&r.setPreSelection(n);else if("Escape"===e)t.preventDefault(),r.setOpen(!1),r.inputOk()||r.props.onInputError({code:1,msg:ir});else if(!r.props.disabledKeyboardNavigation){var i;switch(e){case"ArrowLeft":i=Tt.default(n,1);break;case"ArrowRight":i=xt.default(n,1);break;case"ArrowUp":i=It.default(n,1);break;case"ArrowDown":i=wt.default(n,1);break;case"PageUp":i=kt.default(n,1);break;case"PageDown":i=Et.default(n,1);break;case"Home":i=Pt.default(n,1);break;case"End":i=Ct.default(n,1)}if(!i)return void(r.props.onInputError&&r.props.onInputError({code:1,msg:ir}));if(t.preventDefault(),r.setState({lastPreSelectChange:sr}),r.props.adjustDateOnChange&&r.setSelected(i),r.setPreSelection(i),r.props.inline){var o=Ft.default(n),a=Ft.default(i),s=Bt.default(n),l=Bt.default(i);o!==a||s!==l?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}})),Te(De(r),"onPopperKeyDown",(function(t){"Escape"===t.key&&(t.preventDefault(),r.setState({preventFocus:!0},(function(){r.setOpen(!1),setTimeout((function(){r.setFocus(),r.setState({preventFocus:!1})}))})))})),Te(De(r),"onClearClick",(function(t){t&&t.preventDefault&&t.preventDefault(),r.props.selectsRange?r.props.onChange([null,null],t):r.props.onChange(null,t),r.setState({inputValue:null})})),Te(De(r),"clear",(function(){r.onClearClick()})),Te(De(r),"onScroll",(function(t){"boolean"==typeof r.props.closeOnScroll&&r.props.closeOnScroll?t.target!==document&&t.target!==document.documentElement&&t.target!==document.body||r.setOpen(!1):"function"==typeof r.props.closeOnScroll&&r.props.closeOnScroll(t)&&r.setOpen(!1)})),Te(De(r),"renderCalendar",(function(){return r.props.inline||r.isCalendarOpen()?ft.default.createElement(rr,{ref:function(t){r.calendar=t},locale:r.props.locale,calendarStartDay:r.props.calendarStartDay,chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:r.props.weekAriaLabelPrefix,monthAriaLabelPrefix:r.props.monthAriaLabelPrefix,adjustDateOnChange:r.props.adjustDateOnChange,setOpen:r.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,dateFormat:r.props.dateFormatCalendar,useWeekdaysShort:r.props.useWeekdaysShort,formatWeekDay:r.props.formatWeekDay,dropdownMode:r.props.dropdownMode,selected:r.props.selected,preSelection:r.state.preSelection,onSelect:r.handleSelect,onWeekSelect:r.props.onWeekSelect,openToDate:r.props.openToDate,minDate:r.props.minDate,maxDate:r.props.maxDate,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,startDate:r.props.startDate,endDate:r.props.endDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,filterDate:r.props.filterDate,onClickOutside:r.handleCalendarClickOutside,formatWeekNumber:r.props.formatWeekNumber,highlightDates:r.state.highlightDates,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,includeTimes:r.props.includeTimes,injectTimes:r.props.injectTimes,inline:r.props.inline,shouldFocusDayInline:r.state.shouldFocusDayInline,peekNextMonth:r.props.peekNextMonth,showMonthDropdown:r.props.showMonthDropdown,showPreviousMonths:r.props.showPreviousMonths,useShortMonthInDropdown:r.props.useShortMonthInDropdown,showMonthYearDropdown:r.props.showMonthYearDropdown,showWeekNumbers:r.props.showWeekNumbers,showYearDropdown:r.props.showYearDropdown,withPortal:r.props.withPortal,forceShowMonthNavigation:r.props.forceShowMonthNavigation,showDisabledMonthNavigation:r.props.showDisabledMonthNavigation,scrollableYearDropdown:r.props.scrollableYearDropdown,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown,todayButton:r.props.todayButton,weekLabel:r.props.weekLabel,outsideClickIgnoreClass:nr,fixedHeight:r.props.fixedHeight,monthsShown:r.props.monthsShown,monthSelectedIn:r.state.monthSelectedIn,onDropdownFocus:r.handleDropdownFocus,onMonthChange:r.props.onMonthChange,onYearChange:r.props.onYearChange,dayClassName:r.props.dayClassName,weekDayClassName:r.props.weekDayClassName,monthClassName:r.props.monthClassName,timeClassName:r.props.timeClassName,showTimeSelect:r.props.showTimeSelect,showTimeSelectOnly:r.props.showTimeSelectOnly,onTimeChange:r.handleTimeChange,timeFormat:r.props.timeFormat,timeIntervals:r.props.timeIntervals,minTime:r.props.minTime,maxTime:r.props.maxTime,excludeTimes:r.props.excludeTimes,filterTime:r.props.filterTime,timeCaption:r.props.timeCaption,className:r.props.calendarClassName,container:r.props.calendarContainer,yearItemNumber:r.props.yearItemNumber,yearDropdownItemNumber:r.props.yearDropdownItemNumber,previousMonthAriaLabel:r.props.previousMonthAriaLabel,previousMonthButtonLabel:r.props.previousMonthButtonLabel,nextMonthAriaLabel:r.props.nextMonthAriaLabel,nextMonthButtonLabel:r.props.nextMonthButtonLabel,previousYearAriaLabel:r.props.previousYearAriaLabel,previousYearButtonLabel:r.props.previousYearButtonLabel,nextYearAriaLabel:r.props.nextYearAriaLabel,nextYearButtonLabel:r.props.nextYearButtonLabel,timeInputLabel:r.props.timeInputLabel,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,renderCustomHeader:r.props.renderCustomHeader,popperProps:r.props.popperProps,renderDayContents:r.props.renderDayContents,onDayMouseEnter:r.props.onDayMouseEnter,onMonthMouseLeave:r.props.onMonthMouseLeave,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showTimeInput:r.props.showTimeInput,showMonthYearPicker:r.props.showMonthYearPicker,showFullMonthYearPicker:r.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:r.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:r.props.showFourColumnMonthYearPicker,showYearPicker:r.props.showYearPicker,showQuarterYearPicker:r.props.showQuarterYearPicker,showPopperArrow:r.props.showPopperArrow,excludeScrollbar:r.props.excludeScrollbar,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,isInputFocused:r.state.focused,customTimeInput:r.props.customTimeInput,setPreSelection:r.setPreSelection},r.props.children):null})),Te(De(r),"renderAriaLiveRegion",(function(){var t,e=r.props,n=e.dateFormat,i=e.locale,o=r.props.showTimeInput||r.props.showTimeSelect?"PPPPp":"PPPP";return t=r.props.selectsRange?"Selected start date: ".concat(Ve(r.props.startDate,{dateFormat:o,locale:i}),". ").concat(r.props.endDate?"End date: "+Ve(r.props.endDate,{dateFormat:o,locale:i}):""):r.props.showTimeSelectOnly?"Selected time: ".concat(Ve(r.props.selected,{dateFormat:n,locale:i})):r.props.showYearPicker?"Selected year: ".concat(Ve(r.props.selected,{dateFormat:"yyyy",locale:i})):r.props.showMonthYearPicker?"Selected month: ".concat(Ve(r.props.selected,{dateFormat:"MMMM yyyy",locale:i})):r.props.showQuarterYearPicker?"Selected quarter: ".concat(Ve(r.props.selected,{dateFormat:"yyyy, QQQ",locale:i})):"Selected date: ".concat(Ve(r.props.selected,{dateFormat:o,locale:i})),ft.default.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&t)})),Te(De(r),"renderDateInput",(function(){var t,e=mt.default(r.props.className,Te({},nr,r.state.open)),n=r.props.customInput||ft.default.createElement("input",{type:"text"}),i=r.props.customInputRef||"ref",o="string"==typeof r.props.value?r.props.value:"string"==typeof r.state.inputValue?r.state.inputValue:r.props.selectsRange?function(t,e,n){if(!t)return"";var r=Ve(t,n),i=e?Ve(e,n):"";return"".concat(r," - ").concat(i)}(r.props.startDate,r.props.endDate,r.props):Ve(r.props.selected,r.props);return ft.default.cloneElement(n,(Te(t={},i,(function(t){r.input=t})),Te(t,"value",o),Te(t,"onBlur",r.handleBlur),Te(t,"onChange",r.handleChange),Te(t,"onClick",r.onInputClick),Te(t,"onFocus",r.handleFocus),Te(t,"onKeyDown",r.onInputKeyDown),Te(t,"id",r.props.id),Te(t,"name",r.props.name),Te(t,"form",r.props.form),Te(t,"autoFocus",r.props.autoFocus),Te(t,"placeholder",r.props.placeholderText),Te(t,"disabled",r.props.disabled),Te(t,"autoComplete",r.props.autoComplete),Te(t,"className",mt.default(n.props.className,e)),Te(t,"title",r.props.title),Te(t,"readOnly",r.props.readOnly),Te(t,"required",r.props.required),Te(t,"tabIndex",r.props.tabIndex),Te(t,"aria-describedby",r.props.ariaDescribedBy),Te(t,"aria-invalid",r.props.ariaInvalid),Te(t,"aria-labelledby",r.props.ariaLabelledBy),Te(t,"aria-required",r.props.ariaRequired),t))})),Te(De(r),"renderClearButton",(function(){var t=r.props,e=t.isClearable,n=t.selected,i=t.startDate,o=t.endDate,a=t.clearButtonTitle,s=t.clearButtonClassName,l=void 0===s?"":s,u=t.ariaLabelClose,c=void 0===u?"Close":u;return!e||null==n&&null==i&&null==o?null:ft.default.createElement("button",{type:"button",className:"react-datepicker__close-icon ".concat(l).trim(),"aria-label":c,onClick:r.onClearClick,title:a,tabIndex:-1})})),r.state=r.calcInitialState(),r}return Ce(n,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentDidUpdate",value:function(t,e){var n,r;t.inline&&(n=t.selected,r=this.props.selected,n&&r?Ft.default(n)!==Ft.default(r)||Bt.default(n)!==Bt.default(r):n!==r)&&this.setPreSelection(this.props.selected),void 0!==this.state.monthSelectedIn&&t.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),t.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:In(this.props.highlightDates)}),e.focused||nn(t.selected,this.props.selected)||this.setState({inputValue:null}),e.open!==this.state.open&&(!1===e.open&&!0===this.state.open&&this.props.onCalendarOpen(),!0===e.open&&!1===this.state.open&&this.props.onCalendarClose())}},{key:"componentWillUnmount",value:function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0)}},{key:"renderInputContainer",value:function(){return ft.default.createElement("div",{className:"react-datepicker__input-container"},this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())}},{key:"render",value:function(){var t=this.renderCalendar();if(this.props.inline)return t;if(this.props.withPortal){var e=this.state.open?ft.default.createElement(tr,{enableTabLoop:this.props.enableTabLoop},ft.default.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},t)):null;return this.state.open&&this.props.portalId&&(e=ft.default.createElement(Qn,{portalId:this.props.portalId,portalHost:this.props.portalHost},e)),ft.default.createElement("div",null,this.renderInputContainer(),e)}return ft.default.createElement(er,{className:this.props.popperClassName,wrapperClassName:this.props.wrapperClassName,hidePopper:!this.isCalendarOpen(),portalId:this.props.portalId,portalHost:this.props.portalHost,popperModifiers:this.props.popperModifiers,targetComponent:this.renderInputContainer(),popperContainer:this.props.popperContainer,popperComponent:t,popperPlacement:this.props.popperPlacement,popperProps:this.props.popperProps,popperOnKeyDown:this.onPopperKeyDown,enableTabLoop:this.props.enableTabLoop})}}],[{key:"defaultProps",get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,strictParsing:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Fe,renderDayContents:function(t){return t},focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0}}}]),n}(ft.default.Component),ar="input",sr="navigate";t.CalendarContainer=Xn,t.default=or,t.getDefaultLocale=on,t.registerLocale=function(t,e){var n="undefined"!=typeof window?window:globalThis;n.__localeData__||(n.__localeData__={}),n.__localeData__[t]=e},t.setDefaultLocale=function(t){("undefined"!=typeof window?window:globalThis).__localeId__=t},Object.defineProperty(t,"__esModule",{value:!0})}(e,n(2791),n(2007),n(1694),n(6971),n(9314),n(1951),n(1518),n(2074),n(9040),n(20),n(1104),n(6689),n(5105),n(4851),n(4433),n(6753),n(7503),n(8030),n(6794),n(7602),n(2295),n(4424),n(1537),n(467),n(6114),n(6975),n(3747),n(639),n(2599),n(5544),n(9292),n(7227),n(2618),n(2363),n(5765),n(5617),n(1056),n(9333),n(9759),n(5951),n(7223),n(7415),n(8347),n(3629),n(5719),n(3006),n(7235),n(786),n(4565),n(4888),n(4675),n(7508),n(4690),n(5375),n(1750),n(4845),n(9420),n(9579),n(7262),n(8527),n(3216),n(9831),n(11),n(4164),n(2145),n(7152))},4463:(t,e,n)=>{"use strict";var r=n(2791),i=n(5296);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(t,e){u(t,e),u(t+"Capture",e)}function u(t,e){for(s[t]=e,t=0;t<e.length;t++)a.add(e[t])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(t,e,n,r,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){g[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];g[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){g[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){g[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){g[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){g[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){g[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){g[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){g[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function _(t,e,n,r){var i=g.hasOwnProperty(e)?g[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!h.call(f,t)||!h.call(p,t)&&(d.test(t)?f[t]=!0:(p[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function N(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=R&&t[R]||t["@@iterator"])?t:null}var L,F=Object.assign;function z(t){if(void 0===L)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);L=e&&e[1]||""}return"\n"+L+t}var B=!1;function j(t,e){if(!t||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?z(t):""}function U(t){switch(t.tag){case 5:return z(t.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return t=j(t.type,!1);case 11:return t=j(t.type.render,!1);case 1:return t=j(t.type,!0);default:return""}}function V(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case E:return"Fragment";case w:return"Portal";case C:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case I:return(t.displayName||"Context")+".Consumer";case T:return(t._context.displayName||"Context")+".Provider";case k:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case D:return null!==(e=t.displayName||null)?e:V(t.type)||"Memo";case M:e=t._payload,t=t._init;try{return V(t(e))}catch(n){}}return null}function q(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(e);case 8:return e===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function G(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function Y(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function $(t){t._valueTracker||(t._valueTracker=function(t){var e=Y(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function W(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Y(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function H(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function X(t,e){var n=e.checked;return F({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Z(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=G(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function K(t,e){null!=(e=e.checked)&&_(t,"checked",e,!1)}function Q(t,e){K(t,e);var n=G(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,G(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function J(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&H(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+G(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return F({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(et(n)){if(1<n.length)throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:G(n)}}function ot(t,e){var n=G(e.value),r=G(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function st(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?st(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ut,ct,ht=(ct=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ut=ut||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ut.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return ct(t,e)}))}:ct);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ft=["Webkit","ms","Moz","O"];function mt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||pt.hasOwnProperty(t)&&pt[t]?(""+e).trim():e+"px"}function gt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=mt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(pt).forEach((function(t){ft.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pt[e]=pt[t]}))}));var yt=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function _t(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bt=null;function xt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var wt=null,Et=null,St=null;function Ct(t){if(t=_i(t)){if("function"!==typeof wt)throw Error(o(280));var e=t.stateNode;e&&(e=xi(e),wt(t.stateNode,t.type,e))}}function Tt(t){Et?St?St.push(t):St=[t]:Et=t}function It(){if(Et){var t=Et,e=St;if(St=Et=null,Ct(t),e)for(t=0;t<e.length;t++)Ct(e[t])}}function kt(t,e){return t(e)}function At(){}var Pt=!1;function Dt(t,e,n){if(Pt)return t(e,n);Pt=!0;try{return kt(t,e,n)}finally{Pt=!1,(null!==Et||null!==St)&&(At(),It())}}function Mt(t,e){var n=t.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(o(231,e,typeof n));return n}var Ot=!1;if(c)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){Ot=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch(ct){Ot=!1}function Nt(t,e,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Lt=!1,Ft=null,zt=!1,Bt=null,jt={onError:function(t){Lt=!0,Ft=t}};function Ut(t,e,n,r,i,o,a,s,l){Lt=!1,Ft=null,Nt.apply(jt,arguments)}function Vt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function qt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Gt(t){if(Vt(t)!==t)throw Error(o(188))}function Yt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Vt(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Gt(i),t;if(a===r)return Gt(i),e;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t))?$t(t):null}function $t(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=$t(t);if(null!==e)return e;t=t.sibling}return null}var Wt=i.unstable_scheduleCallback,Ht=i.unstable_cancelCallback,Xt=i.unstable_shouldYield,Zt=i.unstable_requestPaint,Kt=i.unstable_now,Qt=i.unstable_getCurrentPriorityLevel,Jt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,re=i.unstable_IdlePriority,ie=null,oe=null;var ae=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(se(t)/le|0)|0},se=Math.log,le=Math.LN2;var ue=64,ce=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=he(s):0!==(o&=a)&&(r=he(o))}else 0!==(a=n&~i)?r=he(a):0!==o&&(r=he(o));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&i)&&((i=r&-r)>=(o=e&-e)||16===i&&0!==(4194240&o)))return e;if(0!==(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-ae(e)),r|=t[n],e&=~i;return r}function pe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function fe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function me(){var t=ue;return 0===(4194240&(ue<<=1))&&(ue=64),t}function ge(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ye(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=n}function ve(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ae(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function be(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var xe,we,Ee,Se,Ce,Te=!1,Ie=[],ke=null,Ae=null,Pe=null,De=new Map,Me=new Map,Oe=[],Re="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ne(t,e){switch(t){case"focusin":case"focusout":ke=null;break;case"dragenter":case"dragleave":Ae=null;break;case"mouseover":case"mouseout":Pe=null;break;case"pointerover":case"pointerout":De.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Me.delete(e.pointerId)}}function Le(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==e&&(null!==(e=_i(e))&&we(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Fe(t){var e=vi(t.target);if(null!==e){var n=Vt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=qt(n)))return t.blockedOn=e,void Ce(t.priority,(function(){Ee(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ze(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=_i(n))&&we(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);bt=r,n.target.dispatchEvent(r),bt=null,e.shift()}return!0}function Be(t,e,n){ze(t)&&n.delete(e)}function je(){Te=!1,null!==ke&&ze(ke)&&(ke=null),null!==Ae&&ze(Ae)&&(Ae=null),null!==Pe&&ze(Pe)&&(Pe=null),De.forEach(Be),Me.forEach(Be)}function Ue(t,e){t.blockedOn===e&&(t.blockedOn=null,Te||(Te=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,je)))}function Ve(t){function e(e){return Ue(e,t)}if(0<Ie.length){Ue(Ie[0],t);for(var n=1;n<Ie.length;n++){var r=Ie[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==ke&&Ue(ke,t),null!==Ae&&Ue(Ae,t),null!==Pe&&Ue(Pe,t),De.forEach(e),Me.forEach(e),n=0;n<Oe.length;n++)(r=Oe[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Oe.length&&null===(n=Oe[0]).blockedOn;)Fe(n),null===n.blockedOn&&Oe.shift()}var qe=b.ReactCurrentBatchConfig,Ge=!0;function Ye(t,e,n,r){var i=_e,o=qe.transition;qe.transition=null;try{_e=1,We(t,e,n,r)}finally{_e=i,qe.transition=o}}function $e(t,e,n,r){var i=_e,o=qe.transition;qe.transition=null;try{_e=4,We(t,e,n,r)}finally{_e=i,qe.transition=o}}function We(t,e,n,r){if(Ge){var i=Xe(t,e,n,r);if(null===i)Gr(t,e,r,He,n),Ne(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return ke=Le(ke,t,e,n,r,i),!0;case"dragenter":return Ae=Le(Ae,t,e,n,r,i),!0;case"mouseover":return Pe=Le(Pe,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return De.set(o,Le(De.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Me.set(o,Le(Me.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(Ne(t,r),4&e&&-1<Re.indexOf(t)){for(;null!==i;){var o=_i(i);if(null!==o&&xe(o),null===(o=Xe(t,e,n,r))&&Gr(t,e,r,He,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Gr(t,e,r,null,n)}}var He=null;function Xe(t,e,n,r){if(He=null,null!==(t=vi(t=xt(r))))if(null===(e=Vt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=qt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return He=t,null}function Ze(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qt()){case Jt:return 1;case te:return 4;case ee:case ne:return 16;case re:return 536870912;default:return 16}default:return 16}}var Ke=null,Qe=null,Je=null;function tn(){if(Je)return Je;var t,e,n=Qe,r=n.length,i="value"in Ke?Ke.value:Ke.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return Je=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function on(t){function e(e,n,r,i,o){for(var a in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var an,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(un),hn=F({},un,{view:0,detail:0}),dn=on(hn),pn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(an=t.screenX-ln.screenX,sn=t.screenY-ln.screenY):sn=an=0,ln=t),an)},movementY:function(t){return"movementY"in t?t.movementY:sn}}),fn=on(pn),mn=on(F({},pn,{dataTransfer:0})),gn=on(F({},hn,{relatedTarget:0})),yn=on(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},un,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_n=on(vn),bn=on(F({},un,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=En[t])&&!!e[t]}function Cn(){return Sn}var Tn=F({},hn,{key:function(t){if(t.key){var e=xn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?wn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),In=on(Tn),kn=on(F({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=on(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},pn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=on(Dn),On=[9,13,27,32],Rn=c&&"CompositionEvent"in window,Nn=null;c&&"documentMode"in document&&(Nn=document.documentMode);var Ln=c&&"TextEvent"in window&&!Nn,Fn=c&&(!Rn||Nn&&8<Nn&&11>=Nn),zn=String.fromCharCode(32),Bn=!1;function jn(t,e){switch(t){case"keyup":return-1!==On.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Vn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!qn[t.type]:"textarea"===e}function Yn(t,e,n,r){Tt(r),0<(e=$r(e,"onChange")).length&&(n=new cn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var $n=null,Wn=null;function Hn(t){zr(t,0)}function Xn(t){if(W(bi(t)))return t}function Zn(t,e){if("change"===t)return e}var Kn=!1;if(c){var Qn;if(c){var Jn="oninput"in document;if(!Jn){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),Jn="function"===typeof tr.oninput}Qn=Jn}else Qn=!1;Kn=Qn&&(!document.documentMode||9<document.documentMode)}function er(){$n&&($n.detachEvent("onpropertychange",nr),Wn=$n=null)}function nr(t){if("value"===t.propertyName&&Xn(Wn)){var e=[];Yn(e,Wn,t,xt(t)),Dt(Hn,e)}}function rr(t,e,n){"focusin"===t?(er(),Wn=n,($n=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Xn(Wn)}function or(t,e){if("click"===t)return Xn(e)}function ar(t,e){if("input"===t||"change"===t)return Xn(e)}var sr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function lr(t,e){if(sr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(e,i)||!sr(t[i],e[i]))return!1}return!0}function ur(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cr(t,e){var n,r=ur(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=ur(r)}}function hr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function dr(){for(var t=window,e=H();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=H((t=e.contentWindow).document)}return e}function pr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function fr(t){var e=dr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var a=cr(n,r);i&&a&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,_r=!1;function br(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==H(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=$r(yr,"onSelect")).length&&(e=new cn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gr)))}function xr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Er={},Sr={};function Cr(t){if(Er[t])return Er[t];if(!wr[t])return t;var e,n=wr[t];for(e in n)if(n.hasOwnProperty(e)&&e in Sr)return Er[t]=n[e];return t}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Tr=Cr("animationend"),Ir=Cr("animationiteration"),kr=Cr("animationstart"),Ar=Cr("transitionend"),Pr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(t,e){Pr.set(t,e),l(e,[t])}for(var Or=0;Or<Dr.length;Or++){var Rr=Dr[Or];Mr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Mr(Tr,"onAnimationEnd"),Mr(Ir,"onAnimationIteration"),Mr(kr,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Ar,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nr));function Fr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,a,s,l,u){if(Ut.apply(this,arguments),Lt){if(!Lt)throw Error(o(198));var c=Ft;Lt=!1,Ft=null,zt||(zt=!0,Bt=c)}}(r,e,void 0,t),t.currentTarget=null}function zr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break t;Fr(i,s,u),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break t;Fr(i,s,u),o=l}}}if(zt)throw t=Bt,zt=!1,Bt=null,t}function Br(t,e){var n=e[mi];void 0===n&&(n=e[mi]=new Set);var r=t+"__bubble";n.has(r)||(qr(e,t,2,!1),n.add(r))}function jr(t,e,n){var r=0;e&&(r|=4),qr(n,t,r,e)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Vr(t){if(!t[Ur]){t[Ur]=!0,a.forEach((function(e){"selectionchange"!==e&&(Lr.has(e)||jr(e,!1,t),jr(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Ur]||(e[Ur]=!0,jr("selectionchange",!1,e))}}function qr(t,e,n,r){switch(Ze(e)){case 1:var i=Ye;break;case 4:i=$e;break;default:i=We}n=i.bind(null,e,n,t),i=void 0,!Ot||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Gr(t,e,n,r,i){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=vi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue t}s=s.parentNode}}r=r.return}Dt((function(){var r=o,i=xt(n),a=[];t:{var s=Pr.get(t);if(void 0!==s){var l=cn,u=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=In;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Tr:case Ir:case kr:l=yn;break;case Ar:l=Pn;break;case"scroll":l=dn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=kn}var c=0!==(4&e),h=!c&&"scroll"===t,d=c?null!==s?s+"Capture":null:s;c=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Mt(f,d))&&c.push(Yr(f,m,p)))),h)break;f=f.return}0<c.length&&(s=new l(s,u,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||n===bt||!(u=n.relatedTarget||n.fromElement)||!vi(u)&&!u[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?vi(u):null)&&(u!==(h=Vt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(c=kn,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?s:bi(l),p=null==u?s:bi(u),(s=new c(m,f+"leave",l,n,i)).target=h,s.relatedTarget=p,m=null,vi(i)===r&&((c=new c(d,f+"enter",u,n,i)).target=p,c.relatedTarget=h,m=c),h=m,l&&u)t:{for(d=u,f=0,p=c=l;p;p=Wr(p))f++;for(p=0,m=d;m;m=Wr(m))p++;for(;0<f-p;)c=Wr(c),f--;for(;0<p-f;)d=Wr(d),p--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break t;c=Wr(c),d=Wr(d)}c=null}else c=null;null!==l&&Hr(a,s,l,c,!1),null!==u&&null!==h&&Hr(a,h,u,c,!0)}if("select"===(l=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Zn;else if(Gn(s))if(Kn)g=ar;else{g=ir;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(t,r))?Yn(a,g,n,i):(y&&y(t,s,r),"focusout"===t&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&tt(s,"number",s.value)),y=r?bi(r):window,t){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(a,n,i)}var v;if(Rn)t:{switch(t){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else Vn?jn(t,n)&&(_="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(_="onCompositionStart");_&&(Fn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Vn&&(v=tn()):(Qe="value"in(Ke=i)?Ke.value:Ke.textContent,Vn=!0)),0<(y=$r(r,_)).length&&(_=new bn(_,t,null,n,i),a.push({event:_,listeners:y}),v?_.data=v:null!==(v=Un(n))&&(_.data=v))),(v=Ln?function(t,e){switch(t){case"compositionend":return Un(e);case"keypress":return 32!==e.which?null:(Bn=!0,zn);case"textInput":return(t=e.data)===zn&&Bn?null:t;default:return null}}(t,n):function(t,e){if(Vn)return"compositionend"===t||!Rn&&jn(t,e)?(t=tn(),Je=Qe=Ke=null,Vn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=$r(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}zr(a,e)}))}function Yr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $r(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Mt(t,n))&&r.unshift(Yr(t,o,i)),null!=(o=Mt(t,e))&&r.push(Yr(t,o,i))),t=t.return}return r}function Wr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Hr(t,e,n,r,i){for(var o=e._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Mt(n,o))&&a.unshift(Yr(n,l,s)):i||null!=(l=Mt(n,o))&&a.push(Yr(n,l,s))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}var Xr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function Kr(t){return("string"===typeof t?t:""+t).replace(Xr,"\n").replace(Zr,"")}function Qr(t,e,n){if(e=Kr(e),Kr(t)!==e&&n)throw Error(o(425))}function Jr(){}var ti=null,ei=null;function ni(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(t){return oi.resolve(null).then(t).catch(si)}:ri;function si(t){setTimeout((function(){throw t}))}function li(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void Ve(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ve(e)}function ui(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ci(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,pi="__reactProps$"+hi,fi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(t){var e=t[di];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fi]||n[di]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ci(t);null!==t;){if(n=t[di])return n;t=ci(t)}return e}n=(t=n).parentNode}return null}function _i(t){return!(t=t[di]||t[fi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function bi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function xi(t){return t[pi]||null}var wi=[],Ei=-1;function Si(t){return{current:t}}function Ci(t){0>Ei||(t.current=wi[Ei],wi[Ei]=null,Ei--)}function Ti(t,e){Ei++,wi[Ei]=t.current,t.current=e}var Ii={},ki=Si(Ii),Ai=Si(!1),Pi=Ii;function Di(t,e){var n=t.type.contextTypes;if(!n)return Ii;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Mi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Oi(){Ci(Ai),Ci(ki)}function Ri(t,e,n){if(ki.current!==Ii)throw Error(o(168));Ti(ki,e),Ti(Ai,n)}function Ni(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,q(t)||"Unknown",i));return F({},n,r)}function Li(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ii,Pi=ki.current,Ti(ki,t),Ti(Ai,Ai.current),!0}function Fi(t,e,n){var r=t.stateNode;if(!r)throw Error(o(169));n?(t=Ni(t,e,Pi),r.__reactInternalMemoizedMergedChildContext=t,Ci(Ai),Ci(ki),Ti(ki,t)):Ci(Ai),Ti(Ai,n)}var zi=null,Bi=!1,ji=!1;function Ui(t){null===zi?zi=[t]:zi.push(t)}function Vi(){if(!ji&&null!==zi){ji=!0;var t=0,e=_e;try{var n=zi;for(_e=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}zi=null,Bi=!1}catch(i){throw null!==zi&&(zi=zi.slice(t+1)),Wt(Jt,Vi),i}finally{_e=e,ji=!1}}return null}var qi=[],Gi=0,Yi=null,$i=0,Wi=[],Hi=0,Xi=null,Zi=1,Ki="";function Qi(t,e){qi[Gi++]=$i,qi[Gi++]=Yi,Yi=t,$i=e}function Ji(t,e,n){Wi[Hi++]=Zi,Wi[Hi++]=Ki,Wi[Hi++]=Xi,Xi=t;var r=Zi;t=Ki;var i=32-ae(r)-1;r&=~(1<<i),n+=1;var o=32-ae(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Zi=1<<32-ae(e)+i|n<<i|r,Ki=o+t}else Zi=1<<o|n<<i|r,Ki=t}function to(t){null!==t.return&&(Qi(t,1),Ji(t,1,0))}function eo(t){for(;t===Yi;)Yi=qi[--Gi],qi[Gi]=null,$i=qi[--Gi],qi[Gi]=null;for(;t===Xi;)Xi=Wi[--Hi],Wi[Hi]=null,Ki=Wi[--Hi],Wi[Hi]=null,Zi=Wi[--Hi],Wi[Hi]=null}var no=null,ro=null,io=!1,oo=null;function ao(t,e){var n=Mu(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function so(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,no=t,ro=ui(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,no=t,ro=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Xi?{id:Zi,overflow:Ki}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Mu(18,null,null,0)).stateNode=e,n.return=t,t.child=n,no=t,ro=null,!0);default:return!1}}function lo(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function uo(t){if(io){var e=ro;if(e){var n=e;if(!so(t,e)){if(lo(t))throw Error(o(418));e=ui(n.nextSibling);var r=no;e&&so(t,e)?ao(r,n):(t.flags=-4097&t.flags|2,io=!1,no=t)}}else{if(lo(t))throw Error(o(418));t.flags=-4097&t.flags|2,io=!1,no=t}}}function co(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;no=t}function ho(t){if(t!==no)return!1;if(!io)return co(t),io=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ni(t.type,t.memoizedProps)),e&&(e=ro)){if(lo(t))throw po(),Error(o(418));for(;e;)ao(t,e),e=ui(e.nextSibling)}if(co(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ro=ui(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ro=null}}else ro=no?ui(t.stateNode.nextSibling):null;return!0}function po(){for(var t=ro;t;)t=ui(t.nextSibling)}function fo(){ro=no=null,io=!1}function mo(t){null===oo?oo=[t]:oo.push(t)}var go=b.ReactCurrentBatchConfig;function yo(t,e){if(t&&t.defaultProps){for(var n in e=F({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var vo=Si(null),_o=null,bo=null,xo=null;function wo(){xo=bo=_o=null}function Eo(t){var e=vo.current;Ci(vo),t._currentValue=e}function So(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Co(t,e){_o=t,xo=bo=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(bs=!0),t.firstContext=null)}function To(t){var e=t._currentValue;if(xo!==t)if(t={context:t,memoizedValue:e,next:null},null===bo){if(null===_o)throw Error(o(308));bo=t,_o.dependencies={lanes:0,firstContext:t}}else bo=bo.next=t;return e}var Io=null;function ko(t){null===Io?Io=[t]:Io.push(t)}function Ao(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,ko(e)):(n.next=i.next,i.next=n),e.interleaved=n,Po(t,r)}function Po(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Do=!1;function Mo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ro(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function No(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Po(t,n)}return null===(i=r.interleaved)?(e.next=e,ko(r)):(e.next=i.next,i.next=e),r.interleaved=e,Po(t,n)}function Lo(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ve(t,n)}}function Fo(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zo(t,e,n,r){var i=t.updateQueue;Do=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=t.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(a=0,c=u=l=null,s=o;;){var d=s.lane,p=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var f=t,m=s;switch(d=e,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break t}h=f;break t;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break t;h=F({},h,d);break t;case 2:Do=!0}}null!==s.callback&&0!==s.lane&&(t.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=h):c=c.next=p,a|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(e=i.shared.interleaved)){i=e;do{a|=i.lane,i=i.next}while(i!==e)}else null===o&&(i.shared.lanes=0);Fl|=a,t.lanes=a,t.memoizedState=h}}function Bo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var jo=(new r.Component).refs;function Uo(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:F({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Vo={isMounted:function(t){return!!(t=t._reactInternals)&&Vt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=eu(),i=nu(t),o=Ro(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=No(t,o,i))&&(ru(e,t,i,r),Lo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=eu(),i=nu(t),o=Ro(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=No(t,o,i))&&(ru(e,t,i,r),Lo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=eu(),r=nu(t),i=Ro(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=No(t,i,r))&&(ru(e,t,r,n),Lo(e,t,r))}};function qo(t,e,n,r,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Go(t,e,n){var r=!1,i=Ii,o=e.contextType;return"object"===typeof o&&null!==o?o=To(o):(i=Mi(e)?Pi:ki.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?Di(t,i):Ii),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Vo,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Yo(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vo.enqueueReplaceState(e,e.state,null)}function $o(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=jo,Mo(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=To(o):(o=Mi(e)?Pi:ki.current,i.context=Di(t,o)),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(Uo(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Vo.enqueueReplaceState(i,i.state,null),zo(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}function Wo(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,t));var i=r,a=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=i.refs;e===jo&&(e=i.refs={}),null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!==typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function Ho(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xo(t){return(0,t._init)(t._payload)}function Zo(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Ru(t,e)).index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function s(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=zu(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function u(t,e,n,r){var o=n.type;return o===E?h(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===M&&Xo(o)===e.type)?((r=i(e,n.props)).ref=Wo(t,e,n),r.return=t,r):((r=Nu(n.type,n.key,n.props,null,t.mode,r)).ref=Wo(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Bu(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Lu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=zu(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case x:return(n=Nu(e.type,e.key,e.props,null,t.mode,n)).ref=Wo(t,null,e),n.return=t,n;case w:return(e=Bu(e,t.mode,n)).return=t,e;case M:return d(t,(0,e._init)(e._payload),n)}if(et(e)||N(e))return(e=Lu(e,t.mode,n,null)).return=t,e;Ho(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?u(t,e,n,r):null;case w:return n.key===i?c(t,e,n,r):null;case M:return p(t,e,(i=n._init)(n._payload),r)}if(et(n)||N(n))return null!==i?null:h(t,e,n,r,null);Ho(t,n)}return null}function f(t,e,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return u(e,t=t.get(null===r.key?n:r.key)||null,r,i);case w:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case M:return f(t,e,n,(0,r._init)(r._payload),i)}if(et(r)||N(r))return h(e,t=t.get(n)||null,r,i,null);Ho(e,r)}return null}function m(i,o,s,l){for(var u=null,c=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=p(i,h,s[m],l);if(null===y){null===h&&(h=g);break}t&&h&&null===y.alternate&&e(i,h),o=a(y,o,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===s.length)return n(i,h),io&&Qi(i,m),u;if(null===h){for(;m<s.length;m++)null!==(h=d(i,s[m],l))&&(o=a(h,o,m),null===c?u=h:c.sibling=h,c=h);return io&&Qi(i,m),u}for(h=r(i,h);m<s.length;m++)null!==(g=f(h,i,m,s[m],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===c?u=g:c.sibling=g,c=g);return t&&h.forEach((function(t){return e(i,t)})),io&&Qi(i,m),u}function g(i,s,l,u){var c=N(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=p(i,m,v.value,u);if(null===_){null===m&&(m=y);break}t&&m&&null===_.alternate&&e(i,m),s=a(_,s,g),null===h?c=_:h.sibling=_,h=_,m=y}if(v.done)return n(i,m),io&&Qi(i,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(s=a(v,s,g),null===h?c=v:h.sibling=v,h=v);return io&&Qi(i,g),c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=f(m,i,g,v.value,u))&&(t&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=a(v,s,g),null===h?c=v:h.sibling=v,h=v);return t&&m.forEach((function(t){return e(i,t)})),io&&Qi(i,g),c}return function t(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:t:{for(var u=a.key,c=o;null!==c;){if(c.key===u){if((u=a.type)===E){if(7===c.tag){n(r,c.sibling),(o=i(c,a.props.children)).return=r,r=o;break t}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===M&&Xo(u)===c.type){n(r,c.sibling),(o=i(c,a.props)).ref=Wo(r,c,a),o.return=r,r=o;break t}n(r,c);break}e(r,c),c=c.sibling}a.type===E?((o=Lu(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Nu(a.type,a.key,a.props,null,r.mode,l)).ref=Wo(r,o,a),l.return=r,r=l)}return s(r);case w:t:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break t}n(r,o);break}e(r,o),o=o.sibling}(o=Bu(a,r.mode,l)).return=r,r=o}return s(r);case M:return t(r,o,(c=a._init)(a._payload),l)}if(et(a))return m(r,o,a,l);if(N(a))return g(r,o,a,l);Ho(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=zu(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var Ko=Zo(!0),Qo=Zo(!1),Jo={},ta=Si(Jo),ea=Si(Jo),na=Si(Jo);function ra(t){if(t===Jo)throw Error(o(174));return t}function ia(t,e){switch(Ti(na,e),Ti(ea,t),Ti(ta,Jo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Ci(ta),Ti(ta,e)}function oa(){Ci(ta),Ci(ea),Ci(na)}function aa(t){ra(na.current);var e=ra(ta.current),n=lt(e,t.type);e!==n&&(Ti(ea,t),Ti(ta,n))}function sa(t){ea.current===t&&(Ci(ta),Ci(ea))}var la=Si(0);function ua(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ca=[];function ha(){for(var t=0;t<ca.length;t++)ca[t]._workInProgressVersionPrimary=null;ca.length=0}var da=b.ReactCurrentDispatcher,pa=b.ReactCurrentBatchConfig,fa=0,ma=null,ga=null,ya=null,va=!1,_a=!1,ba=0,xa=0;function wa(){throw Error(o(321))}function Ea(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function Sa(t,e,n,r,i,a){if(fa=a,ma=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,da.current=null===t||null===t.memoizedState?ss:ls,t=n(r,i),_a){a=0;do{if(_a=!1,ba=0,25<=a)throw Error(o(301));a+=1,ya=ga=null,e.updateQueue=null,da.current=us,t=n(r,i)}while(_a)}if(da.current=as,e=null!==ga&&null!==ga.next,fa=0,ya=ga=ma=null,va=!1,e)throw Error(o(300));return t}function Ca(){var t=0!==ba;return ba=0,t}function Ta(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ya?ma.memoizedState=ya=t:ya=ya.next=t,ya}function Ia(){if(null===ga){var t=ma.alternate;t=null!==t?t.memoizedState:null}else t=ga.next;var e=null===ya?ma.memoizedState:ya.next;if(null!==e)ya=e,ga=t;else{if(null===t)throw Error(o(310));t={memoizedState:(ga=t).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===ya?ma.memoizedState=ya=t:ya=ya.next=t}return ya}function ka(t,e){return"function"===typeof e?e(t):e}function Aa(t){var e=Ia(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=ga,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,u=null,c=a;do{var h=c.lane;if((fa&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,s=r):u=u.next=d,ma.lanes|=h,Fl|=h}c=c.next}while(null!==c&&c!==a);null===u?s=r:u.next=l,sr(r,e.memoizedState)||(bs=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{a=i.lane,ma.lanes|=a,Fl|=a,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pa(t){var e=Ia(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=t(a,s.action),s=s.next}while(s!==i);sr(a,e.memoizedState)||(bs=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Da(){}function Ma(t,e){var n=ma,r=Ia(),i=e(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,bs=!0),r=r.queue,Ga(Na.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||null!==ya&&1&ya.memoizedState.tag){if(n.flags|=2048,Ba(9,Ra.bind(null,n,r,i,e),void 0,null),null===Pl)throw Error(o(349));0!==(30&fa)||Oa(n,e,i)}return i}function Oa(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=ma.updateQueue)?(e={lastEffect:null,stores:null},ma.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ra(t,e,n,r){e.value=n,e.getSnapshot=r,La(e)&&Fa(t)}function Na(t,e,n){return n((function(){La(e)&&Fa(t)}))}function La(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sr(t,n)}catch(r){return!0}}function Fa(t){var e=Po(t,1);null!==e&&ru(e,t,1,-1)}function za(t){var e=Ta();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:t},e.queue=t,t=t.dispatch=ns.bind(null,ma,t),[e.memoizedState,t]}function Ba(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=ma.updateQueue)?(e={lastEffect:null,stores:null},ma.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function ja(){return Ia().memoizedState}function Ua(t,e,n,r){var i=Ta();ma.flags|=t,i.memoizedState=Ba(1|e,n,void 0,void 0===r?null:r)}function Va(t,e,n,r){var i=Ia();r=void 0===r?null:r;var o=void 0;if(null!==ga){var a=ga.memoizedState;if(o=a.destroy,null!==r&&Ea(r,a.deps))return void(i.memoizedState=Ba(e,n,o,r))}ma.flags|=t,i.memoizedState=Ba(1|e,n,o,r)}function qa(t,e){return Ua(8390656,8,t,e)}function Ga(t,e){return Va(2048,8,t,e)}function Ya(t,e){return Va(4,2,t,e)}function $a(t,e){return Va(4,4,t,e)}function Wa(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ha(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Va(4,4,Wa.bind(null,e,t),n)}function Xa(){}function Za(t,e){var n=Ia();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ea(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ka(t,e){var n=Ia();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ea(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Qa(t,e,n){return 0===(21&fa)?(t.baseState&&(t.baseState=!1,bs=!0),t.memoizedState=n):(sr(n,e)||(n=me(),ma.lanes|=n,Fl|=n,t.baseState=!0),e)}function Ja(t,e){var n=_e;_e=0!==n&&4>n?n:4,t(!0);var r=pa.transition;pa.transition={};try{t(!1),e()}finally{_e=n,pa.transition=r}}function ts(){return Ia().memoizedState}function es(t,e,n){var r=nu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(t))is(e,n);else if(null!==(n=Ao(t,e,n,r))){ru(n,t,r,eu()),os(n,e,r)}}function ns(t,e,n){var r=nu(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(t))is(e,i);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=e.interleaved;return null===l?(i.next=i,ko(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(u){}null!==(n=Ao(t,e,i,r))&&(ru(n,t,r,i=eu()),os(n,e,r))}}function rs(t){var e=t.alternate;return t===ma||null!==e&&e===ma}function is(t,e){_a=va=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function os(t,e,n){if(0!==(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ve(t,n)}}var as={readContext:To,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useInsertionEffect:wa,useLayoutEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useMutableSource:wa,useSyncExternalStore:wa,useId:wa,unstable_isNewReconciler:!1},ss={readContext:To,useCallback:function(t,e){return Ta().memoizedState=[t,void 0===e?null:e],t},useContext:To,useEffect:qa,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Ua(4194308,4,Wa.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ua(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ua(4,2,t,e)},useMemo:function(t,e){var n=Ta();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ta();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=es.bind(null,ma,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Ta().memoizedState=t},useState:za,useDebugValue:Xa,useDeferredValue:function(t){return Ta().memoizedState=t},useTransition:function(){var t=za(!1),e=t[0];return t=Ja.bind(null,t[1]),Ta().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ma,i=Ta();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=e(),null===Pl)throw Error(o(349));0!==(30&fa)||Oa(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,qa(Na.bind(null,r,a,t),[t]),r.flags|=2048,Ba(9,Ra.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Ta(),e=Pl.identifierPrefix;if(io){var n=Ki;e=":"+e+"R"+(n=(Zi&~(1<<32-ae(Zi)-1)).toString(32)+n),0<(n=ba++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=xa++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ls={readContext:To,useCallback:Za,useContext:To,useEffect:Ga,useImperativeHandle:Ha,useInsertionEffect:Ya,useLayoutEffect:$a,useMemo:Ka,useReducer:Aa,useRef:ja,useState:function(){return Aa(ka)},useDebugValue:Xa,useDeferredValue:function(t){return Qa(Ia(),ga.memoizedState,t)},useTransition:function(){return[Aa(ka)[0],Ia().memoizedState]},useMutableSource:Da,useSyncExternalStore:Ma,useId:ts,unstable_isNewReconciler:!1},us={readContext:To,useCallback:Za,useContext:To,useEffect:Ga,useImperativeHandle:Ha,useInsertionEffect:Ya,useLayoutEffect:$a,useMemo:Ka,useReducer:Pa,useRef:ja,useState:function(){return Pa(ka)},useDebugValue:Xa,useDeferredValue:function(t){var e=Ia();return null===ga?e.memoizedState=t:Qa(e,ga.memoizedState,t)},useTransition:function(){return[Pa(ka)[0],Ia().memoizedState]},useMutableSource:Da,useSyncExternalStore:Ma,useId:ts,unstable_isNewReconciler:!1};function cs(t,e){try{var n="",r=e;do{n+=U(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i,digest:null}}function hs(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function ds(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function fs(t,e,n){(n=Ro(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Yl||(Yl=!0,$l=r),ds(0,e)},n}function ms(t,e,n){(n=Ro(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ds(0,e),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function gs(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new ps;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Tu.bind(null,t,e,n),e.then(t,t))}function ys(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function vs(t,e,n,r,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Ro(-1,1)).tag=2,No(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var _s=b.ReactCurrentOwner,bs=!1;function xs(t,e,n,r){e.child=null===t?Qo(e,null,n,r):Ko(e,t.child,n,r)}function ws(t,e,n,r,i){n=n.render;var o=e.ref;return Co(e,i),r=Sa(t,e,n,r,o,i),n=Ca(),null===t||bs?(io&&n&&to(e),e.flags|=1,xs(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ys(t,e,i))}function Es(t,e,n,r,i){if(null===t){var o=n.type;return"function"!==typeof o||Ou(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Nu(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Ss(t,e,o,r,i))}if(o=t.child,0===(t.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&t.ref===e.ref)return Ys(t,e,i)}return e.flags|=1,(t=Ru(o,r)).ref=e.ref,t.return=e,e.child=t}function Ss(t,e,n,r,i){if(null!==t){var o=t.memoizedProps;if(lr(o,r)&&t.ref===e.ref){if(bs=!1,e.pendingProps=r=o,0===(t.lanes&i))return e.lanes=t.lanes,Ys(t,e,i);0!==(131072&t.flags)&&(bs=!0)}}return Is(t,e,n,r,i)}function Cs(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Rl,Ol),Ol|=n;else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ti(Rl,Ol),Ol|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ti(Rl,Ol),Ol|=r}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ti(Rl,Ol),Ol|=r;return xs(t,e,i,n),e.child}function Ts(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Is(t,e,n,r,i){var o=Mi(n)?Pi:ki.current;return o=Di(e,o),Co(e,i),n=Sa(t,e,n,r,o,i),r=Ca(),null===t||bs?(io&&r&&to(e),e.flags|=1,xs(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ys(t,e,i))}function ks(t,e,n,r,i){if(Mi(n)){var o=!0;Li(e)}else o=!1;if(Co(e,i),null===e.stateNode)Gs(t,e),Go(e,n,r),$o(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=To(u):u=Di(e,u=Mi(n)?Pi:ki.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==u)&&Yo(e,a,r,u),Do=!1;var d=e.memoizedState;a.state=d,zo(e,r,a,i),l=e.memoizedState,s!==r||d!==l||Ai.current||Do?("function"===typeof c&&(Uo(e,n,c,r),l=e.memoizedState),(s=Do||qo(e,n,s,r,d,l,u))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"===typeof a.componentDidMount&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Oo(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:yo(e.type,s),a.props=u,h=e.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=To(l):l=Di(e,l=Mi(n)?Pi:ki.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&Yo(e,a,r,l),Do=!1,d=e.memoizedState,a.state=d,zo(e,r,a,i);var f=e.memoizedState;s!==h||d!==f||Ai.current||Do?("function"===typeof p&&(Uo(e,n,p,r),f=e.memoizedState),(u=Do||qo(e,n,u,r,d,f,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=f),a.props=r,a.state=f,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return As(t,e,n,r,o,i)}function As(t,e,n,r,i,o){Ts(t,e);var a=0!==(128&e.flags);if(!r&&!a)return i&&Fi(e,n,!1),Ys(t,e,o);r=e.stateNode,_s.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=Ko(e,t.child,null,o),e.child=Ko(e,null,s,o)):xs(t,e,s,o),e.memoizedState=r.state,i&&Fi(e,n,!0),e.child}function Ps(t){var e=t.stateNode;e.pendingContext?Ri(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Ri(0,e.context,!1),ia(t,e.containerInfo)}function Ds(t,e,n,r,i){return fo(),mo(i),e.flags|=256,xs(t,e,n,r),e.child}var Ms,Os,Rs,Ns,Ls={dehydrated:null,treeContext:null,retryLane:0};function Fs(t){return{baseLanes:t,cachePool:null,transitions:null}}function zs(t,e,n){var r,i=e.pendingProps,a=la.current,s=!1,l=0!==(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!==(2&a)),r?(s=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),Ti(la,1&a),null===t)return uo(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=i.children,t=i.fallback,s?(i=e.mode,s=e.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Fu(l,i,0,null),t=Lu(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Fs(n),e.memoizedState=Ls,t):Bs(e,l));if(null!==(a=t.memoizedState)&&null!==(r=a.dehydrated))return function(t,e,n,r,i,a,s){if(n)return 256&e.flags?(e.flags&=-257,js(t,e,s,r=hs(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=Fu({mode:"visible",children:r.children},i,0,null),(a=Lu(a,i,s,null)).flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,0!==(1&e.mode)&&Ko(e,t.child,null,s),e.child.memoizedState=Fs(s),e.memoizedState=Ls,a);if(0===(1&e.mode))return js(t,e,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,js(t,e,s,r=hs(a=Error(o(419)),r,void 0))}if(l=0!==(s&t.childLanes),bs||l){if(null!==(r=Pl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Po(t,i),ru(r,t,i,-1))}return gu(),js(t,e,s,r=hs(Error(o(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=ku.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,ro=ui(i.nextSibling),no=e,io=!0,oo=null,null!==t&&(Wi[Hi++]=Zi,Wi[Hi++]=Ki,Wi[Hi++]=Xi,Zi=t.id,Ki=t.overflow,Xi=e),e=Bs(e,r.children),e.flags|=4096,e)}(t,e,l,i,r,a,n);if(s){s=i.fallback,l=e.mode,r=(a=t.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&e.child!==a?((i=e.child).childLanes=0,i.pendingProps=u,e.deletions=null):(i=Ru(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Ru(r,s):(s=Lu(s,l,n,null)).flags|=2,s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,l=null===(l=t.child.memoizedState)?Fs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=Ls,i}return t=(s=t.child).sibling,i=Ru(s,{mode:"visible",children:i.children}),0===(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Bs(t,e){return(e=Fu({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function js(t,e,n,r){return null!==r&&mo(r),Ko(e,t.child,null,n),(t=Bs(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Us(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),So(t.return,e,n)}function Vs(t,e,n,r,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function qs(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(xs(t,e,r.children,n),0!==(2&(r=la.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Us(t,n,e);else if(19===t.tag)Us(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ti(la,r),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===ua(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Vs(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===ua(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Vs(e,!0,n,null,o);break;case"together":Vs(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gs(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ys(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Fl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Ru(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Ru(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function $s(t,e){if(!io)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ws(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Hs(t,e,n){var r=e.pendingProps;switch(eo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(e),null;case 1:case 17:return Mi(e.type)&&Oi(),Ws(e),null;case 3:return r=e.stateNode,oa(),Ci(Ai),Ci(ki),ha(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(ho(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==oo&&(su(oo),oo=null))),Os(t,e),Ws(e),null;case 5:sa(e);var i=ra(na.current);if(n=e.type,null!==t&&null!=e.stateNode)Rs(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(o(166));return Ws(e),null}if(t=ra(ta.current),ho(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[di]=e,r[pi]=a,t=0!==(1&e.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Nr.length;i++)Br(Nr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":Z(r,a),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Br("invalid",r);break;case"textarea":it(r,a),Br("invalid",r)}for(var l in vt(n,a),i=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,u,t),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,u,t),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":$(r),J(r,a,!0);break;case"textarea":$(r),at(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Jr)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=st(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),"select"===n&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[di]=e,t[pi]=r,Ms(t,e,!1,!1),e.stateNode=t;t:{switch(l=_t(n,r),n){case"dialog":Br("cancel",t),Br("close",t),i=r;break;case"iframe":case"object":case"embed":Br("load",t),i=r;break;case"video":case"audio":for(i=0;i<Nr.length;i++)Br(Nr[i],t);i=r;break;case"source":Br("error",t),i=r;break;case"img":case"image":case"link":Br("error",t),Br("load",t),i=r;break;case"details":Br("toggle",t),i=r;break;case"input":Z(t,r),i=X(t,r),Br("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Br("invalid",t);break;case"textarea":it(t,r),i=rt(t,r),Br("invalid",t)}for(a in vt(n,i),u=i)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?gt(t,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&ht(t,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&dt(t,c):"number"===typeof c&&dt(t,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Br("scroll",t):null!=c&&_(t,a,c,l))}switch(n){case"input":$(t),J(t,r,!1);break;case"textarea":$(t),at(t);break;case"option":null!=r.value&&t.setAttribute("value",""+G(r.value));break;case"select":t.multiple=!!r.multiple,null!=(a=r.value)?nt(t,!!r.multiple,a,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Ws(e),null;case 6:if(t&&null!=e.stateNode)Ns(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(o(166));if(n=ra(na.current),ra(ta.current),ho(e)){if(r=e.stateNode,n=e.memoizedProps,r[di]=e,(a=r.nodeValue!==n)&&null!==(t=no))switch(t.tag){case 3:Qr(r.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&t.mode))}a&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=e,e.stateNode=r}return Ws(e),null;case 13:if(Ci(la),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&e.mode)&&0===(128&e.flags))po(),fo(),e.flags|=98560,a=!1;else if(a=ho(e),null!==r&&null!==r.dehydrated){if(null===t){if(!a)throw Error(o(318));if(!(a=null!==(a=e.memoizedState)?a.dehydrated:null))throw Error(o(317));a[di]=e}else fo(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Ws(e),a=!1}else null!==oo&&(su(oo),oo=null),a=!0;if(!a)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&la.current)?0===Nl&&(Nl=3):gu())),null!==e.updateQueue&&(e.flags|=4),Ws(e),null);case 4:return oa(),Os(t,e),null===t&&Vr(e.stateNode.containerInfo),Ws(e),null;case 10:return Eo(e.type._context),Ws(e),null;case 19:if(Ci(la),null===(a=e.memoizedState))return Ws(e),null;if(r=0!==(128&e.flags),null===(l=a.rendering))if(r)$s(a,!1);else{if(0!==Nl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=ua(t))){for(e.flags|=128,$s(a,!1),null!==(r=l.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ti(la,1&la.current|2),e.child}t=t.sibling}null!==a.tail&&Kt()>ql&&(e.flags|=128,r=!0,$s(a,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=ua(l))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),$s(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return Ws(e),null}else 2*Kt()-a.renderingStartTime>ql&&1073741824!==n&&(e.flags|=128,r=!0,$s(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=a.last)?n.sibling=l:e.child=l,a.last=l)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Kt(),e.sibling=null,n=la.current,Ti(la,r?1&n|2:1&n),e):(Ws(e),null);case 22:case 23:return du(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&Ol)&&(Ws(e),6&e.subtreeFlags&&(e.flags|=8192)):Ws(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function Xs(t,e){switch(eo(e),e.tag){case 1:return Mi(e.type)&&Oi(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return oa(),Ci(Ai),Ci(ki),ha(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return sa(e),null;case 13:if(Ci(la),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));fo()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Ci(la),null;case 4:return oa(),null;case 10:return Eo(e.type._context),null;case 22:case 23:return du(),null;default:return null}}Ms=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},Rs=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ra(ta.current);var o,a=null;switch(n){case"input":i=X(t,i),r=X(t,r),a=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),a=[];break;case"textarea":i=rt(t,i),r=rt(t,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(t.onclick=Jr)}for(c in vt(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Br("scroll",t),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(e.updateQueue=c)&&(e.flags|=4)}},Ns=function(t,e,n,r){n!==r&&(e.flags|=4)};var Zs=!1,Ks=!1,Qs="function"===typeof WeakSet?WeakSet:Set,Js=null;function tl(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cu(t,e,r)}else n.current=null}function el(t,e,n){try{n()}catch(r){Cu(t,e,r)}}var nl=!1;function rl(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(e,n,o)}i=i.next}while(i!==r)}}function il(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ol(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function al(t){var e=t.alternate;null!==e&&(t.alternate=null,al(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[di],delete e[pi],delete e[mi],delete e[gi],delete e[yi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sl(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||sl(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ul(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Jr));else if(4!==r&&null!==(t=t.child))for(ul(t,e,n),t=t.sibling;null!==t;)ul(t,e,n),t=t.sibling}function cl(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}var hl=null,dl=!1;function pl(t,e,n){for(n=n.child;null!==n;)fl(t,e,n),n=n.sibling}function fl(t,e,n){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(ie,n)}catch(s){}switch(n.tag){case 5:Ks||tl(n,e);case 6:var r=hl,i=dl;hl=null,pl(t,e,n),dl=i,null!==(hl=r)&&(dl?(t=hl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(t=hl,n=n.stateNode,8===t.nodeType?li(t.parentNode,n):1===t.nodeType&&li(t,n),Ve(t)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,pl(t,e,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,e,a),i=i.next}while(i!==r)}pl(t,e,n);break;case 1:if(!Ks&&(tl(n,e),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Cu(n,e,s)}pl(t,e,n);break;case 21:pl(t,e,n);break;case 22:1&n.mode?(Ks=(r=Ks)||null!==n.memoizedState,pl(t,e,n),Ks=r):pl(t,e,n);break;default:pl(t,e,n)}}function ml(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Qs),e.forEach((function(e){var r=Au.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function gl(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,s=e,l=s;t:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break t;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break t}l=l.return}if(null===hl)throw Error(o(160));fl(a,s,i),hl=null,dl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Cu(i,e,c)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)yl(e,t),e=e.sibling}function yl(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gl(e,t),vl(t),4&r){try{rl(3,t,t.return),il(3,t)}catch(g){Cu(t,t.return,g)}try{rl(5,t,t.return)}catch(g){Cu(t,t.return,g)}}break;case 1:gl(e,t),vl(t),512&r&&null!==n&&tl(n,n.return);break;case 5:if(gl(e,t),vl(t),512&r&&null!==n&&tl(n,n.return),32&t.flags){var i=t.stateNode;try{dt(i,"")}catch(g){Cu(t,t.return,g)}}if(4&r&&null!=(i=t.stateNode)){var a=t.memoizedProps,s=null!==n?n.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&K(i,a),_t(l,s);var c=_t(l,a);for(s=0;s<u.length;s+=2){var h=u[s],d=u[s+1];"style"===h?gt(i,d):"dangerouslySetInnerHTML"===h?ht(i,d):"children"===h?dt(i,d):_(i,h,d,c)}switch(l){case"input":Q(i,a);break;case"textarea":ot(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?nt(i,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?nt(i,!!a.multiple,a.defaultValue,!0):nt(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(g){Cu(t,t.return,g)}}break;case 6:if(gl(e,t),vl(t),4&r){if(null===t.stateNode)throw Error(o(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(g){Cu(t,t.return,g)}}break;case 3:if(gl(e,t),vl(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ve(e.containerInfo)}catch(g){Cu(t,t.return,g)}break;case 4:default:gl(e,t),vl(t);break;case 13:gl(e,t),vl(t),8192&(i=t.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Kt())),4&r&&ml(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Ks=(c=Ks)||h,gl(e,t),Ks=c):gl(e,t),vl(t),8192&r){if(c=null!==t.memoizedState,(t.stateNode.isHidden=c)&&!h&&0!==(1&t.mode))for(Js=t,h=t.child;null!==h;){for(d=Js=h;null!==Js;){switch(f=(p=Js).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:tl(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Cu(r,n,g)}}break;case 5:tl(p,p.return);break;case 22:if(null!==p.memoizedState){wl(d);continue}}null!==f?(f.return=p,Js=f):wl(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,s=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=mt("display",s))}catch(g){Cu(t,t.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Cu(t,t.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(e,t),vl(t),4&r&&ml(t);case 21:}}function vl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(sl(n)){var r=n;break t}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(dt(i,""),r.flags&=-33),cl(t,ll(t),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ul(t,ll(t),a);break;default:throw Error(o(161))}}catch(s){Cu(t,t.return,s)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function _l(t,e,n){Js=t,bl(t,e,n)}function bl(t,e,n){for(var r=0!==(1&t.mode);null!==Js;){var i=Js,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Zs;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ks;s=Zs;var u=Ks;if(Zs=a,(Ks=l)&&!u)for(Js=i;null!==Js;)l=(a=Js).child,22===a.tag&&null!==a.memoizedState?El(i):null!==l?(l.return=a,Js=l):El(i);for(;null!==o;)Js=o,bl(o,e,n),o=o.sibling;Js=i,Zs=s,Ks=u}xl(t)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Js=o):xl(t)}}function xl(t){for(;null!==Js;){var e=Js;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Ks||il(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Ks)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:yo(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&Bo(e,a,r);break;case 3:var s=e.updateQueue;if(null!==s){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Bo(e,s,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ve(d)}}}break;default:throw Error(o(163))}Ks||512&e.flags&&ol(e)}catch(p){Cu(e,e.return,p)}}if(e===t){Js=null;break}if(null!==(n=e.sibling)){n.return=e.return,Js=n;break}Js=e.return}}function wl(t){for(;null!==Js;){var e=Js;if(e===t){Js=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Js=n;break}Js=e.return}}function El(t){for(;null!==Js;){var e=Js;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{il(4,e)}catch(l){Cu(e,n,l)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(l){Cu(e,i,l)}}var o=e.return;try{ol(e)}catch(l){Cu(e,o,l)}break;case 5:var a=e.return;try{ol(e)}catch(l){Cu(e,a,l)}}}catch(l){Cu(e,e.return,l)}if(e===t){Js=null;break}var s=e.sibling;if(null!==s){s.return=e.return,Js=s;break}Js=e.return}}var Sl,Cl=Math.ceil,Tl=b.ReactCurrentDispatcher,Il=b.ReactCurrentOwner,kl=b.ReactCurrentBatchConfig,Al=0,Pl=null,Dl=null,Ml=0,Ol=0,Rl=Si(0),Nl=0,Ll=null,Fl=0,zl=0,Bl=0,jl=null,Ul=null,Vl=0,ql=1/0,Gl=null,Yl=!1,$l=null,Wl=null,Hl=!1,Xl=null,Zl=0,Kl=0,Ql=null,Jl=-1,tu=0;function eu(){return 0!==(6&Al)?Kt():-1!==Jl?Jl:Jl=Kt()}function nu(t){return 0===(1&t.mode)?1:0!==(2&Al)&&0!==Ml?Ml&-Ml:null!==go.transition?(0===tu&&(tu=me()),tu):0!==(t=_e)?t:t=void 0===(t=window.event)?16:Ze(t.type)}function ru(t,e,n,r){if(50<Kl)throw Kl=0,Ql=null,Error(o(185));ye(t,n,r),0!==(2&Al)&&t===Pl||(t===Pl&&(0===(2&Al)&&(zl|=n),4===Nl&&lu(t,Ml)),iu(t,r),1===n&&0===Al&&0===(1&e.mode)&&(ql=Kt()+500,Bi&&Vi()))}function iu(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ae(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=pe(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}(t,e);var r=de(t,t===Pl?Ml:0);if(0===r)null!==n&&Ht(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&Ht(n),1===e)0===t.tag?function(t){Bi=!0,Ui(t)}(uu.bind(null,t)):Ui(uu.bind(null,t)),ai((function(){0===(6&Al)&&Vi()})),n=null;else{switch(be(r)){case 1:n=Jt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=re}n=Pu(n,ou.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ou(t,e){if(Jl=-1,tu=0,0!==(6&Al))throw Error(o(327));var n=t.callbackNode;if(Eu()&&t.callbackNode!==n)return null;var r=de(t,t===Pl?Ml:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=yu(t,r);else{e=r;var i=Al;Al|=2;var a=mu();for(Pl===t&&Ml===e||(Gl=null,ql=Kt()+500,pu(t,e));;)try{_u();break}catch(l){fu(t,l)}wo(),Tl.current=a,Al=i,null!==Dl?e=0:(Pl=null,Ml=0,e=Nl)}if(0!==e){if(2===e&&(0!==(i=fe(t))&&(r=i,e=au(t,i))),1===e)throw n=Ll,pu(t,0),lu(t,r),iu(t,Kt()),n;if(6===e)lu(t,r);else{if(i=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=yu(t,r))&&(0!==(a=fe(t))&&(r=a,e=au(t,a))),1===e))throw n=Ll,pu(t,0),lu(t,r),iu(t,Kt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(o(345));case 2:case 5:wu(t,Ul,Gl);break;case 3:if(lu(t,r),(130023424&r)===r&&10<(e=Vl+500-Kt())){if(0!==de(t,0))break;if(((i=t.suspendedLanes)&r)!==r){eu(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ri(wu.bind(null,t,Ul,Gl),e);break}wu(t,Ul,Gl);break;case 4:if(lu(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ae(r);a=1<<s,(s=e[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Kt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){t.timeoutHandle=ri(wu.bind(null,t,Ul,Gl),r);break}wu(t,Ul,Gl);break;default:throw Error(o(329))}}}return iu(t,Kt()),t.callbackNode===n?ou.bind(null,t):null}function au(t,e){var n=jl;return t.current.memoizedState.isDehydrated&&(pu(t,e).flags|=256),2!==(t=yu(t,e))&&(e=Ul,Ul=n,null!==e&&su(e)),t}function su(t){null===Ul?Ul=t:Ul.push.apply(Ul,t)}function lu(t,e){for(e&=~Bl,e&=~zl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ae(e),r=1<<n;t[n]=-1,e&=~r}}function uu(t){if(0!==(6&Al))throw Error(o(327));Eu();var e=de(t,0);if(0===(1&e))return iu(t,Kt()),null;var n=yu(t,e);if(0!==t.tag&&2===n){var r=fe(t);0!==r&&(e=r,n=au(t,r))}if(1===n)throw n=Ll,pu(t,0),lu(t,e),iu(t,Kt()),n;if(6===n)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wu(t,Ul,Gl),iu(t,Kt()),null}function cu(t,e){var n=Al;Al|=1;try{return t(e)}finally{0===(Al=n)&&(ql=Kt()+500,Bi&&Vi())}}function hu(t){null!==Xl&&0===Xl.tag&&0===(6&Al)&&Eu();var e=Al;Al|=1;var n=kl.transition,r=_e;try{if(kl.transition=null,_e=1,t)return t()}finally{_e=r,kl.transition=n,0===(6&(Al=e))&&Vi()}}function du(){Ol=Rl.current,Ci(Rl)}function pu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ii(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(eo(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:oa(),Ci(Ai),Ci(ki),ha();break;case 5:sa(r);break;case 4:oa();break;case 13:case 19:Ci(la);break;case 10:Eo(r.type._context);break;case 22:case 23:du()}n=n.return}if(Pl=t,Dl=t=Ru(t.current,null),Ml=Ol=e,Nl=0,Ll=null,Bl=zl=Fl=0,Ul=jl=null,null!==Io){for(e=0;e<Io.length;e++)if(null!==(r=(n=Io[e]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Io=null}return t}function fu(t,e){for(;;){var n=Dl;try{if(wo(),da.current=as,va){for(var r=ma.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}va=!1}if(fa=0,ya=ga=ma=null,_a=!1,ba=0,Il.current=null,null===n||null===n.return){Nl=1,Ll=e,Dl=null;break}t:{var a=t,s=n.return,l=n,u=e;if(e=Ml,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ys(s);if(null!==f){f.flags&=-257,vs(f,s,l,0,e),1&f.mode&&gs(a,c,e),u=c;var m=(e=f).updateQueue;if(null===m){var g=new Set;g.add(u),e.updateQueue=g}else m.add(u);break t}if(0===(1&e)){gs(a,c,e),gu();break t}u=Error(o(426))}else if(io&&1&l.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),vs(y,s,l,0,e),mo(cs(u,l));break t}}a=u=cs(u,l),4!==Nl&&(Nl=2),null===jl?jl=[a]:jl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,Fo(a,fs(0,u,e));break t;case 1:l=u;var v=a.type,_=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Wl||!Wl.has(_)))){a.flags|=65536,e&=-e,a.lanes|=e,Fo(a,ms(a,l,e));break t}}a=a.return}while(null!==a)}xu(n)}catch(b){e=b,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function mu(){var t=Tl.current;return Tl.current=as,null===t?as:t}function gu(){0!==Nl&&3!==Nl&&2!==Nl||(Nl=4),null===Pl||0===(268435455&Fl)&&0===(268435455&zl)||lu(Pl,Ml)}function yu(t,e){var n=Al;Al|=2;var r=mu();for(Pl===t&&Ml===e||(Gl=null,pu(t,e));;)try{vu();break}catch(i){fu(t,i)}if(wo(),Al=n,Tl.current=r,null!==Dl)throw Error(o(261));return Pl=null,Ml=0,Nl}function vu(){for(;null!==Dl;)bu(Dl)}function _u(){for(;null!==Dl&&!Xt();)bu(Dl)}function bu(t){var e=Sl(t.alternate,t,Ol);t.memoizedProps=t.pendingProps,null===e?xu(t):Dl=e,Il.current=null}function xu(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Hs(n,e,Ol)))return void(Dl=n)}else{if(null!==(n=Xs(n,e)))return n.flags&=32767,void(Dl=n);if(null===t)return Nl=6,void(Dl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Dl=e);Dl=e=t}while(null!==e);0===Nl&&(Nl=5)}function wu(t,e,n){var r=_e,i=kl.transition;try{kl.transition=null,_e=1,function(t,e,n,r){do{Eu()}while(null!==Xl);if(0!==(6&Al))throw Error(o(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ae(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}(t,a),t===Pl&&(Dl=Pl=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hl||(Hl=!0,Pu(ee,(function(){return Eu(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=kl.transition,kl.transition=null;var s=_e;_e=1;var l=Al;Al|=4,Il.current=null,function(t,e){if(ti=Ge,pr(t=dr())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break t}var s=0,l=-1,u=-1,c=0,h=0,d=t,p=null;e:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==a||0!==r&&3!==d.nodeType||(u=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===t)break e;if(p===n&&++c===i&&(l=s),p===a&&++h===r&&(u=s),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:t,selectionRange:n},Ge=!1,Js=e;null!==Js;)if(t=(e=Js).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Js=t;else for(;null!==Js;){e=Js;try{var m=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:yo(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=e.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(x){Cu(e,e.return,x)}if(null!==(t=e.sibling)){t.return=e.return,Js=t;break}Js=e.return}m=nl,nl=!1}(t,n),yl(n,t),fr(ei),Ge=!!ti,ei=ti=null,t.current=n,_l(n,t,i),Zt(),Al=l,_e=s,kl.transition=a}else t.current=n;if(Hl&&(Hl=!1,Xl=t,Zl=i),a=t.pendingLanes,0===a&&(Wl=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),iu(t,Kt()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Yl)throw Yl=!1,t=$l,$l=null,t;0!==(1&Zl)&&0!==t.tag&&Eu(),a=t.pendingLanes,0!==(1&a)?t===Ql?Kl++:(Kl=0,Ql=t):Kl=0,Vi()}(t,e,n,r)}finally{kl.transition=i,_e=r}return null}function Eu(){if(null!==Xl){var t=be(Zl),e=kl.transition,n=_e;try{if(kl.transition=null,_e=16>t?16:t,null===Xl)var r=!1;else{if(t=Xl,Xl=null,Zl=0,0!==(6&Al))throw Error(o(331));var i=Al;for(Al|=4,Js=t.current;null!==Js;){var a=Js,s=a.child;if(0!==(16&Js.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Js=c;null!==Js;){var h=Js;switch(h.tag){case 0:case 11:case 15:rl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Js=d;else for(;null!==Js;){var p=(h=Js).sibling,f=h.return;if(al(h),h===c){Js=null;break}if(null!==p){p.return=f,Js=p;break}Js=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Js=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Js=s;else t:for(;null!==Js;){if(0!==(2048&(a=Js).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Js=v;break t}Js=a.return}}var _=t.current;for(Js=_;null!==Js;){var b=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Js=b;else t:for(s=_;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Cu(l,l.return,w)}if(l===s){Js=null;break t}var x=l.sibling;if(null!==x){x.return=l.return,Js=x;break t}Js=l.return}}if(Al=i,Vi(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(ie,t)}catch(w){}r=!0}return r}finally{_e=n,kl.transition=e}}return!1}function Su(t,e,n){t=No(t,e=fs(0,e=cs(n,e),1),1),e=eu(),null!==t&&(ye(t,1,e),iu(t,e))}function Cu(t,e,n){if(3===t.tag)Su(t,t,n);else for(;null!==e;){if(3===e.tag){Su(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){e=No(e,t=ms(e,t=cs(n,t),1),1),t=eu(),null!==e&&(ye(e,1,t),iu(e,t));break}}e=e.return}}function Tu(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=eu(),t.pingedLanes|=t.suspendedLanes&n,Pl===t&&(Ml&n)===n&&(4===Nl||3===Nl&&(130023424&Ml)===Ml&&500>Kt()-Vl?pu(t,0):Bl|=n),iu(t,e)}function Iu(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ce,0===(130023424&(ce<<=1))&&(ce=4194304)));var n=eu();null!==(t=Po(t,e))&&(ye(t,e,n),iu(t,n))}function ku(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Iu(t,n)}function Au(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(e),Iu(t,n)}function Pu(t,e){return Wt(t,e)}function Du(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mu(t,e,n,r){return new Du(t,e,n,r)}function Ou(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Ru(t,e){var n=t.alternate;return null===n?((n=Mu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nu(t,e,n,r,i,a){var s=2;if(r=t,"function"===typeof t)Ou(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case E:return Lu(n.children,i,a,e);case S:s=8,i|=8;break;case C:return(t=Mu(12,n,e,2|i)).elementType=C,t.lanes=a,t;case A:return(t=Mu(13,n,e,i)).elementType=A,t.lanes=a,t;case P:return(t=Mu(19,n,e,i)).elementType=P,t.lanes=a,t;case O:return Fu(n,i,a,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case T:s=10;break t;case I:s=9;break t;case k:s=11;break t;case D:s=14;break t;case M:s=16,r=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Mu(s,n,e,i)).elementType=t,e.type=r,e.lanes=a,e}function Lu(t,e,n,r){return(t=Mu(7,t,r,e)).lanes=n,t}function Fu(t,e,n,r){return(t=Mu(22,t,r,e)).elementType=O,t.lanes=n,t.stateNode={isHidden:!1},t}function zu(t,e,n){return(t=Mu(6,t,null,e)).lanes=n,t}function Bu(t,e,n){return(e=Mu(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ju(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ge(0),this.expirationTimes=ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uu(t,e,n,r,i,o,a,s,l){return t=new ju(t,e,n,s,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Mu(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mo(o),t}function Vu(t){if(!t)return Ii;t:{if(Vt(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Mi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var n=t.type;if(Mi(n))return Ni(t,n,e)}return e}function qu(t,e,n,r,i,o,a,s,l){return(t=Uu(n,r,!0,t,0,o,0,s,l)).context=Vu(null),n=t.current,(o=Ro(r=eu(),i=nu(n))).callback=void 0!==e&&null!==e?e:null,No(n,o,i),t.current.lanes=i,ye(t,i,r),iu(t,r),t}function Gu(t,e,n,r){var i=e.current,o=eu(),a=nu(i);return n=Vu(n),null===e.context?e.context=n:e.pendingContext=n,(e=Ro(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=No(i,e,a))&&(ru(t,i,a,o),Lo(t,i,a)),a}function Yu(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function $u(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Wu(t,e){$u(t,e),(t=t.alternate)&&$u(t,e)}Sl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ai.current)bs=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return bs=!1,function(t,e,n){switch(e.tag){case 3:Ps(e),fo();break;case 5:aa(e);break;case 1:Mi(e.type)&&Li(e);break;case 4:ia(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ti(vo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Ti(la,1&la.current),e.flags|=128,null):0!==(n&e.child.childLanes)?zs(t,e,n):(Ti(la,1&la.current),null!==(t=Ys(t,e,n))?t.sibling:null);Ti(la,1&la.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(128&t.flags)){if(r)return qs(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(la,la.current),r)break;return null;case 22:case 23:return e.lanes=0,Cs(t,e,n)}return Ys(t,e,n)}(t,e,n);bs=0!==(131072&t.flags)}else bs=!1,io&&0!==(1048576&e.flags)&&Ji(e,$i,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gs(t,e),t=e.pendingProps;var i=Di(e,ki.current);Co(e,n),i=Sa(null,e,r,t,i,n);var a=Ca();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mi(r)?(a=!0,Li(e)):a=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Mo(e),i.updater=Vo,e.stateNode=i,i._reactInternals=e,$o(e,r,t,n),e=As(null,e,r,!0,a,n)):(e.tag=0,io&&a&&to(e),xs(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Gs(t,e),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"===typeof t)return Ou(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===k)return 11;if(t===D)return 14}return 2}(r),t=yo(r,t),i){case 0:e=Is(null,e,r,t,n);break t;case 1:e=ks(null,e,r,t,n);break t;case 11:e=ws(null,e,r,t,n);break t;case 14:e=Es(null,e,r,yo(r.type,t),n);break t}throw Error(o(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,Is(t,e,r,i=e.elementType===r?i:yo(r,i),n);case 1:return r=e.type,i=e.pendingProps,ks(t,e,r,i=e.elementType===r?i:yo(r,i),n);case 3:t:{if(Ps(e),null===t)throw Error(o(387));r=e.pendingProps,i=(a=e.memoizedState).element,Oo(t,e),zo(e,r,null,n);var s=e.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=Ds(t,e,r,n,i=cs(Error(o(423)),e));break t}if(r!==i){e=Ds(t,e,r,n,i=cs(Error(o(424)),e));break t}for(ro=ui(e.stateNode.containerInfo.firstChild),no=e,io=!0,oo=null,n=Qo(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){e=Ys(t,e,n);break t}xs(t,e,r,n)}e=e.child}return e;case 5:return aa(e),null===t&&uo(e),r=e.type,i=e.pendingProps,a=null!==t?t.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(e.flags|=32),Ts(t,e),xs(t,e,s,n),e.child;case 6:return null===t&&uo(e),null;case 13:return zs(t,e,n);case 4:return ia(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Ko(e,null,r,n):xs(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,ws(t,e,r,i=e.elementType===r?i:yo(r,i),n);case 7:return xs(t,e,e.pendingProps,n),e.child;case 8:case 12:return xs(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,Ti(vo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ai.current){e=Ys(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=Ro(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),So(a.return,n,e),l.lanes|=n;break}u=u.next}}else if(10===a.tag)s=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),So(s,n,e),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Co(e,n),r=r(i=To(i)),e.flags|=1,xs(t,e,r,n),e.child;case 14:return i=yo(r=e.type,e.pendingProps),Es(t,e,r,i=yo(r.type,i),n);case 15:return Ss(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yo(r,i),Gs(t,e),e.tag=1,Mi(r)?(t=!0,Li(e)):t=!1,Co(e,n),Go(e,r,i),$o(e,r,i,n),As(null,e,r,!0,t,n);case 19:return qs(t,e,n);case 22:return Cs(t,e,n)}throw Error(o(156,e.tag))};var Hu="function"===typeof reportError?reportError:function(t){console.error(t)};function Xu(t){this._internalRoot=t}function Zu(t){this._internalRoot=t}function Ku(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Qu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Ju(){}function tc(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var t=Yu(a);s.call(t)}}Gu(e,a,t,i)}else a=function(t,e,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var t=Yu(a);o.call(t)}}var a=qu(e,r,t,0,null,!1,0,"",Ju);return t._reactRootContainer=a,t[fi]=a.current,Vr(8===t.nodeType?t.parentNode:t),hu(),a}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof r){var s=r;r=function(){var t=Yu(l);s.call(t)}}var l=Uu(t,0,!1,null,0,!1,0,"",Ju);return t._reactRootContainer=l,t[fi]=l.current,Vr(8===t.nodeType?t.parentNode:t),hu((function(){Gu(e,l,n,r)})),l}(n,e,t,i,r);return Yu(a)}Zu.prototype.render=Xu.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));Gu(t,e,null,null)},Zu.prototype.unmount=Xu.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;hu((function(){Gu(null,t,null,null)})),e[fi]=null}},Zu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Se();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Oe.length&&0!==e&&e<Oe[n].priority;n++);Oe.splice(n,0,t),0===n&&Fe(t)}},xe=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ve(e,1|n),iu(e,Kt()),0===(6&Al)&&(ql=Kt()+500,Vi()))}break;case 13:hu((function(){var e=Po(t,1);if(null!==e){var n=eu();ru(e,t,1,n)}})),Wu(t,1)}},we=function(t){if(13===t.tag){var e=Po(t,134217728);if(null!==e)ru(e,t,134217728,eu());Wu(t,134217728)}},Ee=function(t){if(13===t.tag){var e=nu(t),n=Po(t,e);if(null!==n)ru(n,t,e,eu());Wu(t,e)}},Se=function(){return _e},Ce=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}},wt=function(t,e,n){switch(e){case"input":if(Q(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=xi(r);if(!i)throw Error(o(90));W(r),Q(r,i)}}}break;case"textarea":ot(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},kt=cu,At=hu;var ec={usingClientEntryPoint:!1,Events:[_i,bi,xi,Tt,It,cu]},nc={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Yt(t))?null:t.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{ie=ic.inject(rc),oe=ic}catch(ct){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ku(e))throw Error(o(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Ku(t))throw Error(o(299));var n=!1,r="",i=Hu;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=Uu(t,1,!1,null,0,n,0,r,i),t[fi]=e.current,Vr(8===t.nodeType?t.parentNode:t),new Xu(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=Yt(e))?null:t.stateNode},e.flushSync=function(t){return hu(t)},e.hydrate=function(t,e,n){if(!Qu(e))throw Error(o(200));return tc(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Ku(t))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Hu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),e=qu(e,null,t,1,null!=n?n:null,i,0,a,s),t[fi]=e.current,Vr(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Zu(e)},e.render=function(t,e,n){if(!Qu(e))throw Error(o(200));return tc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Qu(t))throw Error(o(40));return!!t._reactRootContainer&&(hu((function(){tc(null,null,t,!1,(function(){t._reactRootContainer=null,t[fi]=null}))})),!0)},e.unstable_batchedUpdates=cu,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Qu(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return tc(t,e,n,!1,r)},e.version="18.2.0-next-9e3b772b8-20220608"},1250:(t,e,n)=>{"use strict";var r=n(4164);e.createRoot=r.createRoot,e.hydrateRoot=r.hydrateRoot},4164:(t,e,n)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(4463)},77:t=>{"use strict";var e=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty,i="undefined"!==typeof Element;function o(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){var s,l,u,c=e(t),h=e(a);if(c&&h){if((l=t.length)!=a.length)return!1;for(s=l;0!==s--;)if(!o(t[s],a[s]))return!1;return!0}if(c!=h)return!1;var d=t instanceof Date,p=a instanceof Date;if(d!=p)return!1;if(d&&p)return t.getTime()==a.getTime();var f=t instanceof RegExp,m=a instanceof RegExp;if(f!=m)return!1;if(f&&m)return t.toString()==a.toString();var g=n(t);if((l=g.length)!==n(a).length)return!1;for(s=l;0!==s--;)if(!r.call(a,g[s]))return!1;if(i&&t instanceof Element&&a instanceof Element)return t===a;for(s=l;0!==s--;)if(("_owner"!==(u=g[s])||!t.$$typeof)&&!o(t[u],a[u]))return!1;return!0}return t!==t&&a!==a}t.exports=function(t,e){try{return o(t,e)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||-2146828260===n.number)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}}},11:(t,e,n)=>{"use strict";n.r(e),n.d(e,{IGNORE_CLASS_NAME:()=>m,default:()=>y});var r=n(2791),i=n(4164);function o(t,e){return o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},o(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e,n){return t===e||(t.correspondingElement?t.correspondingElement.classList.contains(n):t.classList.contains(n))}var l=function(){if("undefined"!==typeof window&&"function"===typeof window.addEventListener){var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}}),n=function(){};return window.addEventListener("testPassiveEventSupport",n,e),window.removeEventListener("testPassiveEventSupport",n,e),t}};var u,c,h=(void 0===u&&(u=0),function(){return++u}),d={},p={},f=["touchstart","touchmove"],m="ignore-react-onclickoutside";function g(t,e){var n=null;return-1!==f.indexOf(e)&&c&&(n={passive:!t.props.preventDefault}),n}const y=function(t,e){var n,u,f=t.displayName||t.name||"Component";return u=n=function(n){var u,m;function y(t){var r;return(r=n.call(this,t)||this).__outsideClickHandler=function(t){if("function"!==typeof r.__clickOutsideHandlerProp){var e=r.getInstance();if("function"!==typeof e.props.handleClickOutside){if("function"!==typeof e.handleClickOutside)throw new Error("WrappedComponent: "+f+" lacks a handleClickOutside(event) function for processing outside click events.");e.handleClickOutside(t)}else e.props.handleClickOutside(t)}else r.__clickOutsideHandlerProp(t)},r.__getComponentNode=function(){var t=r.getInstance();return e&&"function"===typeof e.setClickOutsideRef?e.setClickOutsideRef()(t):"function"===typeof t.setClickOutsideRef?t.setClickOutsideRef():(0,i.findDOMNode)(t)},r.enableOnClickOutside=function(){if("undefined"!==typeof document&&!p[r._uid]){"undefined"===typeof c&&(c=l()),p[r._uid]=!0;var t=r.props.eventTypes;t.forEach||(t=[t]),d[r._uid]=function(t){var e;null!==r.componentNode&&(r.props.preventDefault&&t.preventDefault(),r.props.stopPropagation&&t.stopPropagation(),r.props.excludeScrollbar&&(e=t,document.documentElement.clientWidth<=e.clientX||document.documentElement.clientHeight<=e.clientY)||function(t,e,n){if(t===e)return!0;for(;t.parentNode||t.host;){if(t.parentNode&&s(t,e,n))return!0;t=t.parentNode||t.host}return t}(t.composed&&t.composedPath&&t.composedPath().shift()||t.target,r.componentNode,r.props.outsideClickIgnoreClass)===document&&r.__outsideClickHandler(t))},t.forEach((function(t){document.addEventListener(t,d[r._uid],g(a(r),t))}))}},r.disableOnClickOutside=function(){delete p[r._uid];var t=d[r._uid];if(t&&"undefined"!==typeof document){var e=r.props.eventTypes;e.forEach||(e=[e]),e.forEach((function(e){return document.removeEventListener(e,t,g(a(r),e))})),delete d[r._uid]}},r.getRef=function(t){return r.instanceRef=t},r._uid=h(),r}m=n,(u=y).prototype=Object.create(m.prototype),u.prototype.constructor=u,o(u,m);var v=y.prototype;return v.getInstance=function(){if(t.prototype&&!t.prototype.isReactComponent)return this;var e=this.instanceRef;return e.getInstance?e.getInstance():e},v.componentDidMount=function(){if("undefined"!==typeof document&&document.createElement){var t=this.getInstance();if(e&&"function"===typeof e.handleClickOutside&&(this.__clickOutsideHandlerProp=e.handleClickOutside(t),"function"!==typeof this.__clickOutsideHandlerProp))throw new Error("WrappedComponent: "+f+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),this.props.disableOnClickOutside||this.enableOnClickOutside()}},v.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},v.componentWillUnmount=function(){this.disableOnClickOutside()},v.render=function(){var e=this.props;e.excludeScrollbar;var n=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(e,["excludeScrollbar"]);return t.prototype&&t.prototype.isReactComponent?n.ref=this.getRef:n.wrappedRef=this.getRef,n.disableOnClickOutside=this.disableOnClickOutside,n.enableOnClickOutside=this.enableOnClickOutside,(0,r.createElement)(t,n)},y}(r.Component),n.displayName="OnClickOutside("+f+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:e&&e.excludeScrollbar||!1,outsideClickIgnoreClass:m,preventDefault:!1,stopPropagation:!1},n.getClass=function(){return t.getClass?t.getClass():t},u}},2145:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Manager:()=>a,Popper:()=>Lt,Reference:()=>Bt,usePopper:()=>Mt});var r=n(2791),i=r.createContext(),o=r.createContext();function a(t){var e=t.children,n=r.useState(null),a=n[0],s=n[1],l=r.useRef(!1);r.useEffect((function(){return function(){l.current=!0}}),[]);var u=r.useCallback((function(t){l.current||s(t)}),[]);return r.createElement(i.Provider,{value:a},r.createElement(o.Provider,{value:u},e))}var s=function(t){return Array.isArray(t)?t[0]:t},l=function(t){if("function"===typeof t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,n)}},u=function(t,e){if("function"===typeof t)return l(t,e);null!=t&&(t.current=e)},c=function(t){return t.reduce((function(t,e){var n=e[0],r=e[1];return t[n]=r,t}),{})},h="undefined"!==typeof window&&window.document&&window.document.createElement?r.useLayoutEffect:r.useEffect,d=n(4164);function p(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function f(t){return t instanceof p(t).Element||t instanceof Element}function m(t){return t instanceof p(t).HTMLElement||t instanceof HTMLElement}function g(t){return"undefined"!==typeof ShadowRoot&&(t instanceof p(t).ShadowRoot||t instanceof ShadowRoot)}var y=Math.max,v=Math.min,_=Math.round;function b(){var t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function x(){return!/^((?!chrome|android).)*safari/i.test(b())}function w(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&m(t)&&(i=t.offsetWidth>0&&_(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&_(r.height)/t.offsetHeight||1);var a=(f(t)?p(t):window).visualViewport,s=!x()&&n,l=(r.left+(s&&a?a.offsetLeft:0))/i,u=(r.top+(s&&a?a.offsetTop:0))/o,c=r.width/i,h=r.height/o;return{width:c,height:h,top:u,right:l+c,bottom:u+h,left:l,x:l,y:u}}function E(t){var e=p(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function S(t){return t?(t.nodeName||"").toLowerCase():null}function C(t){return((f(t)?t.ownerDocument:t.document)||window.document).documentElement}function T(t){return w(C(t)).left+E(t).scrollLeft}function I(t){return p(t).getComputedStyle(t)}function k(t){var e=I(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function A(t,e,n){void 0===n&&(n=!1);var r=m(e),i=m(e)&&function(t){var e=t.getBoundingClientRect(),n=_(e.width)/t.offsetWidth||1,r=_(e.height)/t.offsetHeight||1;return 1!==n||1!==r}(e),o=C(e),a=w(t,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==S(e)||k(o))&&(s=function(t){return t!==p(t)&&m(t)?{scrollLeft:(e=t).scrollLeft,scrollTop:e.scrollTop}:E(t);var e}(e)),m(e)?((l=w(e,!0)).x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=T(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function P(t){var e=w(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function D(t){return"html"===S(t)?t:t.assignedSlot||t.parentNode||(g(t)?t.host:null)||C(t)}function M(t){return["html","body","#document"].indexOf(S(t))>=0?t.ownerDocument.body:m(t)&&k(t)?t:M(D(t))}function O(t,e){var n;void 0===e&&(e=[]);var r=M(t),i=r===(null==(n=t.ownerDocument)?void 0:n.body),o=p(r),a=i?[o].concat(o.visualViewport||[],k(r)?r:[]):r,s=e.concat(a);return i?s:s.concat(O(D(a)))}function R(t){return["table","td","th"].indexOf(S(t))>=0}function N(t){return m(t)&&"fixed"!==I(t).position?t.offsetParent:null}function L(t){for(var e=p(t),n=N(t);n&&R(n)&&"static"===I(n).position;)n=N(n);return n&&("html"===S(n)||"body"===S(n)&&"static"===I(n).position)?e:n||function(t){var e=/firefox/i.test(b());if(/Trident/i.test(b())&&m(t)&&"fixed"===I(t).position)return null;var n=D(t);for(g(n)&&(n=n.host);m(n)&&["html","body"].indexOf(S(n))<0;){var r=I(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||e&&"filter"===r.willChange||e&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(t)||e}var F="top",z="bottom",B="right",j="left",U="auto",V=[F,z,B,j],q="start",G="end",Y="clippingParents",$="viewport",W="popper",H="reference",X=V.reduce((function(t,e){return t.concat([e+"-"+q,e+"-"+G])}),[]),Z=[].concat(V,[U]).reduce((function(t,e){return t.concat([e,e+"-"+q,e+"-"+G])}),[]),K=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Q(t){var e=new Map,n=new Set,r=[];function i(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var r=e.get(t);r&&i(r)}})),r.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||i(t)})),r}function J(t){var e;return function(){return e||(e=new Promise((function(n){Promise.resolve().then((function(){e=void 0,n(t())}))}))),e}}var tt={placement:"bottom",modifiers:[],strategy:"absolute"};function et(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"===typeof t.getBoundingClientRect)}))}function nt(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,r=void 0===n?[]:n,i=e.defaultOptions,o=void 0===i?tt:i;return function(t,e,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},tt,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},a=[],s=!1,l={state:i,setOptions:function(n){var s="function"===typeof n?n(i.options):n;u(),i.options=Object.assign({},o,i.options,s),i.scrollParents={reference:f(t)?O(t):t.contextElement?O(t.contextElement):[],popper:O(e)};var c=function(t){var e=Q(t);return K.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}(function(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=c.filter((function(t){return t.enabled})),i.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,r=void 0===n?{}:n,o=t.effect;if("function"===typeof o){var s=o({state:i,name:e,instance:l,options:r}),u=function(){};a.push(s||u)}})),l.update()},forceUpdate:function(){if(!s){var t=i.elements,e=t.reference,n=t.popper;if(et(e,n)){i.rects={reference:A(e,L(n),"fixed"===i.options.strategy),popper:P(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(t){return i.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],a=o.fn,u=o.options,c=void 0===u?{}:u,h=o.name;"function"===typeof a&&(i=a({state:i,options:c,name:h,instance:l})||i)}else i.reset=!1,r=-1}}},update:J((function(){return new Promise((function(t){l.forceUpdate(),t(i)}))})),destroy:function(){u(),s=!0}};if(!et(t,e))return l;function u(){a.forEach((function(t){return t()})),a=[]}return l.setOptions(n).then((function(t){!s&&n.onFirstUpdate&&n.onFirstUpdate(t)})),l}}var rt={passive:!0};function it(t){return t.split("-")[0]}function ot(t){return t.split("-")[1]}function at(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function st(t){var e,n=t.reference,r=t.element,i=t.placement,o=i?it(i):null,a=i?ot(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case F:e={x:s,y:n.y-r.height};break;case z:e={x:s,y:n.y+n.height};break;case B:e={x:n.x+n.width,y:l};break;case j:e={x:n.x-r.width,y:l};break;default:e={x:n.x,y:n.y}}var u=o?at(o):null;if(null!=u){var c="y"===u?"height":"width";switch(a){case q:e[u]=e[u]-(n[c]/2-r[c]/2);break;case G:e[u]=e[u]+(n[c]/2-r[c]/2)}}return e}var lt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ut(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,a=t.offsets,s=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,h=t.isFixed,d=a.x,f=void 0===d?0:d,m=a.y,g=void 0===m?0:m,y="function"===typeof c?c({x:f,y:g}):{x:f,y:g};f=y.x,g=y.y;var v=a.hasOwnProperty("x"),b=a.hasOwnProperty("y"),x=j,w=F,E=window;if(u){var S=L(n),T="clientHeight",k="clientWidth";if(S===p(n)&&"static"!==I(S=C(n)).position&&"absolute"===s&&(T="scrollHeight",k="scrollWidth"),i===F||(i===j||i===B)&&o===G)w=z,g-=(h&&S===E&&E.visualViewport?E.visualViewport.height:S[T])-r.height,g*=l?1:-1;if(i===j||(i===F||i===z)&&o===G)x=B,f-=(h&&S===E&&E.visualViewport?E.visualViewport.width:S[k])-r.width,f*=l?1:-1}var A,P=Object.assign({position:s},u&&lt),D=!0===c?function(t){var e=t.x,n=t.y,r=window.devicePixelRatio||1;return{x:_(e*r)/r||0,y:_(n*r)/r||0}}({x:f,y:g}):{x:f,y:g};return f=D.x,g=D.y,l?Object.assign({},P,((A={})[w]=b?"0":"",A[x]=v?"0":"",A.transform=(E.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",A)):Object.assign({},P,((e={})[w]=b?g+"px":"",e[x]=v?f+"px":"",e.transform="",e))}const ct={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=void 0===i?[0,0]:i,a=Z.reduce((function(t,n){return t[n]=function(t,e,n){var r=it(t),i=[j,F].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},e,{placement:t})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[j,B].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,e.rects,o),t}),{}),s=a[e.placement],l=s.x,u=s.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=a}};var ht={left:"right",right:"left",bottom:"top",top:"bottom"};function dt(t){return t.replace(/left|right|bottom|top/g,(function(t){return ht[t]}))}var pt={start:"end",end:"start"};function ft(t){return t.replace(/start|end/g,(function(t){return pt[t]}))}function mt(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&g(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function gt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function yt(t,e,n){return e===$?gt(function(t,e){var n=p(t),r=C(t),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;var u=x();(u||!u&&"fixed"===e)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s+T(t),y:l}}(t,n)):f(e)?function(t,e){var n=w(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):gt(function(t){var e,n=C(t),r=E(t),i=null==(e=t.ownerDocument)?void 0:e.body,o=y(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=y(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+T(t),l=-r.scrollTop;return"rtl"===I(i||n).direction&&(s+=y(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}(C(t)))}function vt(t,e,n,r){var i="clippingParents"===e?function(t){var e=O(D(t)),n=["absolute","fixed"].indexOf(I(t).position)>=0&&m(t)?L(t):t;return f(n)?e.filter((function(t){return f(t)&&mt(t,n)&&"body"!==S(t)})):[]}(t):[].concat(e),o=[].concat(i,[n]),a=o[0],s=o.reduce((function(e,n){var i=yt(t,n,r);return e.top=y(i.top,e.top),e.right=v(i.right,e.right),e.bottom=v(i.bottom,e.bottom),e.left=y(i.left,e.left),e}),yt(t,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function _t(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function bt(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function xt(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=void 0===r?t.placement:r,o=n.strategy,a=void 0===o?t.strategy:o,s=n.boundary,l=void 0===s?Y:s,u=n.rootBoundary,c=void 0===u?$:u,h=n.elementContext,d=void 0===h?W:h,p=n.altBoundary,m=void 0!==p&&p,g=n.padding,y=void 0===g?0:g,v=_t("number"!==typeof y?y:bt(y,V)),_=d===W?H:W,b=t.rects.popper,x=t.elements[m?_:d],E=vt(f(x)?x:x.contextElement||C(t.elements.popper),l,c,a),S=w(t.elements.reference),T=st({reference:S,element:b,strategy:"absolute",placement:i}),I=gt(Object.assign({},b,T)),k=d===W?I:S,A={top:E.top-k.top+v.top,bottom:k.bottom-E.bottom+v.bottom,left:E.left-k.left+v.left,right:k.right-E.right+v.right},P=t.modifiersData.offset;if(d===W&&P){var D=P[i];Object.keys(A).forEach((function(t){var e=[B,z].indexOf(t)>=0?1:-1,n=[F,z].indexOf(t)>=0?"y":"x";A[t]+=D[n]*e}))}return A}function wt(t,e,n){return y(t,v(e,n))}const Et={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,h=n.padding,d=n.tether,p=void 0===d||d,f=n.tetherOffset,m=void 0===f?0:f,g=xt(e,{boundary:l,rootBoundary:u,padding:h,altBoundary:c}),_=it(e.placement),b=ot(e.placement),x=!b,w=at(_),E="x"===w?"y":"x",S=e.modifiersData.popperOffsets,C=e.rects.reference,T=e.rects.popper,I="function"===typeof m?m(Object.assign({},e.rects,{placement:e.placement})):m,k="number"===typeof I?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),A=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,D={x:0,y:0};if(S){if(o){var M,O="y"===w?F:j,R="y"===w?z:B,N="y"===w?"height":"width",U=S[w],V=U+g[O],G=U-g[R],Y=p?-T[N]/2:0,$=b===q?C[N]:T[N],W=b===q?-T[N]:-C[N],H=e.elements.arrow,X=p&&H?P(H):{width:0,height:0},Z=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},K=Z[O],Q=Z[R],J=wt(0,C[N],X[N]),tt=x?C[N]/2-Y-J-K-k.mainAxis:$-J-K-k.mainAxis,et=x?-C[N]/2+Y+J+Q+k.mainAxis:W+J+Q+k.mainAxis,nt=e.elements.arrow&&L(e.elements.arrow),rt=nt?"y"===w?nt.clientTop||0:nt.clientLeft||0:0,st=null!=(M=null==A?void 0:A[w])?M:0,lt=U+et-st,ut=wt(p?v(V,U+tt-st-rt):V,U,p?y(G,lt):G);S[w]=ut,D[w]=ut-U}if(s){var ct,ht="x"===w?F:j,dt="x"===w?z:B,pt=S[E],ft="y"===E?"height":"width",mt=pt+g[ht],gt=pt-g[dt],yt=-1!==[F,j].indexOf(_),vt=null!=(ct=null==A?void 0:A[E])?ct:0,_t=yt?mt:pt-C[ft]-T[ft]-vt+k.altAxis,bt=yt?pt+C[ft]+T[ft]-vt-k.altAxis:gt,Et=p&&yt?function(t,e,n){var r=wt(t,e,n);return r>n?n:r}(_t,pt,bt):wt(p?_t:mt,pt,p?bt:gt);S[E]=Et,D[E]=Et-pt}e.modifiersData[r]=D}},requiresIfExists:["offset"]};var St=function(t,e){return _t("number"!==typeof(t="function"===typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:bt(t,V))};const Ct={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=it(n.placement),l=at(s),u=[j,B].indexOf(s)>=0?"height":"width";if(o&&a){var c=St(i.padding,n),h=P(o),d="y"===l?F:j,p="y"===l?z:B,f=n.rects.reference[u]+n.rects.reference[l]-a[l]-n.rects.popper[u],m=a[l]-n.rects.reference[l],g=L(o),y=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,v=f/2-m/2,_=c[d],b=y-h[u]-c[p],x=y/2-h[u]/2+v,w=wt(_,x,b),E=l;n.modifiersData[r]=((e={})[E]=w,e.centerOffset=w-x,e)}},effect:function(t){var e=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=e.elements.popper.querySelector(r)))&&mt(e.elements.popper,r)&&(e.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Tt(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function It(t){return[F,B,z,j].some((function(e){return t[e]>=0}))}var kt=nt({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=void 0===i||i,a=r.resize,s=void 0===a||a,l=p(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&u.forEach((function(t){t.addEventListener("scroll",n.update,rt)})),s&&l.addEventListener("resize",n.update,rt),function(){o&&u.forEach((function(t){t.removeEventListener("scroll",n.update,rt)})),s&&l.removeEventListener("resize",n.update,rt)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=st({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,u={placement:it(e.placement),variation:ot(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,ut(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,ut(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},i=e.elements[t];m(i)&&S(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(t){var e=r[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var r=e.elements[t],i=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});m(r)&&S(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(t){r.removeAttribute(t)})))}))}},requires:["computeStyles"]},ct,{name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,u=n.padding,c=n.boundary,h=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=e.options.placement,y=it(g),v=l||(y===g||!f?[dt(g)]:function(t){if(it(t)===U)return[];var e=dt(t);return[ft(t),e,ft(e)]}(g)),_=[g].concat(v).reduce((function(t,n){return t.concat(it(n)===U?function(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,u=void 0===l?Z:l,c=ot(r),h=c?s?X:X.filter((function(t){return ot(t)===c})):V,d=h.filter((function(t){return u.indexOf(t)>=0}));0===d.length&&(d=h);var p=d.reduce((function(e,n){return e[n]=xt(t,{placement:n,boundary:i,rootBoundary:o,padding:a})[it(n)],e}),{});return Object.keys(p).sort((function(t,e){return p[t]-p[e]}))}(e,{placement:n,boundary:c,rootBoundary:h,padding:u,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),b=e.rects.reference,x=e.rects.popper,w=new Map,E=!0,S=_[0],C=0;C<_.length;C++){var T=_[C],I=it(T),k=ot(T)===q,A=[F,z].indexOf(I)>=0,P=A?"width":"height",D=xt(e,{placement:T,boundary:c,rootBoundary:h,altBoundary:d,padding:u}),M=A?k?B:j:k?z:F;b[P]>x[P]&&(M=dt(M));var O=dt(M),R=[];if(o&&R.push(D[I]<=0),s&&R.push(D[M]<=0,D[O]<=0),R.every((function(t){return t}))){S=T,E=!1;break}w.set(T,R)}if(E)for(var N=function(t){var e=_.find((function(e){var n=w.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return S=e,"break"},L=f?3:1;L>0;L--){if("break"===N(L))break}e.placement!==S&&(e.modifiersData[r]._skip=!0,e.placement=S,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},Et,Ct,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,a=xt(e,{elementContext:"reference"}),s=xt(e,{altBoundary:!0}),l=Tt(a,r),u=Tt(s,i,o),c=It(l),h=It(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}}]}),At=n(4099),Pt=n.n(At),Dt=[],Mt=function(t,e,n){void 0===n&&(n={});var i=r.useRef(null),o={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||Dt},a=r.useState({styles:{popper:{position:o.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=a[0],l=a[1],u=r.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(t){var e=t.state,n=Object.keys(e.elements);d.flushSync((function(){l({styles:c(n.map((function(t){return[t,e.styles[t]||{}]}))),attributes:c(n.map((function(t){return[t,e.attributes[t]]})))})}))},requires:["computeStyles"]}}),[]),p=r.useMemo((function(){var t={onFirstUpdate:o.onFirstUpdate,placement:o.placement,strategy:o.strategy,modifiers:[].concat(o.modifiers,[u,{name:"applyStyles",enabled:!1}])};return Pt()(i.current,t)?i.current||t:(i.current=t,t)}),[o.onFirstUpdate,o.placement,o.strategy,o.modifiers,u]),f=r.useRef();return h((function(){f.current&&f.current.setOptions(p)}),[p]),h((function(){if(null!=t&&null!=e){var r=(n.createPopper||kt)(t,e,p);return f.current=r,function(){r.destroy(),f.current=null}}}),[t,e,n.createPopper]),{state:f.current?f.current.state:null,styles:s.styles,attributes:s.attributes,update:f.current?f.current.update:null,forceUpdate:f.current?f.current.forceUpdate:null}},Ot=function(){},Rt=function(){return Promise.resolve(null)},Nt=[];function Lt(t){var e=t.placement,n=void 0===e?"bottom":e,o=t.strategy,a=void 0===o?"absolute":o,l=t.modifiers,c=void 0===l?Nt:l,h=t.referenceElement,d=t.onFirstUpdate,p=t.innerRef,f=t.children,m=r.useContext(i),g=r.useState(null),y=g[0],v=g[1],_=r.useState(null),b=_[0],x=_[1];r.useEffect((function(){u(p,y)}),[p,y]);var w=r.useMemo((function(){return{placement:n,strategy:a,onFirstUpdate:d,modifiers:[].concat(c,[{name:"arrow",enabled:null!=b,options:{element:b}}])}}),[n,a,d,c,b]),E=Mt(h||m,y,w),S=E.state,C=E.styles,T=E.forceUpdate,I=E.update,k=r.useMemo((function(){return{ref:v,style:C.popper,placement:S?S.placement:n,hasPopperEscaped:S&&S.modifiersData.hide?S.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:S&&S.modifiersData.hide?S.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:C.arrow,ref:x},forceUpdate:T||Ot,update:I||Rt}}),[v,x,n,S,C,I,T]);return s(f)(k)}var Ft=n(2391),zt=n.n(Ft);function Bt(t){var e=t.children,n=t.innerRef,i=r.useContext(o),a=r.useCallback((function(t){u(n,t),l(i,t)}),[n,i]);return r.useEffect((function(){return function(){return u(n,null)}}),[]),r.useEffect((function(){zt()(Boolean(i),"`Reference` should not be used outside of a `Manager` component.")}),[i]),s(e)({ref:a})}},4099:t=>{var e="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,i="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function o(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var s,l,u,c;if(Array.isArray(t)){if((s=t.length)!=a.length)return!1;for(l=s;0!==l--;)if(!o(t[l],a[l]))return!1;return!0}if(n&&t instanceof Map&&a instanceof Map){if(t.size!==a.size)return!1;for(c=t.entries();!(l=c.next()).done;)if(!a.has(l.value[0]))return!1;for(c=t.entries();!(l=c.next()).done;)if(!o(l.value[1],a.get(l.value[0])))return!1;return!0}if(r&&t instanceof Set&&a instanceof Set){if(t.size!==a.size)return!1;for(c=t.entries();!(l=c.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(a)){if((s=t.length)!=a.length)return!1;for(l=s;0!==l--;)if(t[l]!==a[l])return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((s=(u=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(l=s;0!==l--;)if(!Object.prototype.hasOwnProperty.call(a,u[l]))return!1;if(e&&t instanceof Element)return!1;for(l=s;0!==l--;)if(("_owner"!==u[l]&&"__v"!==u[l]&&"__o"!==u[l]||!t.$$typeof)&&!o(t[u[l]],a[u[l]]))return!1;return!0}return t!==t&&a!==a}t.exports=function(t,e){try{return o(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},8459:(t,e)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case o:case s:case a:case d:case p:return t;default:switch(t=t&&t.$$typeof){case c:case u:case h:case m:case f:case l:return t;default:return e}}case i:return e}}}n=Symbol.for("react.module.reference")},6900:(t,e,n)=>{"use strict";n(8459)},6374:(t,e,n)=>{"use strict";var r=n(2791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(t,e,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==e.key&&(u=""+e.key),void 0!==e.ref&&(c=e.ref),e)a.call(e,r)&&!l.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:t,key:u,ref:c,props:o,_owner:s.current}}e.Fragment=o,e.jsx=u,e.jsxs=u},9117:(t,e)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||f}function v(){}function _(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var b=_.prototype=new v;b.constructor=_,m(b,y.prototype),b.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function C(t,e,r){var i,o={},a=null,s=null;if(null!=e)for(i in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)w.call(e,i)&&!S.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:t,key:a,ref:s,props:o,_owner:E.current}}function T(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var I=/\/+/g;function k(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function A(t,e,i,o,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=t),t=""===o?"."+k(l,0):o,x(a)?(i="",null!=t&&(i=t.replace(I,"$&/")+"/"),A(a,e,i,"",(function(t){return t}))):null!=a&&(T(a)&&(a=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(I,"$&/")+"/")+t)),e.push(a)),1;if(l=0,o=""===o?".":o+":",x(t))for(var u=0;u<t.length;u++){var c=o+k(s=t[u],u);l+=A(s,e,i,c,a)}else if(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=p&&t[p]||t["@@iterator"])?t:null}(t),"function"===typeof c)for(t=c.call(t),u=0;!(s=t.next()).done;)l+=A(s=s.value,e,i,c=o+k(s,u++),a);else if("object"===s)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function P(t,e,n){if(null==t)return t;var r=[],i=0;return A(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function D(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var M={current:null},O={transition:null},R={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:O,ReactCurrentOwner:E};e.Children={map:P,forEach:function(t,e,n){P(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return P(t,(function(){e++})),e},toArray:function(t){return P(t,(function(t){return t}))||[]},only:function(t){if(!T(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=i,e.Profiler=a,e.PureComponent=_,e.StrictMode=o,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=m({},t.props),o=t.key,a=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,s=E.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)w.call(e,u)&&!S.hasOwnProperty(u)&&(i[u]=void 0===e[u]&&void 0!==l?l[u]:e[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:t.type,key:o,ref:a,props:i,_owner:s}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=C,e.createFactory=function(t){var e=C.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=T,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:D}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=O.transition;O.transition={};try{t()}finally{O.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return M.current.useCallback(t,e)},e.useContext=function(t){return M.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return M.current.useDeferredValue(t)},e.useEffect=function(t,e){return M.current.useEffect(t,e)},e.useId=function(){return M.current.useId()},e.useImperativeHandle=function(t,e,n){return M.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return M.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return M.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return M.current.useMemo(t,e)},e.useReducer=function(t,e,n){return M.current.useReducer(t,e,n)},e.useRef=function(t){return M.current.useRef(t)},e.useState=function(t){return M.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return M.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return M.current.useTransition()},e.version="18.2.0"},2791:(t,e,n)=>{"use strict";t.exports=n(9117)},184:(t,e,n)=>{"use strict";t.exports=n(6374)},5844:(t,e,n)=>{"use strict";var r=n(4583).functionsHaveConfigurableNames(),i=Object,o=TypeError;t.exports=function(){if(null!=this&&this!==i(this))throw new o("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t},r&&Object.defineProperty&&Object.defineProperty(t.exports,"name",{value:"get flags"})},3535:(t,e,n)=>{"use strict";var r=n(9396),i=n(9722),o=n(5844),a=n(1334),s=n(7888),l=i(a());r(l,{getPolyfill:a,implementation:o,shim:s}),t.exports=l},1334:(t,e,n)=>{"use strict";var r=n(5844),i=n(9396).supportsDescriptors,o=Object.getOwnPropertyDescriptor;t.exports=function(){if(i&&"gim"===/a/gim.flags){var t=o(RegExp.prototype,"flags");if(t&&"function"===typeof t.get&&"boolean"===typeof RegExp.prototype.dotAll&&"boolean"===typeof RegExp.prototype.hasIndices){var e="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(n,"sticky",{get:function(){e+="y"}}),"dy"===e)return t.get}}return r}},7888:(t,e,n)=>{"use strict";var r=n(9396).supportsDescriptors,i=n(1334),o=Object.getOwnPropertyDescriptor,a=Object.defineProperty,s=TypeError,l=Object.getPrototypeOf,u=/a/;t.exports=function(){if(!r||!l)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=i(),e=l(u),n=o(e,"flags");return n&&n.get===t||a(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},4460:function(t,e){!function(t){"use strict";const e=134217729,n=33306690738754706e-32;function r(t,e,n,r,i){let o,a,s,l,u=e[0],c=r[0],h=0,d=0;c>u==c>-u?(o=u,u=e[++h]):(o=c,c=r[++d]);let p=0;if(h<t&&d<n)for(c>u==c>-u?(s=o-((a=u+o)-u),u=e[++h]):(s=o-((a=c+o)-c),c=r[++d]),o=a,0!==s&&(i[p++]=s);h<t&&d<n;)c>u==c>-u?(s=o-((a=o+u)-(l=a-o))+(u-l),u=e[++h]):(s=o-((a=o+c)-(l=a-o))+(c-l),c=r[++d]),o=a,0!==s&&(i[p++]=s);for(;h<t;)s=o-((a=o+u)-(l=a-o))+(u-l),u=e[++h],o=a,0!==s&&(i[p++]=s);for(;d<n;)s=o-((a=o+c)-(l=a-o))+(c-l),c=r[++d],o=a,0!==s&&(i[p++]=s);return 0===o&&0!==p||(i[p++]=o),p}function i(t){return new Float64Array(t)}const o=33306690738754716e-32,a=22204460492503146e-32,s=11093356479670487e-47,l=i(4),u=i(8),c=i(12),h=i(16),d=i(4);t.orient2d=function(t,i,p,f,m,g){const y=(i-g)*(p-m),v=(t-m)*(f-g),_=y-v;if(0===y||0===v||y>0!=v>0)return _;const b=Math.abs(y+v);return Math.abs(_)>=o*b?_:-function(t,i,o,p,f,m,g){let y,v,_,b,x,w,E,S,C,T,I,k,A,P,D,M,O,R;const N=t-f,L=o-f,F=i-m,z=p-m;x=(D=(S=N-(E=(w=e*N)-(w-N)))*(T=z-(C=(w=e*z)-(w-z)))-((P=N*z)-E*C-S*C-E*T))-(I=D-(O=(S=F-(E=(w=e*F)-(w-F)))*(T=L-(C=(w=e*L)-(w-L)))-((M=F*L)-E*C-S*C-E*T))),l[0]=D-(I+x)+(x-O),x=(A=P-((k=P+I)-(x=k-P))+(I-x))-(I=A-M),l[1]=A-(I+x)+(x-M),x=(R=k+I)-k,l[2]=k-(R-x)+(I-x),l[3]=R;let B=function(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}(4,l),j=a*g;if(B>=j||-B>=j)return B;if(y=t-(N+(x=t-N))+(x-f),_=o-(L+(x=o-L))+(x-f),v=i-(F+(x=i-F))+(x-m),b=p-(z+(x=p-z))+(x-m),0===y&&0===v&&0===_&&0===b)return B;if(j=s*g+n*Math.abs(B),(B+=N*b+z*y-(F*_+L*v))>=j||-B>=j)return B;x=(D=(S=y-(E=(w=e*y)-(w-y)))*(T=z-(C=(w=e*z)-(w-z)))-((P=y*z)-E*C-S*C-E*T))-(I=D-(O=(S=v-(E=(w=e*v)-(w-v)))*(T=L-(C=(w=e*L)-(w-L)))-((M=v*L)-E*C-S*C-E*T))),d[0]=D-(I+x)+(x-O),x=(A=P-((k=P+I)-(x=k-P))+(I-x))-(I=A-M),d[1]=A-(I+x)+(x-M),x=(R=k+I)-k,d[2]=k-(R-x)+(I-x),d[3]=R;const U=r(4,l,4,d,u);x=(D=(S=N-(E=(w=e*N)-(w-N)))*(T=b-(C=(w=e*b)-(w-b)))-((P=N*b)-E*C-S*C-E*T))-(I=D-(O=(S=F-(E=(w=e*F)-(w-F)))*(T=_-(C=(w=e*_)-(w-_)))-((M=F*_)-E*C-S*C-E*T))),d[0]=D-(I+x)+(x-O),x=(A=P-((k=P+I)-(x=k-P))+(I-x))-(I=A-M),d[1]=A-(I+x)+(x-M),x=(R=k+I)-k,d[2]=k-(R-x)+(I-x),d[3]=R;const V=r(U,u,4,d,c);x=(D=(S=y-(E=(w=e*y)-(w-y)))*(T=b-(C=(w=e*b)-(w-b)))-((P=y*b)-E*C-S*C-E*T))-(I=D-(O=(S=v-(E=(w=e*v)-(w-v)))*(T=_-(C=(w=e*_)-(w-_)))-((M=v*_)-E*C-S*C-E*T))),d[0]=D-(I+x)+(x-O),x=(A=P-((k=P+I)-(x=k-P))+(I-x))-(I=A-M),d[1]=A-(I+x)+(x-M),x=(R=k+I)-k,d[2]=k-(R-x)+(I-x),d[3]=R;const q=r(V,c,4,d,h);return h[q-1]}(t,i,p,f,m,g,b)},t.orient2dfast=function(t,e,n,r,i,o){return(e-o)*(n-i)-(t-i)*(r-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},6813:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<o(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=t[s],u=s+1,c=t[u];if(0>o(l,n))u<i&&0>o(c,l)?(t[r]=c,t[u]=n,r=u):(t[r]=l,t[s]=n,r=s);else{if(!(u<i&&0>o(c,n)))break t;t[r]=c,t[u]=n,r=u}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(t){for(var e=r(c);null!==e;){if(null===e.callback)i(c);else{if(!(e.startTime<=t))break;i(c),e.sortIndex=e.expirationTime,n(u,e)}e=r(c)}}function x(t){if(g=!1,b(t),!m)if(null!==r(u))m=!0,O(w);else{var e=r(c);null!==e&&R(x,e.startTime-t)}}function w(t,n){m=!1,g&&(g=!1,v(T),T=-1),f=!0;var o=p;try{for(b(n),d=r(u);null!==d&&(!(d.expirationTime>n)||t&&!A());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var s=a(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?d.callback=s:d===r(u)&&i(u),b(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&R(x,h.startTime-n),l=!1}return l}finally{d=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,C=null,T=-1,I=5,k=-1;function A(){return!(e.unstable_now()-k<I)}function P(){if(null!==C){var t=e.unstable_now();k=t;var n=!0;try{n=C(!0,t)}finally{n?E():(S=!1,C=null)}}else S=!1}if("function"===typeof _)E=function(){_(P)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,M=D.port2;D.port1.onmessage=P,E=function(){M.postMessage(null)}}else E=function(){y(P,0)};function O(t){C=t,S||(S=!0,E())}function R(t,n){T=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||f||(m=!0,O(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(t){switch(p){case 1:case 2:case 3:var e=3;break;default:e=p}var n=p;p=e;try{return t()}finally{p=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=p;p=t;try{return e()}finally{p=n}},e.unstable_scheduleCallback=function(t,i,o){var a=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(t.sortIndex=o,n(c,t),null===r(u)&&t===r(c)&&(g?(v(T),T=-1):g=!0,R(x,o-a))):(t.sortIndex=s,n(u,t),m||f||(m=!0,O(w))),t},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(t){var e=p;return function(){var n=p;p=e;try{return t.apply(this,arguments)}finally{p=n}}}},5296:(t,e,n)=>{"use strict";t.exports=n(6813)},1848:t=>{"use strict";t.exports={eudist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var a=(t[o]||0)-(e[o]||0);i+=a*a}return n?Math.sqrt(i):i},mandist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++)i+=Math.abs((t[o]||0)-(e[o]||0));return n?Math.sqrt(i):i},dist:function(t,e,n){var r=Math.abs(t-e);return n?r:r*r}}},3556:(t,e,n)=>{"use strict";var r=n(1848),i=r.eudist,o=r.dist;t.exports={kmrand:function(t,e){for(var n={},r=[],i=e<<2,o=t.length,a=t[0].length>0;r.length<e&&i-- >0;){var s=t[Math.floor(Math.random()*o)],l=a?s.join("_"):""+s;n[l]||(n[l]=!0,r.push(s))}if(r.length<e)throw new Error("Error initializating clusters");return r},kmpp:function(t,e){var n=t[0].length?i:o,r=[],a=t.length,s=t[0].length>0,l=t[Math.floor(Math.random()*a)];s&&l.join("_");for(r.push(l);r.length<e;){for(var u=[],c=r.length,h=0,d=[],p=0;p<a;p++){for(var f=1/0,m=0;m<c;m++){var g=n(t[p],r[m]);g<=f&&(f=g)}u[p]=f}for(var y=0;y<a;y++)h+=u[y];for(var v=0;v<a;v++)d[v]={i:v,v:t[v],pr:u[v]/h,cs:0};d.sort((function(t,e){return t.pr-e.pr})),d[0].cs=d[0].pr;for(var _=1;_<a;_++)d[_].cs=d[_-1].cs+d[_].pr;for(var b=Math.random(),x=0;x<a-1&&d[x++].cs<b;);r.push(d[x-1].v)}return r}}},6530:(t,e,n)=>{"use strict";var r=n(1848),i=n(3556),o=r.eudist,a=(r.mandist,r.dist,i.kmrand),s=i.kmpp,l=1e4;function u(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}t.exports=function(t,e,n,r){var i=[],c=[],h=[],d=[],p=!1,f=r||l,m=t.length,g=t[0].length,y=g>0,v=[];if(n)i="kmrand"==n?a(t,e):"kmpp"==n?s(t,e):n;else for(var _={};i.length<e;){var b=Math.floor(Math.random()*m);_[b]||(_[b]=!0,i.push(t[b]))}do{u(e,0,v);for(var x=0;x<m;x++){for(var w=1/0,E=0,S=0;S<e;S++){(d=y?o(t[x],i[S]):Math.abs(t[x]-i[S]))<=w&&(w=d,E=S)}h[x]=E,v[E]++}for(var C=[],T=(c=[],0);T<e;T++)C[T]=y?u(g,0,C[T]):0,c[T]=i[T];if(y){for(var I=0;I<e;I++)i[I]=[];for(var k=0;k<m;k++)for(var A=C[h[k]],P=t[k],D=0;D<g;D++)A[D]+=P[D];p=!0;for(var M=0;M<e;M++){for(var O=i[M],R=C[M],N=c[M],L=v[M],F=0;F<g;F++)O[F]=R[F]/L||0;if(p)for(var z=0;z<g;z++)if(N[z]!=O[z]){p=!1;break}}}else{for(var B=0;B<m;B++){C[h[B]]+=t[B]}for(var j=0;j<e;j++)i[j]=C[j]/v[j]||0;p=!0;for(var U=0;U<e;U++)if(c[U]!=i[U]){p=!1;break}}p=p||--f<=0}while(!p);return{it:l-f,k:e,idxs:h,centroids:i}}},4613:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});class r{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,r=e[t];for(;t>0;){const i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}_down(t){const{data:e,compare:n}=this,r=this.length>>1,i=e[t];for(;t<r;){let r=1+(t<<1),o=e[r];const a=r+1;if(a<this.length&&n(e[a],o)<0&&(r=a,o=e[a]),n(o,i)>=0)break;e[t]=o,t=r}e[t]=i}}function i(t,e){return t<e?-1:t>e?1:0}},4035:function(t,e){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function a(t){return null===t?Rt:t.color}function s(t){return null===t?null:t.parent}function l(t,e){null!==t&&(t.color=e)}function u(t){return null===t?null:t.left}function c(t){return null===t?null:t.right}function h(){this.root_=null,this.size_=0}function d(){}function p(){this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}function f(){}function m(t){this.message=t||""}function g(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var y=function(){};y.prototype.interfaces_=function(){return[]},y.prototype.getClass=function(){return y},y.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var v=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),_=function(){},b={MAX_VALUE:{configurable:!0}};_.isNaN=function(t){return Number.isNaN(t)},_.doubleToLongBits=function(t){return t},_.longBitsToDouble=function(t){return t},_.isInfinite=function(t){return!Number.isFinite(t)},b.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(_,b);var x=function(){},w=function(){},E=function(){},S=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},C={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};S.prototype.setOrdinate=function(t,e){switch(t){case S.X:this.x=e;break;case S.Y:this.y=e;break;case S.Z:this.z=e;break;default:throw new v("Invalid ordinate index: "+t)}},S.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!y.equalsWithTolerance(this.x,e.x,n)&&!!y.equalsWithTolerance(this.y,e.y,n)}},S.prototype.getOrdinate=function(t){switch(t){case S.X:return this.x;case S.Y:return this.y;case S.Z:return this.z}throw new v("Invalid ordinate index: "+t)},S.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||_.isNaN(this.z))&&_.isNaN(t.z)},S.prototype.equals=function(t){return t instanceof S&&this.equals2D(t)},S.prototype.equalInZ=function(t,e){return y.equalsWithTolerance(this.z,t.z,e)},S.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},S.prototype.clone=function(){},S.prototype.copy=function(){return new S(this)},S.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},S.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},S.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},S.prototype.hashCode=function(){var t=17;return 37*(t=37*t+S.hashCode(this.x))+S.hashCode(this.y)},S.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},S.prototype.interfaces_=function(){return[x,w,e]},S.prototype.getClass=function(){return S},S.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=_.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},C.DimensionalComparator.get=function(){return T},C.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},C.NULL_ORDINATE.get=function(){return _.NaN},C.X.get=function(){return 0},C.Y.get=function(){return 1},C.Z.get=function(){return 2},Object.defineProperties(S,C);var T=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new v("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};T.prototype.compare=function(t,e){var n=t,r=e,i=T.compare(n.x,r.x);if(0!==i)return i;var o=T.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:T.compare(n.z,r.z)},T.prototype.interfaces_=function(){return[E]},T.prototype.getClass=function(){return T},T.compare=function(t,e){return t<e?-1:t>e?1:_.isNaN(t)?_.isNaN(e)?0:-1:_.isNaN(e)?1:0};var I=function(){};I.prototype.create=function(){},I.prototype.interfaces_=function(){return[]},I.prototype.getClass=function(){return I};var k=function(){},A={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};k.prototype.interfaces_=function(){return[]},k.prototype.getClass=function(){return k},k.toLocationSymbol=function(t){switch(t){case k.EXTERIOR:return"e";case k.BOUNDARY:return"b";case k.INTERIOR:return"i";case k.NONE:return"-"}throw new v("Unknown location value: "+t)},A.INTERIOR.get=function(){return 0},A.BOUNDARY.get=function(){return 1},A.EXTERIOR.get=function(){return 2},A.NONE.get=function(){return-1},Object.defineProperties(k,A);var P=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},D=function(){},M={LOG_10:{configurable:!0}};D.prototype.interfaces_=function(){return[]},D.prototype.getClass=function(){return D},D.log10=function(t){var e=Math.log(t);return _.isInfinite(e)||_.isNaN(e)?e:e/D.LOG_10},D.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},D.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},D.wrap=function(t,e){return t<0?e- -t%e:t%e},D.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[0];return r>a&&(a=r),i>a&&(a=i),o>a&&(a=o),a}},D.average=function(t,e){return(t+e)/2},M.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(D,M);var O=function(t){this.str=t};O.prototype.append=function(t){this.str+=t},O.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},O.prototype.toString=function(t){return this.str};var R=function(t){this.value=t};R.prototype.intValue=function(){return this.value},R.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},R.isNaN=function(t){return Number.isNaN(t)};var N=function(){};N.isWhitespace=function(t){return t<=32&&t>=0||127===t},N.toUpperCase=function(t){return t.toUpperCase()};var L=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},F={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};L.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},L.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=L.magnitude(n._hi),i=L.TEN.pow(r);(n=n.divide(i)).gt(L.TEN)?(n=n.divide(L.TEN),r+=1):n.lt(L.ONE)&&(n=n.multiply(L.TEN),r-=1);for(var o=r+1,a=new O,s=L.MAX_PRINT_DIGITS-1,l=0;l<=s;l++){t&&l===o&&a.append(".");var u=Math.trunc(n._hi);if(u<0)break;var c=!1,h=0;u>9?(c=!0,h="9"):h="0"+u,a.append(h),n=n.subtract(L.valueOf(u)).multiply(L.TEN),c&&n.selfAdd(L.TEN);var d=!0,p=L.magnitude(n._hi);if(p<0&&Math.abs(p)>=s-l&&(d=!1),!d)break}return e[0]=r,a.toString()},L.prototype.sqr=function(){return this.multiply(this)},L.prototype.doubleValue=function(){return this._hi+this._lo},L.prototype.subtract=function(){if(arguments[0]instanceof L){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},L.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},L.prototype.isZero=function(){return 0===this._hi&&0===this._lo},L.prototype.selfSubtract=function(){if(arguments[0]instanceof L){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},L.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},L.prototype.min=function(t){return this.le(t)?this:t},L.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof L){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,l=null,u=null,c=null,h=null;return l=this._hi/n,h=(i=(u=L.SPLIT*l)-(i=u-l))*(a=(h=L.SPLIT*n)-(a=h-n))-(c=l*n)+i*(s=n-a)+(o=l-i)*a+o*s,h=l+(u=(this._hi-c-h+this._lo-l*r)/n),this._hi=h,this._lo=l-h+u,this}},L.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},L.prototype.divide=function(){if(arguments[0]instanceof L){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,l=null;return n=(o=this._hi/t._hi)-(e=(a=L.SPLIT*o)-(e=a-o)),l=e*(r=(l=L.SPLIT*t._hi)-(r=l-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,a=(this._hi-s-l+this._lo-o*t._lo)/t._hi,new L(l=o+a,o-l+a)}if("number"==typeof arguments[0]){var u=arguments[0];return _.isNaN(u)?L.createNaN():L.copy(this).selfDivide(u,0)}},L.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},L.prototype.pow=function(t){if(0===t)return L.valueOf(1);var e=new L(this),n=L.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},L.prototype.ceil=function(){if(this.isNaN())return L.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new L(t,e)},L.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},L.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},L.prototype.setValue=function(){if(arguments[0]instanceof L){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},L.prototype.max=function(t){return this.ge(t)?this:t},L.prototype.sqrt=function(){if(this.isZero())return L.valueOf(0);if(this.isNegative())return L.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=L.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},L.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof L){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+e)-(a=i-this._hi),r=(s=(o=e-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var l=arguments[0],u=arguments[1],c=null,h=null,d=null,p=null,f=null,m=null,g=null;p=this._hi+l,h=this._lo+u,f=p-(m=p-this._hi),d=h-(g=h-this._lo);var y=(c=p+(m=(f=l-m+(this._hi-f))+h))+(m=(d=u-g+(this._lo-d))+(m+(p-c))),v=m+(c-y);return this._hi=y,this._lo=v,this}},L.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof L){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,l=null,u=null;i=(l=L.SPLIT*this._hi)-this._hi,u=L.SPLIT*n,i=l-i,o=this._hi-i,a=u-n;var c=(l=this._hi*n)+(u=i*(a=u-a)-l+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),h=u+(i=l-c);return this._hi=c,this._lo=h,this}},L.prototype.selfSqr=function(){return this.selfMultiply(this)},L.prototype.floor=function(){if(this.isNaN())return L.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new L(t,e)},L.prototype.negate=function(){return this.isNaN()?this:new L(-this._hi,-this._lo)},L.prototype.clone=function(){},L.prototype.multiply=function(){if(arguments[0]instanceof L){var t=arguments[0];return t.isNaN()?L.createNaN():L.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _.isNaN(e)?L.createNaN():L.copy(this).selfMultiply(e,0)}},L.prototype.isNaN=function(){return _.isNaN(this._hi)},L.prototype.intValue=function(){return Math.trunc(this._hi)},L.prototype.toString=function(){var t=L.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},L.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+L.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+L.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},L.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,a=null,s=null;e=(i=1/this._hi)-(t=(o=L.SPLIT*i)-(t=o-i)),n=(s=L.SPLIT*this._hi)-this._hi;var l=i+(o=(1-(a=i*this._hi)-(s=t*(n=s-n)-a+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new L(l,i-l+o)},L.prototype.toSciNotation=function(){if(this.isZero())return L.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=L.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},L.prototype.abs=function(){return this.isNaN()?L.NaN:this.isNegative()?this.negate():new L(this)},L.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},L.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},L.prototype.add=function(){if(arguments[0]instanceof L){var t=arguments[0];return L.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return L.copy(this).selfAdd(e)}},L.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof L){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},L.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},L.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},L.prototype.trunc=function(){return this.isNaN()?L.NaN:this.isPositive()?this.floor():this.ceil()},L.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},L.prototype.interfaces_=function(){return[e,x,w]},L.prototype.getClass=function(){return L},L.sqr=function(t){return L.valueOf(t).selfMultiply(t)},L.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return L.parse(t)}if("number"==typeof arguments[0])return new L(arguments[0])},L.sqrt=function(t){return L.valueOf(t).sqrt()},L.parse=function(t){for(var e=0,n=t.length;N.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new L,a=0,s=0,l=0;!(e>=n);){var u=t.charAt(e);if(e++,N.isDigit(u)){var c=u-"0";o.selfMultiply(L.TEN),o.selfAdd(c),a++}else{if("."!==u){if("e"===u||"E"===u){var h=t.substring(e);try{l=R.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+u+"' at position "+e+" in string "+t)}s=a}}var d=o,p=a-s-l;if(0===p)d=o;else if(p>0){var f=L.TEN.pow(p);d=o.divide(f)}else if(p<0){var m=L.TEN.pow(-p);d=o.multiply(m)}return r?d.negate():d},L.createNaN=function(){return new L(_.NaN,_.NaN)},L.copy=function(t){return new L(t)},L.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},L.stringOfChar=function(t,e){for(var n=new O,r=0;r<e;r++)n.append(t);return n.toString()},F.PI.get=function(){return new L(3.141592653589793,12246467991473532e-32)},F.TWO_PI.get=function(){return new L(6.283185307179586,24492935982947064e-32)},F.PI_2.get=function(){return new L(1.5707963267948966,6123233995736766e-32)},F.E.get=function(){return new L(2.718281828459045,14456468917292502e-32)},F.NaN.get=function(){return new L(_.NaN,_.NaN)},F.EPS.get=function(){return 123259516440783e-46},F.SPLIT.get=function(){return 134217729},F.MAX_PRINT_DIGITS.get=function(){return 32},F.TEN.get=function(){return L.valueOf(10)},F.ONE.get=function(){return L.valueOf(1)},F.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},F.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(L,F);var z=function(){},B={DP_SAFE_EPSILON:{configurable:!0}};z.prototype.interfaces_=function(){return[]},z.prototype.getClass=function(){return z},z.orientationIndex=function(t,e,n){var r=z.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=L.valueOf(e.x).selfAdd(-t.x),o=L.valueOf(e.y).selfAdd(-t.y),a=L.valueOf(n.x).selfAdd(-e.x),s=L.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},z.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},z.intersection=function(t,e,n,r){var i=L.valueOf(r.y).selfSubtract(n.y).selfMultiply(L.valueOf(e.x).selfSubtract(t.x)),o=L.valueOf(r.x).selfSubtract(n.x).selfMultiply(L.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=L.valueOf(r.x).selfSubtract(n.x).selfMultiply(L.valueOf(t.y).selfSubtract(n.y)),l=L.valueOf(r.y).selfSubtract(n.y).selfMultiply(L.valueOf(t.x).selfSubtract(n.x)),u=s.subtract(l).selfDivide(a).doubleValue(),c=L.valueOf(t.x).selfAdd(L.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),h=L.valueOf(e.x).selfSubtract(t.x).selfMultiply(L.valueOf(t.y).selfSubtract(n.y)),d=L.valueOf(e.y).selfSubtract(t.y).selfMultiply(L.valueOf(t.x).selfSubtract(n.x)),p=h.subtract(d).selfDivide(a).doubleValue(),f=L.valueOf(n.y).selfAdd(L.valueOf(r.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new S(c,f)},z.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return z.signum(a);r=i+o}else{if(!(i<0))return z.signum(a);if(o>=0)return z.signum(a);r=-i-o}var s=z.DP_SAFE_EPSILON*r;return a>=s||-a>=s?z.signum(a):2},z.signum=function(t){return t>0?1:t<0?-1:0},B.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(z,B);var j=function(){},U={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};U.X.get=function(){return 0},U.Y.get=function(){return 1},U.Z.get=function(){return 2},U.M.get=function(){return 3},j.prototype.setOrdinate=function(t,e,n){},j.prototype.size=function(){},j.prototype.getOrdinate=function(t,e){},j.prototype.getCoordinate=function(){},j.prototype.getCoordinateCopy=function(t){},j.prototype.getDimension=function(){},j.prototype.getX=function(t){},j.prototype.clone=function(){},j.prototype.expandEnvelope=function(t){},j.prototype.copy=function(){},j.prototype.getY=function(t){},j.prototype.toCoordinateArray=function(){},j.prototype.interfaces_=function(){return[w]},j.prototype.getClass=function(){return j},Object.defineProperties(j,U);var V=function(){},q=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(V),G=function(){};G.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},G.getProperty=function(t){return{"line.separator":"\n"}[t]};var Y=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof S&&arguments[1]instanceof S){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2];this.x=l,this.y=u,this.w=c}else if(4===arguments.length){var h=arguments[0],d=arguments[1],p=arguments[2],f=arguments[3],m=h.y-d.y,g=d.x-h.x,y=h.x*d.y-d.x*h.y,v=p.y-f.y,_=f.x-p.x,b=p.x*f.y-f.x*p.y;this.x=g*b-_*y,this.y=v*y-m*b,this.w=m*_-v*g}};Y.prototype.getY=function(){var t=this.y/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new q;return t},Y.prototype.getX=function(){var t=this.x/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new q;return t},Y.prototype.getCoordinate=function(){var t=new S;return t.x=this.getX(),t.y=this.getY(),t},Y.prototype.interfaces_=function(){return[]},Y.prototype.getClass=function(){return Y},Y.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,l=r.x-n.x,u=n.x*r.y-r.x*n.y,c=i*l-s*o,h=(o*u-l*a)/c,d=(s*a-i*u)/c;if(_.isNaN(h)||_.isInfinite(h)||_.isNaN(d)||_.isInfinite(d))throw new q;return new S(h,d)};var $=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof S){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];this.init(o,a,s,l)}},W={serialVersionUID:{configurable:!0}};$.prototype.getArea=function(){return this.getWidth()*this.getHeight()},$.prototype.equals=function(t){if(!(t instanceof $))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},$.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new $;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new $(e,r,n,i)},$.prototype.isNull=function(){return this._maxx<this._minx},$.prototype.getMaxX=function(){return this._maxx},$.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof $){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},$.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof $){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof S){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},$.prototype.getMinY=function(){return this._miny},$.prototype.getMinX=function(){return this._minx},$.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof $){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},$.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},$.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},$.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},$.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},$.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},$.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},$.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},$.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},$.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},$.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof $){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof S){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},$.prototype.centre=function(){return this.isNull()?null:new S((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},$.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof $){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},$.prototype.getMaxY=function(){return this._maxy},$.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},$.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+S.hashCode(this._minx))+S.hashCode(this._maxx))+S.hashCode(this._miny))+S.hashCode(this._maxy)},$.prototype.interfaces_=function(){return[x,e]},$.prototype.getClass=function(){return $},$.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),l=Math.max(o.x,a.x),u=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(u>l)&&!(c<s)&&(s=Math.min(o.y,a.y),l=Math.max(o.y,a.y),u=Math.min(r.y,i.y),c=Math.max(r.y,i.y),!(u>l)&&!(c<s))}},W.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties($,W);var H={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},X=function(t){this.geometryFactory=t||new ye};X.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=H.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=H.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],K[n]&&(e=K[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},X.prototype.write=function(t){return this.extractGeometry(t)},X.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Z[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Z[e].apply(this,[t])+")"};var Z={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Z.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Z.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Z.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Z.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Z.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},K={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(H.spaces);return this.geometryFactory.createPoint(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(H.trimParens,"$1"),r.push(K.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(H.spaces),r.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(H.spaces),r.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(H.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(H.trimParens,"$1"),r.push(K.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(H.parenComma),a=[],s=0,l=o.length;s<l;++s)e=o[s].replace(H.trimParens,"$1"),n=K.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(H.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(H.trimParens,"$1"),r.push(K.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Q=function(t){this.parser=new X(t)};Q.prototype.write=function(t){return this.parser.write(t)},Q.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var J=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(J),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new S,this._intPt[1]=new S,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new O;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return Q.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Q.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new $(this._inputLines[0][0],this._inputLines[0][1]),n=new $(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,$.intersects(n,r,e)&&0===st.orientationIndex(n,r,e)&&0===st.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Y.intersection(t,n,r,i)}catch(a){if(!(a instanceof q))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new S(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=z.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);G.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&G.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new S(t),o=new S(e),a=new S(n),s=new S(r),l=new S;this.normalizeToEnvCentre(i,o,a,s,l);var u=this.safeHCoordinateIntersection(i,o,a,s);return u.x+=l.x,u.y+=l.y,u},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=$.intersects(e,n,r),a=$.intersects(e,n,i),s=$.intersects(r,i,e),l=$.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&l?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&l?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&l?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,d=n.y>r.y?n.y:r.y,p=((o>u?o:u)+(s<h?s:h))/2,f=((a>c?a:c)+(l<d?l:d))/2;i.x=p,i.y=f,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!$.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=st.orientationIndex(e,n,r),a=st.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=st.orientationIndex(r,i,e),l=st.orientationIndex(r,i,n);return s>0&&l>0||s<0&&l<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===l?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===l?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new S(r):0===a?this._intPt[0]=new S(i):0===s?this._intPt[0]=new S(e):0===l&&(this._intPt[0]=new S(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=st.distancePointLine(t,n,r),a=st.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=st.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=st.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ot.signOfDet2x2(r,i,o,a)},ot.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var at=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};at.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,l=ot.signOfDet2x2(i,o,a,s);if(0===l)return this._isPointOnSegment=!0,null;s<o&&(l=-l),l>0&&this._crossingCount++}},at.prototype.isPointInPolygon=function(){return this.getLocation()!==k.EXTERIOR},at.prototype.getLocation=function(){return this._isPointOnSegment?k.BOUNDARY:this._crossingCount%2==1?k.INTERIOR:k.EXTERIOR},at.prototype.isOnSegment=function(){return this._isPointOnSegment},at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.locatePointInRing=function(){if(arguments[0]instanceof S&&P(arguments[1],j)){for(var t=arguments[1],e=new at(arguments[0]),n=new S,r=new S,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof S&&arguments[1]instanceof Array){for(var o=arguments[1],a=new at(arguments[0]),s=1;s<o.length;s++){var l=o[s],u=o[s-1];if(a.countSegment(l,u),a.isOnSegment())return a.getLocation()}return a.getLocation()}};var st=function(){},lt={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.orientationIndex=function(t,e,n){return z.orientationIndex(t,e,n)},st.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(P(arguments[0],j)){var a=arguments[0],s=a.size();if(s<3)return 0;var l=new S,u=new S,c=new S;a.getCoordinate(0,u),a.getCoordinate(1,c);var h=u.x;c.x-=h;for(var d=0,p=1;p<s-1;p++)l.y=u.y,u.x=c.x,u.y=c.y,a.getCoordinate(p+1,c),c.x-=h,d+=u.x*(l.y-c.y);return d/2}},st.distanceLineLine=function(t,e,n,r){if(t.equals(e))return st.distancePointLine(t,n,r);if(n.equals(r))return st.distancePointLine(r,t,e);var i=!1;if($.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,l=a/o;(l<0||l>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?D.min(st.distancePointLine(t,n,r),st.distancePointLine(e,n,r),st.distancePointLine(n,t,e),st.distancePointLine(r,t,e)):0},st.isPointInRing=function(t,e){return st.locatePointInRing(t,e)!==k.EXTERIOR},st.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new S;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,l=r.y,u=s-i,c=l-o;n+=Math.sqrt(u*u+c*c),i=s,o=l}return n},st.isCCW=function(t){var e=t.length-1;if(e<3)throw new v("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var l=t[a],u=t[s];if(l.equals2D(n)||u.equals2D(n)||l.equals2D(u))return!1;var c=st.computeOrientation(l,n,u);return 0===c?l.x>u.x:c>0},st.locatePointInRing=function(t,e){return at.locatePointInRing(t,e)},st.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},st.computeOrientation=function(t,e,n){return st.orientationIndex(t,e,n)},st.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new v("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=st.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var l=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),u=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/l;if(u<=0)return o.distance(a);if(u>=1)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/l;return Math.abs(c)*Math.sqrt(l)}},st.isOnLine=function(t,e){for(var n=new it,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},lt.CLOCKWISE.get=function(){return-1},lt.RIGHT.get=function(){return st.CLOCKWISE},lt.COUNTERCLOCKWISE.get=function(){return 1},lt.LEFT.get=function(){return st.COUNTERCLOCKWISE},lt.COLLINEAR.get=function(){return 0},lt.STRAIGHT.get=function(){return st.COLLINEAR},Object.defineProperties(st,lt);var ut=function(){};ut.prototype.filter=function(t){},ut.prototype.interfaces_=function(){return[]},ut.prototype.getClass=function(){return ut};var ct=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ht={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ct.prototype.isGeometryCollection=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION},ct.prototype.getFactory=function(){return this._factory},ct.prototype.getGeometryN=function(t){return this},ct.prototype.getArea=function(){return 0},ct.prototype.isRectangle=function(){return!1},ct.prototype.equals=function(){if(arguments[0]instanceof ct){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ct))return!1;var n=e;return this.equalsExact(n)}},ct.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ct.prototype.geometryChanged=function(){this.apply(ct.geometryChangedFilter)},ct.prototype.geometryChangedAction=function(){this._envelope=null},ct.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ct.prototype.getLength=function(){return 0},ct.prototype.getNumGeometries=function(){return 1},ct.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},ct.prototype.getUserData=function(){return this._userData},ct.prototype.getSRID=function(){return this._SRID},ct.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ct.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION)throw new v("This method does not support GeometryCollection arguments")},ct.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ct.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ct.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ct.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new $(this._envelope)},ct.prototype.setSRID=function(t){this._SRID=t},ct.prototype.setUserData=function(t){this._userData=t},ct.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},ct.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ct.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ct.SORTINDEX_MULTIPOINT||this.getSortIndex()===ct.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ct.SORTINDEX_MULTIPOLYGON},ct.prototype.interfaces_=function(){return[w,x,e]},ct.prototype.getClass=function(){return ct},ct.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ct.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ht.serialVersionUID.get=function(){return 0x799ea46522854c00},ht.SORTINDEX_POINT.get=function(){return 0},ht.SORTINDEX_MULTIPOINT.get=function(){return 1},ht.SORTINDEX_LINESTRING.get=function(){return 2},ht.SORTINDEX_LINEARRING.get=function(){return 3},ht.SORTINDEX_MULTILINESTRING.get=function(){return 4},ht.SORTINDEX_POLYGON.get=function(){return 5},ht.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ht.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ht.geometryChangedFilter.get=function(){return dt},Object.defineProperties(ct,ht);var dt=function(){};dt.interfaces_=function(){return[ut]},dt.filter=function(t){t.geometryChangedAction()};var pt=function(){};pt.prototype.filter=function(t){},pt.prototype.interfaces_=function(){return[]},pt.prototype.getClass=function(){return pt};var ft=function(){},mt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};ft.prototype.isInBoundary=function(t){},ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft},mt.Mod2BoundaryNodeRule.get=function(){return gt},mt.EndPointBoundaryNodeRule.get=function(){return yt},mt.MultiValentEndPointBoundaryNodeRule.get=function(){return vt},mt.MonoValentEndPointBoundaryNodeRule.get=function(){return _t},mt.MOD2_BOUNDARY_RULE.get=function(){return new gt},mt.ENDPOINT_BOUNDARY_RULE.get=function(){return new yt},mt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},mt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},mt.OGC_SFS_BOUNDARY_RULE.get=function(){return ft.MOD2_BOUNDARY_RULE},Object.defineProperties(ft,mt);var gt=function(){};gt.prototype.isInBoundary=function(t){return t%2==1},gt.prototype.interfaces_=function(){return[ft]},gt.prototype.getClass=function(){return gt};var yt=function(){};yt.prototype.isInBoundary=function(t){return t>0},yt.prototype.interfaces_=function(){return[ft]},yt.prototype.getClass=function(){return yt};var vt=function(){};vt.prototype.isInBoundary=function(t){return t>1},vt.prototype.interfaces_=function(){return[ft]},vt.prototype.getClass=function(){return vt};var _t=function(){};_t.prototype.isInBoundary=function(t){return 1===t},_t.prototype.interfaces_=function(){return[ft]},_t.prototype.getClass=function(){return _t};var bt=function(){};bt.prototype.add=function(){},bt.prototype.addAll=function(){},bt.prototype.isEmpty=function(){},bt.prototype.iterator=function(){},bt.prototype.size=function(){},bt.prototype.toArray=function(){},bt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var xt=function(){};xt.prototype.hasNext=function(){},xt.prototype.next=function(){},xt.prototype.remove=function(){};var wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bt);(r.prototype=new Error).name="NoSuchElementException";var Et=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new St(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(wt),St=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(xt),Ct=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof S&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],l=arguments[1];if(arguments[2])for(var u=0;u<s.length;u++)this.add(s[u],l);else for(var c=s.length-1;c>=0;c--)this.add(s[c],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof S){var h=arguments[0],d=arguments[1];if(!arguments[2]){var p=this.size();if(p>0){if(h>0&&this.get(h-1).equals2D(d))return null;if(h<p&&this.get(h).equals2D(d))return null}}t.prototype.add.call(this,h,d)}}else if(4===arguments.length){var f=arguments[0],m=arguments[1],g=arguments[2],y=arguments[3],v=1;g>y&&(v=-1);for(var _=g;_!==y;_+=v)this.add(f[_],m);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new S(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Et),Tt=function(){},It={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};It.ForwardComparator.get=function(){return kt},It.BidirectionalComparator.get=function(){return At},It.coordArrayType.get=function(){return new Array(0).fill(null)},Tt.prototype.interfaces_=function(){return[]},Tt.prototype.getClass=function(){return Tt},Tt.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},Tt.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Tt.indexOf(r,e)<0)return r}return null},Tt.scroll=function(t,e){var n=Tt.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);G.arraycopy(t,n,r,0,t.length-n),G.arraycopy(t,0,r,t.length-n,n),G.arraycopy(r,0,t,0,t.length)},Tt.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},Tt.intersection=function(t,e){for(var n=new Ct,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Tt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Tt.removeRepeatedPoints=function(t){return Tt.hasRepeatedPoints(t)?new Ct(t,!1).toCoordinateArray():t},Tt.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Tt.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Tt.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new S(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],l=0;l<s;l++)o[a+l]=new S(r[i+l])},Tt.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Tt.envelope=function(t){for(var e=new $,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Tt.toCoordinateArray=function(t){return t.toArray(Tt.coordArrayType)},Tt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Tt.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Tt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Tt.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Tt.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Tt.extract=function(t,e,n){e=D.clamp(e,0,t.length);var r=(n=D.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(Tt,It);var kt=function(){};kt.prototype.compare=function(t,e){return Tt.compare(t,e)},kt.prototype.interfaces_=function(){return[E]},kt.prototype.getClass=function(){return kt};var At=function(){};At.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Tt.compare(n,r);return Tt.isEqualReversed(n,r)?0:i},At.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Tt.increasingDirection(n),o=Tt.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,l=0;l<n.length;l++){var u=n[a].compareTo(r[s]);if(0!==u)return u;a+=i,s+=o}return 0},At.prototype.interfaces_=function(){return[E]},At.prototype.getClass=function(){return At};var Pt=function(){};Pt.prototype.get=function(){},Pt.prototype.put=function(){},Pt.prototype.size=function(){},Pt.prototype.values=function(){},Pt.prototype.entrySet=function(){};var Dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pt);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new bt).contains=function(){};var Mt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Ot(this)},e}(o),Ot=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(xt),Rt=0;(h.prototype=new Dt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},h.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Rt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:Rt,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},h.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(s(t)===u(s(s(t)))){var e=c(s(s(t)));1===a(e)?(l(s(t),Rt),l(e,Rt),l(s(s(t)),1),t=s(s(t))):(t===c(s(t))&&(t=s(t),this.rotateLeft(t)),l(s(t),Rt),l(s(s(t)),1),this.rotateRight(s(s(t))))}else{var n=u(s(s(t)));1===a(n)?(l(s(t),Rt),l(n,Rt),l(s(s(t)),1),t=s(s(t))):(t===u(s(t))&&(t=s(t),this.rotateRight(t)),l(s(t),Rt),l(s(s(t)),1),this.rotateLeft(s(s(t))))}this.root_.color=Rt},h.prototype.values=function(){var t=new Et,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=h.successor(e));)t.add(e.value);return t},h.prototype.entrySet=function(){var t=new Mt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=h.successor(e));)t.add(e);return t},h.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},h.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},h.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},h.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},h.prototype.size=function(){return this.size_};var Nt=function(){};Nt.prototype.interfaces_=function(){return[]},Nt.prototype.getClass=function(){return Nt},d.prototype=new o,(p.prototype=new d).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},p.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},p.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},p.prototype.remove=function(t){throw new i},p.prototype.size=function(){return this.array_.length},p.prototype.isEmpty=function(){return 0===this.array_.length},p.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},p.prototype.iterator=function(){return new Lt(this)};var Lt=function(t){this.treeSet_=t,this.position_=0};Lt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},Lt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Lt.prototype.remove=function(){throw new i};var Ft=function(){};Ft.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Ft.asList=function(t){for(var e=new Et,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var zt=function(){},Bt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bt.P.get=function(){return 0},Bt.L.get=function(){return 1},Bt.A.get=function(){return 2},Bt.FALSE.get=function(){return-1},Bt.TRUE.get=function(){return-2},Bt.DONTCARE.get=function(){return-3},Bt.SYM_FALSE.get=function(){return"F"},Bt.SYM_TRUE.get=function(){return"T"},Bt.SYM_DONTCARE.get=function(){return"*"},Bt.SYM_P.get=function(){return"0"},Bt.SYM_L.get=function(){return"1"},Bt.SYM_A.get=function(){return"2"},zt.prototype.interfaces_=function(){return[]},zt.prototype.getClass=function(){return zt},zt.toDimensionSymbol=function(t){switch(t){case zt.FALSE:return zt.SYM_FALSE;case zt.TRUE:return zt.SYM_TRUE;case zt.DONTCARE:return zt.SYM_DONTCARE;case zt.P:return zt.SYM_P;case zt.L:return zt.SYM_L;case zt.A:return zt.SYM_A}throw new v("Unknown dimension value: "+t)},zt.toDimensionValue=function(t){switch(N.toUpperCase(t)){case zt.SYM_FALSE:return zt.FALSE;case zt.SYM_TRUE:return zt.TRUE;case zt.SYM_DONTCARE:return zt.DONTCARE;case zt.SYM_P:return zt.P;case zt.SYM_L:return zt.L;case zt.SYM_A:return zt.A}throw new v("Unknown dimension symbol: "+t)},Object.defineProperties(zt,Bt);var jt=function(){};jt.prototype.filter=function(t){},jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt};var Ut=function(){};Ut.prototype.filter=function(t,e){},Ut.prototype.isDone=function(){},Ut.prototype.isGeometryChanged=function(){},Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut};var Vt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new v("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new $,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Ft.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=zt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=zt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new p(Ft.asList(this._geometries)),n=new p(Ft.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),a=i.getNumGeometries(),s=0;s<o&&s<a;){var l=this.getGeometryN(s),u=i.getGeometryN(s),c=l.compareToSameClass(u,r);if(0!==c)return c;s++}return s<o?1:s<a?-1:0}},e.prototype.apply=function(){if(P(arguments[0],pt))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(P(arguments[0],Ut)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(P(arguments[0],jt)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(P(arguments[0],ut)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ct),qt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?zt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Gt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Nt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Vt),Gt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=ft.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Gt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Gt.prototype.getBoundary=function(){return this._geom instanceof Xt?this.boundaryLineString(this._geom):this._geom instanceof qt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Gt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Gt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Gt.prototype.computeBoundaryCoordinates=function(t){var e=new Et;this._endpointMap=new h;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Tt.toCoordinateArray(e)},Gt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Yt,this._endpointMap.put(t,e)),e.count++},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt},Gt.getBoundary=function(){return 1===arguments.length?new Gt(arguments[0]).getBoundary():2===arguments.length?new Gt(arguments[0],arguments[1]).getBoundary():void 0};var Yt=function(){this.count=null};Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt};var $t=function(){},Wt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};$t.prototype.interfaces_=function(){return[]},$t.prototype.getClass=function(){return $t},$t.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},$t.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}($t.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+$t.NEWLINE}catch(t){if(!(t instanceof f))throw t;et.shouldNeverReachHere()}return o}},$t.split=function(t,e){for(var n=e.length,r=new Et,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),l=0;l<s.length;l++)s[l]=r.get(l);return s},$t.toString=function(){if(1===arguments.length){var t=arguments[0];return $t.SIMPLE_ORDINATE_FORMAT.format(t)}},$t.spaces=function(t){return $t.chars(" ",t)},Wt.NEWLINE.get=function(){return G.getProperty("line.separator")},Wt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties($t,Wt);var Ht=function(){};Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht},Ht.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Ht.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,j.X)===t.getOrdinate(e-1,j.X)&&t.getOrdinate(0,j.Y)===t.getOrdinate(e-1,j.Y)},Ht.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!_.isNaN(a)||!_.isNaN(s)))return!1}return!0},Ht.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Ht.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Ht.copy(e,i-1,r,o,1);return r},Ht.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Ht.swap(t,r,e-r)},Ht.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Ht.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Ht.copyCoord(t,e+o,n,r+o)},Ht.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new O;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append($t.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Ht.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Ht.createClosedRing(t,e,4):e.getOrdinate(0,j.X)===e.getOrdinate(n-1,j.X)&&e.getOrdinate(0,j.Y)===e.getOrdinate(n-1,j.Y)?e:Ht.createClosedRing(t,e,n+1)},Ht.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Ht.copy(e,0,r,0,i);for(var o=i;o<n;o++)Ht.copy(e,0,r,o,1);return r};var Xt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new $:this._points.expandEnvelope(new $)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Ht.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?zt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return st.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Ht.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(P(arguments[0],pt))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(P(arguments[0],Ut)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(P(arguments[0],jt)||P(arguments[0],ut))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Gt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new v("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Nt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ct),Zt=function(){};Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt};var Kt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new $;var t=new $;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return zt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(P(arguments[0],pt)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(P(arguments[0],Ut)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(P(arguments[0],jt)||P(arguments[0],ut))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ct),Qt=function(){};Qt.prototype.interfaces_=function(){return[]},Qt.prototype.getClass=function(){return Qt};var Jt=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new v("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new v("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(st.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(st.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var l=t.getX(s),u=t.getY(s);if(l!==o===(u!==a))return!1;o=l,a=u}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Ft.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);G.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Tt.minCoordinate(e.getCoordinates());Tt.scroll(r,i),G.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],st.isCCW(e.getCoordinates())===n&&Tt.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,a=i._shell,s=o.compareToSameClass(a,r);if(0!==s)return s;for(var l=this.getNumInteriorRing(),u=i.getNumInteriorRing(),c=0;c<l&&c<u;){var h=this.getInteriorRingN(c),d=i.getInteriorRingN(c),p=h.compareToSameClass(d,r);if(0!==p)return p;c++}return c<l?1:c<u?-1:0}},e.prototype.apply=function(t){if(P(t,pt)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(P(t,Ut)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(P(t,jt))t.filter(this);else if(P(t,ut)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Qt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ct),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return zt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Vt),ee=function(t){function e(e,n){e instanceof S&&n instanceof ye&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return zt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Ht.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new v("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new v("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Xt),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Et,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Qt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Vt),re=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Vt?this.editGeometryCollection(t,e):t instanceof Jt?this.editPolygon(t,e):t instanceof Kt||t instanceof Xt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new Et,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===te?this._factory.createMultiPoint(r.toArray([])):n.getClass()===qt?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},re.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new Et,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return ae},ie.CoordinateSequenceOperation.get=function(){return se},Object.defineProperties(re,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var ae=function(){};ae.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Xt?e.createLineString(n):t instanceof Kt?n.length>0?e.createPoint(n[0]):e.createPoint():t},ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var se=function(){};se.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Xt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Kt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var le=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new S}else if(P(arguments[0],j)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var l=0;l<a;l++)this._coordinates[l]=new S}},ue={serialVersionUID:{configurable:!0}};le.prototype.setOrdinate=function(t,e,n){switch(e){case j.X:this._coordinates[t].x=n;break;case j.Y:this._coordinates[t].y=n;break;case j.Z:this._coordinates[t].z=n;break;default:throw new v("invalid ordinateIndex")}},le.prototype.size=function(){return this._coordinates.length},le.prototype.getOrdinate=function(t,e){switch(e){case j.X:return this._coordinates[t].x;case j.Y:return this._coordinates[t].y;case j.Z:return this._coordinates[t].z}return _.NaN},le.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},le.prototype.getCoordinateCopy=function(t){return new S(this._coordinates[t])},le.prototype.getDimension=function(){return this._dimension},le.prototype.getX=function(t){return this._coordinates[t].x},le.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new le(t,this._dimension)},le.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},le.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new le(t,this._dimension)},le.prototype.toString=function(){if(this._coordinates.length>0){var t=new O(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},le.prototype.getY=function(t){return this._coordinates[t].y},le.prototype.toCoordinateArray=function(){return this._coordinates},le.prototype.interfaces_=function(){return[j,e]},le.prototype.getClass=function(){return le},ue.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(le,ue);var ce=function(){},he={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ce.prototype.readResolve=function(){return ce.instance()},ce.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new le(arguments[0]);if(P(arguments[0],j))return new le(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new le(t):new le(t,e)}},ce.prototype.interfaces_=function(){return[I,e]},ce.prototype.getClass=function(){return ce},ce.instance=function(){return ce.instanceObject},he.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},he.instanceObject.get=function(){return new ce},Object.defineProperties(ce,he);var de=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Et,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Mt;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Pt),pe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof me){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},fe={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};pe.prototype.equals=function(t){if(!(t instanceof pe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},pe.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new R(n).compareTo(new R(r))},pe.prototype.getScale=function(){return this._scale},pe.prototype.isFloating=function(){return this._modelType===pe.FLOATING||this._modelType===pe.FLOATING_SINGLE},pe.prototype.getType=function(){return this._modelType},pe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===pe.FLOATING?t="Floating":this._modelType===pe.FLOATING_SINGLE?t="Floating-Single":this._modelType===pe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},pe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return _.isNaN(t)||this._modelType===pe.FLOATING_SINGLE?t:this._modelType===pe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof S){var e=arguments[0];if(this._modelType===pe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},pe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===pe.FLOATING?t=16:this._modelType===pe.FLOATING_SINGLE?t=6:this._modelType===pe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},pe.prototype.setScale=function(t){this._scale=Math.abs(t)},pe.prototype.interfaces_=function(){return[e,x]},pe.prototype.getClass=function(){return pe},pe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},fe.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},fe.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(pe,fe);var me=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ge={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};me.prototype.readResolve=function(){return me.nameToTypeMap.get(this._name)},me.prototype.toString=function(){return this._name},me.prototype.interfaces_=function(){return[e]},me.prototype.getClass=function(){return me},ge.serialVersionUID.get=function(){return-552860263173159e4},ge.nameToTypeMap.get=function(){return new de},Object.defineProperties(me,ge),pe.Type=me,pe.FIXED=new me("FIXED"),pe.FLOATING=new me("FLOATING"),pe.FLOATING_SINGLE=new me("FLOATING SINGLE");var ye=function t(){this._precisionModel=new pe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?P(arguments[0],I)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof pe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ve={serialVersionUID:{configurable:!0}};ye.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new S(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new S(t.getMinX(),t.getMinY()),new S(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new S(t.getMinX(),t.getMinY()),new S(t.getMinX(),t.getMaxY()),new S(t.getMaxX(),t.getMaxY()),new S(t.getMaxX(),t.getMinY()),new S(t.getMinX(),t.getMinY())]),null)},ye.prototype.createLineString=function(t){return t?t instanceof Array?new Xt(this.getCoordinateSequenceFactory().create(t),this):P(t,j)?new Xt(t,this):void 0:new Xt(this.getCoordinateSequenceFactory().create([]),this)},ye.prototype.createMultiLineString=function(){return 0===arguments.length?new qt(null,this):1===arguments.length?new qt(arguments[0],this):void 0},ye.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(ye.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof Jt)return this.createMultiPolygon(ye.toPolygonArray(t));if(s instanceof Xt)return this.createMultiLineString(ye.toLineStringArray(t));if(s instanceof Kt)return this.createMultiPoint(ye.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},ye.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},ye.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(P(arguments[0],j))return new Kt(arguments[0],this)}},ye.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ye.prototype.createPolygon=function(){if(0===arguments.length)return new Jt(null,null,this);if(1===arguments.length){if(P(arguments[0],j)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Jt(arguments[0],arguments[1],this)},ye.prototype.getSRID=function(){return this._SRID},ye.prototype.createGeometryCollection=function(){return 0===arguments.length?new Vt(null,this):1===arguments.length?new Vt(arguments[0],this):void 0},ye.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},ye.prototype.getPrecisionModel=function(){return this._precisionModel},ye.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(P(arguments[0],j))return new ee(arguments[0],this)}},ye.prototype.createMultiPolygon=function(){return 0===arguments.length?new ne(null,this):1===arguments.length?new ne(arguments[0],this):void 0},ye.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(P(arguments[0],j)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());Ht.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},ye.prototype.interfaces_=function(){return[e]},ye.prototype.getClass=function(){return ye},ye.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.getDefaultCoordinateSequenceFactory=function(){return ce.instance()},ye.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ve.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ye,ve);var _e=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],be=function(t){this.geometryFactory=t||new ye};be.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!xe[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==_e.indexOf(n)?xe[n].apply(this,[e.coordinates]):"GeometryCollection"===n?xe[n].apply(this,[e.geometries]):xe[n].apply(this,[e])},be.prototype.write=function(t){var e=t.getGeometryType();if(!we[e])throw new Error("Geometry is not supported");return we[e].apply(this,[t])};var xe={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!xe[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=xe.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new S(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new S(t[0],t[1]),new S(t[2],t[1]),new S(t[2],t[3]),new S(t[0],t[3]),new S(t[0],t[1])])},Point:function(t){var e=new S(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=xe.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=xe.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=xe.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(xe.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},we={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:we.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(we.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=we.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=we.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(we[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Ee=function(t){this.geometryFactory=t||new ye,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new be(this.geometryFactory)};Ee.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===pe.FIXED&&this.reducePrecision(e),e},Ee.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Se=function(){this.parser=new be(this.geometryFactory)};Se.prototype.write=function(t){return this.parser.write(t)};var Ce=function(){},Te={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ce.prototype.interfaces_=function(){return[]},Ce.prototype.getClass=function(){return Ce},Ce.opposite=function(t){return t===Ce.LEFT?Ce.RIGHT:t===Ce.RIGHT?Ce.LEFT:t},Te.ON.get=function(){return 0},Te.LEFT.get=function(){return 1},Te.RIGHT.get=function(){return 2},Object.defineProperties(Ce,Te),(m.prototype=new Error).name="EmptyStackException",(g.prototype=new wt).add=function(t){return this.array_.push(t),!0},g.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},g.prototype.push=function(t){return this.array_.push(t),t},g.prototype.pop=function(t){if(0===this.array_.length)throw new m;return this.array_.pop()},g.prototype.peek=function(){if(0===this.array_.length)throw new m;return this.array_[this.array_.length-1]},g.prototype.empty=function(){return 0===this.array_.length},g.prototype.isEmpty=function(){return this.empty()},g.prototype.search=function(t){return this.array_.indexOf(t)},g.prototype.size=function(){return this.array_.length},g.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Ie=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Ie.prototype.getCoordinate=function(){return this._minCoord},Ie.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Ie.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=st.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===st.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===st.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Ie.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Ce.LEFT;return n[e].y<n[e+1].y&&(r=Ce.RIGHT),r},Ie.prototype.getEdge=function(){return this._orientedDe},Ie.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Ie.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ie.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ce.LEFT&&(this._orientedDe=this._minDe.getSym())},Ie.prototype.interfaces_=function(){return[]},Ie.prototype.getClass=function(){return Ie};var ke=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new S(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(J),Ae=function(){this.array_=[]};Ae.prototype.addLast=function(t){this.array_.push(t)},Ae.prototype.removeFirst=function(){return this.array_.shift()},Ae.prototype.isEmpty=function(){return 0===this.array_.length};var Pe=function(){this._finder=null,this._dirEdgeList=new Et,this._nodes=new Et,this._rightMostCoord=null,this._env=null,this._finder=new Ie};Pe.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Pe.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Pe.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new ke("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Pe.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ce.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Pe.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Pe.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ce.RIGHT)>=1&&e.getDepth(Ce.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Pe.prototype.computeDepths=function(t){var e=new Mt,n=new Ae,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Pe.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Pe.prototype.getEnvelope=function(){if(null===this._env){for(var t=new $,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Pe.prototype.addReachable=function(t){var e=new g;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Pe.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ce.LEFT,t.getDepth(Ce.RIGHT)),e.setDepth(Ce.RIGHT,t.getDepth(Ce.LEFT))},Pe.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Pe.prototype.getNodes=function(){return this._nodes},Pe.prototype.getDirectedEdges=function(){return this._dirEdgeList},Pe.prototype.interfaces_=function(){return[x]},Pe.prototype.getClass=function(){return Pe};var De=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ce.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Ce.ON]=o,this.location[Ce.LEFT]=a,this.location[Ce.RIGHT]=s}};De.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},De.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==k.NONE)return!1;return!0},De.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===k.NONE&&(this.location[e]=t)},De.prototype.isLine=function(){return 1===this.location.length},De.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ce.ON]=this.location[Ce.ON],e[Ce.LEFT]=k.NONE,e[Ce.RIGHT]=k.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===k.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},De.prototype.getLocations=function(){return this.location},De.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ce.LEFT];this.location[Ce.LEFT]=this.location[Ce.RIGHT],this.location[Ce.RIGHT]=t},De.prototype.toString=function(){var t=new O;return this.location.length>1&&t.append(k.toLocationSymbol(this.location[Ce.LEFT])),t.append(k.toLocationSymbol(this.location[Ce.ON])),this.location.length>1&&t.append(k.toLocationSymbol(this.location[Ce.RIGHT])),t.toString()},De.prototype.setLocations=function(t,e,n){this.location[Ce.ON]=t,this.location[Ce.LEFT]=e,this.location[Ce.RIGHT]=n},De.prototype.get=function(t){return t<this.location.length?this.location[t]:k.NONE},De.prototype.isArea=function(){return this.location.length>1},De.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===k.NONE)return!0;return!1},De.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ce.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},De.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(k.NONE)},De.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},De.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De};var Me=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new De(e),this.elt[1]=new De(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new De(n.elt[0]),this.elt[1]=new De(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new De(k.NONE),this.elt[1]=new De(k.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new De(o,a,s),this.elt[1]=new De(o,a,s)}else if(4===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new De(k.NONE,k.NONE,k.NONE),this.elt[1]=new De(k.NONE,k.NONE,k.NONE),this.elt[l].setLocations(u,c,h)}};Me.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Me.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Me.prototype.isNull=function(t){return this.elt[t].isNull()},Me.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Me.prototype.isLine=function(t){return this.elt[t].isLine()},Me.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new De(t.elt[e]):this.elt[e].merge(t.elt[e])},Me.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Me.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ce.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Me.prototype.toString=function(){var t=new O;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Me.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Me.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Me.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ce.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Me.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Me.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Me.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new De(this.elt[t].location[0]))},Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me},Me.toLineLabel=function(t){for(var e=new Me(k.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Oe=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Et,this._pts=new Et,this._label=new Me(k.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Et,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Oe.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=st.isCCW(this._ring.getCoordinates())},Oe.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Oe.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new ke("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new ke("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();et.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Oe.prototype.getLinearRing=function(){return this._ring},Oe.prototype.getCoordinate=function(t){return this._pts.get(t)},Oe.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Oe.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},Oe.prototype.isHole=function(){return this._isHole},Oe.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Oe.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!st.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Oe.prototype.addHole=function(t){this._holes.add(t)},Oe.prototype.isShell=function(){return null===this._shell},Oe.prototype.getLabel=function(){return this._label},Oe.prototype.getEdges=function(){return this._edges},Oe.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Oe.prototype.getShell=function(){return this._shell},Oe.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Ce.RIGHT);if(n===k.NONE)return null;if(this._label.getLocation(e)===k.NONE)return this._label.setLocation(e,n),null}},Oe.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Oe.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe};var Re=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Oe),Ne=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Et,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Re(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Oe),Le=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Le.prototype.setVisited=function(t){this._isVisited=t},Le.prototype.setInResult=function(t){this._isInResult=t},Le.prototype.isCovered=function(){return this._isCovered},Le.prototype.isCoveredSet=function(){return this._isCoveredSet},Le.prototype.setLabel=function(t){this._label=t},Le.prototype.getLabel=function(){return this._label},Le.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Le.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Le.prototype.isInResult=function(){return this._isInResult},Le.prototype.isVisited=function(){return this._isVisited},Le.prototype.interfaces_=function(){return[]},Le.prototype.getClass=function(){return Le};var Fe=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Me(0,k.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=k.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==k.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Me(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Me)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===k.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=k.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case k.BOUNDARY:n=k.INTERIOR;break;case k.INTERIOR:default:n=k.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Le),ze=function(){this.nodeMap=new h,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};ze.prototype.find=function(t){return this.nodeMap.get(t)},ze.prototype.addNode=function(){if(arguments[0]instanceof S){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Fe){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},ze.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},ze.prototype.iterator=function(){return this.nodeMap.values().iterator()},ze.prototype.values=function(){return this.nodeMap.values()},ze.prototype.getBoundaryNodes=function(t){for(var e=new Et,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===k.BOUNDARY&&e.add(r)}return e},ze.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze};var Be=function(){},je={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.isNorthern=function(t){return t===Be.NE||t===Be.NW},Be.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},Be.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Be.isInHalfPlane=function(t,e){return e===Be.SE?t===Be.SE||t===Be.SW:t===e||t===e+1},Be.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Be.NE:Be.SE:e>=0?Be.NW:Be.SW}if(arguments[0]instanceof S&&arguments[1]instanceof S){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new v("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Be.NE:Be.SE:r.y>=n.y?Be.NW:Be.SW}},je.NE.get=function(){return 0},je.NW.get=function(){return 1},je.SW.get=function(){return 2},je.SE.get=function(){return 3},Object.defineProperties(Be,je);var Ue=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};Ue.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:st.computeOrientation(t._p0,t._p1,this._p1)},Ue.prototype.getDy=function(){return this._dy},Ue.prototype.getCoordinate=function(){return this._p0},Ue.prototype.setNode=function(t){this._node=t},Ue.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ue.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ue.prototype.getDirectedCoordinate=function(){return this._p1},Ue.prototype.getDx=function(){return this._dx},Ue.prototype.getLabel=function(){return this._label},Ue.prototype.getEdge=function(){return this._edge},Ue.prototype.getQuadrant=function(){return this._quadrant},Ue.prototype.getNode=function(){return this._node},Ue.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ue.prototype.computeLabel=function(t){},Ue.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Be.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ue.prototype.interfaces_=function(){return[x]},Ue.prototype.getClass=function(){return Ue};var Ve=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Me(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new ke("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ce.LEFT)===k.INTERIOR&&this._label.getLocation(e,Ce.RIGHT)===k.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ce.LEFT]+"/"+this._depth[Ce.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,k.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,k.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Ce.LEFT&&(r=-1);var i=Ce.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===k.EXTERIOR&&e===k.INTERIOR?1:t===k.INTERIOR&&e===k.EXTERIOR?-1:0},e}(Ue),qe=function(){};qe.prototype.createNode=function(t){return new Fe(t,null)},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe};var Ge=function(){if(this._edges=new Et,this._nodes=null,this._edgeEndList=new Et,0===arguments.length)this._nodes=new ze(new qe);else if(1===arguments.length){var t=arguments[0];this._nodes=new ze(t)}};Ge.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Ge.prototype.find=function(t){return this._nodes.find(t)},Ge.prototype.addNode=function(){if(arguments[0]instanceof Fe){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof S){var e=arguments[0];return this._nodes.addNode(e)}},Ge.prototype.getNodeIterator=function(){return this._nodes.iterator()},Ge.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Ge.prototype.debugPrintln=function(t){G.out.println(t)},Ge.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===k.BOUNDARY},Ge.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Ge.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&st.computeOrientation(t,e,r)===st.COLLINEAR&&Be.quadrant(t,e)===Be.quadrant(n,r)},Ge.prototype.getEdgeEnds=function(){return this._edgeEndList},Ge.prototype.debugPrint=function(t){G.out.print(t)},Ge.prototype.getEdgeIterator=function(){return this._edges.iterator()},Ge.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},Ge.prototype.insertEdge=function(t){this._edges.add(t)},Ge.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Ge.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Ve(n,!0),i=new Ve(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},Ge.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Ge.prototype.getNodes=function(){return this._nodes.values()},Ge.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Ge.prototype.interfaces_=function(){return[]},Ge.prototype.getClass=function(){return Ge},Ge.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Ye=function(){this._geometryFactory=null,this._shellList=new Et;var t=arguments[0];this._geometryFactory=t};Ye.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Ye.prototype.computePolygons=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Ye.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new ke("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Ye.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new Et,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},Ye.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Ye.prototype.buildMaximalEdgeRings=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Ne(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Ye.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Ye.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ye.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var l=s.next(),u=l.getLinearRing(),c=u.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&st.isPointInRing(i,u.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=l)}return o},Ye.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ye.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Ge.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new Et,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var $e=function(){};$e.prototype.getBounds=function(){},$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e};var We=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};We.prototype.getItem=function(){return this._item},We.prototype.getBounds=function(){return this._bounds},We.prototype.interfaces_=function(){return[$e,e]},We.prototype.getClass=function(){return We};var He=function(){this._size=null,this._items=null,this._size=0,this._items=new Et,this._items.add(null)};He.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},He.prototype.size=function(){return this._size},He.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},He.prototype.clear=function(){this._size=0,this._items.clear()},He.prototype.isEmpty=function(){return 0===this._size},He.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var Xe=function(){};Xe.prototype.visitItem=function(t){},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var Ze=function(){};Ze.prototype.insert=function(t,e){},Ze.prototype.remove=function(t,e){},Ze.prototype.query=function(){},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var Ke=function(){if(this._childBoundables=new Et,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Qe={serialVersionUID:{configurable:!0}};Ke.prototype.getLevel=function(){return this._level},Ke.prototype.size=function(){return this._childBoundables.size()},Ke.prototype.getChildBoundables=function(){return this._childBoundables},Ke.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Ke.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ke.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ke.prototype.interfaces_=function(){return[$e,e]},Ke.prototype.getClass=function(){return Ke},Qe.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ke,Qe);var Je=function(){};Je.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Je.min=function(t){return Je.sort(t),t.get(0)},Je.sort=function(t,e){var n=t.toArray();e?Ft.sort(n,e):Ft.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Je.singletonList=function(t){var e=new Et;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),r=tn.isComposite(this._boundable2);if(n&&r)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new v("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new tn(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[x]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Ke};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Et,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ke?t+=this.size(n):n instanceof We&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof We&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Et:t}if(1===arguments.length){for(var e=arguments[0],n=new Et,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Ke){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof We?n.add(i.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new We(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Et;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(et.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Ke?this.boundablesAtLevel(n,a,i):(et.isTrue(a instanceof We),-1===n&&i.add(a))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Et;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(P(arguments[2],Xe)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var i=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),s=0;s<a.size();s++){var l=a.get(s);this.getIntersectsOp().intersects(l.getBounds(),i)&&(l instanceof Ke?this.query(i,l,o):l instanceof We?o.visitItem(l.getItem()):et.shouldNeverReachHere())}else if(P(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var u=arguments[0],c=arguments[2],h=arguments[1].getChildBoundables(),d=0;d<h.size();d++){var p=h.get(d);this.getIntersectsOp().intersects(p.getBounds(),u)&&(p instanceof Ke?this.query(u,p,c):p instanceof We?c.add(p.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var l=s.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof Ke&&(o=this.remove(n,l,i))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ke){var r=this.depth(n);r>t&&(t=r)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new Et;n.add(this.createNode(e));var r=new Et(t);Je.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var an=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new Et,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},n.prototype.createNode=function(t){return new sn(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new Et;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(P(arguments[2],Xe)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(P(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var s=arguments[0],l=arguments[1],u=arguments[2];t.prototype.query.call(this,s,l,u)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new Et(t);Je.sort(i,n.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(P(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var r=arguments[0];return this.nearestNeighbour(r,_.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&P(arguments[1],on)){var i=arguments[0],o=arguments[1],a=new tn(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var s=arguments[0],l=arguments[1],u=null,c=new He;for(c.add(s);!c.isEmpty()&&l>0;){var h=c.poll(),d=h.getDistance();if(d>=l)break;h.isLeaves()?(l=d,u=h):h.expandToQueue(c,l)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[2],f=new We(arguments[0],arguments[1]),m=new tn(this.getRoot(),f,p);return this.nearestNeighbour(m)[0]}},n.prototype.interfaces_=function(){return[Ze,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return sn},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(e,r){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(r.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(e,r){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(r.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,r),n}(en),sn=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new $(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ke),ln=function(){};ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln},ln.relativeSign=function(t,e){return t<e?-1:t>e?1:0},ln.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=ln.relativeSign(e.x,n.x),i=ln.relativeSign(e.y,n.y);switch(t){case 0:return ln.compareValue(r,i);case 1:return ln.compareValue(i,r);case 2:return ln.compareValue(i,-r);case 3:return ln.compareValue(-r,i);case 4:return ln.compareValue(-r,-i);case 5:return ln.compareValue(-i,-r);case 6:return ln.compareValue(-i,r);case 7:return ln.compareValue(r,-i)}return et.shouldNeverReachHere("invalid octant value"),0},ln.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var un=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new S(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};un.prototype.getCoordinate=function(){return this.coord},un.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},un.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:ln.compare(this._segmentOctant,this.coord,e.coord)},un.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},un.prototype.isInterior=function(){return this._isInterior},un.prototype.interfaces_=function(){return[x]},un.prototype.getClass=function(){return un};var cn=function(){this._nodeMap=new h,this._edge=null;var t=arguments[0];this._edge=t};cn.prototype.getSplitCoordinates=function(){var t=new Ct;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},cn.prototype.addCollapsedNodes=function(){var t=new Et;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},cn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},cn.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new R(e+1))}},cn.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new S(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new S(e.coord))},cn.prototype.iterator=function(){return this._nodeMap.values().iterator()},cn.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},cn.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},cn.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new R(e[0])),r=i}},cn.prototype.getEdge=function(){return this._edge},cn.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},cn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new S(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new S(e.coord)),new fn(o,this._edge.getData())},cn.prototype.add=function(t,e){var n=new un(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(et.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},cn.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new J("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new J("bad split edge end point at "+i)},cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn};var hn=function(){};hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof S&&arguments[1]instanceof S){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new v("Cannot compute the octant for two identical points "+i);return hn.octant(a,s)}};var dn=function(){};dn.prototype.getCoordinates=function(){},dn.prototype.size=function(){},dn.prototype.getCoordinate=function(t){},dn.prototype.isClosed=function(){},dn.prototype.setData=function(t){},dn.prototype.getData=function(){},dn.prototype.interfaces_=function(){return[]},dn.prototype.getClass=function(){return dn};var pn=function(){};pn.prototype.addIntersection=function(t,e){},pn.prototype.interfaces_=function(){return[dn]},pn.prototype.getClass=function(){return pn};var fn=function(){this._nodeList=new cn(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};fn.prototype.getCoordinates=function(){return this._pts},fn.prototype.size=function(){return this._pts.length},fn.prototype.getCoordinate=function(t){return this._pts[t]},fn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},fn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},fn.prototype.setData=function(t){this._data=t},fn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:hn.octant(t,e)},fn.prototype.getData=function(){return this._data},fn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new S(arguments[0].getIntersection(r));this.addIntersection(i,n)}},fn.prototype.toString=function(){return Q.toLineString(new le(this._pts))},fn.prototype.getNodeList=function(){return this._nodeList},fn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},fn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},fn.prototype.interfaces_=function(){return[pn]},fn.prototype.getClass=function(){return fn},fn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Et;return fn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var mn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new S,this.p1=new S;else if(1===arguments.length){var t=arguments[0];this.p0=new S(t.p0),this.p1=new S(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new S(e,n),this.p1=new S(r,i)}},gn={serialVersionUID:{configurable:!0}};mn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},mn.prototype.orientationIndex=function(){if(arguments[0]instanceof mn){var t=arguments[0],e=st.orientationIndex(this.p0,this.p1,t.p0),n=st.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof S){var r=arguments[0];return st.orientationIndex(this.p0,this.p1,r)}},mn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},mn.prototype.isVertical=function(){return this.p0.x===this.p1.x},mn.prototype.equals=function(t){if(!(t instanceof mn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},mn.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},mn.prototype.project=function(){if(arguments[0]instanceof S){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new S(t);var e=this.projectionFactor(t),n=new S;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof mn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new mn(a,s)}},mn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},mn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},mn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},mn.prototype.distancePerpendicular=function(t){return st.distancePointLinePerpendicular(t,this.p0,this.p1)},mn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},mn.prototype.midPoint=function(){return mn.midPoint(this.p0,this.p1)},mn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?_.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},mn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=_.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var l=t.closestPoint(this.p1);return(i=l.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=l),n},mn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},mn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},mn.prototype.getLength=function(){return this.p0.distance(this.p1)},mn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},mn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},mn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},mn.prototype.lineIntersection=function(t){try{return Y.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof q))throw t}return null},mn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},mn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,l=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,l=e*o/a}return new S(n-l,r+s)},mn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},mn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||_.isNaN(e))&&(e=1),e},mn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},mn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},mn.prototype.distance=function(){if(arguments[0]instanceof mn){var t=arguments[0];return st.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof S){var e=arguments[0];return st.distancePointLine(e,this.p0,this.p1)}},mn.prototype.pointAlong=function(t){var e=new S;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},mn.prototype.hashCode=function(){var t=_.doubleToLongBits(this.p0.x);t^=31*_.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=_.doubleToLongBits(this.p1.x);return n^=31*_.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},mn.prototype.interfaces_=function(){return[x,e]},mn.prototype.getClass=function(){return mn},mn.midPoint=function(t,e){return new S((t.x+e.x)/2,(t.y+e.y)/2)},gn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(mn,gn);var yn=function(){this.tempEnv1=new $,this.tempEnv2=new $,this._overlapSeg1=new mn,this._overlapSeg2=new mn};yn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn};var vn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};vn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},vn.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},vn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},vn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},vn.prototype.setId=function(t){this._id=t},vn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},vn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new $(t,e)}return this._env},vn.prototype.getEndIndex=function(){return this._end},vn.prototype.getStartIndex=function(){return this._start},vn.prototype.getContext=function(){return this._context},vn.prototype.getId=function(){return this._id},vn.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],l=n._pts[r],u=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(l,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn};var _n=function(){};_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n},_n.getChainStartIndices=function(t){var e=0,n=new Et;n.add(new R(e));do{var r=_n.findChainEnd(t,e);n.add(new R(r)),e=r}while(e<t.length-1);return _n.toIntArray(n)},_n.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Be.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Be.quadrant(t[i-1],t[i])===r);)i++;return i-1},_n.getChains=function(){if(1===arguments.length){var t=arguments[0];return _n.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new Et,i=_n.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new vn(e,i[o],i[o+1],n);r.add(a)}return r}},_n.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var bn=function(){};bn.prototype.computeNodes=function(t){},bn.prototype.getNodedSubstrings=function(){},bn.prototype.interfaces_=function(){return[]},bn.prototype.getClass=function(){return bn};var xn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};xn.prototype.setSegmentIntersector=function(t){this._segInt=t},xn.prototype.interfaces_=function(){return[bn]},xn.prototype.getClass=function(){return xn};var wn=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Et,this._index=new an,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return fn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=_n.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new En(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return En},Object.defineProperties(e,n),e}(xn),En=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(yn),Sn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},Cn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Sn.prototype.getEndCapStyle=function(){return this._endCapStyle},Sn.prototype.isSingleSided=function(){return this._isSingleSided},Sn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Sn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Sn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Sn.JOIN_ROUND&&(this._quadrantSegments=Sn.DEFAULT_QUADRANT_SEGMENTS)},Sn.prototype.getJoinStyle=function(){return this._joinStyle},Sn.prototype.setJoinStyle=function(t){this._joinStyle=t},Sn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Sn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Sn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Sn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Sn.prototype.getMitreLimit=function(){return this._mitreLimit},Sn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Sn.prototype.setSingleSided=function(t){this._isSingleSided=t},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn},Sn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Cn.CAP_ROUND.get=function(){return 1},Cn.CAP_FLAT.get=function(){return 2},Cn.CAP_SQUARE.get=function(){return 3},Cn.JOIN_ROUND.get=function(){return 1},Cn.JOIN_MITRE.get=function(){return 2},Cn.JOIN_BEVEL.get=function(){return 3},Cn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Cn.DEFAULT_MITRE_LIMIT.get=function(){return 5},Cn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Sn,Cn);var Tn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=st.COUNTERCLOCKWISE,this._inputLine=t||null},In={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Tn.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},Tn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Tn.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Tn.prototype.isShallowConcavity=function(t,e,n,r){return st.computeOrientation(t,e,n)===this._angleOrientation&&st.distancePointLine(e,t,n)<r},Tn.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Tn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},Tn.prototype.isConcave=function(t,e,n){return st.computeOrientation(t,e,n)===this._angleOrientation},Tn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=st.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Tn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Tn.DELETE;)e++;return e},Tn.prototype.isShallow=function(t,e,n,r){return st.distancePointLine(e,t,n)<r},Tn.prototype.collapseLine=function(){for(var t=new Ct,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Tn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},Tn.simplify=function(t,e){return new Tn(t).simplify(e)},In.INIT.get=function(){return 0},In.DELETE.get=function(){return 1},In.KEEP.get=function(){return 1},In.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Tn,In);var kn=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Et},An={COORDINATE_ARRAY_TYPE:{configurable:!0}};kn.prototype.getCoordinates=function(){return this._ptList.toArray(kn.COORDINATE_ARRAY_TYPE)},kn.prototype.setPrecisionModel=function(t){this._precisionModel=t},kn.prototype.addPt=function(t){var e=new S(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},kn.prototype.revere=function(){},kn.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},kn.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},kn.prototype.toString=function(){return(new ye).createLineString(this.getCoordinates()).toString()},kn.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new S(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},kn.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},An.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(kn,An);var Pn=function(){},Dn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Pn.toDegrees=function(t){return 180*t/Math.PI},Pn.normalize=function(t){for(;t>Math.PI;)t-=Pn.PI_TIMES_2;for(;t<=-Math.PI;)t+=Pn.PI_TIMES_2;return t},Pn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Pn.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Pn.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Pn.interiorAngle=function(t,e,n){var r=Pn.angle(e,t),i=Pn.angle(e,n);return Math.abs(i-r)},Pn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Pn.PI_TIMES_2;t>=Pn.PI_TIMES_2&&(t=0)}else{for(;t>=Pn.PI_TIMES_2;)t-=Pn.PI_TIMES_2;t<0&&(t=0)}return t},Pn.angleBetween=function(t,e,n){var r=Pn.angle(e,t),i=Pn.angle(e,n);return Pn.diff(r,i)},Pn.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Pn.toRadians=function(t){return t*Math.PI/180},Pn.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Pn.COUNTERCLOCKWISE:n<0?Pn.CLOCKWISE:Pn.NONE},Pn.angleBetweenOriented=function(t,e,n){var r=Pn.angle(e,t),i=Pn.angle(e,n)-r;return i<=-Math.PI?i+Pn.PI_TIMES_2:i>Math.PI?i-Pn.PI_TIMES_2:i},Dn.PI_TIMES_2.get=function(){return 2*Math.PI},Dn.PI_OVER_2.get=function(){return Math.PI/2},Dn.PI_OVER_4.get=function(){return Math.PI/4},Dn.COUNTERCLOCKWISE.get=function(){return st.COUNTERCLOCKWISE},Dn.CLOCKWISE.get=function(){return st.CLOCKWISE},Dn.NONE.get=function(){return st.COLLINEAR},Object.defineProperties(Pn,Dn);var Mn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new mn,this._seg1=new mn,this._offset0=new mn,this._offset1=new mn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new it,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Sn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},On={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Mn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=st.computeOrientation(this._s0,this._s1,this._s2),r=n===st.CLOCKWISE&&this._side===Ce.LEFT||n===st.COUNTERCLOCKWISE&&this._side===Ce.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Mn.prototype.addLineEndCap=function(t,e){var n=new mn(t,e),r=new mn;this.computeOffsetSegment(n,Ce.LEFT,this._distance,r);var i=new mn;this.computeOffsetSegment(n,Ce.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Sn.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,st.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Sn.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Sn.CAP_SQUARE:var l=new S;l.x=Math.abs(this._distance)*Math.cos(s),l.y=Math.abs(this._distance)*Math.sin(s);var u=new S(r.p1.x+l.x,r.p1.y+l.y),c=new S(i.p1.x+l.x,i.p1.y+l.y);this._segList.addPt(u),this._segList.addPt(c)}},Mn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Mn.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Y.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof q))throw t;o=new S(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Mn.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),l=n.x-t.x,u=n.y-t.y,c=Math.atan2(u,l);r===st.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,c,r,i),this._segList.addPt(n)},Mn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Mn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Sn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Sn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Mn.prototype.createSquare=function(t){this._segList.addPt(new S(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new S(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Mn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Mn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Mn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Mn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Mn.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Pn.angle(i,this._seg0.p0),a=Pn.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Pn.normalize(o+a),l=Pn.normalize(s+Math.PI),u=r*n,c=n-u*Math.abs(Math.sin(a)),h=i.x+u*Math.cos(l),d=i.y+u*Math.sin(l),p=new S(h,d),f=new mn(i,p),m=f.pointAlongOffset(1,c),g=f.pointAlongOffset(1,-c);this._side===Ce.LEFT?(this._segList.addPt(m),this._segList.addPt(g)):(this._segList.addPt(g),this._segList.addPt(m))},Mn.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Ce.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),l=i*n*o/s,u=i*n*a/s;r.p0.x=t.p0.x-u,r.p0.y=t.p0.y+l,r.p1.x=t.p1.x-u,r.p1.y=t.p1.y+l},Mn.prototype.addFilletArc=function(t,e,n,r,i){var o=r===st.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var l=a/s,u=0,c=new S;u<a;){var h=e+o*u;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),u+=l}},Mn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Mn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new S((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new S((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Mn.prototype.createCircle=function(t){var e=new S(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Mn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Mn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new kn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Mn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Mn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Sn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Sn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,st.CLOCKWISE,this._distance))},Mn.prototype.closeRing=function(){this._segList.closeRing()},Mn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Mn.prototype.interfaces_=function(){return[]},Mn.prototype.getClass=function(){return Mn},On.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},On.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},On.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},On.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Mn,On);var Rn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Rn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Tt.reverse(o),o},Rn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Tn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ce.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=Tn.simplify(t,r),l=s.length-1;n.initSideSegments(s[0],s[1],Ce.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment(),n.closeRing()},Rn.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Ce.RIGHT&&(r=-r);var i=Tn.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},Rn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Tn.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Ce.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=Tn.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Ce.LEFT);for(var l=s-2;l>=0;l--)e.addNextSegment(a[l],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},Rn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Sn.CAP_ROUND:e.createCircle(t);break;case Sn.CAP_SQUARE:e.createSquare(t)}},Rn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Rn.prototype.getBufferParameters=function(){return this._bufParams},Rn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Rn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Rn.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Rn.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Tn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ce.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=Tn.simplify(t,r),l=s.length-1;n.initSideSegments(s[0],s[1],Ce.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment()},Rn.prototype.getSegGen=function(t){return new Mn(this._precisionModel,this._bufParams,t)},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},Rn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new S(t[n]);return e};var Nn=function(){this._subgraphs=null,this._seg=new mn,this._cga=new st;var t=arguments[0];this._subgraphs=t},Ln={DepthSegment:{configurable:!0}};Nn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Et,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(P(arguments[2],wt)&&arguments[0]instanceof S&&arguments[1]instanceof Ve){for(var o=arguments[0],a=arguments[1],s=arguments[2],l=a.getEdge().getCoordinates(),u=0;u<l.length-1;u++)if(this._seg.p0=l[u],this._seg.p1=l[u+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x)&&!(this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||st.computeOrientation(this._seg.p0,this._seg.p1,o)===st.RIGHT)){var c=a.getDepth(Ce.LEFT);this._seg.p0.equals(l[u])||(c=a.getDepth(Ce.RIGHT));var h=new Fn(this._seg,c);s.add(h)}}else if(P(arguments[2],wt)&&arguments[0]instanceof S&&P(arguments[1],wt))for(var d=arguments[0],p=arguments[2],f=arguments[1].iterator();f.hasNext();){var m=f.next();m.isForward()&&this.findStabbedSegments(d,m,p)}},Nn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Je.min(e)._leftDepth},Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Ln.DepthSegment.get=function(){return Fn},Object.defineProperties(Nn,Ln);var Fn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new mn(t),this._leftDepth=e};Fn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Fn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Fn.prototype.toString=function(){return this._upwardSeg.toString()},Fn.prototype.interfaces_=function(){return[x]},Fn.prototype.getClass=function(){return Fn};var zn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};zn.prototype.area=function(){return zn.area(this.p0,this.p1,this.p2)},zn.prototype.signedArea=function(){return zn.signedArea(this.p0,this.p1,this.p2)},zn.prototype.interpolateZ=function(t){if(null===t)throw new v("Supplied point is null.");return zn.interpolateZ(t,this.p0,this.p1,this.p2)},zn.prototype.longestSideLength=function(){return zn.longestSideLength(this.p0,this.p1,this.p2)},zn.prototype.isAcute=function(){return zn.isAcute(this.p0,this.p1,this.p2)},zn.prototype.circumcentre=function(){return zn.circumcentre(this.p0,this.p1,this.p2)},zn.prototype.area3D=function(){return zn.area3D(this.p0,this.p1,this.p2)},zn.prototype.centroid=function(){return zn.centroid(this.p0,this.p1,this.p2)},zn.prototype.inCentre=function(){return zn.inCentre(this.p0,this.p1,this.p2)},zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn},zn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},zn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},zn.det=function(t,e,n,r){return t*r-e*n},zn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,l=n.y-o,u=r.y-o,c=a*u-s*l,h=t.x-i,d=t.y-o,p=(u*h-s*d)/c,f=(-l*h+a*d)/c;return e.z+p*(n.z-e.z)+f*(r.z-e.z)},zn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},zn.isAcute=function(t,e,n){return!!Pn.isAcute(t,e,n)&&!!Pn.isAcute(e,n,t)&&!!Pn.isAcute(n,t,e)},zn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,l=e.y-i,u=2*zn.det(o,a,s,l),c=zn.det(a,o*o+a*a,l,s*s+l*l),h=zn.det(o,o*o+a*a,s,s*s+l*l);return new S(r-c/u,i+h/u)},zn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Y(t.x+n/2,t.y+r/2,1),o=new Y(t.x-r+n/2,t.y+n+r/2,1);return new Y(i,o)},zn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new S(t.x+i*o,t.y+i*a)},zn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,l=n.z-t.z,u=i*l-o*s,c=o*a-r*l,h=r*s-i*a,d=u*u+c*c+h*h;return Math.sqrt(d)/2},zn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new S(r,i)},zn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,l=(r*t.y+i*e.y+o*n.y)/a;return new S(s,l)};var Bn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Et;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Bn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,k.EXTERIOR,k.INTERIOR)},Bn.prototype.addPolygon=function(t){var e=this._distance,n=Ce.LEFT;this._distance<0&&(e=-this._distance,n=Ce.RIGHT);var r=t.getExteriorRing(),i=Tt.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,k.EXTERIOR,k.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Tt.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Ce.opposite(n),k.INTERIOR,k.EXTERIOR)}},Bn.prototype.isTriangleErodedCompletely=function(t,e){var n=new zn(t[0],t[1],t[2]),r=n.inCentre();return st.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Bn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Tt.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,k.EXTERIOR,k.INTERIOR)},Bn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new fn(t,new Me(0,k.BOUNDARY,e,n));this._curveList.add(r)},Bn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Bn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=ee.MINIMUM_VALID_SIZE&&st.isCCW(t)&&(o=i,a=r,n=Ce.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},Bn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Jt?this.addPolygon(t):t instanceof Xt?this.addLineString(t):t instanceof Kt?this.addPoint(t):(t instanceof te||t instanceof qt||t instanceof ne||t instanceof Vt)&&this.addCollection(t)},Bn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Bn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn};var jn=function(){};jn.prototype.locate=function(t){},jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn};var Un=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Un.prototype.next=function(){if(this._atStart)return this._atStart=!1,Un.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof Vt?(this._subcollectionIterator=new Un(t),this._subcollectionIterator.next()):t},Un.prototype.remove=function(){throw new Error(this.getClass().getName())},Un.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Un.prototype.interfaces_=function(){return[xt]},Un.prototype.getClass=function(){return Un},Un.isAtomic=function(t){return!(t instanceof Vt)};var Vn=function(){this._geom=null;var t=arguments[0];this._geom=t};Vn.prototype.locate=function(t){return Vn.locate(t,this._geom)},Vn.prototype.interfaces_=function(){return[jn]},Vn.prototype.getClass=function(){return Vn},Vn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&st.isPointInRing(t,e.getCoordinates())},Vn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Vn.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Vn.isPointInRing(t,i))return!1}return!0},Vn.containsPoint=function(t,e){if(e instanceof Jt)return Vn.containsPointInPolygon(t,e);if(e instanceof Vt)for(var n=new Un(e);n.hasNext();){var r=n.next();if(r!==e&&Vn.containsPoint(t,r))return!0}return!1},Vn.locate=function(t,e){return e.isEmpty()?k.EXTERIOR:Vn.containsPoint(t,e)?k.INTERIOR:k.EXTERIOR};var qn=function(){this._edgeMap=new h,this._edgeList=null,this._ptInAreaLocation=[k.NONE,k.NONE]};qn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},qn.prototype.propagateSideLabels=function(t){for(var e=k.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Ce.LEFT)!==k.NONE&&(e=r.getLocation(t,Ce.LEFT))}if(e===k.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Ce.ON)===k.NONE&&s.setLocation(t,Ce.ON,i),s.isArea(t)){var l=s.getLocation(t,Ce.LEFT),u=s.getLocation(t,Ce.RIGHT);if(u!==k.NONE){if(u!==i)throw new ke("side location conflict",a.getCoordinate());l===k.NONE&&et.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=l}else et.isTrue(s.getLocation(t,Ce.LEFT)===k.NONE,"found single null side"),s.setLocation(t,Ce.RIGHT,i),s.setLocation(t,Ce.LEFT,i)}}},qn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},qn.prototype.print=function(t){G.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},qn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},qn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Ce.LEFT);et.isTrue(r!==k.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();et.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Ce.LEFT),l=a.getLocation(t,Ce.RIGHT);if(s===l)return!1;if(l!==i)return!1;i=s}return!0},qn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},qn.prototype.iterator=function(){return this.getEdges().iterator()},qn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Et(this._edgeMap.values())),this._edgeList},qn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===k.NONE&&(this._ptInAreaLocation[t]=Vn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},qn.prototype.toString=function(){var t=new O;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},qn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},qn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===k.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),l=0;l<2;l++)if(s.isAnyNull(l)){var u=k.NONE;if(e[l])u=k.EXTERIOR;else{var c=a.getCoordinate();u=this.getLocation(l,c,t)}s.setAllLocationsIfNull(l,u)}},qn.prototype.getDegree=function(){return this._edgeMap.size()},qn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn};var Gn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new ke("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Be.isNorthern(i)&&Be.isNorthern(o)?n:Be.isNorthern(i)||Be.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){G.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Et;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Ce.LEFT),r=t.getDepth(Ce.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new ke("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var l=this._edgeList.get(s);l.setEdgeDepths(Ce.RIGHT,a),a=l.getDepth(Ce.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=k.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=k.INTERIOR;break}if(r.isInResult()){t=k.EXTERIOR;break}}}if(t===k.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===k.INTERIOR):(a.isInResult()&&(i=k.EXTERIOR),s.isInResult()&&(i=k.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Me(k.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==k.INTERIOR&&o!==k.BOUNDARY||this._label.setLocation(i,k.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qn),Yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Fe(t,new Gn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qe),$n=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};$n.prototype.compareTo=function(t){var e=t;return $n.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},$n.prototype.interfaces_=function(){return[x]},$n.prototype.getClass=function(){return $n},$n.orientation=function(t){return 1===Tt.increasingDirection(t)},$n.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,l=e?0:t.length-1,u=r?0:n.length-1;;){var c=t[l].compareTo(n[u]);if(0!==c)return c;var h=(l+=i)===a,d=(u+=o)===s;if(h&&!d)return-1;if(!h&&d)return 1;if(h&&d)return 0}};var Wn=function(){this._edges=new Et,this._ocaMap=new h};Wn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Wn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Wn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Wn.prototype.iterator=function(){return this._edges.iterator()},Wn.prototype.getEdges=function(){return this._edges},Wn.prototype.get=function(t){return this._edges.get(t)},Wn.prototype.findEqualEdge=function(t){var e=new $n(t.getCoordinates());return this._ocaMap.get(e)},Wn.prototype.add=function(t){this._edges.add(t);var e=new $n(t.getCoordinates());this._ocaMap.put(e,t)},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn};var Hn=function(){};Hn.prototype.processIntersections=function(t,e,n,r){},Hn.prototype.isDone=function(){},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Xn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Xn.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Xn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Xn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Xn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Xn.prototype.getLineIntersector=function(){return this._li},Xn.prototype.hasProperIntersection=function(){return this._hasProper},Xn.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Xn.prototype.hasIntersection=function(){return this._hasIntersection},Xn.prototype.isDone=function(){return!1},Xn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Xn.prototype.interfaces_=function(){return[Hn]},Xn.prototype.getClass=function(){return Xn},Xn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Zn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new S(t),this.segmentIndex=e,this.dist=n};Zn.prototype.getSegmentIndex=function(){return this.segmentIndex},Zn.prototype.getCoordinate=function(){return this.coord},Zn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Zn.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Zn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Zn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Zn.prototype.getDistance=function(){return this.dist},Zn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Zn.prototype.interfaces_=function(){return[x]},Zn.prototype.getClass=function(){return Zn};var Kn=function(){this._nodeMap=new h,this.edge=null;var t=arguments[0];this.edge=t};Kn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Kn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Kn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Kn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Kn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new S(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new nr(o,new Me(this.edge._label))},Kn.prototype.add=function(t,e,n){var r=new Zn(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Kn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn};var Qn=function(){};Qn.prototype.getChainStartIndices=function(t){var e=0,n=new Et;n.add(new R(e));do{var r=this.findChainEnd(t,e);n.add(new R(r)),e=r}while(e<t.length-1);return Qn.toIntArray(n)},Qn.prototype.findChainEnd=function(t,e){for(var n=Be.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Be.quadrant(t[r-1],t[r])===n;)r++;return r-1},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn},Qn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Jn=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new $,this.env2=new $;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Qn;this.startIndex=e.getChainStartIndices(this.pts)};Jn.prototype.getCoordinates=function(){return this.pts},Jn.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Jn.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Jn.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4],u=arguments[5],c=this.pts[i],h=this.pts[o],d=a.pts[s],p=a.pts[l];if(o-i==1&&l-s==1)return u.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(c,h),this.env2.init(d,p),!this.env1.intersects(this.env2))return null;var f=Math.trunc((i+o)/2),m=Math.trunc((s+l)/2);i<f&&(s<m&&this.computeIntersectsForChain(i,f,a,s,m,u),m<l&&this.computeIntersectsForChain(i,f,a,m,l,u)),f<o&&(s<m&&this.computeIntersectsForChain(f,o,a,s,m,u),m<l&&this.computeIntersectsForChain(f,o,a,m,l,u))}},Jn.prototype.getStartIndexes=function(){return this.startIndex},Jn.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn};var tr=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},er={NULL_VALUE:{configurable:!0}};tr.prototype.getDepth=function(t,e){return this._depth[t][e]},tr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},tr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===tr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===tr.NULL_VALUE}},tr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},tr.prototype.getDelta=function(t){return this._depth[t][Ce.RIGHT]-this._depth[t][Ce.LEFT]},tr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?k.EXTERIOR:k.INTERIOR},tr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==k.EXTERIOR&&r!==k.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=tr.depthAtLocation(r):this._depth[e][n]+=tr.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===k.INTERIOR&&this._depth[i][o]++}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.depthAtLocation=function(t){return t===k.EXTERIOR?0:t===k.INTERIOR?1:tr.NULL_VALUE},er.NULL_VALUE.get=function(){return-1},Object.defineProperties(tr,er);var nr=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Kn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tr,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Me.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Jn(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new $;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new S(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var l=this.pts[s];i.equals2D(l)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new O;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ce.ON),e.getLocation(1,Ce.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ce.LEFT),e.getLocation(1,Ce.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ce.RIGHT),e.getLocation(1,Ce.RIGHT),2))},e}(Le),rr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Wn,this._bufParams=t||null};rr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Me(t.getLabel())).flip(),n.merge(r);var i=rr.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rr.depthDelta(t.getLabel()))},rr.prototype.buildSubgraphs=function(t,e){for(var n=new Et,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new Nn(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rr.prototype.createSubgraphs=function(t){for(var e=new Et,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Pe;i.create(r),e.add(i)}}return Je.sort(e,Je.reverseOrder()),e},rr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new wn,n=new it;return n.setPrecisionModel(t),e.setSegmentIntersector(new Xn(n)),e},rr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Rn(n,this._bufParams),i=new Bn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Ge(new Yn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Ye(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},rr.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new nr(i.getCoordinates(),new Me(a));this.insertUniqueEdge(s)}}},rr.prototype.setNoder=function(t){this._workingNoder=t},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.depthDelta=function(t){var e=t.getLocation(0,Ce.LEFT),n=t.getLocation(0,Ce.RIGHT);return e===k.INTERIOR&&n===k.EXTERIOR?1:e===k.EXTERIOR&&n===k.INTERIOR?-1:0},rr.convertSegStrings=function(t){for(var e=new ye,n=new Et;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ir=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ir.prototype.rescale=function(){if(P(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&G.out.println(n)}},ir.prototype.scale=function(){if(P(arguments[0],bt)){for(var t=arguments[0],e=new Et,n=t.iterator();n.hasNext();){var r=n.next();e.add(new fn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new S(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return Tt.removeRepeatedPoints(o)}},ir.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ir.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ir.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ir.prototype.interfaces_=function(){return[bn]},ir.prototype.getClass=function(){return ir};var or=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},ar={fact:{configurable:!0}};or.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new J("found endpt/interior pt intersection at index "+o+" :pt "+n)},or.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),l=0;l<a.length-1;l++)for(var u=0;u<s.length-1;u++)this.checkInteriorIntersections(i,l,o,u);else if(4===arguments.length){var c=arguments[0],h=arguments[1],d=arguments[2],p=arguments[3];if(c===d&&h===p)return null;var f=c.getCoordinates()[h],m=c.getCoordinates()[h+1],g=d.getCoordinates()[p],y=d.getCoordinates()[p+1];if(this._li.computeIntersection(f,m,g,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,f,m)||this.hasInteriorIntersection(this._li,g,y)))throw new J("found non-noded intersection at "+f+"-"+m+" and "+g+"-"+y)}},or.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},or.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},or.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},or.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new J("found non-noded collapse at "+or.fact.createLineString([t,e,n]))},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},ar.fact.get=function(){return new ye},Object.defineProperties(or,ar);var sr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new v("Scale factor must be non-zero");1!==e&&(this._pt=new S(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new S,this._p1Scaled=new S),this.initCorners(this._pt)},lr={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sr.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return et.isTrue(!(a&&s),"Found bad envelope test"),s},sr.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new S(this._maxx,this._maxy),this._corner[1]=new S(this._minx,this._maxy),this._corner[2]=new S(this._minx,this._miny),this._corner[3]=new S(this._maxx,this._miny)},sr.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sr.prototype.getCoordinate=function(){return this._originalPt},sr.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=sr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new $(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},sr.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},sr.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!t.equals(this._pt)||!!e.equals(this._pt))))},sr.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr},lr.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sr,lr);var ur=function(){this.tempEnv1=new $,this.selectedSegment=new mn};ur.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur};var cr=function(){this._index=null;var t=arguments[0];this._index=t},hr={HotPixelSnapAction:{configurable:!0}};cr.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new dr(e,n,r);return this._index.query(i,{interfaces_:function(){return[Xe]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},hr.HotPixelSnapAction.get=function(){return dr},Object.defineProperties(cr,hr);var dr=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ur),pr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Et};pr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},pr.prototype.isDone=function(){return!1},pr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},pr.prototype.interfaces_=function(){return[Hn]},pr.prototype.getClass=function(){return pr};var fr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};fr.prototype.checkCorrectness=function(t){var e=fn.getNodedSubstrings(t),n=new or(e);try{n.checkValid()}catch(t){if(!(t instanceof V))throw t;t.printStackTrace()}},fr.prototype.getNodedSubstrings=function(){return fn.getNodedSubstrings(this._nodedSegStrings)},fr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},fr.prototype.findInteriorIntersections=function(t,e){var n=new pr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},fr.prototype.computeVertexSnaps=function(){if(P(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof fn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new sr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},fr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new wn,this._pointSnapper=new cr(this._noder.getIndex()),this.snapRound(t,this._li)},fr.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new sr(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},fr.prototype.interfaces_=function(){return[bn]},fr.prototype.getClass=function(){return fr};var mr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Sn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},gr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};mr.prototype.bufferFixedPrecision=function(t){var e=new ir(new fr(new pe(1)),t.getScale()),n=new rr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},mr.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=mr.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof ke))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=mr.precisionScaleFactor(this._argGeom,this._distance,n),i=new pe(r);this.bufferFixedPrecision(i)}},mr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===pe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},mr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},mr.prototype.bufferOriginalPrecision=function(){try{var t=new rr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof J))throw t;this._saveException=t}},mr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},mr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},mr.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new mr(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new mr(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof Sn&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var i=arguments[1];return new mr(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],l=new mr(arguments[0]);return l.setQuadrantSegments(a),l.setEndCapStyle(s),l.getResultGeometry(o)}},mr.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=D.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},gr.CAP_ROUND.get=function(){return Sn.CAP_ROUND},gr.CAP_BUTT.get=function(){return Sn.CAP_FLAT},gr.CAP_FLAT.get=function(){return Sn.CAP_FLAT},gr.CAP_SQUARE.get=function(){return Sn.CAP_SQUARE},gr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(mr,gr);var yr=function(){this._pt=[new S,new S],this._distance=_.NaN,this._isNull=!0};yr.prototype.getCoordinates=function(){return this._pt},yr.prototype.getCoordinate=function(t){return this._pt[t]},yr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},yr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},yr.prototype.getDistance=function(){return this._distance},yr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr};var vr=function(){};vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr},vr.computeDistance=function(){if(arguments[2]instanceof yr&&arguments[0]instanceof Xt&&arguments[1]instanceof S)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new mn,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof yr&&arguments[0]instanceof Jt&&arguments[1]instanceof S){var a=arguments[0],s=arguments[1],l=arguments[2];vr.computeDistance(a.getExteriorRing(),s,l);for(var u=0;u<a.getNumInteriorRing();u++)vr.computeDistance(a.getInteriorRingN(u),s,l)}else if(arguments[2]instanceof yr&&arguments[0]instanceof ct&&arguments[1]instanceof S){var c=arguments[0],h=arguments[1],d=arguments[2];if(c instanceof Xt)vr.computeDistance(c,h,d);else if(c instanceof Jt)vr.computeDistance(c,h,d);else if(c instanceof Vt)for(var p=c,f=0;f<p.getNumGeometries();f++){var m=p.getGeometryN(f);vr.computeDistance(m,h,d)}else d.setMinimum(c.getCoordinate(),h)}else if(arguments[2]instanceof yr&&arguments[0]instanceof mn&&arguments[1]instanceof S){var g=arguments[1],y=arguments[2],v=arguments[0].closestPoint(g);y.setMinimum(v,g)}};var _r=function(t){this._maxPtDist=new yr,this._inputGeom=t||null},br={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};_r.prototype.computeMaxMidpointDistance=function(t){var e=new wr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.computeMaxVertexDistance=function(t){var e=new xr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},_r.prototype.getDistancePoints=function(){return this._maxPtDist},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r},br.MaxPointDistanceFilter.get=function(){return xr},br.MaxMidpointDistanceFilter.get=function(){return wr},Object.defineProperties(_r,br);var xr=function(t){this._maxPtDist=new yr,this._minPtDist=new yr,this._geom=t||null};xr.prototype.filter=function(t){this._minPtDist.initialize(),vr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xr.prototype.getMaxPointDistance=function(){return this._maxPtDist},xr.prototype.interfaces_=function(){return[pt]},xr.prototype.getClass=function(){return xr};var wr=function(t){this._maxPtDist=new yr,this._minPtDist=new yr,this._geom=t||null};wr.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new S((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),vr.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wr.prototype.isDone=function(){return!1},wr.prototype.isGeometryChanged=function(){return!1},wr.prototype.getMaxPointDistance=function(){return this._maxPtDist},wr.prototype.interfaces_=function(){return[Ut]},wr.prototype.getClass=function(){return wr};var Er=function(t){this._comps=t||null};Er.prototype.filter=function(t){t instanceof Jt&&this._comps.add(t)},Er.prototype.interfaces_=function(){return[jt]},Er.prototype.getClass=function(){return Er},Er.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Er.getPolygons(t,new Et)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Jt?n.add(e):e instanceof Vt&&e.apply(new Er(n)),n}};var Sr=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Sr.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Xt&&this._lines.add(t)},Sr.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Sr.prototype.interfaces_=function(){return[ut]},Sr.prototype.getClass=function(){return Sr},Sr.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Sr.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Sr.getLines(e,n))}},Sr.getLines=function(){if(1===arguments.length){var t=arguments[0];return Sr.getLines(t,!1)}if(2===arguments.length){if(P(arguments[0],bt)&&P(arguments[1],bt)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next();Sr.getLines(r,e)}return e}if(arguments[0]instanceof ct&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],a=new Et;return i.apply(new Sr(a,o)),a}if(arguments[0]instanceof ct&&P(arguments[1],bt)){var s=arguments[0],l=arguments[1];return s instanceof Xt?l.add(s):s.apply(new Sr(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&P(arguments[0],bt)&&P(arguments[1],bt)){for(var u=arguments[1],c=arguments[2],h=arguments[0].iterator();h.hasNext();){var d=h.next();Sr.getLines(d,u,c)}return u}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ct&&P(arguments[1],bt)){var p=arguments[1],f=arguments[2];return arguments[0].apply(new Sr(p,f)),p}}};var Cr=function(){if(this._boundaryRule=ft.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new v("Rule must be non-null");this._boundaryRule=t}};Cr.prototype.locateInternal=function(){if(arguments[0]instanceof S&&arguments[1]instanceof Jt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return k.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===k.EXTERIOR)return k.EXTERIOR;if(r===k.BOUNDARY)return k.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===k.INTERIOR)return k.EXTERIOR;if(a===k.BOUNDARY)return k.BOUNDARY}return k.INTERIOR}if(arguments[0]instanceof S&&arguments[1]instanceof Xt){var s=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(s))return k.EXTERIOR;var u=l.getCoordinates();return l.isClosed()||!s.equals(u[0])&&!s.equals(u[u.length-1])?st.isOnLine(s,u)?k.INTERIOR:k.EXTERIOR:k.BOUNDARY}if(arguments[0]instanceof S&&arguments[1]instanceof Kt){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?k.INTERIOR:k.EXTERIOR}},Cr.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?st.locatePointInRing(t,e.getCoordinates()):k.EXTERIOR},Cr.prototype.intersects=function(t,e){return this.locate(t,e)!==k.EXTERIOR},Cr.prototype.updateLocationInfo=function(t){t===k.INTERIOR&&(this._isIn=!0),t===k.BOUNDARY&&this._numBoundaries++},Cr.prototype.computeLocation=function(t,e){if(e instanceof Kt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Xt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Jt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof qt)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ne)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof Vt)for(var l=new Un(e);l.hasNext();){var u=l.next();u!==e&&this.computeLocation(t,u)}},Cr.prototype.locate=function(t,e){return e.isEmpty()?k.EXTERIOR:e instanceof Xt||e instanceof Jt?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?k.BOUNDARY:this._numBoundaries>0||this._isIn?k.INTERIOR:k.EXTERIOR)},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr};var Tr=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},Ir={INSIDE_AREA:{configurable:!0}};Tr.prototype.isInsideArea=function(){return this._segIndex===Tr.INSIDE_AREA},Tr.prototype.getCoordinate=function(){return this._pt},Tr.prototype.getGeometryComponent=function(){return this._component},Tr.prototype.getSegmentIndex=function(){return this._segIndex},Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr},Ir.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Tr,Ir);var kr=function(t){this._pts=t||null};kr.prototype.filter=function(t){t instanceof Kt&&this._pts.add(t)},kr.prototype.interfaces_=function(){return[jt]},kr.prototype.getClass=function(){return kr},kr.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Kt?Je.singletonList(t):kr.getPoints(t,new Et)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Kt?n.add(e):e instanceof Vt&&e.apply(new kr(n)),n}};var Ar=function(){this._locations=null;var t=arguments[0];this._locations=t};Ar.prototype.filter=function(t){(t instanceof Kt||t instanceof Xt||t instanceof Jt)&&this._locations.add(new Tr(t,0,t.getCoordinate()))},Ar.prototype.interfaces_=function(){return[jt]},Ar.prototype.getClass=function(){return Ar},Ar.getLocations=function(t){var e=new Et;return t.apply(new Ar(e)),e};var Pr=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Cr,this._minDistanceLocation=null,this._minDistance=_.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Pr.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Er.getPolygons(this._geom[e]);if(i.size()>0){var o=Ar.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&P(arguments[0],wt)&&P(arguments[1],wt)){for(var a=arguments[0],s=arguments[1],l=arguments[2],u=0;u<a.size();u++)for(var c=a.get(u),h=0;h<s.size();h++)if(this.computeContainmentDistance(c,s.get(h),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Tr&&arguments[1]instanceof Jt){var d=arguments[0],p=arguments[1],f=arguments[2],m=d.getCoordinate();if(k.EXTERIOR!==this._ptLocator.locate(m,p))return this._minDistance=0,f[0]=d,f[1]=new Tr(p,m),null}},Pr.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Pr.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Sr.getLines(this._geom[0]),n=Sr.getLines(this._geom[1]),r=kr.getPoints(this._geom[0]),i=kr.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Pr.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Pr.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Pr.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Pr.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Xt&&arguments[1]instanceof Kt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=st.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new mn(r[o],r[o+1]).closestPoint(i);n[0]=new Tr(t,o,s),n[1]=new Tr(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Xt&&arguments[1]instanceof Xt){var l=arguments[0],u=arguments[1],c=arguments[2];if(l.getEnvelopeInternal().distance(u.getEnvelopeInternal())>this._minDistance)return null;for(var h=l.getCoordinates(),d=u.getCoordinates(),p=0;p<h.length-1;p++)for(var f=0;f<d.length-1;f++){var m=st.distanceLineLine(h[p],h[p+1],d[f],d[f+1]);if(m<this._minDistance){this._minDistance=m;var g=new mn(h[p],h[p+1]),y=new mn(d[f],d[f+1]),v=g.closestPoints(y);c[0]=new Tr(l,p,v[0]),c[1]=new Tr(u,f,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},Pr.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Tr(i,0,i.getCoordinate()),n[1]=new Tr(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Pr.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new v("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Pr.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr},Pr.distance=function(t,e){return new Pr(t,e).distance()},Pr.isWithinDistance=function(t,e,n){return new Pr(t,e,n).distance()<=n},Pr.nearestPoints=function(t,e){return new Pr(t,e).nearestPoints()};var Dr=function(){this._pt=[new S,new S],this._distance=_.NaN,this._isNull=!0};Dr.prototype.getCoordinates=function(){return this._pt},Dr.prototype.getCoordinate=function(t){return this._pt[t]},Dr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Dr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Dr.prototype.toString=function(){return Q.toLineString(this._pt[0],this._pt[1])},Dr.prototype.getDistance=function(){return this._distance},Dr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr};var Mr=function(){};Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr},Mr.computeDistance=function(){if(arguments[2]instanceof Dr&&arguments[0]instanceof Xt&&arguments[1]instanceof S)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new mn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Dr&&arguments[0]instanceof Jt&&arguments[1]instanceof S){var s=arguments[0],l=arguments[1],u=arguments[2];Mr.computeDistance(s.getExteriorRing(),l,u);for(var c=0;c<s.getNumInteriorRing();c++)Mr.computeDistance(s.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof Dr&&arguments[0]instanceof ct&&arguments[1]instanceof S){var h=arguments[0],d=arguments[1],p=arguments[2];if(h instanceof Xt)Mr.computeDistance(h,d,p);else if(h instanceof Jt)Mr.computeDistance(h,d,p);else if(h instanceof Vt)for(var f=h,m=0;m<f.getNumGeometries();m++){var g=f.getGeometryN(m);Mr.computeDistance(g,d,p)}else p.setMinimum(h.getCoordinate(),d)}else if(arguments[2]instanceof Dr&&arguments[0]instanceof mn&&arguments[1]instanceof S){var y=arguments[1],v=arguments[2],_=arguments[0].closestPoint(y);v.setMinimum(_,y)}};var Or=function(){this._g0=null,this._g1=null,this._ptDist=new Dr,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Rr={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Or.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Or.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new v("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Or.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Or.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Or.prototype.computeOrientedDistance=function(t,e,n){var r=new Nr(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Lr(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Or.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or},Or.distance=function(){if(2===arguments.length)return new Or(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Or(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Rr.MaxPointDistanceFilter.get=function(){return Nr},Rr.MaxDensifiedByFractionDistanceFilter.get=function(){return Lr},Object.defineProperties(Or,Rr);var Nr=function(){this._maxPtDist=new Dr,this._minPtDist=new Dr,this._euclideanDist=new Mr,this._geom=null;var t=arguments[0];this._geom=t};Nr.prototype.filter=function(t){this._minPtDist.initialize(),Mr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Nr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Nr.prototype.interfaces_=function(){return[pt]},Nr.prototype.getClass=function(){return Nr};var Lr=function(){this._maxPtDist=new Dr,this._minPtDist=new Dr,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Lr.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,l=n.y+a*o,u=new S(s,l);this._minPtDist.initialize(),Mr.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Lr.prototype.isDone=function(){return!1},Lr.prototype.isGeometryChanged=function(){return!1},Lr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Lr.prototype.interfaces_=function(){return[Ut]},Lr.prototype.getClass=function(){return Lr};var Fr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},zr={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Fr.prototype.checkMaximumDistance=function(t,e,n){var r=new Or(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Q.toLineString(i[0],i[1])+")"}},Fr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Fr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Fr.VERBOSE&&G.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Fr.prototype.checkNegativeValid=function(){if(!(this._input instanceof Jt||this._input instanceof ne||this._input instanceof Vt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Fr.prototype.getErrorIndicator=function(){return this._errorIndicator},Fr.prototype.checkMinimumDistance=function(t,e,n){var r=new Pr(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Q.toLineString(i[0],i[1])+" )"}},Fr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Fr.prototype.getErrorLocation=function(){return this._errorLocation},Fr.prototype.getPolygonLines=function(t){for(var e=new Et,n=new Sr(e),r=Er.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Fr.prototype.getErrorMessage=function(){return this._errMsg},Fr.prototype.interfaces_=function(){return[]},Fr.prototype.getClass=function(){return Fr},zr.VERBOSE.get=function(){return!1},zr.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Fr,zr);var Br=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},jr={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Br.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Br.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Br.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new $(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new $(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Br.prototype.checkDistance=function(){var t=new Fr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Br.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Br.prototype.checkPolygonal=function(){this._result instanceof Jt||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Br.prototype.getErrorIndicator=function(){return this._errorIndicator},Br.prototype.getErrorLocation=function(){return this._errorLocation},Br.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Br.prototype.report=function(t){if(!Br.VERBOSE)return null;G.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Br.prototype.getErrorMessage=function(){return this._errorMsg},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br},Br.isValidMsg=function(t,e,n){var r=new Br(t,e,n);return r.isValid()?null:r.getErrorMessage()},Br.isValid=function(t,e,n){return!!new Br(t,e,n).isValid()},jr.VERBOSE.get=function(){return!1},jr.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Br,jr);var Ur=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Ur.prototype.getCoordinates=function(){return this._pts},Ur.prototype.size=function(){return this._pts.length},Ur.prototype.getCoordinate=function(t){return this._pts[t]},Ur.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ur.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:hn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Ur.prototype.setData=function(t){this._data=t},Ur.prototype.getData=function(){return this._data},Ur.prototype.toString=function(){return Q.toLineString(new le(this._pts))},Ur.prototype.interfaces_=function(){return[dn]},Ur.prototype.getClass=function(){return Ur};var Vr=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Et,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Vr.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Vr.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Vr.prototype.getIntersectionSegments=function(){return this._intSegments},Vr.prototype.count=function(){return this._intersectionCount},Vr.prototype.getIntersections=function(){return this._intersections},Vr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Vr.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Vr.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Vr.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Vr.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Vr.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Vr.prototype.interfaces_=function(){return[Hn]},Vr.prototype.getClass=function(){return Vr},Vr.createAllIntersectionsFinder=function(t){var e=new Vr(t);return e.setFindAllIntersections(!0),e},Vr.createAnyIntersectionFinder=function(t){return new Vr(t)},Vr.createIntersectionCounter=function(t){var e=new Vr(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var qr=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};qr.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},qr.prototype.getIntersections=function(){return this._segInt.getIntersections()},qr.prototype.isValid=function(){return this.execute(),this._isValid},qr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},qr.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Vr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new wn;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},qr.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new ke(this.getErrorMessage(),this._segInt.getInteriorIntersection())},qr.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Q.toLineString(t[0],t[1])+" and "+Q.toLineString(t[2],t[3])},qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr},qr.computeIntersections=function(t){var e=new qr(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Gr=function t(){this._nv=null;var e=arguments[0];this._nv=new qr(t.toSegmentStrings(e))};Gr.prototype.checkValid=function(){this._nv.checkValid()},Gr.prototype.interfaces_=function(){return[]},Gr.prototype.getClass=function(){return Gr},Gr.toSegmentStrings=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Ur(r.getCoordinates(),r))}return e},Gr.checkValid=function(t){new Gr(t).checkValid()};var Yr=function(t){this._mapOp=t};Yr.prototype.map=function(t){for(var e=new Et,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(ye.toGeometryArray(e))},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr},Yr.map=function(t,e){return new Yr(e).map(t)};var $r=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Et,this._resultLineList=new Et;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};$r.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},$r.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},$r.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},$r.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ti.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},$r.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},$r.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},$r.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},$r.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ti.isResultOfOp(r,e)&&e===Ti.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r};var Wr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Et;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Wr.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Wr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===Ti.INTERSECTION)){var r=n.getLabel();Ti.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Wr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr};var Hr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Hr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Hr.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ee&&!r.isEmpty()||(n=!1);for(var i=new Et,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof ee||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new Et;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Hr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Hr.prototype.getInputGeometry=function(){return this._inputGeom},Hr.prototype.transformMultiLineString=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hr.prototype.transformCoordinates=function(t,e){return this.copy(t)},Hr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Hr.prototype.transformMultiPoint=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hr.prototype.transformMultiPolygon=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hr.prototype.copy=function(t){return t.copy()},Hr.prototype.transformGeometryCollection=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ye.toGeometryArray(n)):this._factory.buildGeometry(n)},Hr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Kt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Xt)return this.transformLineString(t,null);if(t instanceof qt)return this.transformMultiLineString(t,null);if(t instanceof Jt)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof Vt)return this.transformGeometryCollection(t,null);throw new v("Unknown Geometry subtype: "+t.getClass().getName())},Hr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr};var Xr=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new mn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Xt&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};Xr.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new S(o)),0===r&&this._isClosed&&t.set(t.size()-1,new S(o)))}},Xr.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Xr.prototype.snapTo=function(t){var e=new Ct(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Xr.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new S(i),!1)}},Xr.prototype.findSegmentIndexToSnap=function(t,e){for(var n=_.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Xr.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr},Xr.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Zr=function(t){this._srcGeom=t||null},Kr={SNAP_PRECISION_FACTOR:{configurable:!0}};Zr.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Qr(e,n).transform(this._srcGeom)},Zr.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Qr(t,n,!0).transform(this._srcGeom),i=r;return e&&P(i,Qt)&&(i=r.buffer(0)),i},Zr.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Zr.prototype.extractTargetCoordinates=function(t){for(var e=new p,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Zr.prototype.computeMinimumSegmentLength=function(t){for(var e=_.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr},Zr.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Zr(t);r[0]=i.snapTo(e,n);var o=new Zr(e);return r[1]=o.snapTo(r[0],n),r},Zr.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Zr.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===pe.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Zr.computeOverlaySnapTolerance(i),Zr.computeOverlaySnapTolerance(o))}},Zr.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Zr.SNAP_PRECISION_FACTOR},Zr.snapToSelf=function(t,e,n){return new Zr(t).snapToSelf(e,n)},Kr.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Zr,Kr);var Qr=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Xr(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hr),Jr=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Jr.prototype.getCommon=function(){return _.longBitsToDouble(this._commonBits)},Jr.prototype.add=function(t){var e=_.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Jr.signExpBits(this._commonBits),this._isFirst=!1,null):Jr.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Jr.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Jr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Jr.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=_.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+_.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Jr.prototype.interfaces_=function(){return[]},Jr.prototype.getClass=function(){return Jr},Jr.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Jr.signExpBits=function(t){return t>>52},Jr.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Jr.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Jr.getBit(t,r)!==Jr.getBit(e,r))return n;n++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ni},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ri(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new S(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ri(e);return t.apply(n),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ni},ei.Translater.get=function(){return ri},Object.defineProperties(ti,ei);var ni=function(){this._commonBitsX=new Jr,this._commonBitsY=new Jr};ni.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ni.prototype.getCommonCoordinate=function(){return new S(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ni.prototype.interfaces_=function(){return[pt]},ni.prototype.getClass=function(){return ni};var ri=function(){this.trans=null;var t=arguments[0];this.trans=t};ri.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ri.prototype.isDone=function(){return!1},ri.prototype.isGeometryChanged=function(){return!0},ri.prototype.interfaces_=function(){return[Ut]},ri.prototype.getClass=function(){return ri};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new Zr(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Ti.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ii.prototype.checkValid=function(t){t.isValid()||G.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=Zr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return Zr.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,n){return new ii(t,e).getResultGeometry(n)},ii.union=function(t,e){return ii.overlayOp(t,e,Ti.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,Ti.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,Ti.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,Ti.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Ti.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof J))throw t;r=t}if(!n)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof J?r:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,n){return new oi(t,e).getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,Ti.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,Ti.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,Ti.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,Ti.DIFFERENCE)};var ai=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ai.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai};var si=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},li={INSERT:{configurable:!0},DELETE:{configurable:!0}};si.prototype.isDelete=function(){return this._eventType===si.DELETE},si.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},si.prototype.getObject=function(){return this._obj},si.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},si.prototype.getInsertEvent=function(){return this._insertEvent},si.prototype.isInsert=function(){return this._eventType===si.INSERT},si.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},si.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},si.prototype.interfaces_=function(){return[x]},si.prototype.getClass=function(){return si},li.INSERT.get=function(){return 1},li.DELETE.get=function(){return 2},Object.defineProperties(si,li);var ui=function(){};ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui};var ci=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};ci.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(ci.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},ci.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ci.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},ci.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ci.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},ci.prototype.hasProperIntersection=function(){return this._hasProper},ci.prototype.hasIntersection=function(){return this._hasIntersection},ci.prototype.isDone=function(){return this._isDone},ci.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},ci.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},ci.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},ci.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var hi=function(t){function e(){t.call(this),this.events=new Et,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Je.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ci&&P(arguments[0],wt)&&P(arguments[1],wt)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&P(arguments[0],wt)&&arguments[1]instanceof ci){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ai(n,i),a=new si(e,n.getMinX(i),o);this.events.add(a),this.events.add(new si(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ui),di=function(){this._min=_.POSITIVE_INFINITY,this._max=_.NEGATIVE_INFINITY},pi={NodeComparator:{configurable:!0}};di.prototype.getMin=function(){return this._min},di.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},di.prototype.getMax=function(){return this._max},di.prototype.toString=function(){return Q.toLineString(new S(this._min,0),new S(this._max,0))},di.prototype.interfaces_=function(){return[]},di.prototype.getClass=function(){return di},pi.NodeComparator.get=function(){return fi},Object.defineProperties(di,pi);var fi=function(){};fi.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},fi.prototype.interfaces_=function(){return[E]},fi.prototype.getClass=function(){return fi};var mi=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(di),gi=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(di),yi=function(){this._leaves=new Et,this._root=null,this._level=0};yi.prototype.buildTree=function(){Je.sort(this._leaves,new di.NodeComparator);for(var t=this._leaves,e=null,n=new Et;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},yi.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new mi(t,e,n))},yi.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},yi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},yi.prototype.printNode=function(t){G.out.println(Q.toLineString(new S(t._min,this._level),new S(t._max,this._level)))},yi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},yi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new gi(t.get(n),t.get(n+1));e.add(i)}}},yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi};var vi=function(){this._items=new Et};vi.prototype.visitItem=function(t){this._items.add(t)},vi.prototype.getItems=function(){return this._items},vi.prototype.interfaces_=function(){return[Xe]},vi.prototype.getClass=function(){return vi};var _i=function(){this._index=null;var t=arguments[0];if(!P(t,Qt))throw new v("Argument must be Polygonal");this._index=new wi(t)},bi={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};_i.prototype.locate=function(t){var e=new at(t),n=new xi(e);return this._index.query(t.y,t.y,n),e.getLocation()},_i.prototype.interfaces_=function(){return[jn]},_i.prototype.getClass=function(){return _i},bi.SegmentVisitor.get=function(){return xi},bi.IntervalIndexedGeometry.get=function(){return wi},Object.defineProperties(_i,bi);var xi=function(){this._counter=null;var t=arguments[0];this._counter=t};xi.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},xi.prototype.interfaces_=function(){return[Xe]},xi.prototype.getClass=function(){return xi};var wi=function(){this._index=new yi;var t=arguments[0];this.init(t)};wi.prototype.init=function(t){for(var e=Sr.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},wi.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new mn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},wi.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new vi;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi};var Ei=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new de,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Cr,2===arguments.length){var e=arguments[0],n=arguments[1],r=ft.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;k.NONE,r.getLocation(t,Ce.ON)===k.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new ci(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof ee||this._parentGeom instanceof Jt||this._parentGeom instanceof ne,s=n||!a;return o.computeIntersections(this._edges,i,s),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new ci(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Kt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,k.INTERIOR)}else if(arguments[0]instanceof S){var e=arguments[0];this.insertPoint(this._argIndex,e,k.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),k.EXTERIOR,k.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,k.INTERIOR,k.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],k.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],k.BOUNDARY)},e.prototype.addLineString=function(t){var e=Tt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nr(e,new Me(this._argIndex,k.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===k.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Tt.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;st.isCCW(r)&&(i=n,o=e);var a=new nr(r,new Me(this._argIndex,k.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],k.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Me(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new hi},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof Jt)this.addPolygon(e);else if(e instanceof Xt)this.addLineString(e);else if(e instanceof Kt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof qt)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof Vt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return P(this._parentGeom,Qt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new _i(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?k.BOUNDARY:k.INTERIOR},e}(Ge),Si=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ei(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=ft.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ei(0,e,r),this._arg[1]=new Ei(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ei(0,i,a),this._arg[1]=new Ei(1,o,a)}};Si.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Si.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si};var Ci=function(){};Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci},Ci.map=function(){if(arguments[0]instanceof ct&&P(arguments[1],Ci.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Et,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(P(arguments[0],bt)&&P(arguments[1],Ci.MapOp)){for(var o=arguments[0],a=arguments[1],s=new Et,l=o.iterator();l.hasNext();){var u=l.next(),c=a.map(u);null!==c&&s.add(c)}return s}},Ci.MapOp=function(){};var Ti=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Cr,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Wn,this._resultPolyList=new Et,this._resultLineList=new Et,this._resultPointList=new Et,this._graph=new Ge(new Yn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Me(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new Et;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==k.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Et,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Et;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Gr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ye(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new $r(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Wr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Ce.RIGHT),i.getLocation(1,Ce.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(et.isTrue(!r.isNull(i,Ce.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Ce.LEFT,r.getLocation(i,Ce.LEFT)),et.isTrue(!r.isNull(i,Ce.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Ce.RIGHT,r.getLocation(i,Ce.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Si);Ti.overlayOp=function(t,e,n){return new Ti(t,e).getResultGeometry(n)},Ti.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ti.createEmptyResult(Ti.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Yr.map(t,{interfaces_:function(){return[Ci.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.INTERSECTION)},Ti.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ti.createEmptyResult(Ti.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.SYMDIFFERENCE)},Ti.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Ti.INTERSECTION:o=Math.min(r,i);break;case Ti.UNION:o=Math.max(r,i);break;case Ti.DIFFERENCE:o=r;break;case Ti.SYMDIFFERENCE:o=Math.max(r,i)}return o},Ti.createEmptyResult=function(t,e,n,r){var i=null;switch(Ti.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Ti.difference=function(t,e){return t.isEmpty()?Ti.createEmptyResult(Ti.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.DIFFERENCE))},Ti.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Ti.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===k.BOUNDARY&&(i=k.INTERIOR),o===k.BOUNDARY&&(o=k.INTERIOR),a){case Ti.INTERSECTION:return i===k.INTERIOR&&o===k.INTERIOR;case Ti.UNION:return i===k.INTERIOR||o===k.INTERIOR;case Ti.DIFFERENCE:return i===k.INTERIOR&&o!==k.INTERIOR;case Ti.SYMDIFFERENCE:return i===k.INTERIOR&&o!==k.INTERIOR||i!==k.INTERIOR&&o===k.INTERIOR}return!1}},Ti.INTERSECTION=1,Ti.UNION=2,Ti.DIFFERENCE=3,Ti.SYMDIFFERENCE=4;var Ii=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Cr,this._seg=new mn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Ii.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Ii.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?k.BOUNDARY:this._ptLocator.locate(t,this._g)},Ii.prototype.extractLinework=function(t){var e=new ki;t.apply(e);var n=e.getLinework(),r=ye.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii};var ki=function(){this._linework=null,this._linework=new Et};ki.prototype.getLinework=function(){return this._linework},ki.prototype.filter=function(t){if(t instanceof Jt){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},ki.prototype.interfaces_=function(){return[jt]},ki.prototype.getClass=function(){return ki};var Ai=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Ai.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Ai.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Ai.prototype.getPoints=function(t){for(var e=new Et,n=Sr.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Ai.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,l=n*o/a,u=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new S(u-l,c+s);r.add(h)}if(this._doRight){var d=new S(u+l,c-s);r.add(d)}},Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai};var Pi=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Et;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Ii(this._geom[0],this._boundaryDistanceTolerance),new Ii(this._geom[1],this._boundaryDistanceTolerance),new Ii(this._geom[2],this._boundaryDistanceTolerance)]},Di={TOLERANCE:{configurable:!0}};Pi.prototype.reportResult=function(t,e,n){G.out.println("Overlay result invalid - A:"+k.toLocationSymbol(e[0])+" B:"+k.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+k.toLocationSymbol(e[2]))},Pi.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Pi.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Pi.hasLocation(this._location,k.BOUNDARY)||this.isValidResult(r,this._location)}},Pi.prototype.addTestPts=function(t){var e=new Ai(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Pi.prototype.isValidResult=function(t,e){var n=Ti.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===k.INTERIOR);return r||this.reportResult(t,e,n),r},Pi.prototype.getInvalidLocation=function(){return this._invalidLocation},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Pi.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Zr.computeSizeBasedSnapTolerance(t),Zr.computeSizeBasedSnapTolerance(e))},Pi.isValid=function(t,e,n,r){return new Pi(t,e,r).isValid(n)},Di.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Pi,Di);var Mi=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Mi.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Mi.prototype.combine=function(){for(var t=new Et,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi},Mi.combine=function(){if(1===arguments.length)return new Mi(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Mi(Mi.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new Mi(Mi.createList(n,r,i)).combine()}},Mi.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Mi.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Et;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new Et;return a.add(r),a.add(i),a.add(o),a}};var Oi=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Et)},Ri={STRTREE_NODE_CAPACITY:{configurable:!0}};Oi.prototype.reduceToGeometries=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next(),i=null;P(r,wt)?i=this.unionTree(r):r instanceof ct&&(i=r),e.add(i)}return e},Oi.prototype.extractByEnvelope=function(t,e,n){for(var r=new Et,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Oi.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Mi.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Oi.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new an(Oi.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Oi.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Oi.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Oi.getGeometry(e,n),Oi.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},Oi.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Oi.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Oi.prototype.unionActual=function(t,e){return Oi.restrictToPolygons(t.union(e))},Oi.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Oi.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new Et,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Mi.combine(r)},Oi.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Oi.restrictToPolygons=function(t){if(P(t,Qt))return t;var e=Er.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ye.toPolygonArray(e))},Oi.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Oi.union=function(t){return new Oi(t).union()},Ri.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Oi,Ri);var Ni=function(){};Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni},Ni.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ti.createEmptyResult(Ti.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.UNION)},t.GeoJSONReader=Ee,t.GeoJSONWriter=Se,t.OverlayOp=Ti,t.UnionOp=Ni,t.BufferOp=mr,Object.defineProperty(t,"__esModule",{value:!0})}(e)},1561:(t,e,n)=>{"use strict";var r=n(2791);var i="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},o=r.useState,a=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function u(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!i(t,n)}catch(r){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(t,e){return e()}:function(t,e){var n=e(),r=o({inst:{value:n,getSnapshot:e}}),i=r[0].inst,c=r[1];return s((function(){i.value=n,i.getSnapshot=e,u(i)&&c({inst:i})}),[t,n,e]),a((function(){return u(i)&&c({inst:i}),t((function(){u(i)&&c({inst:i})}))}),[t]),l(n),n};e.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},7595:(t,e,n)=>{"use strict";var r=n(2791),i=n(7248);var o="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},a=i.useSyncExternalStore,s=r.useRef,l=r.useEffect,u=r.useMemo,c=r.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var h=s(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=u((function(){function t(t){if(!l){if(l=!0,a=t,t=r(t),void 0!==i&&d.hasValue){var e=d.value;if(i(e,t))return s=e}return s=t}if(e=s,o(a,t))return e;var n=r(t);return void 0!==i&&i(e,n)?e:(a=t,s=n)}var a,s,l=!1,u=void 0===n?null:n;return[function(){return t(e())},null===u?void 0:function(){return t(u())}]}),[e,n,r,i]);var p=a(t,h[0],h[1]);return l((function(){d.hasValue=!0,d.value=p}),[p]),c(p),p}},7248:(t,e,n)=>{"use strict";t.exports=n(1561)},327:(t,e,n)=>{"use strict";t.exports=n(7595)},2391:t=>{"use strict";var e=function(){};t.exports=e},596:function(t){t.exports=function(){"use strict";var t,e,n;function r(r,i){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),n=i(a),"undefined"!==typeof window&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=i;else t=i}return r(["exports"],(function(t){var e=n;function n(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=r}function r(t,n,r,i){const o=new e(t,n,r,i);return function(t){return o.solve(t)}}n.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,r=0;r<8;r++){var i=this.sampleCurveX(n)-t;if(Math.abs(i)<e)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=i/o}var a=0,s=1;for(n=t,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-t)<e));r++)t>i?a=n:s=n,n=.5*(s-a)+a;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};const i=r(.25,.1,.25,1);function o(t,e,n){return Math.min(n,Math.max(e,t))}function a(t,e,n){const r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function s(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(const i of n)for(const e in i)t[e]=i[e];return t}let l=1;function u(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e))}))}function c(t,e,n){const r={};for(const i in t)r[i]=e.call(n||this,t[i],i,t);return r}function h(t,e,n){const r={};for(const i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function d(t){return Array.isArray(t)?t.map(d):"object"==typeof t&&t?c(t,d):t}const p={};function f(t){p[t]||("undefined"!=typeof console&&console.warn(t),p[t]=!0)}function m(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function g(t){let e=0;for(let n,r,i=0,o=t.length,a=o-1;i<o;a=i++)n=t[i],r=t[a],e+=(r.x-n.x)*(n.y+r.y);return e}function y(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function v(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,n,r,i)=>{const o=r||i;return e[n]=!o||o.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let _,b,x=null;function w(t){if(null==x){const e=t.navigator?t.navigator.userAgent:null;x=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return x}function E(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap}const S={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(t){const e=requestAnimationFrame(t);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=window.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=t.width,n.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:t=>(_||(_=document.createElement("a")),_.href=t,_.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==b&&(b=matchMedia("(prefers-reduced-motion: reduce)")),b.matches)}};var C=T;function T(t,e){this.x=t,this.y=e}T.prototype={clone:function(){return new T(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},T.convert=function(t){return t instanceof T?t:Array.isArray(t)?new T(t[0],t[1]):t};const I={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},k="mapbox-tiles";let A,P,D=500,M=50;function O(){"undefined"==typeof caches||A||(A=caches.open(k))}let R=1/0;const N={supported:!1,testSupport:function(t){!z&&F&&(B?j(t):L=t)}};let L,F,z=!1,B=!1;function j(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,F),t.isContextLost())return;N.supported=!0}catch(t){}t.deleteTexture(e),z=!0}"undefined"!=typeof document&&(F=document.createElement("img"),F.onload=function(){L&&j(L),L=null,B=!0},F.onerror=function(){z=!0,L=null},F.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const U={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(U);class V extends Error{constructor(t,e,n,r){super(`AJAXError: ${e} (${t}): ${n}`),this.status=t,this.statusText=e,this.url=n,this.body=r}}const q=y()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href;function G(t,e){const n=new AbortController,r=new Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:q(),signal:n.signal});let i=!1,o=!1;return"json"===t.type&&r.headers.set("Accept","application/json"),((n,a,s)=>{if(o)return;const l=Date.now();fetch(r).then((n=>n.ok?((n,a,s)=>{("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then((t=>{o||(a&&s&&function(t,e,n){if(O(),!A)return;const r={status:e.status,statusText:e.statusText,headers:new Headers};e.headers.forEach(((t,e)=>r.headers.set(e,t)));const i=v(e.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-n<42e4||function(t,e){if(void 0===P)try{new Response(new ReadableStream),P=!0}catch(t){P=!1}P?e(t.body):t.blob().then(e)}(e,(e=>{const n=new Response(e,r);O(),A&&A.then((e=>e.put(function(t){const e=t.indexOf("?");return e<0?t:t.slice(0,e)}(t.url),n))).catch((t=>f(t.message)))})))}(r,a,s),i=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((t=>{o||e(new Error(t.message))}))})(n,null,l):n.blob().then((r=>e(new V(n.status,n.statusText,t.url,r)))))).catch((t=>{20!==t.code&&e(new Error(t.message))}))})(),{cancel:()=>{o=!0,i||n.abort()}}}const Y=function(t,e){if(/:\/\//.test(t.url)&&!/^https?:|^file:/.test(t.url)){if(y()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e);if(!y()){const n=t.url.substring(0,t.url.indexOf("://"));return(I.REGISTERED_PROTOCOLS[n]||G)(t,e)}}if(!(/^file:/.test(n=t.url)||/^file:/.test(q())&&!/^\w+:/.test(n))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return G(t,e);if(y()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(t,e){const n=new XMLHttpRequest;n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer");for(const r in t.headers)n.setRequestHeader(r,t.headers[r]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=()=>{e(new Error(n.statusText))},n.onload=()=>{if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){let r=n.response;if("json"===t.type)try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else{const r=new Blob([n.response],{type:n.getResponseHeader("Content-Type")});e(new V(n.status,n.statusText,t.url,r))}},n.send(t.body),{cancel:()=>n.abort()}}(t,e)},$=function(t,e){return Y(s(t,{type:"arrayBuffer"}),e)};function W(t){const e=window.document.createElement("a");return e.href=t,e.protocol===window.document.location.protocol&&e.host===window.document.location.host}const H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let X,Z;X=[],Z=0;const K=function(t,e){if(N.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Z>=I.MAX_PARALLEL_IMAGE_REQUESTS){const n={requestParameters:t,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return X.push(n),n}Z++;let n=!1;const r=()=>{if(!n)for(n=!0,Z--;X.length&&Z<I.MAX_PARALLEL_IMAGE_REQUESTS;){const t=X.shift(),{requestParameters:e,callback:n,cancelled:r}=t;r||(t.cancel=K(e,n).cancel)}},i=$(t,((t,n,i,o)=>{r(),t?e(t):n&&function(t,e){"function"==typeof createImageBitmap?function(t,e){const n=new Blob([new Uint8Array(t)],{type:"image/png"});createImageBitmap(n).then((t=>{e(null,t)})).catch((t=>{e(new Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(t,e):function(t,e){const n=new Image;n.onload=()=>{e(null,n),URL.revokeObjectURL(n.src),n.onload=null,window.requestAnimationFrame((()=>{n.src=H}))},n.onerror=()=>e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const r=new Blob([new Uint8Array(t)],{type:"image/png"});n.src=t.byteLength?URL.createObjectURL(r):H}(t,e)}(n,((t,n)=>{null!=t?e(t):null!=n&&e(null,n,{cacheControl:i,expires:o})}))}));return{cancel:()=>{i.cancel(),r()}}};function Q(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function J(t,e,n){if(n&&n[t]){const r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}class tt{constructor(t){s(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.type=t}}class et extends tt{constructor(t){super("error",s({error:t},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}}class nt{on(t,e){return this._listeners=this._listeners||{},Q(t,e,this._listeners),this}off(t,e){return J(t,e,this._listeners),J(t,e,this._oneTimeListeners),this}once(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},Q(t,e,this._oneTimeListeners),this}fire(t,e){"string"==typeof t&&(t=new tt(t,e||{}));const n=t.type;if(this.listens(n)){t.target=this;const e=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of e)n.call(this,t);const r=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const o of r)J(n,o,this._oneTimeListeners),o.call(this,t);const i=this._eventedParent;i&&(s(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(t))}else t instanceof et&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var rt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class it{constructor(t,e,n,r){this.message=(t?`${t}: `:"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)}}function ot(t){const e=t.value;return e?[new it(t.key,e,"constants have been deprecated as of v8")]:[]}function at(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(const i of n)for(const e in i)t[e]=i[e];return t}function st(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function lt(t){if(Array.isArray(t))return t.map(lt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=lt(t[n]);return e}return st(t)}class ut extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class ct{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.parent=t,this.bindings={};for(const[n,r]of e)this.bindings[n]=r}concat(t){return new ct(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const ht={kind:"null"},dt={kind:"number"},pt={kind:"string"},ft={kind:"boolean"},mt={kind:"color"},gt={kind:"object"},yt={kind:"value"},vt={kind:"collator"},_t={kind:"formatted"},bt={kind:"padding"},xt={kind:"resolvedImage"};function wt(t,e){return{kind:"array",itemType:t,N:e}}function Et(t){if("array"===t.kind){const e=Et(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const St=[ht,dt,pt,ft,mt,_t,gt,wt(yt),bt,xt];function Ct(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Ct(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of St)if(!Ct(t,e))return null}return`Expected ${Et(t)} but found ${Et(e)} instead.`}function Tt(t,e){return e.some((e=>e.kind===t.kind))}function It(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}var kt,At={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Pt(t){return(t=Math.round(t))<0?0:t>255?255:t}function Dt(t){return Pt("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function Mt(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function Ot(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{kt={}.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in At)return At[n].slice();if("#"===n[0])return 4===n.length?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var o=n.substr(0,r),a=n.substr(r+1,i-(r+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=Mt(a.pop());case"rgb":return 3!==a.length?null:[Dt(a[0]),Dt(a[1]),Dt(a[2]),s];case"hsla":if(4!==a.length)return null;s=Mt(a.pop());case"hsl":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,u=Mt(a[1]),c=Mt(a[2]),h=c<=.5?c*(u+1):c+u-c*u,d=2*c-h;return[Pt(255*Ot(d,h,l+1/3)),Pt(255*Ot(d,h,l)),Pt(255*Ot(d,h,l-1/3)),s];default:return null}}return null}}catch(t){}class Rt{constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.r=t,this.g=e,this.b=n,this.a=r}static parse(t){if(!t)return;if(t instanceof Rt)return t;if("string"!=typeof t)return;const e=kt(t);return e?new Rt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,n,r]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(n)},${r})`}toArray(){const{r:t,g:e,b:n,a:r}=this;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*n/r,r]}}Rt.black=new Rt(0,0,0,1),Rt.white=new Rt(1,1,1,1),Rt.transparent=new Rt(0,0,0,0),Rt.red=new Rt(1,0,0,1);class Nt{constructor(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Lt{constructor(t,e,n,r,i){this.text=t,this.image=e,this.scale=n,this.fontStack=r,this.textColor=i}}class Ft{constructor(t){this.sections=t}static fromString(t){return new Ft([new Lt(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof Ft?t:Ft.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}}class zt{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof zt)return t;if("number"==typeof t)return new zt([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const e of t)if("number"!=typeof e)return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new zt(t)}}toString(){return JSON.stringify(this.values)}}class Bt{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Bt({name:t,available:!1}):null}}function jt(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[t,e,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ut(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Rt)return!0;if(t instanceof Nt)return!0;if(t instanceof Ft)return!0;if(t instanceof zt)return!0;if(t instanceof Bt)return!0;if(Array.isArray(t)){for(const e of t)if(!Ut(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!Ut(t[e]))return!1;return!0}return!1}function Vt(t){if(null===t)return ht;if("string"==typeof t)return pt;if("boolean"==typeof t)return ft;if("number"==typeof t)return dt;if(t instanceof Rt)return mt;if(t instanceof Nt)return vt;if(t instanceof Ft)return _t;if(t instanceof zt)return bt;if(t instanceof Bt)return xt;if(Array.isArray(t)){const e=t.length;let n;for(const r of t){const t=Vt(r);if(n){if(n===t)continue;n=yt;break}n=t}return wt(n||yt,e)}return gt}function qt(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Rt||t instanceof Ft||t instanceof zt||t instanceof Bt?t.toString():JSON.stringify(t)}class Gt{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Ut(t[1]))return e.error("invalid value");const n=t[1];let r=Vt(n);const i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new Gt(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Yt{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const $t={string:pt,number:dt,boolean:ft,object:gt};class Wt{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n,r=1;const i=t[0];if("array"===i){let i,o;if(t.length>2){const n=t[1];if("string"!=typeof n||!(n in $t)||"object"===n)return e.error('The item type argument of "array" must be one of string, number, boolean',1);i=$t[n],r++}else i=yt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],r++}n=wt(i,o)}else{if(!$t[i])throw new Error(`Types doesn't contain name = ${i}`);n=$t[i]}const o=[];for(;r<t.length;r++){const n=e.parse(t[r],r,yt);if(!n)return null;o.push(n)}return new Wt(n,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const n=this.args[e].evaluate(t);if(!Ct(this.type,Vt(n)))return n;if(e===this.args.length-1)throw new Yt(`Expected value to be of type ${Et(this.type)}, but found ${Et(Vt(n))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const Ht={"to-boolean":ft,"to-color":mt,"to-number":dt,"to-string":pt};class Xt{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[0];if(!Ht[n])throw new Error(`Can't parse ${n} as it is not part of the known types`);if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");const r=Ht[n],i=[];for(let o=1;o<t.length;o++){const n=e.parse(t[o],o,yt);if(!n)return null;i.push(n)}return new Xt(r,i)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,n;for(const r of this.args){if(e=r.evaluate(t),n=null,e instanceof Rt)return e;if("string"==typeof e){const n=t.parseColor(e);if(n)return n}else if(Array.isArray(e)&&(n=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:jt(e[0],e[1],e[2],e[3]),!n))return new Rt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Yt(n||`Could not parse color from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}if("padding"===this.type.kind){let e;for(const n of this.args){e=n.evaluate(t);const r=zt.parse(e);if(r)return r}throw new Yt(`Could not parse padding from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}if("number"===this.type.kind){let e=null;for(const n of this.args){if(e=n.evaluate(t),null===e)return 0;const r=Number(e);if(!isNaN(r))return r}throw new Yt(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?Ft.fromString(qt(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Bt.fromString(qt(this.args[0].evaluate(t))):qt(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const Zt=["Unknown","Point","LineString","Polygon"];class Kt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Zt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Rt.parse(t)),e}}class Qt{constructor(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,e){const n=t[0],r=Qt.definitions[n];if(!r)return e.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter((e=>{let[n]=e;return!Array.isArray(n)||n.length===t.length-1}));let s=null;for(const[l,u]of a){s=new xe(e.registry,e.path,null,e.scope);const r=[];let o=!1;for(let e=1;e<t.length;e++){const n=t[e],i=Array.isArray(l)?l[e-1]:l.type,a=s.parse(n,1+r.length,i);if(!a){o=!0;break}r.push(a)}if(!o)if(Array.isArray(l)&&l.length!==r.length)s.error(`Expected ${l.length} arguments, but found ${r.length} instead.`);else{for(let t=0;t<r.length;t++){const e=Array.isArray(l)?l[t]:l.type,n=r[t];s.concat(t+1).checkSubtype(e,n.type)}if(0===s.errors.length)return new Qt(n,i,u,r)}}if(1===a.length)e.errors.push(...s.errors);else{const n=(a.length?a:o).map((t=>{let[e]=t;return n=e,Array.isArray(n)?`(${n.map(Et).join(", ")})`:`(${Et(n.type)}...)`;var n})).join(" | "),r=[];for(let i=1;i<t.length;i++){const n=e.parse(t[i],1+r.length);if(!n)return null;r.push(Et(n.type))}e.error(`Expected arguments of type ${n}, but found (${r.join(", ")}) instead.`)}return null}static register(t,e){Qt.definitions=e;for(const n in e)t[n]=Qt}}class Jt{constructor(t,e,n){this.type=vt,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");const r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,ft);if(!r)return null;const i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,ft);if(!i)return null;let o=null;return n.locale&&(o=e.parse(n.locale,1,pt),!o)?null:new Jt(r,i,o)}evaluate(t){return new Nt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}const te=8192;function ee(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function ne(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function re(t,e){const n=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return[Math.round(n*i*te),Math.round(r*i*te)]}function ie(t,e,n){const r=t[0]-e[0],i=t[1]-e[1],o=t[0]-n[0],a=t[1]-n[1];return r*a-o*i==0&&r*o<=0&&i*a<=0}function oe(t,e){let n=!1;for(let a=0,s=e.length;a<s;a++){const s=e[a];for(let e=0,a=s.length;e<a-1;e++){if(ie(t,s[e],s[e+1]))return!1;(i=s[e])[1]>(r=t)[1]!=(o=s[e+1])[1]>r[1]&&r[0]<(o[0]-i[0])*(r[1]-i[1])/(o[1]-i[1])+i[0]&&(n=!n)}}var r,i,o;return n}function ae(t,e){for(let n=0;n<e.length;n++)if(oe(t,e[n]))return!0;return!1}function se(t,e,n,r){const i=r[0]-n[0],o=r[1]-n[1],a=(t[0]-n[0])*o-i*(t[1]-n[1]),s=(e[0]-n[0])*o-i*(e[1]-n[1]);return a>0&&s<0||a<0&&s>0}function le(t,e,n){for(const u of n)for(let n=0;n<u.length-1;++n)if(0!=(s=[(a=u[n+1])[0]-(o=u[n])[0],a[1]-o[1]])[0]*(l=[(i=e)[0]-(r=t)[0],i[1]-r[1]])[1]-s[1]*l[0]&&se(r,i,o,a)&&se(o,a,r,i))return!0;var r,i,o,a,s,l;return!1}function ue(t,e){for(let n=0;n<t.length;++n)if(!oe(t[n],e))return!1;for(let n=0;n<t.length-1;++n)if(le(t[n],t[n+1],e))return!1;return!0}function ce(t,e){for(let n=0;n<e.length;n++)if(ue(t,e[n]))return!0;return!1}function he(t,e,n){const r=[];for(let i=0;i<t.length;i++){const o=[];for(let r=0;r<t[i].length;r++){const a=re(t[i][r],n);ee(e,a),o.push(a)}r.push(o)}return r}function de(t,e,n){const r=[];for(let i=0;i<t.length;i++){const o=he(t[i],e,n);r.push(o)}return r}function pe(t,e,n,r){if(t[0]<n[0]||t[0]>n[2]){const e=.5*r;let i=t[0]-n[0]>e?-r:n[0]-t[0]>e?r:0;0===i&&(i=t[0]-n[2]>e?-r:n[2]-t[0]>e?r:0),t[0]+=i}ee(e,t)}function fe(t,e,n,r){const i=Math.pow(2,r.z)*te,o=[r.x*te,r.y*te],a=[];for(const s of t)for(const t of s){const r=[t.x+o[0],t.y+o[1]];pe(r,e,n,i),a.push(r)}return a}function me(t,e,n,r){const i=Math.pow(2,r.z)*te,o=[r.x*te,r.y*te],a=[];for(const l of t){const t=[];for(const n of l){const r=[n.x+o[0],n.y+o[1]];ee(e,r),t.push(r)}a.push(t)}if(e[2]-e[0]<=i/2){(s=e)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const t of a)for(const r of t)pe(r,e,n,i)}var s;return a}class ge{constructor(t,e){this.type=ft,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Ut(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const n=e.features[t].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new ge(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new ge(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new ge(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){const o=he(e.coordinates,r,i),a=fe(t.geometry(),n,r,i);if(!ne(n,r))return!1;for(const t of a)if(!oe(t,o))return!1}if("MultiPolygon"===e.type){const o=de(e.coordinates,r,i),a=fe(t.geometry(),n,r,i);if(!ne(n,r))return!1;for(const t of a)if(!ae(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){const o=he(e.coordinates,r,i),a=me(t.geometry(),n,r,i);if(!ne(n,r))return!1;for(const t of a)if(!ue(t,o))return!1}if("MultiPolygon"===e.type){const o=de(e.coordinates,r,i),a=me(t.geometry(),n,r,i);if(!ne(n,r))return!1;for(const t of a)if(!ce(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function ye(t){if(t instanceof Qt){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof ge)return!1;let e=!0;return t.eachChild((t=>{e&&!ye(t)&&(e=!1)})),e}function ve(t){if(t instanceof Qt&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!ve(t)&&(e=!1)})),e}function _e(t,e){if(t instanceof Qt&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild((t=>{n&&!_e(t,e)&&(n=!1)})),n}class be{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const n=t[1];return e.scope.has(n)?new be(n,e.scope.get(n)):e.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class xe{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ct,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];this.registry=t,this.path=e,this.key=e.map((t=>`[${t}]`)).join(""),this.scope=r,this.errors=i,this.expectedType=n}parse(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)}_parse(t,e){function n(t,e,n){return"assert"===n?new Wt(e,[t]):"coerce"===n?new Xt(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=t[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[r];if(i){let r=i.parse(t,this);if(!r)return null;if(this.expectedType){const t=this.expectedType,i=r.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==i.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==i.kind&&"string"!==i.kind)if("padding"!==t.kind||"value"!==i.kind&&"number"!==i.kind&&"array"!==i.kind){if(this.checkSubtype(t,i))return null}else r=n(r,t,e.typeAnnotation||"coerce");else r=n(r,t,e.typeAnnotation||"coerce");else r=n(r,t,e.typeAnnotation||"assert")}if(!(r instanceof Gt)&&"resolvedImage"!==r.type.kind&&we(r)){const e=new Kt;try{r=new Gt(r.type,r.evaluate(e))}catch(t){return this.error(t.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,n){const r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new xe(this.registry,r,e||null,i,this.errors)}error(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const i=`${this.key}${n.map((t=>`[${t}]`)).join("")}`;this.errors.push(new ut(i,t))}checkSubtype(t,e){const n=Ct(t,e);return n&&this.error(n),n}}function we(t){if(t instanceof be)return we(t.boundExpression);if(t instanceof Qt&&"error"===t.name)return!1;if(t instanceof Jt)return!1;if(t instanceof ge)return!1;const e=t instanceof Xt||t instanceof Wt;let n=!0;return t.eachChild((t=>{n=e?n&&we(t):n&&t instanceof Gt})),!!n&&ye(t)&&_e(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ee(t,e){const n=t.length-1;let r,i,o=0,a=n,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),r=t[s],i=t[s+1],r<=e){if(s===n||e<i)return s;o=s+1}else{if(!(r>e))throw new Yt("Input is not a number.");a=s-1}return 0}class Se{constructor(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[r,i]of n)this.labels.push(r),this.outputs.push(i)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const n=e.parse(t[1],1,dt);if(!n)return null;const r=[];let i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(let o=1;o<t.length;o+=2){const n=1===o?-1/0:t[o],a=t[o+1],s=o,l=o+1;if("number"!=typeof n)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=n)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const u=e.parse(a,l,i);if(!u)return null;i=i||u.type,r.push([n,u])}return new Se(i,n,r)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[Ee(e,r)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function Ce(t,e,n){return t*(1-n)+e*n}var Te=Object.freeze({__proto__:null,number:Ce,color:function(t,e,n){return new Rt(Ce(t.r,e.r,n),Ce(t.g,e.g,n),Ce(t.b,e.b,n),Ce(t.a,e.a,n))},array:function(t,e,n){return t.map(((t,r)=>Ce(t,e[r],n)))},padding:function(t,e,n){const r=t.values,i=e.values;return new zt([Ce(r[0],i[0],n),Ce(r[1],i[1],n),Ce(r[2],i[2],n),Ce(r[3],i[3],n)])}});const Ie=.95047,ke=1.08883,Ae=4/29,Pe=6/29,De=3*Pe*Pe,Me=Math.PI/180,Oe=180/Math.PI;function Re(t){return t>.008856451679035631?Math.pow(t,1/3):t/De+Ae}function Ne(t){return t>Pe?t*t*t:De*(t-Ae)}function Le(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Fe(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ze(t){const e=Fe(t.r),n=Fe(t.g),r=Fe(t.b),i=Re((.4124564*e+.3575761*n+.1804375*r)/Ie),o=Re((.2126729*e+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-Re((.0193339*e+.119192*n+.9503041*r)/ke)),alpha:t.a}}function Be(t){let e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*Ne(e),n=Ie*Ne(n),r=ke*Ne(r),new Rt(Le(3.2404542*n-1.5371385*e-.4985314*r),Le(-.969266*n+1.8760108*e+.041556*r),Le(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function je(t,e,n){const r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}const Ue={forward:ze,reverse:Be,interpolate:function(t,e,n){return{l:Ce(t.l,e.l,n),a:Ce(t.a,e.a,n),b:Ce(t.b,e.b,n),alpha:Ce(t.alpha,e.alpha,n)}}},Ve={forward:function(t){const{l:e,a:n,b:r}=ze(t),i=Math.atan2(r,n)*Oe;return{h:i<0?i+360:i,c:Math.sqrt(n*n+r*r),l:e,alpha:t.a}},reverse:function(t){const e=t.h*Me,n=t.c;return Be({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:je(t.h,e.h,n),c:Ce(t.c,e.c,n),l:Ce(t.l,e.l,n),alpha:Ce(t.alpha,e.alpha,n)}}};var qe=Object.freeze({__proto__:null,lab:Ue,hcl:Ve});class Ge{constructor(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[o,a]of i)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(t,n,r,i){let o=0;if("exponential"===t.name)o=Ye(n,t.base,r,i);else if("linear"===t.name)o=Ye(n,1,r,i);else if("cubic-bezier"===t.name){const a=t.controlPoints;o=new e(a[0],a[1],a[2],a[3]).solve(Ye(n,1,r,i))}return o}static parse(t,e){let[n,r,i,...o]=t;if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const t=r[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:t}}else{if("cubic-bezier"!==r[0])return e.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const t=r.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(i=e.parse(i,2,dt),!i)return null;const a=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=mt:e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);for(let l=0;l<o.length;l+=2){const t=o[l],n=o[l+1],r=l+3,i=l+4;if("number"!=typeof t)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(a.length&&a[a.length-1][0]>=t)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const u=e.parse(n,i,s);if(!u)return null;s=s||u.type,a.push([t,u])}return"number"===s.kind||"color"===s.kind||"padding"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new Ge(s,n,r,i,a):e.error(`Type ${Et(s)} is not interpolatable.`)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);const o=Ee(e,r),a=Ge.interpolationFactor(this.interpolation,r,e[o],e[o+1]),s=n[o].evaluate(t),l=n[o+1].evaluate(t);return"interpolate"===this.operator?Te[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?Ve.reverse(Ve.interpolate(Ve.forward(s),Ve.forward(l),a)):Ue.reverse(Ue.interpolate(Ue.forward(s),Ue.forward(l),a))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function Ye(t,e,n,r){const i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}class $e{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let n=null;const r=e.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const a of t.slice(1)){const t=e.parse(a,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!t)return null;n=n||t.type,i.push(t)}if(!n)throw new Error("No output type");const o=r&&i.some((t=>Ct(r,t.type)));return new $e(o?yt:n,i)}evaluate(t){let e,n=null,r=0;for(const i of this.args)if(r++,n=i.evaluate(t),n&&n instanceof Bt&&!n.available&&(e||(e=n.name),n=null,r===this.args.length&&(n=e)),null!==n)break;return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}class We{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const n=[];for(let i=1;i<t.length-1;i+=2){const r=t[i];if("string"!=typeof r)return e.error(`Expected string, but found ${typeof r} instead.`,i);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);const o=e.parse(t[i+1],i+1);if(!o)return null;n.push([r,o])}const r=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return r?new We(n,r):null}outputDefined(){return this.result.outputDefined()}}class He{constructor(t,e,n){this.type=t,this.index=e,this.input=n}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,dt),r=e.parse(t[2],2,wt(e.expectedType||yt));return n&&r?new He(r.type.itemType,n,r):null}evaluate(t){const e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new Yt(`Array index out of bounds: ${e} < 0.`);if(e>=n.length)throw new Yt(`Array index out of bounds: ${e} > ${n.length-1}.`);if(e!==Math.floor(e))throw new Yt(`Array index must be an integer, but found ${e} instead.`);return n[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class Xe{constructor(t,e){this.type=ft,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,yt),r=e.parse(t[2],2,yt);return n&&r?Tt(n.type,[ft,pt,dt,ht,yt])?new Xe(n,r):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Et(n.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!It(e,["boolean","string","number","null"]))throw new Yt(`Expected first argument to be of type boolean, string, number or null, but found ${Et(Vt(e))} instead.`);if(!It(n,["string","array"]))throw new Yt(`Expected second argument to be of type array or string, but found ${Et(Vt(n))} instead.`);return n.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class Ze{constructor(t,e,n){this.type=dt,this.needle=t,this.haystack=e,this.fromIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,yt),r=e.parse(t[2],2,yt);if(!n||!r)return null;if(!Tt(n.type,[ft,pt,dt,ht,yt]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Et(n.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,dt);return i?new Ze(n,r,i):null}return new Ze(n,r)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!It(e,["boolean","string","number","null"]))throw new Yt(`Expected first argument to be of type boolean, string, number or null, but found ${Et(Vt(e))} instead.`);if(!It(n,["string","array"]))throw new Yt(`Expected second argument to be of type array or string, but found ${Et(Vt(n))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class Ke{constructor(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);const i={},o=[];for(let l=2;l<t.length-1;l+=2){let a=t[l];const s=t[l+1];Array.isArray(a)||(a=[a]);const u=e.concat(l);if(0===a.length)return u.error("Expected at least one branch label.");for(const t of a){if("number"!=typeof t&&"string"!=typeof t)return u.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return u.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return u.error("Numeric branch labels must be integer values.");if(n){if(u.checkSubtype(n,Vt(t)))return null}else n=Vt(t);if(void 0!==i[String(t)])return u.error("Branch labels must be unique.");i[String(t)]=o.length}const c=e.parse(s,l,r);if(!c)return null;r=r||c.type,o.push(c)}const a=e.parse(t[1],1,yt);if(!a)return null;const s=e.parse(t[t.length-1],t.length-1,r);return s?"value"!==a.type.kind&&e.concat(1).checkSubtype(n,a.type)?null:new Ke(n,r,a,i,o,s):null}evaluate(t){const e=this.input.evaluate(t);return(Vt(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}}class Qe{constructor(t,e,n){this.type=t,this.branches=e,this.otherwise=n}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const r=[];for(let o=1;o<t.length-1;o+=2){const i=e.parse(t[o],o,ft);if(!i)return null;const a=e.parse(t[o+1],o+1,n);if(!a)return null;r.push([i,a]),n=n||a.type}const i=e.parse(t[t.length-1],t.length-1,n);if(!i)return null;if(!n)throw new Error("Can't infer output type");return new Qe(n,r,i)}evaluate(t){for(const[e,n]of this.branches)if(e.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,n]of this.branches)t(e),t(n);t(this.otherwise)}outputDefined(){return this.branches.every((t=>{let[e,n]=t;return n.outputDefined()}))&&this.otherwise.outputDefined()}}class Je{constructor(t,e,n,r){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,yt),r=e.parse(t[2],2,dt);if(!n||!r)return null;if(!Tt(n.type,[wt(yt),pt,yt]))return e.error(`Expected first argument to be of type array or string, but found ${Et(n.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,dt);return i?new Je(n.type,n,r,i):null}return new Je(n.type,n,r)}evaluate(t){const e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!It(e,["string","array"]))throw new Yt(`Expected first argument to be of type array or string, but found ${Et(Vt(e))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function tn(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function en(t,e,n,r){return 0===r.compare(e,n)}function nn(t,e,n){const r="=="!==t&&"!="!==t;return class i{constructor(t,e,n){this.type=ft,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const n=t[0];let o=e.parse(t[1],1,yt);if(!o)return null;if(!tn(n,o.type))return e.concat(1).error(`"${n}" comparisons are not supported for type '${Et(o.type)}'.`);let a=e.parse(t[2],2,yt);if(!a)return null;if(!tn(n,a.type))return e.concat(2).error(`"${n}" comparisons are not supported for type '${Et(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error(`Cannot compare types '${Et(o.type)}' and '${Et(a.type)}'.`);r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Wt(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Wt(o.type,[a])));let s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(s=e.parse(t[3],3,vt),!s)return null}return new i(o,a,s)}evaluate(i){const o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){const e=Vt(o),n=Vt(a);if(e.kind!==n.kind||"string"!==e.kind&&"number"!==e.kind)throw new Yt(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${n.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const t=Vt(o),n=Vt(a);if("string"!==t.kind||"string"!==n.kind)return e(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):e(i,o,a)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}}}const rn=nn("==",(function(t,e,n){return e===n}),en),on=nn("!=",(function(t,e,n){return e!==n}),(function(t,e,n,r){return!en(0,e,n,r)})),an=nn("<",(function(t,e,n){return e<n}),(function(t,e,n,r){return r.compare(e,n)<0})),sn=nn(">",(function(t,e,n){return e>n}),(function(t,e,n,r){return r.compare(e,n)>0})),ln=nn("<=",(function(t,e,n){return e<=n}),(function(t,e,n,r){return r.compare(e,n)<=0})),un=nn(">=",(function(t,e,n){return e>=n}),(function(t,e,n,r){return r.compare(e,n)>=0}));class cn{constructor(t,e,n,r,i){this.type=pt,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,dt);if(!n)return null;const r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=e.parse(r.locale,1,pt),!i))return null;let o=null;if(r.currency&&(o=e.parse(r.currency,1,pt),!o))return null;let a=null;if(r["min-fraction-digits"]&&(a=e.parse(r["min-fraction-digits"],1,dt),!a))return null;let s=null;return r["max-fraction-digits"]&&(s=e.parse(r["max-fraction-digits"],1,dt),!s)?null:new cn(n,i,o,a,s)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class hn{constructor(t){this.type=_t,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");const r=[];let i=!1;for(let o=1;o<=t.length-1;++o){const n=t[o];if(i&&"object"==typeof n&&!Array.isArray(n)){i=!1;let t=null;if(n["font-scale"]&&(t=e.parse(n["font-scale"],1,dt),!t))return null;let o=null;if(n["text-font"]&&(o=e.parse(n["text-font"],1,wt(pt)),!o))return null;let a=null;if(n["text-color"]&&(a=e.parse(n["text-color"],1,mt),!a))return null;const s=r[r.length-1];s.scale=t,s.font=o,s.textColor=a}else{const n=e.parse(t[o],1,yt);if(!n)return null;const a=n.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:n,scale:null,font:null,textColor:null})}}return new hn(r)}evaluate(t){return new Ft(this.sections.map((e=>{const n=e.content.evaluate(t);return Vt(n)===xt?new Lt("",n,null,null,null):new Lt(qt(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}}class dn{constructor(t){this.type=xt,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,pt);return n?new dn(n):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),n=Bt.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}}class pn{constructor(t){this.type=dt,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error(`Expected argument of type string or array, but found ${Et(n.type)} instead.`):new pn(n):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Yt(`Expected value to be of type string or array, but found ${Et(Vt(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const fn={"==":rn,"!=":on,">":sn,"<":an,">=":un,"<=":ln,array:Wt,at:He,boolean:Wt,case:Qe,coalesce:$e,collator:Jt,format:hn,image:dn,in:Xe,"index-of":Ze,interpolate:Ge,"interpolate-hcl":Ge,"interpolate-lab":Ge,length:pn,let:We,literal:Gt,match:Ke,number:Wt,"number-format":cn,object:Wt,slice:Je,step:Se,string:Wt,"to-boolean":Xt,"to-color":Xt,"to-number":Xt,"to-string":Xt,var:be,within:ge};function mn(t,e){let[n,r,i,o]=e;n=n.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);const a=o?o.evaluate(t):1,s=jt(n,r,i,a);if(s)throw new Yt(s);return new Rt(n/255*a,r/255*a,i/255*a,a)}function gn(t,e){return t in e}function yn(t,e){const n=e[t];return void 0===n?null:n}function vn(t){return{type:t}}function _n(t){return{result:"success",value:t}}function bn(t){return{result:"error",value:t}}function xn(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function wn(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function En(t){return!!t.expression&&t.expression.interpolated}function Sn(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Cn(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Tn(t){return t}function In(t,e){const n="color"===e.type,r=t.stops&&"object"==typeof t.stops[0][0],i=r||!(r||void 0!==t.property),o=t.type||(En(e)?"exponential":"interval");if(n||"padding"===e.type){const r=n?Rt.parse:zt.parse;(t=at({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],r(t[1])]))),t.default=r(t.default?t.default:e.default)}if(t.colorSpace&&"rgb"!==t.colorSpace&&!qe[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let a,s,l;if("exponential"===o)a=Dn;else if("interval"===o)a=Pn;else if("categorical"===o){a=An,s=Object.create(null);for(const e of t.stops)s[e[0]]=e[1];l=typeof t.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);a=Mn}if(r){const n={},r=[];for(let e=0;e<t.stops.length;e++){const i=t.stops[e],o=i[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},r.push(o)),n[o].stops.push([i[0].value,i[1]])}const i=[];for(const t of r)i.push([n[t].zoom,In(n[t],e)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:Ge.interpolationFactor.bind(void 0,o),zoomStops:i.map((t=>t[0])),evaluate:(n,r)=>{let{zoom:o}=n;return Dn({stops:i,base:t.base},e,o).evaluate(o,r)}}}if(i){const n="exponential"===o?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:Ge.interpolationFactor.bind(void 0,n),zoomStops:t.stops.map((t=>t[0])),evaluate:n=>{let{zoom:r}=n;return a(t,e,r,s,l)}}}return{kind:"source",evaluate(n,r){const i=r&&r.properties?r.properties[t.property]:void 0;return void 0===i?kn(t.default,e.default):a(t,e,i,s,l)}}}function kn(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function An(t,e,n,r,i){return kn(typeof n===i?r[n]:void 0,t.default,e.default)}function Pn(t,e,n){if("number"!==Sn(n))return kn(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];const i=Ee(t.stops.map((t=>t[0])),n);return t.stops[i][1]}function Dn(t,e,n){const r=void 0!==t.base?t.base:1;if("number"!==Sn(n))return kn(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];const o=Ee(t.stops.map((t=>t[0])),n),a=function(t,e,n,r){const i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1];let u=Te[e.type]||Tn;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=qe[t.colorSpace];u=(t,n)=>e.reverse(e.interpolate(e.forward(t),e.forward(n),a))}return"function"==typeof s.evaluate?{evaluate(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=s.evaluate.apply(void 0,e),i=l.evaluate.apply(void 0,e);if(void 0!==r&&void 0!==i)return u(r,i,a)}}:u(s,l,a)}function Mn(t,e,n){switch(e.type){case"color":n=Rt.parse(n);break;case"formatted":n=Ft.fromString(n.toString());break;case"resolvedImage":n=Bt.fromString(n.toString());break;case"padding":n=zt.parse(n);break;default:Sn(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0)}return kn(n,t.default,e.default)}Qt.register(fn,{error:[{kind:"error"},[pt],(t,e)=>{let[n]=e;throw new Yt(n.evaluate(t))}],typeof:[pt,[yt],(t,e)=>{let[n]=e;return Et(Vt(n.evaluate(t)))}],"to-rgba":[wt(dt,4),[mt],(t,e)=>{let[n]=e;return n.evaluate(t).toArray()}],rgb:[mt,[dt,dt,dt],mn],rgba:[mt,[dt,dt,dt,dt],mn],has:{type:ft,overloads:[[[pt],(t,e)=>{let[n]=e;return gn(n.evaluate(t),t.properties())}],[[pt,gt],(t,e)=>{let[n,r]=e;return gn(n.evaluate(t),r.evaluate(t))}]]},get:{type:yt,overloads:[[[pt],(t,e)=>{let[n]=e;return yn(n.evaluate(t),t.properties())}],[[pt,gt],(t,e)=>{let[n,r]=e;return yn(n.evaluate(t),r.evaluate(t))}]]},"feature-state":[yt,[pt],(t,e)=>{let[n]=e;return yn(n.evaluate(t),t.featureState||{})}],properties:[gt,[],t=>t.properties()],"geometry-type":[pt,[],t=>t.geometryType()],id:[yt,[],t=>t.id()],zoom:[dt,[],t=>t.globals.zoom],"heatmap-density":[dt,[],t=>t.globals.heatmapDensity||0],"line-progress":[dt,[],t=>t.globals.lineProgress||0],accumulated:[yt,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[dt,vn(dt),(t,e)=>{let n=0;for(const r of e)n+=r.evaluate(t);return n}],"*":[dt,vn(dt),(t,e)=>{let n=1;for(const r of e)n*=r.evaluate(t);return n}],"-":{type:dt,overloads:[[[dt,dt],(t,e)=>{let[n,r]=e;return n.evaluate(t)-r.evaluate(t)}],[[dt],(t,e)=>{let[n]=e;return-n.evaluate(t)}]]},"/":[dt,[dt,dt],(t,e)=>{let[n,r]=e;return n.evaluate(t)/r.evaluate(t)}],"%":[dt,[dt,dt],(t,e)=>{let[n,r]=e;return n.evaluate(t)%r.evaluate(t)}],ln2:[dt,[],()=>Math.LN2],pi:[dt,[],()=>Math.PI],e:[dt,[],()=>Math.E],"^":[dt,[dt,dt],(t,e)=>{let[n,r]=e;return Math.pow(n.evaluate(t),r.evaluate(t))}],sqrt:[dt,[dt],(t,e)=>{let[n]=e;return Math.sqrt(n.evaluate(t))}],log10:[dt,[dt],(t,e)=>{let[n]=e;return Math.log(n.evaluate(t))/Math.LN10}],ln:[dt,[dt],(t,e)=>{let[n]=e;return Math.log(n.evaluate(t))}],log2:[dt,[dt],(t,e)=>{let[n]=e;return Math.log(n.evaluate(t))/Math.LN2}],sin:[dt,[dt],(t,e)=>{let[n]=e;return Math.sin(n.evaluate(t))}],cos:[dt,[dt],(t,e)=>{let[n]=e;return Math.cos(n.evaluate(t))}],tan:[dt,[dt],(t,e)=>{let[n]=e;return Math.tan(n.evaluate(t))}],asin:[dt,[dt],(t,e)=>{let[n]=e;return Math.asin(n.evaluate(t))}],acos:[dt,[dt],(t,e)=>{let[n]=e;return Math.acos(n.evaluate(t))}],atan:[dt,[dt],(t,e)=>{let[n]=e;return Math.atan(n.evaluate(t))}],min:[dt,vn(dt),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[dt,vn(dt),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[dt,[dt],(t,e)=>{let[n]=e;return Math.abs(n.evaluate(t))}],round:[dt,[dt],(t,e)=>{let[n]=e;const r=n.evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[dt,[dt],(t,e)=>{let[n]=e;return Math.floor(n.evaluate(t))}],ceil:[dt,[dt],(t,e)=>{let[n]=e;return Math.ceil(n.evaluate(t))}],"filter-==":[ft,[pt,yt],(t,e)=>{let[n,r]=e;return t.properties()[n.value]===r.value}],"filter-id-==":[ft,[yt],(t,e)=>{let[n]=e;return t.id()===n.value}],"filter-type-==":[ft,[pt],(t,e)=>{let[n]=e;return t.geometryType()===n.value}],"filter-<":[ft,[pt,yt],(t,e)=>{let[n,r]=e;const i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[ft,[yt],(t,e)=>{let[n]=e;const r=t.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[ft,[pt,yt],(t,e)=>{let[n,r]=e;const i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[ft,[yt],(t,e)=>{let[n]=e;const r=t.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[ft,[pt,yt],(t,e)=>{let[n,r]=e;const i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[ft,[yt],(t,e)=>{let[n]=e;const r=t.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[ft,[pt,yt],(t,e)=>{let[n,r]=e;const i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[ft,[yt],(t,e)=>{let[n]=e;const r=t.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[ft,[yt],(t,e)=>{let[n]=e;return n.value in t.properties()}],"filter-has-id":[ft,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[ft,[wt(pt)],(t,e)=>{let[n]=e;return n.value.indexOf(t.geometryType())>=0}],"filter-id-in":[ft,[wt(yt)],(t,e)=>{let[n]=e;return n.value.indexOf(t.id())>=0}],"filter-in-small":[ft,[pt,wt(yt)],(t,e)=>{let[n,r]=e;return r.value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[ft,[pt,wt(yt)],(t,e)=>{let[n,r]=e;return function(t,e,n,r){for(;n<=r;){const i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:ft,overloads:[[[ft,ft],(t,e)=>{let[n,r]=e;return n.evaluate(t)&&r.evaluate(t)}],[vn(ft),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:ft,overloads:[[[ft,ft],(t,e)=>{let[n,r]=e;return n.evaluate(t)||r.evaluate(t)}],[vn(ft),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[ft,[ft],(t,e)=>{let[n]=e;return!n.evaluate(t)}],"is-supported-script":[ft,[pt],(t,e)=>{let[n]=e;const r=t.globals&&t.globals.isSupportedScript;return!r||r(n.evaluate(t))}],upcase:[pt,[pt],(t,e)=>{let[n]=e;return n.evaluate(t).toUpperCase()}],downcase:[pt,[pt],(t,e)=>{let[n]=e;return n.evaluate(t).toLowerCase()}],concat:[pt,vn(yt),(t,e)=>e.map((e=>qt(e.evaluate(t)))).join("")],"resolved-locale":[pt,[vt],(t,e)=>{let[n]=e;return n.evaluate(t).resolvedLocale()}]});class On{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Kt,this._defaultValue=e?function(t){return"color"===t.type&&Cn(t.default)?new Rt(0,0,0,0):"color"===t.type?Rt.parse(t.default)||null:"padding"===t.type?zt.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,n,r,i,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(t,e,n,r,i,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new Yt(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function Rn(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in fn}function Nn(t,e){const n=new xe(fn,[],e?function(t){const e={color:mt,string:pt,number:dt,enum:pt,boolean:ft,formatted:_t,padding:bt,resolvedImage:xt};return"array"===t.type?wt(e[t.value]||yt,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?_n(new On(r,e)):bn(n.errors)}class Ln{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ve(e.expression)}evaluateWithoutErrorHandling(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}evaluate(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}}class Fn{constructor(t,e,n,r){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ve(e.expression),this.interpolationType=r}evaluateWithoutErrorHandling(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}evaluate(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}interpolationFactor(t,e,n){return this.interpolationType?Ge.interpolationFactor(this.interpolationType,t,e,n):0}}function zn(t,e){const n=Nn(t,e);if("error"===n.result)return n;const r=n.value.expression,i=ye(r);if(!i&&!xn(e))return bn([new ut("","data expressions not supported")]);const o=_e(r,["zoom"]);if(!o&&!wn(e))return bn([new ut("","zoom expressions not supported")]);const a=jn(r);return a||o?a instanceof ut?bn([a]):a instanceof Ge&&!En(e)?bn([new ut("",'"interpolate" expressions cannot be used with this property')]):_n(a?new Fn(i?"camera":"composite",n.value,a.labels,a instanceof Ge?a.interpolation:void 0):new Ln(i?"constant":"source",n.value)):bn([new ut("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Bn{constructor(t,e){this._parameters=t,this._specification=e,at(this,In(this._parameters,this._specification))}static deserialize(t){return new Bn(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function jn(t){let e=null;if(t instanceof We)e=jn(t.result);else if(t instanceof $e){for(const n of t.args)if(e=jn(n),e)break}else(t instanceof Se||t instanceof Ge)&&t.input instanceof Qt&&"zoom"===t.input.name&&(e=t);return e instanceof ut||t.eachChild((t=>{const n=jn(t);n instanceof ut?e=n:!e&&n?e=new ut("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new ut("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function Un(t){const e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec;let s=[];const l=Sn(n);if("object"!==l)return[new it(e,n,`object expected, ${l} found`)];for(const u in n){const t=u.split(".")[0],l=r[t]||r["*"];let c;if(i[t])c=i[t];else if(r[t])c=mr;else if(i["*"])c=i["*"];else{if(!r["*"]){s.push(new it(e,n[u],`unknown property "${u}"`));continue}c=mr}s=s.concat(c({key:(e?`${e}.`:e)+u,value:n[u],valueSpec:l,style:o,styleSpec:a,object:n,objectKey:u},n))}for(const u in r)i[u]||r[u].required&&void 0===r[u].default&&void 0===n[u]&&s.push(new it(e,n,`missing required property "${u}"`));return s}function Vn(t){const e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||mr;if("array"!==Sn(e))return[new it(o,e,`array expected, ${Sn(e)} found`)];if(n.length&&e.length!==n.length)return[new it(o,e,`array length ${n.length} expected, length ${e.length} found`)];if(n["min-length"]&&e.length<n["min-length"])return[new it(o,e,`array length at least ${n["min-length"]} expected, length ${e.length} found`)];let s={type:n.value,values:n.values};i.$version<7&&(s.function=n.function),"object"===Sn(n.value)&&(s=n.value);let l=[];for(let u=0;u<e.length;u++)l=l.concat(a({array:e,arrayIndex:u,value:e[u],valueSpec:s,style:r,styleSpec:i,key:`${o}[${u}]`}));return l}function qn(t){const e=t.key,n=t.value,r=t.valueSpec;let i=Sn(n);return"number"===i&&n!=n&&(i="NaN"),"number"!==i?[new it(e,n,`number expected, ${i} found`)]:"minimum"in r&&n<r.minimum?[new it(e,n,`${n} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&n>r.maximum?[new it(e,n,`${n} is greater than the maximum value ${r.maximum}`)]:[]}function Gn(t){const e=t.valueSpec,n=st(t.value.type);let r,i,o,a={};const s="categorical"!==n&&void 0===t.value.property,l=!s,u="array"===Sn(t.value.stops)&&"array"===Sn(t.value.stops[0])&&"object"===Sn(t.value.stops[0][0]),c=Un({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===n)return[new it(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const r=t.value;return e=e.concat(Vn({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===Sn(r)&&0===r.length&&e.push(new it(t.key,r,"array must have at least one stop")),e},default:function(t){return mr({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===n&&s&&c.push(new it(t.key,t.value,'missing required property "property"')),"identity"===n||t.value.stops||c.push(new it(t.key,t.value,'missing required property "stops"')),"exponential"===n&&t.valueSpec.expression&&!En(t.valueSpec)&&c.push(new it(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!xn(t.valueSpec)?c.push(new it(t.key,t.value,"property functions not supported")):s&&!wn(t.valueSpec)&&c.push(new it(t.key,t.value,"zoom functions not supported"))),"categorical"!==n&&!u||void 0!==t.value.property||c.push(new it(t.key,t.value,'"property" property is required')),c;function h(t){let n=[];const r=t.value,s=t.key;if("array"!==Sn(r))return[new it(s,r,`array expected, ${Sn(r)} found`)];if(2!==r.length)return[new it(s,r,`array length 2 expected, length ${r.length} found`)];if(u){if("object"!==Sn(r[0]))return[new it(s,r,`object expected, ${Sn(r[0])} found`)];if(void 0===r[0].zoom)return[new it(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new it(s,r,"object stop key must have value")];if(o&&o>st(r[0].zoom))return[new it(s,r[0].zoom,"stop zoom values must appear in ascending order")];st(r[0].zoom)!==o&&(o=st(r[0].zoom),i=void 0,a={}),n=n.concat(Un({key:`${s}[0]`,value:r[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:qn,value:d}}))}else n=n.concat(d({key:`${s}[0]`,value:r[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},r));return Rn(lt(r[1]))?n.concat([new it(`${s}[1]`,r[1],"expressions are not allowed in function stops.")]):n.concat(mr({key:`${s}[1]`,value:r[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function d(t,o){const s=Sn(t.value),l=st(t.value),u=null!==t.value?t.value:o;if(r){if(s!==r)return[new it(t.key,u,`${s} stop domain type must match previous stop domain type ${r}`)]}else r=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new it(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let r=`number expected, ${s} found`;return xn(e)&&void 0===n&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new it(t.key,u,r)]}return"categorical"!==n||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&void 0!==i&&l<i?[new it(t.key,u,"stop domain values must appear in ascending order")]:(i=l,"categorical"===n&&l in a?[new it(t.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new it(t.key,u,`integer expected, found ${l}`)]}}function Yn(t){const e=("property"===t.expressionContext?zn:Nn)(lt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new it(`${t.key}${e.key}`,t.value,e.message)));const n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new it(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ve(n))return[new it(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ve(n))return[new it(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!_e(n,["zoom","feature-state"]))return[new it(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!ye(n))return[new it(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $n(t){const e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(st(n))&&i.push(new it(e,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(r.values).indexOf(st(n))&&i.push(new it(e,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),i}function Wn(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!Wn(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const Hn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Xn(t){if(null==t)return{filter:()=>!0,needGeometry:!1};Wn(t)||(t=Qn(t));const e=Nn(t,Hn);if("error"===e.result)throw new Error(e.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return{filter:(t,n,r)=>e.value.evaluate(t,n,{},r),needGeometry:Kn(t)}}function Zn(t,e){return t<e?-1:t>e?1:0}function Kn(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(Kn(t[e]))return!0;return!1}function Qn(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?Jn(t[1],t[2],"=="):"!="===e?nr(Jn(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Jn(t[1],t[2],e):"any"===e?(n=t.slice(1),["any"].concat(n.map(Qn))):"all"===e?["all"].concat(t.slice(1).map(Qn)):"none"===e?["all"].concat(t.slice(1).map(Qn).map(nr)):"in"===e?tr(t[1],t.slice(2)):"!in"===e?nr(tr(t[1],t.slice(2))):"has"===e?er(t[1]):"!has"===e?nr(er(t[1])):"within"!==e||t;var n}function Jn(t,e,n){switch(t){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,t,e]}}function tr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(Zn)]]:["filter-in-small",t,["literal",e]]}}function er(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function nr(t){return["!",t]}function rr(t){return Wn(lt(t.value))?Yn(at({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ir(t)}function ir(t){const e=t.value,n=t.key;if("array"!==Sn(e))return[new it(n,e,`array expected, ${Sn(e)} found`)];const r=t.styleSpec;let i,o=[];if(e.length<1)return[new it(n,e,"filter array must have at least 1 element")];switch(o=o.concat($n({key:`${n}[0]`,value:e[0],valueSpec:r.filter_operator,style:t.style,styleSpec:t.styleSpec})),st(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===st(e[1])&&o.push(new it(n,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&o.push(new it(n,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(i=Sn(e[1]),"string"!==i&&o.push(new it(`${n}[1]`,e[1],`string expected, ${i} found`)));for(let a=2;a<e.length;a++)i=Sn(e[a]),"$type"===st(e[1])?o=o.concat($n({key:`${n}[${a}]`,value:e[a],valueSpec:r.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new it(`${n}[${a}]`,e[a],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let r=1;r<e.length;r++)o=o.concat(ir({key:`${n}[${r}]`,value:e[r],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":i=Sn(e[1]),2!==e.length?o.push(new it(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==i&&o.push(new it(`${n}[1]`,e[1],`string expected, ${i} found`));break;case"within":i=Sn(e[1]),2!==e.length?o.push(new it(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==i&&o.push(new it(`${n}[1]`,e[1],`object expected, ${i} found`))}return o}function or(t,e){const n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[`${e}_${t.layerType}`];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return mr({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});const u=t.valueSpec||s[a];if(!u)return[new it(n,o,`unknown property "${a}"`)];let c;if("string"===Sn(o)&&xn(u)&&!u.tokens&&(c=/^{([^}]+)}$/.exec(o)))return[new it(n,o,`"${a}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(c[1])} }\`.`)];const h=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new it(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Cn(lt(o))&&"identity"===st(o.type)&&h.push(new it(n,o,'"text-font" does not support identity functions'))),h.concat(mr({key:t.key,value:o,valueSpec:u,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function ar(t){return or(t,"paint")}function sr(t){return or(t,"layout")}function lr(t){let e=[];const n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new it(r,n,'either "type" or "ref" is required'));let a=st(n.type);const s=st(n.ref);if(n.id){const o=st(n.id);for(let a=0;a<t.arrayIndex;a++){const t=i.layers[a];st(t.id)===o&&e.push(new it(r,n.id,`duplicate layer id "${n.id}", previously used at line ${t.id.__line__}`))}}if("ref"in n){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in n&&e.push(new it(r,n[t],`"${t}" is prohibited for ref layers`))})),i.layers.forEach((e=>{st(e.id)===s&&(t=e)})),t?t.ref?e.push(new it(r,n.ref,"ref cannot reference another ref layer")):a=st(t.type):e.push(new it(r,n.ref,`ref layer "${s}" not found`))}else if("background"!==a)if(n.source){const t=i.sources&&i.sources[n.source],o=t&&st(t.type);t?"vector"===o&&"raster"===a?e.push(new it(r,n.source,`layer "${n.id}" requires a raster source`)):"raster"===o&&"raster"!==a?e.push(new it(r,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==a?e.push(new it(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!n.paint||!n.paint["line-gradient"]||"geojson"===o&&t.lineMetrics||e.push(new it(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new it(r,n,`layer "${n.id}" must specify a "source-layer"`)):e.push(new it(r,n.source,`source "${n.source}" not found`))}else e.push(new it(r,n,'missing required property "source"'));return e=e.concat(Un({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>mr({key:`${r}.type`,value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"}),filter:rr,layout:t=>Un({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>sr(at({layerType:a},t))}}),paint:t=>Un({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>ar(at({layerType:a},t))}})}})),e}function ur(t){const e=t.value,n=t.key,r=Sn(e);return"string"!==r?[new it(n,e,`string expected, ${r} found`)]:[]}const cr={promoteId:function(t){let{key:e,value:n}=t;if("string"===Sn(n))return ur({key:e,value:n});{const t=[];for(const r in n)t.push(...ur({key:`${e}.${r}`,value:n[r]}));return t}}};function hr(t){const e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new it(n,e,'"type" is required')];const o=st(e.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=Un({key:n,value:e,valueSpec:r[`source_${o.replace("-","_")}`],style:t.style,styleSpec:r,objectElementValidators:cr}),a;case"geojson":if(a=Un({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:cr}),e.cluster)for(const t in e.clusterProperties){const[r,i]=e.clusterProperties[t],o="string"==typeof r?[r,["accumulated"],["get",t]]:r;a.push(...Yn({key:`${n}.${t}.map`,value:i,expressionContext:"cluster-map"})),a.push(...Yn({key:`${n}.${t}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return Un({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return Un({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new it(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return $n({key:`${n}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function dr(t){const e=t.value,n=t.styleSpec,r=n.light,i=t.style;let o=[];const a=Sn(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new it("light",e,`object expected, ${a} found`)]),o;for(const s in e){const t=s.match(/^(.*)-transition$/);o=o.concat(t&&r[t[1]]&&r[t[1]].transition?mr({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?mr({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}):[new it(s,e[s],`unknown property "${s}"`)])}return o}function pr(t){const e=t.value,n=t.styleSpec,r=n.terrain,i=t.style;let o=[];const a=Sn(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new it("terrain",e,`object expected, ${a} found`)]),o;for(const s in e)o=o.concat(r[s]?mr({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}):[new it(s,e[s],`unknown property "${s}"`)]);return o}const fr={"*":()=>[],array:Vn,boolean:function(t){const e=t.value,n=t.key,r=Sn(e);return"boolean"!==r?[new it(n,e,`boolean expected, ${r} found`)]:[]},number:qn,color:function(t){const e=t.key,n=t.value,r=Sn(n);return"string"!==r?[new it(e,n,`color expected, ${r} found`)]:null===kt(n)?[new it(e,n,`color expected, "${n}" found`)]:[]},constants:ot,enum:$n,filter:rr,function:Gn,layer:lr,object:Un,source:hr,light:dr,terrain:pr,string:ur,formatted:function(t){return 0===ur(t).length?[]:Yn(t)},resolvedImage:function(t){return 0===ur(t).length?[]:Yn(t)},padding:function(t){const e=t.key,n=t.value;if("array"===Sn(n)){if(n.length<1||n.length>4)return[new it(e,n,`padding requires 1 to 4 values; ${n.length} values found`)];const t={type:"number"};let r=[];for(let i=0;i<n.length;i++)r=r.concat(mr({key:`${e}[${i}]`,value:n[i],valueSpec:t}));return r}return qn({key:e,value:n,valueSpec:{}})}};function mr(t){const e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&Cn(st(e))?Gn(t):n.expression&&Rn(lt(e))?Yn(t):n.type&&fr[n.type]?fr[n.type](t):Un(at({},t,{valueSpec:n.type?r[n.type]:n}))}function gr(t){const e=t.value,n=t.key,r=ur(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new it(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new it(n,e,'"glyphs" url must include a "{range}" token'))),r}function yr(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rt,n=[];return n=n.concat(mr({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:gr,"*":()=>[]}})),t.constants&&(n=n.concat(ot({key:"constants",value:t.constants,style:t,styleSpec:e}))),vr(n)}function vr(t){return[].concat(t).sort(((t,e)=>t.line-e.line))}function _r(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return vr(t.apply(this,n))}}yr.source=_r(hr),yr.light=_r(dr),yr.terrain=_r(pr),yr.layer=_r(lr),yr.filter=_r(rr),yr.paintProperty=_r(ar),yr.layoutProperty=_r(sr);const br=yr,xr=br.light,wr=br.paintProperty,Er=br.layoutProperty;function Sr(t,e){let n=!1;if(e&&e.length)for(const r of e)t.fire(new et(new Error(r.message))),n=!0;return n}class Cr{constructor(t,e,n){const r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(n=i[2]);for(let t=0;t<this.d*this.d;t++){const e=i[3+t],n=i[3+t+1];r.push(e===n?null:i.subarray(e,n))}const o=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],o),this.bboxes=i.subarray(o),this.insert=this._insertReadonly}else{this.d=e+2*n;for(let t=0;t<this.d*this.d;t++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;const i=n/e*t;this.min=-i,this.max=t+i}insert(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,e,n,r,i,o){this.cells[i].push(o)}query(t,e,n,r,i){const o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);{const o=[];return this._forEachCell(t,e,n,r,this._queryCell,o,{},i),o}}_queryCell(t,e,n,r,i,o,a,s){const l=this.cells[i];if(null!==l){const i=this.keys,u=this.bboxes;for(let c=0;c<l.length;c++){const h=l[c];if(void 0===a[h]){const l=4*h;(s?s(u[l+0],u[l+1],u[l+2],u[l+3]):t<=u[l+2]&&e<=u[l+3]&&n>=u[l+0]&&r>=u[l+1])?(a[h]=!0,o.push(i[h])):a[h]=!1}}}}_forEachCell(t,e,n,r,i,o,a,s){const l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(n),h=this._convertToCellCoord(r);for(let d=l;d<=c;d++)for(let l=u;l<=h;l++){const u=this.d*l+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(l),this._convertFromCellCoord(d+1),this._convertFromCellCoord(l+1)))&&i.call(this,t,e,n,r,u,o,a,s))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,e=3+this.cells.length+1+1;let n=0;for(let o=0;o<this.cells.length;o++)n+=this.cells[o].length;const r=new Int32Array(e+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;let i=e;for(let o=0;o<t.length;o++){const e=t[o];r[3+o]=i,r.set(e,i),i+=e.length}return r[3+t.length]=i,r.set(this.keys,i),i+=this.keys.length,r[3+t.length+1]=i,r.set(this.bboxes,i),i+=this.bboxes.length,r.buffer}static serialize(t,e){const n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}}static deserialize(t){return new Cr(t.buffer)}}const Tr={};function Ir(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Tr[t])throw new Error(`${t} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Tr[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}Ir("Object",Object),Ir("TransferableGridIndex",Cr),Ir("Color",Rt),Ir("Error",Error),Ir("AJAXError",V),Ir("ResolvedImage",Bt),Ir("StylePropertyFunction",Bn),Ir("StyleExpression",On,{omit:["_evaluator"]}),Ir("ZoomDependentExpression",Fn),Ir("ZoomConstantExpression",Ln),Ir("CompoundExpression",Qt,{omit:["_evaluate"]});for(const xc in fn)fn[xc]._classRegistryKey||Ir(`Expression_${xc}`,fn[xc]);function kr(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Ar(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob)return t;if(kr(t))return e&&e.push(t),t;if(E(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){const n=t;return e&&e.push(n.buffer),n}if(t instanceof ImageData)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){const n=[];for(const r of t)n.push(Ar(r,e));return n}if("object"==typeof t){const n=t.constructor,r=n._classRegistryKey;if(!r)throw new Error("can't serialize object of unregistered class");if(!Tr[r])throw new Error(`${r} is not registered.`);const i=n.serialize?n.serialize(t,e):{};if(n.serialize){if(e&&i===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const n in t){if(!t.hasOwnProperty(n))continue;if(Tr[r].omit.indexOf(n)>=0)continue;const o=t[n];i[n]=Tr[r].shallow.indexOf(n)>=0?o:Ar(o,e)}t instanceof Error&&(i.message=t.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(i.$name=r),i}throw new Error("can't serialize object of type "+typeof t)}function Pr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob||kr(t)||E(t)||ArrayBuffer.isView(t)||t instanceof ImageData)return t;if(Array.isArray(t))return t.map(Pr);if("object"==typeof t){const e=t.$name||"Object";if(!Tr[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:n}=Tr[e];if(!n)throw new Error(`can't deserialize unregistered class ${e}`);if(n.deserialize)return n.deserialize(t);const r=Object.create(n.prototype);for(const i of Object.keys(t)){if("$name"===i)continue;const n=t[i];r[i]=Tr[e].shallow.indexOf(i)>=0?n:Pr(n)}return r}throw new Error("can't deserialize object of type "+typeof t)}class Dr{constructor(){this.first=!0}update(t,e){const n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))}}const Mr={"Latin-1 Supplement":t=>t>=128&&t<=255,Arabic:t=>t>=1536&&t<=1791,"Arabic Supplement":t=>t>=1872&&t<=1919,"Arabic Extended-A":t=>t>=2208&&t<=2303,"Hangul Jamo":t=>t>=4352&&t<=4607,"Unified Canadian Aboriginal Syllabics":t=>t>=5120&&t<=5759,Khmer:t=>t>=6016&&t<=6143,"Unified Canadian Aboriginal Syllabics Extended":t=>t>=6320&&t<=6399,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"CJK Radicals Supplement":t=>t>=11904&&t<=12031,"Kangxi Radicals":t=>t>=12032&&t<=12255,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Hiragana:t=>t>=12352&&t<=12447,Katakana:t=>t>=12448&&t<=12543,Bopomofo:t=>t>=12544&&t<=12591,"Hangul Compatibility Jamo":t=>t>=12592&&t<=12687,Kanbun:t=>t>=12688&&t<=12703,"Bopomofo Extended":t=>t>=12704&&t<=12735,"CJK Strokes":t=>t>=12736&&t<=12783,"Katakana Phonetic Extensions":t=>t>=12784&&t<=12799,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"CJK Unified Ideographs Extension A":t=>t>=13312&&t<=19903,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"CJK Unified Ideographs":t=>t>=19968&&t<=40959,"Yi Syllables":t=>t>=40960&&t<=42127,"Yi Radicals":t=>t>=42128&&t<=42191,"Hangul Jamo Extended-A":t=>t>=43360&&t<=43391,"Hangul Syllables":t=>t>=44032&&t<=55215,"Hangul Jamo Extended-B":t=>t>=55216&&t<=55295,"Private Use Area":t=>t>=57344&&t<=63743,"CJK Compatibility Ideographs":t=>t>=63744&&t<=64255,"Arabic Presentation Forms-A":t=>t>=64336&&t<=65023,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Arabic Presentation Forms-B":t=>t>=65136&&t<=65279,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519};function Or(t){for(const e of t)if(Lr(e.charCodeAt(0)))return!0;return!1}function Rr(t){for(const e of t)if(!Nr(e.charCodeAt(0)))return!1;return!0}function Nr(t){return!(Mr.Arabic(t)||Mr["Arabic Supplement"](t)||Mr["Arabic Extended-A"](t)||Mr["Arabic Presentation Forms-A"](t)||Mr["Arabic Presentation Forms-B"](t))}function Lr(t){return!(746!==t&&747!==t&&(t<4352||!(Mr["Bopomofo Extended"](t)||Mr.Bopomofo(t)||Mr["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Mr["CJK Compatibility Ideographs"](t)||Mr["CJK Compatibility"](t)||Mr["CJK Radicals Supplement"](t)||Mr["CJK Strokes"](t)||!(!Mr["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Mr["CJK Unified Ideographs Extension A"](t)||Mr["CJK Unified Ideographs"](t)||Mr["Enclosed CJK Letters and Months"](t)||Mr["Hangul Compatibility Jamo"](t)||Mr["Hangul Jamo Extended-A"](t)||Mr["Hangul Jamo Extended-B"](t)||Mr["Hangul Jamo"](t)||Mr["Hangul Syllables"](t)||Mr.Hiragana(t)||Mr["Ideographic Description Characters"](t)||Mr.Kanbun(t)||Mr["Kangxi Radicals"](t)||Mr["Katakana Phonetic Extensions"](t)||Mr.Katakana(t)&&12540!==t||!(!Mr["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Mr["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Mr["Unified Canadian Aboriginal Syllabics"](t)||Mr["Unified Canadian Aboriginal Syllabics Extended"](t)||Mr["Vertical Forms"](t)||Mr["Yijing Hexagram Symbols"](t)||Mr["Yi Syllables"](t)||Mr["Yi Radicals"](t))))}function Fr(t){return!(Lr(t)||function(t){return!!(Mr["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Mr["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Mr["Letterlike Symbols"](t)||Mr["Number Forms"](t)||Mr["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Mr["Control Pictures"](t)&&9251!==t||Mr["Optical Character Recognition"](t)||Mr["Enclosed Alphanumerics"](t)||Mr["Geometric Shapes"](t)||Mr["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Mr["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Mr["CJK Symbols and Punctuation"](t)||Mr.Katakana(t)||Mr["Private Use Area"](t)||Mr["CJK Compatibility Forms"](t)||Mr["Small Form Variants"](t)||Mr["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function zr(t){return t>=1424&&t<=2303||Mr["Arabic Presentation Forms-A"](t)||Mr["Arabic Presentation Forms-B"](t)}function Br(t,e){return!(!e&&zr(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Mr.Khmer(t))}function jr(t){for(const e of t)if(zr(e.charCodeAt(0)))return!0;return!1}const Ur="deferred",Vr="loading",qr="loaded";let Gr=null,Yr="unavailable",$r=null;const Wr=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Yr="error"),Gr&&Gr(t)};function Hr(){Xr.fire(new tt("pluginStateChange",{pluginStatus:Yr,pluginURL:$r}))}const Xr=new nt,Zr=function(){return Yr},Kr=function(){if(Yr!==Ur||!$r)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Yr=Vr,Hr(),$r&&$({url:$r},(t=>{t?Wr(t):(Yr=qr,Hr())}))},Qr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Yr===qr||null!=Qr.applyArabicShaping,isLoading:()=>Yr===Vr,setState(t){if(!y())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Yr=t.pluginStatus,$r=t.pluginURL},isParsed(){if(!y())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=Qr.applyArabicShaping&&null!=Qr.processBidirectionalText&&null!=Qr.processStyledBidirectionalText},getPluginURL(){if(!y())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return $r}};class Jr{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Dr,this.transition={})}isSupportedScript(t){return function(t,e){for(const n of t)if(!Br(n.charCodeAt(0),e))return!1;return!0}(t,Qr.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}}}class ti{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Cn(t))return new Bn(t,e);if(Rn(t)){const n=zn(t,e);if("error"===n.result)throw new Error(n.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return n.value}{let n=t;return"color"===e.type&&"string"==typeof t?n=Rt.parse(t):"padding"!==e.type||"number"!=typeof t&&!Array.isArray(t)||(n=zt.parse(t)),{kind:"constant",evaluate:()=>n}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)}}class ei{constructor(t){this.property=t,this.value=new ti(t,void 0)}transitioned(t,e){return new ri(this.property,this.value,e,s({},t.transition,this.transition),t.now)}untransitioned(){return new ri(this.property,this.value,null,{},0)}}class ni{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return d(this._values[t].value.value)}setValue(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new ei(this._values[t].property)),this._values[t].value=new ti(this._values[t].property,null===e?void 0:d(e))}getTransition(t){return d(this._values[t].transition)}setTransition(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new ei(this._values[t].property)),this._values[t].transition=d(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n);const r=this.getTransition(e);void 0!==r&&(t[`${e}-transition`]=r)}return t}transitioned(t,e){const n=new ii(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].transitioned(t,e._values[r]);return n}untransitioned(){const t=new ii(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class ri{constructor(t,e,n,r,i){this.property=t,this.value=e,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}possiblyEvaluate(t,e,n){const r=t.now||0,i=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(t,e,n);{const a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),i,function(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(a))}}return i}}class ii{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,n){const r=new si(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(t,e,n);return r}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class oi{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return d(this._values[t].value)}setValue(t,e){this._values[t]=new ti(this._values[t].property,null===e?void 0:d(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n)}return t}possiblyEvaluate(t,e,n){const r=new si(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(t,e,n);return r}}class ai{constructor(t,e,n){this.property=t,this.value=e,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,n,r){return this.property.evaluate(this.value,this.parameters,t,e,n,r)}}class si{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class li{constructor(t){this.specification=t}possiblyEvaluate(t,e){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(e)}interpolate(t,e,n){const r=Te[this.specification.type];return r?r(t,e,n):t}}class ui{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,n,r){return new ai(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,r)}:t.expression,e)}interpolate(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new ai(this,{kind:"constant",value:void 0},t.parameters);const r=Te[this.specification.type];return r?new ai(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t}evaluate(t,e,n,r,i,o){return"constant"===t.kind?t.value:t.evaluate(e,n,r,i,o)}}class ci extends ui{possiblyEvaluate(t,e,n,r){if(void 0===t.value)return new ai(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){const i=t.expression.evaluate(e,null,{},n,r),o="resolvedImage"===t.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(o,o,o,e);return new ai(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){const n=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new ai(this,{kind:"constant",value:n},e)}return new ai(this,t.expression,e)}evaluate(t,e,n,r,i,o){if("source"===t.kind){const a=t.evaluate(e,n,r,i,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,r),t.evaluate({zoom:Math.floor(e.zoom)},n,r),t.evaluate({zoom:Math.floor(e.zoom)+1},n,r),e):t.value}_calculate(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}}interpolate(t){return t}}class hi{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,r){if(void 0!==t.value){if("constant"===t.expression.kind){const i=t.expression.evaluate(e,null,{},n,r);return this._calculate(i,i,i,e)}return this._calculate(t.expression.evaluate(new Jr(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Jr(Math.floor(e.zoom),e)),t.expression.evaluate(new Jr(Math.floor(e.zoom+1),e)),e)}}_calculate(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}}interpolate(t){return t}}class di{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,r){return!!t.expression.evaluate(e,null,{},n,r)}interpolate(){return!1}}class pi{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const e in t){const n=t[e];n.specification.overridable&&this.overridableProperties.push(e);const r=this.defaultPropertyValues[e]=new ti(n,void 0),i=this.defaultTransitionablePropertyValues[e]=new ei(n);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}}}Ir("DataDrivenProperty",ui),Ir("DataConstantProperty",li),Ir("CrossFadedDataDrivenProperty",ci),Ir("CrossFadedProperty",hi),Ir("ColorRampProperty",di);const fi="-transition";class mi extends nt{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new oi(e.layout)),e.paint)){this._transitionablePaint=new ni(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new si(e.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=e&&this._validate(Er,`layers.${this.id}.layout.${t}`,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return t.endsWith(fi)?this._transitionablePaint.getTransition(t.slice(0,-fi.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e&&this._validate(wr,`layers.${this.id}.paint.${t}`,t,e,n))return!1;if(t.endsWith(fi))return this._transitionablePaint.setTransition(t.slice(0,-fi.length),e||void 0),!1;{const n=this._transitionablePaint._values[t],r="cross-faded-data-driven"===n.property.specification["property-type"],i=n.value.isDataDriven(),o=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const a=this._transitionablePaint._values[t].value;return a.isDataDriven()||i||r||this._handleOverridablePaintPropertyUpdate(t,o,a)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,e,n){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),h(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!i||!1!==i.validate)&&Sr(this,t.call(br,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:rt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof ai&&xn(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}}const gi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class yi{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class vi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function _i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,r=0;return{members:t.map((t=>{const i=gi[t.type].BYTES_PER_ELEMENT,o=n=bi(n,Math.max(e,i)),a=t.components||1;return r=Math.max(r,i),n+=i*a,{name:t.name,type:t.type,components:a,offset:o}})),size:bi(n,Math.max(r,e)),alignment:e}}function bi(t,e){return Math.ceil(t/e)*e}class xi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t}}xi.prototype.bytesPerElement=4,Ir("StructArrayLayout2i4",xi);class wi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t}}wi.prototype.bytesPerElement=8,Ir("StructArrayLayout4i8",wi);class Ei extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)}emplace(t,e,n,r,i,o,a){const s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t}}Ei.prototype.bytesPerElement=12,Ir("StructArrayLayout2i4i12",Ei);class Si extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)}emplace(t,e,n,r,i,o,a){const s=4*t,l=8*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.uint8[l+4]=r,this.uint8[l+5]=i,this.uint8[l+6]=o,this.uint8[l+7]=a,t}}Si.prototype.bytesPerElement=8,Ir("StructArrayLayout2i4ub8",Si);class Ci extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t}}Ci.prototype.bytesPerElement=8,Ir("StructArrayLayout2f8",Ci);class Ti extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,u){const c=this.length;return this.resize(c+1),this.emplace(c,t,e,n,r,i,o,a,s,l,u)}emplace(t,e,n,r,i,o,a,s,l,u,c){const h=10*t;return this.uint16[h+0]=e,this.uint16[h+1]=n,this.uint16[h+2]=r,this.uint16[h+3]=i,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=u,this.uint16[h+9]=c,t}}Ti.prototype.bytesPerElement=20,Ir("StructArrayLayout10ui20",Ti);class Ii extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,u,c,h){const d=this.length;return this.resize(d+1),this.emplace(d,t,e,n,r,i,o,a,s,l,u,c,h)}emplace(t,e,n,r,i,o,a,s,l,u,c,h,d){const p=12*t;return this.int16[p+0]=e,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=u,this.int16[p+9]=c,this.int16[p+10]=h,this.int16[p+11]=d,t}}Ii.prototype.bytesPerElement=24,Ir("StructArrayLayout4i4ui4i24",Ii);class ki extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t}}ki.prototype.bytesPerElement=12,Ir("StructArrayLayout3f12",ki);class Ai extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}Ai.prototype.bytesPerElement=4,Ir("StructArrayLayout1ul4",Ai);class Pi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l){const u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,r,i,o,a,s,l)}emplace(t,e,n,r,i,o,a,s,l,u){const c=10*t,h=5*t;return this.int16[c+0]=e,this.int16[c+1]=n,this.int16[c+2]=r,this.int16[c+3]=i,this.int16[c+4]=o,this.int16[c+5]=a,this.uint32[h+3]=s,this.uint16[c+8]=l,this.uint16[c+9]=u,t}}Pi.prototype.bytesPerElement=20,Ir("StructArrayLayout6i1ul2ui20",Pi);class Di extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)}emplace(t,e,n,r,i,o,a){const s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t}}Di.prototype.bytesPerElement=12,Ir("StructArrayLayout2i2i2i12",Di);class Mi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)}emplace(t,e,n,r,i,o){const a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,t}}Mi.prototype.bytesPerElement=16,Ir("StructArrayLayout2f1f2i16",Mi);class Oi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,t}}Oi.prototype.bytesPerElement=12,Ir("StructArrayLayout2ub2f12",Oi);class Ri extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t}}Ri.prototype.bytesPerElement=6,Ir("StructArrayLayout3ui6",Ri);class Ni extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,u,c,h,d,p,f,m,g){const y=this.length;return this.resize(y+1),this.emplace(y,t,e,n,r,i,o,a,s,l,u,c,h,d,p,f,m,g)}emplace(t,e,n,r,i,o,a,s,l,u,c,h,d,p,f,m,g,y){const v=24*t,_=12*t,b=48*t;return this.int16[v+0]=e,this.int16[v+1]=n,this.uint16[v+2]=r,this.uint16[v+3]=i,this.uint32[_+2]=o,this.uint32[_+3]=a,this.uint32[_+4]=s,this.uint16[v+10]=l,this.uint16[v+11]=u,this.uint16[v+12]=c,this.float32[_+7]=h,this.float32[_+8]=d,this.uint8[b+36]=p,this.uint8[b+37]=f,this.uint8[b+38]=m,this.uint32[_+10]=g,this.int16[v+22]=y,t}}Ni.prototype.bytesPerElement=48,Ir("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ni);class Li extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,u,c,h,d,p,f,m,g,y,v,_,b,x,w,E,S,C,T,I){const k=this.length;return this.resize(k+1),this.emplace(k,t,e,n,r,i,o,a,s,l,u,c,h,d,p,f,m,g,y,v,_,b,x,w,E,S,C,T,I)}emplace(t,e,n,r,i,o,a,s,l,u,c,h,d,p,f,m,g,y,v,_,b,x,w,E,S,C,T,I,k){const A=34*t,P=17*t;return this.int16[A+0]=e,this.int16[A+1]=n,this.int16[A+2]=r,this.int16[A+3]=i,this.int16[A+4]=o,this.int16[A+5]=a,this.int16[A+6]=s,this.int16[A+7]=l,this.uint16[A+8]=u,this.uint16[A+9]=c,this.uint16[A+10]=h,this.uint16[A+11]=d,this.uint16[A+12]=p,this.uint16[A+13]=f,this.uint16[A+14]=m,this.uint16[A+15]=g,this.uint16[A+16]=y,this.uint16[A+17]=v,this.uint16[A+18]=_,this.uint16[A+19]=b,this.uint16[A+20]=x,this.uint16[A+21]=w,this.uint16[A+22]=E,this.uint32[P+12]=S,this.float32[P+13]=C,this.float32[P+14]=T,this.float32[P+15]=I,this.float32[P+16]=k,t}}Li.prototype.bytesPerElement=68,Ir("StructArrayLayout8i15ui1ul4f68",Li);class Fi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}Fi.prototype.bytesPerElement=4,Ir("StructArrayLayout1f4",Fi);class zi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t}}zi.prototype.bytesPerElement=6,Ir("StructArrayLayout3i6",zi);class Bi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=4*t;return this.uint32[2*t+0]=e,this.uint16[i+2]=n,this.uint16[i+3]=r,t}}Bi.prototype.bytesPerElement=8,Ir("StructArrayLayout1ul2ui8",Bi);class ji extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t}}ji.prototype.bytesPerElement=4,Ir("StructArrayLayout2ui4",ji);class Ui extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}Ui.prototype.bytesPerElement=2,Ir("StructArrayLayout1ui2",Ui);class Vi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t}}Vi.prototype.bytesPerElement=16,Ir("StructArrayLayout4f16",Vi);class qi extends yi{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new C(this.anchorPointX,this.anchorPointY)}}qi.prototype.size=20;class Gi extends Pi{get(t){return new qi(this,t)}}Ir("CollisionBoxArray",Gi);class Yi extends yi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Yi.prototype.size=48;class $i extends Ni{get(t){return new Yi(this,t)}}Ir("PlacedSymbolArray",$i);class Wi extends yi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Wi.prototype.size=68;class Hi extends Li{get(t){return new Wi(this,t)}}Ir("SymbolInstanceArray",Hi);class Xi extends Fi{getoffsetX(t){return this.float32[1*t+0]}}Ir("GlyphOffsetArray",Xi);class Zi extends zi{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}Ir("SymbolLineVertexArray",Zi);class Ki extends yi{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ki.prototype.size=8;class Qi extends Bi{get(t){return new Ki(this,t)}}Ir("FeatureIndexArray",Qi);class Ji extends xi{}class to extends xi{}class eo extends xi{}class no extends Ei{}class ro extends Si{}class io extends Ci{}class oo extends Ti{}class ao extends Ii{}class so extends ki{}class lo extends Ai{}class uo extends Di{}class co extends Oi{}class ho extends Ri{}class po extends ji{}const fo=_i([{name:"a_pos",components:2,type:"Int16"}],4),{members:mo}=fo;class go{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.segments=t}prepareSegment(t,e,n,r){let i=this.segments[this.segments.length-1];return t>go.MAX_VERTEX_ARRAY_LENGTH&&f(`Max vertices per segment is ${go.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!i||i.vertexLength+t>go.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,n,r){return new go([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])}}function yo(t,e){return 256*(t=o(Math.floor(t),0,255))+o(Math.floor(e),0,255)}go.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ir("SegmentVector",go);const vo=_i([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var _o={exports:{}},bo={exports:{}};bo.exports=function(t,e){var n,r,i,o,a,s,l,u;for(r=t.length-(n=3&t.length),i=e,a=3432918353,s=461845907,u=0;u<r;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var xo={exports:{}};xo.exports=function(t,e){for(var n,r=t.length,i=e^r,o=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var wo=bo.exports,Eo=xo.exports;_o.exports=wo,_o.exports.murmur3=wo,_o.exports.murmur2=Eo;class So{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,n,r){this.ids.push(Co(t)),this.positions.push(e,n,r)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const e=Co(t);let n=0,r=this.ids.length-1;for(;n<r;){const t=n+r>>1;this.ids[t]>=e?r=t:n=t+1}const i=[];for(;this.ids[n]===e;)i.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return i}static serialize(t,e){const n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return To(n,r,0,n.length-1),e&&e.push(n.buffer,r.buffer),{ids:n,positions:r}}static deserialize(t){const e=new So;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function Co(t){const e=+t;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:_o.exports(String(t))}function To(t,e,n,r){for(;n<r;){const i=t[n+r>>1];let o=n-1,a=r+1;for(;;){do{o++}while(t[o]<i);do{a--}while(t[a]>i);if(o>=a)break;Io(t,o,a),Io(e,3*o,3*a),Io(e,3*o+1,3*a+1),Io(e,3*o+2,3*a+2)}a-n<r-a?(To(t,e,n,a),n=a+1):(To(t,e,a+1,r),r=a)}}function Io(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}Ir("FeaturePositionMap",So);class ko{constructor(t,e){this.gl=t.gl,this.location=e}}class Ao extends ko{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Po extends ko{constructor(t,e){super(t,e),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Do extends ko{constructor(t,e){super(t,e),this.current=Rt.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Mo=new Float32Array(16);function Oo(t){return[yo(255*t.r,255*t.g),yo(255*t.b,255*t.a)]}class Ro{constructor(t,e,n){this.value=t,this.uniformNames=e.map((t=>`u_${t}`)),this.type=n}setUniform(t,e,n){t.set(n.constantOr(this.value))}getBinding(t,e,n){return"color"===this.type?new Do(t,e):new Ao(t,e)}}class No{constructor(t,e){this.uniformNames=e.map((t=>`u_${t}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr}setUniform(t,e,n,r){const i="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&t.set(i)}getBinding(t,e,n){return"u_pattern"===n.substr(0,9)?new Po(t,e):new Ao(t,e)}}class Lo{constructor(t,e,n,r){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new r}populatePaintArray(t,e,n,r,i){const o=this.paintVertexArray.length,a=this.expression.evaluate(new Jr(0),e,{},r,[],i);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)}updatePaintArray(t,e,n,r){const i=this.expression.evaluate({zoom:0},n,r);this._setPaintValue(t,e,i)}_setPaintValue(t,e,n){if("color"===this.type){const r=Oo(n);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,r[0],r[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Fo{constructor(t,e,n,r,i,o){this.expression=t,this.uniformNames=e.map((t=>`u_${t}_t`)),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(t,e,n,r,i){const o=this.expression.evaluate(new Jr(this.zoom),e,{},r,[],i),a=this.expression.evaluate(new Jr(this.zoom+1),e,{},r,[],i),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)}updatePaintArray(t,e,n,r){const i=this.expression.evaluate({zoom:this.zoom},n,r),o=this.expression.evaluate({zoom:this.zoom+1},n,r);this._setPaintValue(t,e,i,o)}_setPaintValue(t,e,n,r){if("color"===this.type){const i=Oo(n),o=Oo(r);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i[0],i[1],o[0],o[1])}else{for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e){const n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=o(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(r)}getBinding(t,e,n){return new Ao(t,e)}}class zo{constructor(t,e,n,r,i,o){this.expression=t,this.type=e,this.useIntegerZoom=n,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i}populatePaintArray(t,e,n){const r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],n)}updatePaintArray(t,e,n,r,i){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],i)}_setPaintValues(t,e,n,r){if(!r||!n)return;const{min:i,mid:o,max:a}=n,s=r[i],l=r[o],u=r[a];if(s&&l&&u)for(let c=t;c<e;c++)this.zoomInPaintVertexArray.emplace(c,l.tl[0],l.tl[1],l.br[0],l.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],l.pixelRatio,s.pixelRatio),this.zoomOutPaintVertexArray.emplace(c,l.tl[0],l.tl[1],l.br[0],l.br[1],u.tl[0],u.tl[1],u.br[0],u.br[1],l.pixelRatio,u.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,vo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,vo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Bo{constructor(t,e,n){this.binders={},this._buffers=[];const r=[];for(const i in t.paint._values){if(!n(i))continue;const o=t.paint.get(i);if(!(o instanceof ai&&xn(o.property.specification)))continue;const a=Uo(i,t.type),s=o.value,l=o.property.specification.type,u=o.property.useIntegerZoom,c=o.property.specification["property-type"],h="cross-faded"===c||"cross-faded-data-driven"===c;if("constant"===s.kind)this.binders[i]=h?new No(s.value,a):new Ro(s.value,a,l),r.push(`/u_${i}`);else if("source"===s.kind||h){const n=Vo(i,l,"source");this.binders[i]=h?new zo(s,l,u,e,n,t.id):new Lo(s,a,l,n),r.push(`/a_${i}`)}else{const t=Vo(i,l,"composite");this.binders[i]=new Fo(s,a,l,u,e,t),r.push(`/z_${i}`)}}this.cacheKey=r.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof Lo||e instanceof Fo?e.maxValue:0}populatePaintArrays(t,e,n,r,i){for(const o in this.binders){const a=this.binders[o];(a instanceof Lo||a instanceof Fo||a instanceof zo)&&a.populatePaintArray(t,e,n,r,i)}}setConstantPatternPositions(t,e){for(const n in this.binders){const r=this.binders[n];r instanceof No&&r.setConstantPatternPositions(t,e)}}updatePaintArrays(t,e,n,r,i){let o=!1;for(const a in t){const s=e.getPositions(a);for(const e of s){const s=n.feature(e.index);for(const n in this.binders){const l=this.binders[n];if((l instanceof Lo||l instanceof Fo||l instanceof zo)&&!0===l.expression.isStateDependent){const u=r.paint.get(n);l.expression=u.value,l.updatePaintArray(e.start,e.end,s,t[a],i),o=!0}}}}return o}defines(){const t=[];for(const e in this.binders){const n=this.binders[e];(n instanceof Ro||n instanceof No)&&t.push(...n.uniformNames.map((t=>`#define HAS_UNIFORM_${t}`)))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof Lo||n instanceof Fo)for(let e=0;e<n.paintVertexAttributes.length;e++)t.push(n.paintVertexAttributes[e].name);else if(n instanceof zo)for(let e=0;e<vo.members.length;e++)t.push(vo.members[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof Ro||n instanceof No||n instanceof Fo)for(const e of n.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,e){const n=[];for(const r in this.binders){const i=this.binders[r];if(i instanceof Ro||i instanceof No||i instanceof Fo)for(const o of i.uniformNames)if(e[o]){const a=i.getBinding(t,e[o],o);n.push({name:o,property:r,binding:a})}}return n}setUniforms(t,e,n,r){for(const{name:i,property:o,binding:a}of e)this.binders[o].setUniform(a,r,n.get(o),i)}updatePaintBuffers(t){this._buffers=[];for(const e in this.binders){const n=this.binders[e];if(t&&n instanceof zo){const e=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;e&&this._buffers.push(e)}else(n instanceof Lo||n instanceof Fo)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(t){for(const e in this.binders){const n=this.binders[e];(n instanceof Lo||n instanceof Fo||n instanceof zo)&&n.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof Lo||e instanceof Fo||e instanceof zo)&&e.destroy()}}}class jo{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.programConfigurations={};for(const r of t)this.programConfigurations[r.id]=new Bo(r,e,n);this.needsUpload=!1,this._featureMap=new So,this._bufferOffset=0}populatePaintArrays(t,e,n,r,i,o){for(const a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,r,i,o);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,n,r){for(const i of n)this.needsUpload=this.programConfigurations[i.id].updatePaintArrays(t,this._featureMap,e,i,r)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function Uo(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}function Vo(t,e,n){const r={color:{source:Ci,composite:Vi},number:{source:Fi,composite:Ci}},i=function(t){return{"line-pattern":{source:oo,composite:oo},"fill-pattern":{source:oo,composite:oo},"fill-extrusion-pattern":{source:oo,composite:oo}}[t]}(t);return i&&i[n]||r[e][n]}Ir("ConstantBinder",Ro),Ir("CrossFadedConstantBinder",No),Ir("SourceExpressionBinder",Lo),Ir("CrossFadedCompositeBinder",zo),Ir("CompositeExpressionBinder",Fo),Ir("ProgramConfiguration",Bo,{omit:["_buffers"]}),Ir("ProgramConfigurationSet",jo);var qo=8192;const Go=Math.pow(2,14)-1,Yo=-Go-1;function $o(t){const e=qo/t.extent,n=t.loadGeometry();for(let r=0;r<n.length;r++){const t=n[r];for(let n=0;n<t.length;n++){const r=t[n],i=Math.round(r.x*e),a=Math.round(r.y*e);r.x=o(i,Yo,Go),r.y=o(a,Yo,Go),(i<r.x||i>r.x+1||a<r.y||a>r.y+1)&&f("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function Wo(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?$o(t):[]}}function Ho(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}class Xo{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new to,this.indexArray=new ho,this.segments=new go,this.programConfigurations=new jo(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){const r=this.layers[0],i=[];let o=null,a=!1;"circle"===r.type&&(o=r.layout.get("circle-sort-key"),a=!o.isConstant());for(const{feature:s,id:l,index:u,sourceLayerIndex:c}of t){const t=this.layers[0]._featureFilter.needGeometry,e=Wo(s,t);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),e,n))continue;const r=a?o.evaluate(e,{},n):void 0,h={id:l,properties:s.properties,type:s.type,sourceLayerIndex:c,index:u,geometry:t?e.geometry:$o(s),patterns:{},sortKey:r};i.push(h)}a&&i.sort(((t,e)=>t.sortKey-e.sortKey));for(const s of i){const{geometry:r,index:i,sourceLayerIndex:o}=s,a=t[i].feature;this.addFeature(s,r,i,n),e.featureIndex.insert(a,r,i,o,this.index)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,mo),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,n,r){for(const i of e)for(const e of i){const n=e.x,r=e.y;if(n<0||n>=qo||r<0||r>=qo)continue;const i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),o=i.vertexLength;Ho(this.layoutVertexArray,n,r,-1,-1),Ho(this.layoutVertexArray,n,r,1,-1),Ho(this.layoutVertexArray,n,r,1,1),Ho(this.layoutVertexArray,n,r,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),i.vertexLength+=4,i.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},r)}}function Zo(t,e){for(let n=0;n<t.length;n++)if(oa(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(oa(t,e[n]))return!0;return!!ta(t,e)}function Ko(t,e,n){return!!oa(t,e)||!!na(e,t,n)}function Qo(t,e){if(1===t.length)return ia(e,t[0]);for(let n=0;n<e.length;n++){const r=e[n];for(let e=0;e<r.length;e++)if(oa(t,r[e]))return!0}for(let n=0;n<t.length;n++)if(ia(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(ta(t,e[n]))return!0;return!1}function Jo(t,e,n){if(t.length>1){if(ta(t,e))return!0;for(let r=0;r<e.length;r++)if(na(e[r],t,n))return!0}for(let r=0;r<t.length;r++)if(na(t[r],e,n))return!0;return!1}function ta(t,e){if(0===t.length||0===e.length)return!1;for(let n=0;n<t.length-1;n++){const r=t[n],i=t[n+1];for(let t=0;t<e.length-1;t++)if(ea(r,i,e[t],e[t+1]))return!0}return!1}function ea(t,e,n,r){return m(t,n,r)!==m(e,n,r)&&m(t,e,n)!==m(t,e,r)}function na(t,e,n){const r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(let i=1;i<e.length;i++)if(ra(t,e[i-1],e[i])<r)return!0;return!1}function ra(t,e,n){const r=e.distSqr(n);if(0===r)return t.distSqr(e);const i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))}function ia(t,e){let n,r,i,o=!1;for(let a=0;a<t.length;a++){n=t[a];for(let t=0,a=n.length-1;t<n.length;a=t++)r=n[t],i=n[a],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function oa(t,e){let n=!1;for(let r=0,i=t.length-1;r<t.length;i=r++){const o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function aa(t,e,n){const r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;const o=m(t,e,n[0]);return o!==m(t,e,n[1])||o!==m(t,e,n[2])||o!==m(t,e,n[3])}function sa(t,e,n){const r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).getMaxValue(t)}function la(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ua(t,e,n,r,i){if(!e[0]&&!e[1])return t;const o=C.convert(e)._mult(i);"viewport"===n&&o._rotate(-r);const a=[];for(let s=0;s<t.length;s++)a.push(t[s].sub(o));return a}Ir("CircleBucket",Xo,{omit:["layers"]});const ca=new pi({"circle-sort-key":new ui(rt.layout_circle["circle-sort-key"])});var ha={paint:new pi({"circle-radius":new ui(rt.paint_circle["circle-radius"]),"circle-color":new ui(rt.paint_circle["circle-color"]),"circle-blur":new ui(rt.paint_circle["circle-blur"]),"circle-opacity":new ui(rt.paint_circle["circle-opacity"]),"circle-translate":new li(rt.paint_circle["circle-translate"]),"circle-translate-anchor":new li(rt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new li(rt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new li(rt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ui(rt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ui(rt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ui(rt.paint_circle["circle-stroke-opacity"])}),layout:ca},da=1e-6,pa="undefined"!=typeof Float32Array?Float32Array:Array;function fa(){var t=new pa(9);return pa!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function ma(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ga(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],p=e[10],f=e[11],m=e[12],g=e[13],y=e[14],v=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*r+b*s+x*h+w*m,t[1]=_*i+b*l+x*d+w*g,t[2]=_*o+b*u+x*p+w*y,t[3]=_*a+b*c+x*f+w*v,t[4]=(_=n[4])*r+(b=n[5])*s+(x=n[6])*h+(w=n[7])*m,t[5]=_*i+b*l+x*d+w*g,t[6]=_*o+b*u+x*p+w*y,t[7]=_*a+b*c+x*f+w*v,t[8]=(_=n[8])*r+(b=n[9])*s+(x=n[10])*h+(w=n[11])*m,t[9]=_*i+b*l+x*d+w*g,t[10]=_*o+b*u+x*p+w*y,t[11]=_*a+b*c+x*f+w*v,t[12]=(_=n[12])*r+(b=n[13])*s+(x=n[14])*h+(w=n[15])*m,t[13]=_*i+b*l+x*d+w*g,t[14]=_*o+b*u+x*p+w*y,t[15]=_*a+b*c+x*f+w*v,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var ya,va=ga;function _a(){var t=new pa(3);return pa!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function ba(t,e,n){var r=new pa(3);return r[0]=t,r[1]=e,r[2]=n,r}function xa(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function wa(){var t=new pa(4);return pa!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Ea(t,e){const n=xa([],[t.x,t.y,0,1],e);return new C(n[0]/n[3],n[1]/n[3])}_a(),ya=new pa(4),pa!=Float32Array&&(ya[0]=0,ya[1]=0,ya[2]=0,ya[3]=0),_a(),ba(1,0,0),ba(0,1,0),wa(),wa(),fa(),function(){var t;t=new pa(2),pa!=Float32Array&&(t[0]=0,t[1]=0)}();class Sa extends Xo{}Ir("HeatmapBucket",Sa,{omit:["layers"]});var Ca={paint:new pi({"heatmap-radius":new ui(rt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ui(rt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new li(rt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new di(rt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new li(rt.paint_heatmap["heatmap-opacity"])})};function Ta(t,e,n,r){let{width:i,height:o}=e;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*o*n)throw new RangeError(`mismatched image size. expected: ${r.length} but got: ${i*o*n}`)}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t}function Ia(t,e,n){let{width:r,height:i}=e;if(r===t.width&&i===t.height)return;const o=Ta({},{width:r,height:i},n);ka(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=o.data}function ka(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const a=t.data,s=e.data;if(a===s)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<i.height;l++){const u=((n.y+l)*t.width+n.x)*o,c=((r.y+l)*e.width+r.x)*o;for(let t=0;t<i.width*o;t++)s[c+t]=a[u+t]}return e}class Aa{constructor(t,e){Ta(this,t,1,e)}resize(t){Ia(this,t,1)}clone(){return new Aa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,r,i){ka(t,e,n,r,i,1)}}class Pa{constructor(t,e){Ta(this,t,4,e)}resize(t){Ia(this,t,4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Pa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,r,i){ka(t,e,n,r,i,4)}}function Da(t){const e={},n=t.resolution||256,r=t.clips?t.clips.length:1,i=t.image||new Pa({width:n,height:r});if(Math.log(n)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${n}`);const o=(n,r,o)=>{e[t.evaluationKey]=o;const a=t.expression.evaluate(e);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(t.clips)for(let a=0,s=0;a<r;++a,s+=4*n)for(let e=0,r=0;e<n;e++,r+=4){const i=e/(n-1),{start:l,end:u}=t.clips[a];o(s,r,l*(1-i)+u*i)}else for(let a=0,s=0;a<n;a++,s+=4)o(0,s,a/(n-1));return i}Ir("AlphaImage",Aa),Ir("RGBAImage",Pa);var Ma={paint:new pi({"hillshade-illumination-direction":new li(rt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new li(rt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new li(rt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new li(rt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new li(rt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new li(rt.paint_hillshade["hillshade-accent-color"])})};const Oa=_i([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ra}=Oa;var Na={exports:{}};function La(t,e,n){n=n||2;var r,i,o,a,s,l,u,c=e&&e.length,h=c?e[0]*n:t.length,d=Fa(t,0,h,n,!0),p=[];if(!d||d.next===d.prev)return p;if(c&&(d=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=Fa(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(Ha(a));for(s.sort(Ga),i=0;i<s.length;i++)n=Ya(s[i],n);return n}(t,e,d,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var f=n;f<h;f+=n)(s=t[f])<r&&(r=s),(l=t[f+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-r,a-i))?32767/u:0}return Ba(d,p,n,r,i,u,0),p}function Fa(t,e,n,r,i){var o,a;if(i===ss(t,e,n,r)>0)for(o=e;o<n;o+=r)a=is(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=is(o,t[o],t[o+1],a);return a&&Qa(a,a.next)&&(os(a),a=a.next),a}function za(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Qa(r,r.next)&&0!==Ka(r.prev,r,r.next))r=r.next;else{if(os(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Ba(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=Wa(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,l,u=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<u&&(s++,r=r.nextZ);e++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(t,r,i,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?Ua(t,r,i,o):ja(t))e.push(s.i/n|0),e.push(t.i/n|0),e.push(l.i/n|0),os(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?Ba(t=Va(za(t),e,n),e,n,r,i,o,2):2===a&&qa(t,e,n,r,i,o):Ba(za(t),e,n,r,i,o,1);break}}}function ja(t){var e=t.prev,n=t,r=t.next;if(Ka(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,a=r.x,s=e.y,l=n.y,u=r.y,c=i<o?i<a?i:a:o<a?o:a,h=s<l?s<u?s:u:l<u?l:u,d=i>o?i>a?i:a:o>a?o:a,p=s>l?s>u?s:u:l>u?l:u,f=r.next;f!==e;){if(f.x>=c&&f.x<=d&&f.y>=h&&f.y<=p&&Xa(i,s,o,l,a,u,f.x,f.y)&&Ka(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Ua(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Ka(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,u=a.x,c=i.y,h=o.y,d=a.y,p=s<l?s<u?s:u:l<u?l:u,f=c<h?c<d?c:d:h<d?h:d,m=s>l?s>u?s:u:l>u?l:u,g=c>h?c>d?c:d:h>d?h:d,y=Wa(p,f,e,n,r),v=Wa(m,g,e,n,r),_=t.prevZ,b=t.nextZ;_&&_.z>=y&&b&&b.z<=v;){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==i&&_!==a&&Xa(s,c,l,h,u,d,_.x,_.y)&&Ka(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==a&&Xa(s,c,l,h,u,d,b.x,b.y)&&Ka(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;_&&_.z>=y;){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==i&&_!==a&&Xa(s,c,l,h,u,d,_.x,_.y)&&Ka(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=v;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==a&&Xa(s,c,l,h,u,d,b.x,b.y)&&Ka(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Va(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Qa(i,o)&&Ja(i,r,r.next,o)&&ns(i,o)&&ns(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),os(r),os(r.next),r=t=o),r=r.next}while(r!==t);return za(r)}function qa(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Za(a,s)){var l=rs(a,s);return a=za(a,a.next),l=za(l,l.next),Ba(a,e,n,r,i,o,0),void Ba(l,e,n,r,i,o,0)}s=s.next}a=a.next}while(a!==t)}function Ga(t,e){return t.x-e.x}function Ya(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==e);if(!n)return null;var l,u=n,c=n.x,h=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&Xa(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),ns(r,t)&&(l<d||l===d&&(r.x>n.x||r.x===n.x&&$a(n,r)))&&(n=r,d=l)),r=r.next}while(r!==u);return n}(t,e);if(!n)return e;var r=rs(n,t);return za(r,r.next),za(n,n.next)}function $a(t,e){return Ka(t.prev,t,e.prev)<0&&Ka(e.next,t,t.next)<0}function Wa(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ha(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Xa(t,e,n,r,i,o,a,s){return(i-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(n-a)*(e-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function Za(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Ja(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(ns(t,e)&&ns(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(Ka(t.prev,t,e.prev)||Ka(t,e.prev,e))||Qa(t,e)&&Ka(t.prev,t,t.next)>0&&Ka(e.prev,e,e.next)>0)}function Ka(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Qa(t,e){return t.x===e.x&&t.y===e.y}function Ja(t,e,n,r){var i=es(Ka(t,e,n)),o=es(Ka(t,e,r)),a=es(Ka(n,r,t)),s=es(Ka(n,r,e));return i!==o&&a!==s||!(0!==i||!ts(t,n,e))||!(0!==o||!ts(t,r,e))||!(0!==a||!ts(n,t,r))||!(0!==s||!ts(n,e,r))}function ts(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function es(t){return t>0?1:t<0?-1:0}function ns(t,e){return Ka(t.prev,t,t.next)<0?Ka(t,e,t.next)>=0&&Ka(t,t.prev,e)>=0:Ka(t,e,t.prev)<0||Ka(t,t.next,e)<0}function rs(t,e){var n=new as(t.i,t.x,t.y),r=new as(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function is(t,e,n,r){var i=new as(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function os(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function as(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ss(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function ls(t,e,n,r,i){us(t,e,n||0,r||t.length-1,i||hs)}function us(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=e-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);us(t,e,Math.max(n,Math.floor(e-a*l/o+u)),Math.min(r,Math.floor(e+(o-a)*l/o+u)),i)}var c=t[e],h=n,d=r;for(cs(t,n,e),i(t[r],c)>0&&cs(t,n,r);h<d;){for(cs(t,h,d),h++,d--;i(t[h],c)<0;)h++;for(;i(t[d],c)>0;)d--}0===i(t[n],c)?cs(t,n,d):cs(t,++d,r),d<=e&&(n=d+1),e<=d&&(r=d-1)}}function cs(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function hs(t,e){return t<e?-1:t>e?1:0}function ds(t,e){const n=t.length;if(n<=1)return[t];const r=[];let i,o;for(let a=0;a<n;a++){const e=g(t[a]);0!==e&&(t[a].area=Math.abs(e),void 0===o&&(o=e<0),o===e<0?(i&&r.push(i),i=[t[a]]):i.push(t[a]))}if(i&&r.push(i),e>1)for(let a=0;a<r.length;a++)r[a].length<=e||(ls(r[a],e,1,r[a].length-1,ps),r[a]=r[a].slice(0,e));return r}function ps(t,e){return e.area-t.area}function fs(t,e,n){const r=n.patternDependencies;let i=!1;for(const o of e){const e=o.paint.get(`${t}-pattern`);e.isConstant()||(i=!0);const n=e.constantOr(null);n&&(i=!0,r[n.to]=!0,r[n.from]=!0)}return i}function ms(t,e,n,r,i){const o=i.patternDependencies;for(const a of e){const e=a.paint.get(`${t}-pattern`).value;if("constant"!==e.kind){let t=e.evaluate({zoom:r-1},n,{},i.availableImages),s=e.evaluate({zoom:r},n,{},i.availableImages),l=e.evaluate({zoom:r+1},n,{},i.availableImages);t=t&&t.name?t.name:t,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,o[t]=!0,o[s]=!0,o[l]=!0,n.patterns[a.id]={min:t,mid:s,max:l}}}return n}Na.exports=La,Na.exports.default=La,La.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(ss(t,0,i?e[0]*n:t.length,n));if(i)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(ss(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var l=0;for(a=0;a<r.length;a+=3){var u=r[a]*n,c=r[a+1]*n,h=r[a+2]*n;l+=Math.abs((t[u]-t[h])*(t[c+1]-t[u+1])-(t[u]-t[c])*(t[h+1]-t[u+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},La.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&n.holes.push(r+=t[i-1].length)}return n};class gs{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new eo,this.indexArray=new ho,this.indexArray2=new po,this.programConfigurations=new jo(t.layers,t.zoom),this.segments=new go,this.segments2=new go,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){this.hasPattern=fs("fill",this.layers,e);const r=this.layers[0].layout.get("fill-sort-key"),i=!r.isConstant(),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:u}of t){const t=this.layers[0]._featureFilter.needGeometry,c=Wo(a,t);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),c,n))continue;const h=i?r.evaluate(c,{},n,e.availableImages):void 0,d={id:s,properties:a.properties,type:a.type,sourceLayerIndex:u,index:l,geometry:t?c.geometry:$o(a),patterns:{},sortKey:h};o.push(d)}i&&o.sort(((t,e)=>t.sortKey-e.sortKey));for(const a of o){const{geometry:r,index:i,sourceLayerIndex:o}=a;if(this.hasPattern){const t=ms("fill",this.layers,a,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(a,r,i,n,{});e.featureIndex.insert(t[i].feature,r,i,o,this.index)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}addFeatures(t,e,n){for(const r of this.patternFeatures)this.addFeature(r,r.geometry,r.index,e,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ra),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,n,r,i){for(const o of ds(e,500)){let t=0;for(const s of o)t+=s.length;const e=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),n=e.vertexLength,r=[],i=[];for(const s of o){if(0===s.length)continue;s!==o[0]&&i.push(r.length/2);const t=this.segments2.prepareSegment(s.length,this.layoutVertexArray,this.indexArray2),e=t.vertexLength;this.layoutVertexArray.emplaceBack(s[0].x,s[0].y),this.indexArray2.emplaceBack(e+s.length-1,e),r.push(s[0].x),r.push(s[0].y);for(let n=1;n<s.length;n++)this.layoutVertexArray.emplaceBack(s[n].x,s[n].y),this.indexArray2.emplaceBack(e+n-1,e+n),r.push(s[n].x),r.push(s[n].y);t.vertexLength+=s.length,t.primitiveLength+=s.length}const a=Na.exports(r,i);for(let o=0;o<a.length;o+=3)this.indexArray.emplaceBack(n+a[o],n+a[o+1],n+a[o+2]);e.vertexLength+=t,e.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)}}Ir("FillBucket",gs,{omit:["layers","patternFeatures"]});const ys=new pi({"fill-sort-key":new ui(rt.layout_fill["fill-sort-key"])});var vs={paint:new pi({"fill-antialias":new li(rt.paint_fill["fill-antialias"]),"fill-opacity":new ui(rt.paint_fill["fill-opacity"]),"fill-color":new ui(rt.paint_fill["fill-color"]),"fill-outline-color":new ui(rt.paint_fill["fill-outline-color"]),"fill-translate":new li(rt.paint_fill["fill-translate"]),"fill-translate-anchor":new li(rt.paint_fill["fill-translate-anchor"]),"fill-pattern":new ci(rt.paint_fill["fill-pattern"])}),layout:ys};const _s=_i([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),bs=_i([{name:"a_centroid",components:2,type:"Int16"}],4),{members:xs}=_s;var ws={},Es=C,Ss=Cs;function Cs(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(Ts,this,e)}function Ts(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function Is(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)r+=((n=t[a]).x-(e=t[i]).x)*(e.y+n.y);return r}Cs.types=["Unknown","Point","LineString","Polygon"],Cs.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=[];t.pos<n;){if(i<=0){var l=t.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new Es(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},Cs.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<l&&(l=o),o>u&&(u=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,u]},Cs.prototype.toGeoJSON=function(t,e,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),u=Cs.types[this.type];function c(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];c(l=h);break;case 2:for(r=0;r<l.length;r++)c(l[r]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=Is(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)c(l[r][i])}1===l.length?l=l[0]:u="Multi"+u;var d={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var ks=Ss,As=Ps;function Ps(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Ds,this,e),this.length=this._features.length}function Ds(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}Ps.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new ks(this._pbf,e,this.extent,this._keys,this._values)};var Ms=As;function Os(t,e,n){if(3===t){var r=new Ms(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}ws.VectorTile=function(t,e){this.layers=t.readFields(Os,{},e)},ws.VectorTileFeature=Ss,ws.VectorTileLayer=As;const Rs=ws.VectorTileFeature.types,Ns=Math.pow(2,13);function Ls(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,2*Math.floor(r*Ns)+a,i*Ns*2,o*Ns*2,Math.round(s))}class Fs{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new no,this.centroidVertexArray=new Ji,this.indexArray=new ho,this.programConfigurations=new jo(t.layers,t.zoom),this.segments=new go,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){this.features=[],this.hasPattern=fs("fill-extrusion",this.layers,e);for(const{feature:r,id:i,index:o,sourceLayerIndex:a}of t){const t=this.layers[0]._featureFilter.needGeometry,s=Wo(r,t);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),s,n))continue;const l={id:i,sourceLayerIndex:a,index:o,geometry:t?s.geometry:$o(r),properties:r.properties,type:r.type,patterns:{}};this.hasPattern?this.features.push(ms("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,l.geometry,o,n,{}),e.featureIndex.insert(r,l.geometry,o,a,this.index,!0)}}addFeatures(t,e,n){for(const r of this.features){const{geometry:t}=r;this.addFeature(r,t,r.index,e,n)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,xs),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,bs.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,e,n,r,i){const o={x:0,y:0,vertexCount:0};for(const a of ds(e,500)){let e=0;for(const t of a)e+=t.length;let n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const t of a){if(0===t.length)continue;if(Bs(t))continue;let e=0;for(let r=0;r<t.length;r++){const i=t[r];if(r>=1){const a=t[r-1];if(!zs(i,a)){n.vertexLength+4>go.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const t=i.sub(a)._perp()._unit(),r=a.dist(i);e+r>32768&&(e=0),Ls(this.layoutVertexArray,i.x,i.y,t.x,t.y,0,0,e),Ls(this.layoutVertexArray,i.x,i.y,t.x,t.y,0,1,e),o.x+=2*i.x,o.y+=2*i.y,o.vertexCount+=2,e+=r,Ls(this.layoutVertexArray,a.x,a.y,t.x,t.y,0,0,e),Ls(this.layoutVertexArray,a.x,a.y,t.x,t.y,0,1,e),o.x+=2*a.x,o.y+=2*a.y,o.vertexCount+=2;const s=n.vertexLength;this.indexArray.emplaceBack(s,s+2,s+1),this.indexArray.emplaceBack(s+1,s+2,s+3),n.vertexLength+=4,n.primitiveLength+=2}}}}if(n.vertexLength+e>go.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray)),"Polygon"!==Rs[t.type])continue;const r=[],i=[],s=n.vertexLength;for(const t of a)if(0!==t.length){t!==a[0]&&i.push(r.length/2);for(let e=0;e<t.length;e++){const n=t[e];Ls(this.layoutVertexArray,n.x,n.y,0,0,1,1,0),o.x+=n.x,o.y+=n.y,o.vertexCount+=1,r.push(n.x),r.push(n.y)}}const l=Na.exports(r,i);for(let t=0;t<l.length;t+=3)this.indexArray.emplaceBack(s+l[t],s+l[t+2],s+l[t+1]);n.primitiveLength+=l.length/3,n.vertexLength+=e}for(let a=0;a<o.vertexCount;a++)this.centroidVertexArray.emplaceBack(Math.floor(o.x/o.vertexCount),Math.floor(o.y/o.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)}}function zs(t,e){return t.x===e.x&&(t.x<0||t.x>qo)||t.y===e.y&&(t.y<0||t.y>qo)}function Bs(t){return t.every((t=>t.x<0))||t.every((t=>t.x>qo))||t.every((t=>t.y<0))||t.every((t=>t.y>qo))}Ir("FillExtrusionBucket",Fs,{omit:["layers","features"]});var js={paint:new pi({"fill-extrusion-opacity":new li(rt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ui(rt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new li(rt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new li(rt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ci(rt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ui(rt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ui(rt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new li(rt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Us(t,e){return t.x*e.x+t.y*e.y}function Vs(t,e){if(1===t.length){let n=0;const r=e[n++];let i;for(;!i||r.equals(i);)if(i=e[n++],!i)return 1/0;for(;n<e.length;n++){const o=e[n],a=t[0],s=i.sub(r),l=o.sub(r),u=a.sub(r),c=Us(s,s),h=Us(s,l),d=Us(l,l),p=Us(u,s),f=Us(u,l),m=c*d-h*h,g=(d*p-h*f)/m,y=(c*f-h*p)/m,v=r.z*(1-g-y)+i.z*g+o.z*y;if(isFinite(v))return v}return 1/0}{let t=1/0;for(const n of e)t=Math.min(t,n.z);return t}}const qs=_i([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Gs}=qs,Ys=_i([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:$s}=Ys,Ws=ws.VectorTileFeature.types,Hs=Math.cos(Math.PI/180*37.5),Xs=Math.pow(2,14)/.5;class Zs{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new ro,this.layoutVertexArray2=new io,this.indexArray=new ho,this.programConfigurations=new jo(t.layers,t.zoom),this.segments=new go,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){this.hasPattern=fs("line",this.layers,e);const r=this.layers[0].layout.get("line-sort-key"),i=!r.isConstant(),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:u}of t){const t=this.layers[0]._featureFilter.needGeometry,e=Wo(a,t);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),e,n))continue;const c=i?r.evaluate(e,{},n):void 0,h={id:s,properties:a.properties,type:a.type,sourceLayerIndex:u,index:l,geometry:t?e.geometry:$o(a),patterns:{},sortKey:c};o.push(h)}i&&o.sort(((t,e)=>t.sortKey-e.sortKey));for(const a of o){const{geometry:r,index:i,sourceLayerIndex:o}=a;if(this.hasPattern){const t=ms("line",this.layers,a,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(a,r,i,n,{});e.featureIndex.insert(t[i].feature,r,i,o,this.index)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}addFeatures(t,e,n){for(const r of this.patternFeatures)this.addFeature(r,r.geometry,r.index,e,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,$s)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Gs),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,n,r,i){const o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),l=o.get("line-miter-limit"),u=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const c of e)this.addLine(c,t,a,s,l,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)}addLine(t,e,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===Ws[e.type];let s=t.length;for(;s>=2&&t[s-1].equals(t[s-2]);)s--;let l=0;for(;l<s-1&&t[l].equals(t[l+1]);)l++;if(s<(a?3:2))return;"bevel"===n&&(i=1.05);const u=this.overscaling<=16?122880/(512*this.overscaling):0,c=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,d,p,f,m;this.e1=this.e2=-1,a&&(h=t[s-2],m=t[l].sub(h)._unit()._perp());for(let g=l;g<s;g++){if(p=g===s-1?a?t[l+1]:void 0:t[g+1],p&&t[g].equals(p))continue;m&&(f=m),h&&(d=h),h=t[g],m=p?p.sub(h)._unit()._perp():f,f=f||m;let e=f.add(m);0===e.x&&0===e.y||e._unit();const y=f.x*m.x+f.y*m.y,v=e.x*m.x+e.y*m.y,_=0!==v?1/v:1/0,b=2*Math.sqrt(2-2*v),x=v<Hs&&d&&p,w=f.x*m.y-f.y*m.x>0;if(x&&g>l){const t=h.dist(d);if(t>2*u){const e=h.sub(h.sub(d)._mult(u/t)._round());this.updateDistance(d,e),this.addCurrentVertex(e,f,0,0,c),d=e}}const E=d&&p;let S=E?n:a?"butt":r;if(E&&"round"===S&&(_<o?S="miter":_<=2&&(S="fakeround")),"miter"===S&&_>i&&(S="bevel"),"bevel"===S&&(_>2&&(S="flipbevel"),_<i&&(S="miter")),d&&this.updateDistance(d,h),"miter"===S)e._mult(_),this.addCurrentVertex(h,e,0,0,c);else if("flipbevel"===S){if(_>100)e=m.mult(-1);else{const t=_*f.add(m).mag()/f.sub(m).mag();e._perp()._mult(t*(w?-1:1))}this.addCurrentVertex(h,e,0,0,c),this.addCurrentVertex(h,e.mult(-1),0,0,c)}else if("bevel"===S||"fakeround"===S){const t=-Math.sqrt(_*_-1),e=w?t:0,n=w?0:t;if(d&&this.addCurrentVertex(h,f,e,n,c),"fakeround"===S){const t=Math.round(180*b/Math.PI/20);for(let e=1;e<t;e++){let n=e/t;if(.5!==n){const t=n-.5;n+=n*t*(n-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*t*t+(.848013+y*(.215638*y-1.06021)))}const r=m.sub(f)._mult(n)._add(f)._unit()._mult(w?-1:1);this.addHalfVertex(h,r.x,r.y,!1,w,0,c)}}p&&this.addCurrentVertex(h,m,-e,-n,c)}else if("butt"===S)this.addCurrentVertex(h,e,0,0,c);else if("square"===S){const t=d?1:-1;this.addCurrentVertex(h,e,t,t,c)}else"round"===S&&(d&&(this.addCurrentVertex(h,f,0,0,c),this.addCurrentVertex(h,f,1,1,c,!0)),p&&(this.addCurrentVertex(h,m,-1,-1,c,!0),this.addCurrentVertex(h,m,0,0,c)));if(x&&g<s-1){const t=h.dist(p);if(t>2*u){const e=h.add(p.sub(h)._mult(u/t)._round());this.updateDistance(h,e),this.addCurrentVertex(e,m,0,0,c),h=e}}}}addCurrentVertex(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,o,!1,n,i),this.addHalfVertex(t,a,s,o,!0,-r,i),this.distance>Xs/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,n,r,i,o))}addHalfVertex(t,e,n,r,i,o,a){let{x:s,y:l}=t;const u=.5*(this.lineClips?this.scaledDistance*(Xs-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(r?1:0),(l<<1)+(i?1:0),Math.round(63*e)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1)|(63&u)<<2,u>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const c=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),a.primitiveLength++),i?this.e2=c:this.e1=c}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}Ir("LineBucket",Zs,{omit:["layers","patternFeatures"]});const Ks=new pi({"line-cap":new li(rt.layout_line["line-cap"]),"line-join":new ui(rt.layout_line["line-join"]),"line-miter-limit":new li(rt.layout_line["line-miter-limit"]),"line-round-limit":new li(rt.layout_line["line-round-limit"]),"line-sort-key":new ui(rt.layout_line["line-sort-key"])});var Qs={paint:new pi({"line-opacity":new ui(rt.paint_line["line-opacity"]),"line-color":new ui(rt.paint_line["line-color"]),"line-translate":new li(rt.paint_line["line-translate"]),"line-translate-anchor":new li(rt.paint_line["line-translate-anchor"]),"line-width":new ui(rt.paint_line["line-width"]),"line-gap-width":new ui(rt.paint_line["line-gap-width"]),"line-offset":new ui(rt.paint_line["line-offset"]),"line-blur":new ui(rt.paint_line["line-blur"]),"line-dasharray":new hi(rt.paint_line["line-dasharray"]),"line-pattern":new ci(rt.paint_line["line-pattern"]),"line-gradient":new di(rt.paint_line["line-gradient"])}),layout:Ks};const Js=new class extends ui{possiblyEvaluate(t,e){return e=new Jr(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,n,r){return e=s({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,n,r)}}(Qs.paint.properties["line-width"].specification);function tl(t,e){return e>0?e+2*t:t}Js.useIntegerZoom=!0;const el=_i([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),nl=_i([{name:"a_projected_pos",components:3,type:"Float32"}],4);_i([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const rl=_i([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);_i([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const il=_i([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ol=_i([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function al(t,e,n){return t.sections.forEach((t=>{t.text=function(t,e,n){const r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),Qr.applyArabicShaping&&(t=Qr.applyArabicShaping(t)),t}(t.text,e,n)})),t}_i([{name:"triangle",components:3,type:"Uint16"}]),_i([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),_i([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),_i([{type:"Float32",name:"offsetX"}]),_i([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const sl={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var ll=24,ul=dl,cl=function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?i-1:0,d=n?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},hl=function(t,e,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,f=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=f,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[n+p]=255&a,p+=f,a/=256,u-=8);t[n+p-f]|=128*m};function dl(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}dl.Varint=0,dl.Fixed64=1,dl.Bytes=2,dl.Fixed32=5;var pl,fl=4294967296,ml=1/fl,gl="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function yl(t){return t.type===dl.Bytes?t.readVarint()+t.pos:t.pos+1}function vl(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function _l(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function bl(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function xl(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function wl(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function El(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function Sl(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function Cl(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function Tl(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function Il(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function kl(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function Al(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Pl(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function Dl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Ml(t,e,n){1===t&&n.readMessage(Ol,e)}function Ol(t,e,n){if(3===t){const{id:t,bitmap:r,width:i,height:o,left:a,top:s,advance:l}=n.readMessage(Rl,{});e.push({id:t,bitmap:new Aa({width:i+6,height:o+6},r),metrics:{width:i,height:o,left:a,top:s,advance:l}})}}function Rl(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function Nl(t){let e=0,n=0;for(const a of t)e+=a.w*a.h,n=Math.max(n,a.w);t.sort(((t,e)=>e.h-t.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let i=0,o=0;for(const a of t)for(let t=r.length-1;t>=0;t--){const e=r[t];if(!(a.w>e.w||a.h>e.h)){if(a.x=e.x,a.y=e.y,o=Math.max(o,a.y+a.h),i=Math.max(i,a.x+a.w),a.w===e.w&&a.h===e.h){const e=r.pop();t<r.length&&(r[t]=e)}else a.h===e.h?(e.x+=a.w,e.w-=a.w):a.w===e.w?(e.y+=a.h,e.h-=a.h):(r.push({x:e.x+a.w,y:e.y,w:e.w-a.w,h:a.h}),e.y+=a.h,e.h-=a.h);break}}return{w:i,h:o,fill:e/(i*o)||0}}dl.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Al(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Dl(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Al(this.buf,this.pos)+Al(this.buf,this.pos+4)*fl;return this.pos+=8,t},readSFixed64:function(){var t=Al(this.buf,this.pos)+Dl(this.buf,this.pos+4)*fl;return this.pos+=8,t},readFloat:function(){var t=cl(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=cl(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return vl(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return vl(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return vl(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return vl(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return vl(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return vl(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&gl?function(t,e,n){return gl.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,l=t[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>n)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(a=t[i+2],128==(192&(o=t[i+1]))&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(a=t[i+2],s=t[i+3],128==(192&(o=t[i+1]))&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),i+=c}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==dl.Bytes)return t.push(this.readVarint(e));var n=yl(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==dl.Bytes)return t.push(this.readSVarint());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==dl.Bytes)return t.push(this.readBoolean());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==dl.Bytes)return t.push(this.readFloat());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==dl.Bytes)return t.push(this.readDouble());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==dl.Bytes)return t.push(this.readFixed32());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==dl.Bytes)return t.push(this.readSFixed32());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==dl.Bytes)return t.push(this.readFixed64());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==dl.Bytes)return t.push(this.readSFixed64());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===dl.Varint)for(;this.buf[this.pos++]>127;);else if(e===dl.Bytes)this.pos=this.readVarint()+this.pos;else if(e===dl.Fixed32)this.pos+=4;else{if(e!==dl.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Pl(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Pl(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Pl(this.buf,-1&t,this.pos),Pl(this.buf,Math.floor(t*ml),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Pl(this.buf,-1&t,this.pos),Pl(this.buf,Math.floor(t*ml),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&_l(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),hl(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),hl(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&_l(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,dl.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,bl,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,xl,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Sl,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,wl,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,El,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Cl,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Tl,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Il,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,kl,e)},writeBytesField:function(t,e){this.writeTag(t,dl.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,dl.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,dl.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,dl.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,dl.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,dl.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,dl.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,dl.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,dl.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,dl.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};class Ll{constructor(t,e){let{pixelRatio:n,version:r,stretchX:i,stretchY:o,content:a}=e;this.paddedRect=t,this.pixelRatio=n,this.stretchX=i,this.stretchY=o,this.content=a,this.version=r}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Fl{constructor(t,e){const n={},r={};this.haveRenderCallbacks=[];const i=[];this.addImages(t,n,i),this.addImages(e,r,i);const{w:o,h:a}=Nl(i),s=new Pa({width:o||1,height:a||1});for(const l in t){const e=t[l],r=n[l].paddedRect;Pa.copy(e.data,s,{x:0,y:0},{x:r.x+1,y:r.y+1},e.data)}for(const l in e){const t=e[l],n=r[l].paddedRect,i=n.x+1,o=n.y+1,a=t.data.width,u=t.data.height;Pa.copy(t.data,s,{x:0,y:0},{x:i,y:o},t.data),Pa.copy(t.data,s,{x:0,y:u-1},{x:i,y:o-1},{width:a,height:1}),Pa.copy(t.data,s,{x:0,y:0},{x:i,y:o+u},{width:a,height:1}),Pa.copy(t.data,s,{x:a-1,y:0},{x:i-1,y:o},{width:1,height:u}),Pa.copy(t.data,s,{x:0,y:0},{x:i+a,y:o},{width:1,height:u})}this.image=s,this.iconPositions=n,this.patternPositions=r}addImages(t,e,n){for(const r in t){const i=t[r],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(o),e[r]=new Ll(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(t,e){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)}patchUpdatedImage(t,e,n){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[r,i]=t.tl;n.update(e.data,void 0,{x:r,y:i})}}Ir("ImagePosition",Ll),Ir("ImageAtlas",Fl),t.WritingMode=void 0,(pl=t.WritingMode||(t.WritingMode={}))[pl.none=0]="none",pl[pl.horizontal=1]="horizontal",pl[pl.vertical=2]="vertical",pl[pl.horizontalOnly=3]="horizontalOnly";const zl=-17;class Bl{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const n=new Bl;return n.scale=t||1,n.fontStack=e,n}static forImage(t){const e=new Bl;return e.imageName=t,e}}class jl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const n=new jl;for(let r=0;r<t.sections.length;r++){const i=t.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,e)}return n}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;e+=r&&Fr(r)&&!sl[t[n+1]]||i&&Fr(i)&&!sl[t[n-1]]||!sl[t[n]]?t[n]:sl[t[n]]}return e}(this.text)}trim(){let t=0;for(let n=0;n<this.text.length&&Vl[this.text.charCodeAt(n)];n++)t++;let e=this.text.length;for(let n=this.text.length-1;n>=0&&n>=t&&Vl[this.text.charCodeAt(n)];n--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const n=new jl;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(Bl.forText(t.scale,t.fontStack||e));const n=this.sections.length-1;for(let r=0;r<t.text.length;++r)this.sectionIndex.push(n)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void f("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Bl.forImage(e)),this.sectionIndex.push(this.sections.length-1)):f("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ul(e,n,r,i,o,a,s,l,u,c,h,d,p,f,m,g){const y=jl.fromFeature(e,o);let v;d===t.WritingMode.vertical&&y.verticalizePunctuation();const{processBidirectionalText:_,processStyledBidirectionalText:b}=Qr;if(_&&1===y.sections.length){v=[];const t=_(y.toString(),Xl(y,c,a,n,i,f,m));for(const e of t){const t=new jl;t.text=e,t.sections=y.sections;for(let n=0;n<e.length;n++)t.sectionIndex.push(0);v.push(t)}}else if(b){v=[];const t=b(y.text,y.sectionIndex,Xl(y,c,a,n,i,f,m));for(const e of t){const t=new jl;t.text=e[0],t.sectionIndex=e[1],t.sections=y.sections,v.push(t)}}else v=function(t,e){const n=[],r=t.text;let i=0;for(const o of e)n.push(t.substring(i,o)),i=o;return i<r.length&&n.push(t.substring(i,r.length)),n}(y,Xl(y,c,a,n,i,f,m));const x=[],w={positionedLines:x,text:y.toString(),top:h[1],bottom:h[1],left:h[0],right:h[0],writingMode:d,iconsInText:!1,verticalizable:!1};return function(e,n,r,i,o,a,s,l,u,c,h,d){let p=0,f=zl,m=0,g=0;const y="right"===l?1:"left"===l?0:.5;let v=0;for(const E of o){E.trim();const o=E.getMaxScale(),s=(o-1)*ll,l={positionedGlyphs:[],lineOffset:0};e.positionedLines[v]=l;const b=l.positionedGlyphs;let x=0;if(!E.length()){f+=a,++v;continue}for(let a=0;a<E.length();a++){const l=E.getSection(a),m=E.getSectionIndex(a),g=E.getCharCode(a);let y=0,v=null,w=null,S=null,C=ll;const T=!(u===t.WritingMode.horizontal||!h&&!Lr(g)||h&&(Vl[g]||(_=g,Mr.Arabic(_)||Mr["Arabic Supplement"](_)||Mr["Arabic Extended-A"](_)||Mr["Arabic Presentation Forms-A"](_)||Mr["Arabic Presentation Forms-B"](_))));if(l.imageName){const t=i[l.imageName];if(!t)continue;S=l.imageName,e.iconsInText=e.iconsInText||!0,w=t.paddedRect;const n=t.displaySize;l.scale=l.scale*ll/d,v={width:n[0],height:n[1],left:1,top:-3,advance:T?n[1]:n[0]},y=s+(ll-n[1]*l.scale),C=v.advance;const r=T?n[0]*l.scale-ll*o:n[1]*l.scale-ll*o;r>0&&r>x&&(x=r)}else{const t=r[l.fontStack],e=t&&t[g];if(e&&e.rect)w=e.rect,v=e.metrics;else{const t=n[l.fontStack],e=t&&t[g];if(!e)continue;v=e.metrics}y=(o-l.scale)*ll}T?(e.verticalizable=!0,b.push({glyph:g,imageName:S,x:p,y:f+y,vertical:T,scale:l.scale,fontStack:l.fontStack,sectionIndex:m,metrics:v,rect:w}),p+=C*l.scale+c):(b.push({glyph:g,imageName:S,x:p,y:f+y,vertical:T,scale:l.scale,fontStack:l.fontStack,sectionIndex:m,metrics:v,rect:w}),p+=v.advance*l.scale+c)}0!==b.length&&(m=Math.max(p-c,m),Kl(b,0,b.length-1,y,x)),p=0;const w=a*o+x;l.lineOffset=Math.max(x,s),f+=w,g=Math.max(w,g),++v}var _;const b=f-zl,{horizontalAlign:x,verticalAlign:w}=Zl(s);(function(t,e,n,r,i,o,a,s,l){const u=(e-n)*i;let c=0;c=o!==a?-s*r-zl:(-r*l+.5)*a;for(const h of t)for(const t of h.positionedGlyphs)t.x+=u,t.y+=c})(e.positionedLines,y,x,w,m,g,a,b,o.length),e.top+=-w*b,e.bottom=e.top+b,e.left+=-x*m,e.right=e.left+m}(w,n,r,i,v,s,l,u,d,c,p,g),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(x)&&w}const Vl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ql={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Gl(t,e,n,r,i,o){if(e.imageName){const t=r[e.imageName];return t?t.displaySize[0]*e.scale*ll/o+i:0}{const r=n[e.fontStack],o=r&&r[t];return o?o.metrics.advance*e.scale+i:0}}function Yl(t,e,n,r){const i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function $l(t,e,n){let r=0;return 10===t&&(r-=1e4),n&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Wl(t,e,n,r,i,o){let a=null,s=Yl(e,n,i,o);for(const l of r){const t=Yl(e-l.x,n,i,o)+l.badness;t<=s&&(a=l,s=t)}return{index:t,x:e,priorBreak:a,badness:s}}function Hl(t){return t?Hl(t.priorBreak).concat(t.index):[]}function Xl(t,e,n,r,i,o,a){if("point"!==o)return[];if(!t)return[];const s=[],l=function(t,e,n,r,i,o){let a=0;for(let s=0;s<t.length();s++){const n=t.getSection(s);a+=Gl(t.getCharCode(s),n,r,i,e,o)}return a/Math.max(1,Math.ceil(a/n))}(t,e,n,r,i,a),u=t.text.indexOf("\u200b")>=0;let c=0;for(let d=0;d<t.length();d++){const n=t.getSection(d),o=t.getCharCode(d);if(Vl[o]||(c+=Gl(o,n,r,i,e,a)),d<t.length()-1){const e=!((h=o)<11904||!(Mr["Bopomofo Extended"](h)||Mr.Bopomofo(h)||Mr["CJK Compatibility Forms"](h)||Mr["CJK Compatibility Ideographs"](h)||Mr["CJK Compatibility"](h)||Mr["CJK Radicals Supplement"](h)||Mr["CJK Strokes"](h)||Mr["CJK Symbols and Punctuation"](h)||Mr["CJK Unified Ideographs Extension A"](h)||Mr["CJK Unified Ideographs"](h)||Mr["Enclosed CJK Letters and Months"](h)||Mr["Halfwidth and Fullwidth Forms"](h)||Mr.Hiragana(h)||Mr["Ideographic Description Characters"](h)||Mr["Kangxi Radicals"](h)||Mr["Katakana Phonetic Extensions"](h)||Mr.Katakana(h)||Mr["Vertical Forms"](h)||Mr["Yi Radicals"](h)||Mr["Yi Syllables"](h)));(ql[o]||e||n.imageName)&&s.push(Wl(d+1,c,l,s,$l(o,t.getCharCode(d+1),e&&u),!1))}}var h;return Hl(Wl(t.length(),c,l,s,0,!0))}function Zl(t){let e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Kl(t,e,n,r,i){if(!r&&!i)return;const o=t[n],a=(t[n].x+o.metrics.advance*o.scale)*r;for(let s=e;s<=n;s++)t[s].x-=a,t[s].y+=i}function Ql(t,e,n){const{horizontalAlign:r,verticalAlign:i}=Zl(n),o=e[0]-t.displaySize[0]*r,a=e[1]-t.displaySize[1]*i;return{image:t,top:a,bottom:a+t.displaySize[1],left:o,right:o+t.displaySize[0]}}function Jl(t,e,n,r,i,o){const a=t.image;let s;if(a.content){const t=a.content,e=a.pixelRatio||1;s=[t[0]/e,t[1]/e,a.displaySize[0]-t[2]/e,a.displaySize[1]-t[3]/e]}const l=e.left*o,u=e.right*o;let c,h,d,p;"width"===n||"both"===n?(p=i[0]+l-r[3],h=i[0]+u+r[1]):(p=i[0]+(l+u-a.displaySize[0])/2,h=p+a.displaySize[0]);const f=e.top*o,m=e.bottom*o;return"height"===n||"both"===n?(c=i[1]+f-r[0],d=i[1]+m+r[2]):(c=i[1]+(f+m-a.displaySize[1])/2,d=c+a.displaySize[1]),{image:a,top:c,right:h,bottom:d,left:p,collisionPadding:s}}const tu=128;function eu(t,e){const{expression:n}=e;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new Jr(t+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:r}=n;let i=0;for(;i<e.length&&e[i]<=t;)i++;i=Math.max(0,i-1);let o=i;for(;o<e.length&&e[o]<t+1;)o++;o=Math.min(e.length-1,o);const a=e[i],s=e[o];return"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:r}:{kind:"camera",minZoom:a,maxZoom:s,minSize:n.evaluate(new Jr(a)),maxSize:n.evaluate(new Jr(s)),interpolationType:r}}}class nu extends C{constructor(t,e,n,r){super(t,e),this.angle=n,void 0!==r&&(this.segment=r)}clone(){return new nu(this.x,this.y,this.angle,this.segment)}}function ru(t,e,n,r,i){if(void 0===e.segment)return!0;let o=e,a=e.segment+1,s=0;for(;s>-n/2;){if(a--,a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;const l=[];let u=0;for(;s<n/2;){const e=t[a],n=t[a+1];if(!n)return!1;let o=t[a-1].angleTo(e)-e.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),u+=o;s-l[0].distance>r;)u-=l.shift().angleDelta;if(u>i)return!1;a++,s+=e.dist(n)}return!0}function iu(t){let e=0;for(let n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function ou(t,e,n){return t?.6*e*n:0}function au(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function su(t,e,n,r,i,o){const a=ou(n,i,o),s=au(n,r)*o;let l=0;const u=iu(t)/2;for(let c=0;c<t.length-1;c++){const n=t[c],r=t[c+1],i=n.dist(r);if(l+i>u){const o=(u-l)/i,h=Ce(n.x,r.x,o),d=Ce(n.y,r.y,o),p=new nu(h,d,r.angleTo(n),c);return p._round(),!a||ru(t,p,s,a,e)?p:void 0}l+=i}}function lu(t,e,n,r,i,o,a,s,l){const u=ou(r,o,a),c=au(r,i),h=c*a,d=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),uu(t,d?e/2*s%e:(c/2+2*o)*a*s%e,e,u,n,h,d,!1,l)}function uu(t,e,n,r,i,o,a,s,l){const u=o/2,c=iu(t);let h=0,d=e-n,p=[];for(let f=0;f<t.length-1;f++){const e=t[f],a=t[f+1],s=e.dist(a),m=a.angleTo(e);for(;d+n<h+s;){d+=n;const g=(d-h)/s,y=Ce(e.x,a.x,g),v=Ce(e.y,a.y,g);if(y>=0&&y<l&&v>=0&&v<l&&d-u>=0&&d+u<=c){const e=new nu(y,v,m,f);e._round(),r&&!ru(t,e,o,r,i)||p.push(e)}}h+=s}return s||p.length||a||(p=uu(t,h/2,n,r,i,o,a,!0,l)),p}function cu(t,e,n,r,i){const o=[];for(let a=0;a<t.length;a++){const s=t[a];let l;for(let t=0;t<s.length-1;t++){let a=s[t],u=s[t+1];a.x<e&&u.x<e||(a.x<e?a=new C(e,a.y+(e-a.x)/(u.x-a.x)*(u.y-a.y))._round():u.x<e&&(u=new C(e,a.y+(e-a.x)/(u.x-a.x)*(u.y-a.y))._round()),a.y<n&&u.y<n||(a.y<n?a=new C(a.x+(n-a.y)/(u.y-a.y)*(u.x-a.x),n)._round():u.y<n&&(u=new C(a.x+(n-a.y)/(u.y-a.y)*(u.x-a.x),n)._round()),a.x>=r&&u.x>=r||(a.x>=r?a=new C(r,a.y+(r-a.x)/(u.x-a.x)*(u.y-a.y))._round():u.x>=r&&(u=new C(r,a.y+(r-a.x)/(u.x-a.x)*(u.y-a.y))._round()),a.y>=i&&u.y>=i||(a.y>=i?a=new C(a.x+(i-a.y)/(u.y-a.y)*(u.x-a.x),i)._round():u.y>=i&&(u=new C(a.x+(i-a.y)/(u.y-a.y)*(u.x-a.x),i)._round()),l&&a.equals(l[l.length-1])||(l=[a],o.push(l)),l.push(u)))))}}return o}function hu(t,e,n,r){const i=[],o=t.image,a=o.pixelRatio,s=o.paddedRect.w-2,l=o.paddedRect.h-2,u=t.right-t.left,c=t.bottom-t.top,h=o.stretchX||[[0,s]],d=o.stretchY||[[0,l]],p=(t,e)=>t+e[1]-e[0],f=h.reduce(p,0),m=d.reduce(p,0),g=s-f,y=l-m;let v=0,_=f,b=0,x=m,w=0,E=g,S=0,T=y;if(o.content&&r){const t=o.content;v=du(h,0,t[0]),b=du(d,0,t[1]),_=du(h,t[0],t[2]),x=du(d,t[1],t[3]),w=t[0]-v,S=t[1]-b,E=t[2]-t[0]-_,T=t[3]-t[1]-x}const I=(r,i,s,l)=>{const h=fu(r.stretch-v,_,u,t.left),d=mu(r.fixed-w,E,r.stretch,f),p=fu(i.stretch-b,x,c,t.top),g=mu(i.fixed-S,T,i.stretch,m),y=fu(s.stretch-v,_,u,t.left),I=mu(s.fixed-w,E,s.stretch,f),k=fu(l.stretch-b,x,c,t.top),A=mu(l.fixed-S,T,l.stretch,m),P=new C(h,p),D=new C(y,p),M=new C(y,k),O=new C(h,k),R=new C(d/a,g/a),N=new C(I/a,A/a),L=e*Math.PI/180;if(L){const t=Math.sin(L),e=Math.cos(L),n=[e,-t,t,e];P._matMult(n),D._matMult(n),O._matMult(n),M._matMult(n)}const F=r.stretch+r.fixed,z=i.stretch+i.fixed;return{tl:P,tr:D,bl:O,br:M,tex:{x:o.paddedRect.x+1+F,y:o.paddedRect.y+1+z,w:s.stretch+s.fixed-F,h:l.stretch+l.fixed-z},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:N,minFontScaleX:E/a/u,minFontScaleY:T/a/c,isSDF:n}};if(r&&(o.stretchX||o.stretchY)){const t=pu(h,g,f),e=pu(d,y,m);for(let n=0;n<t.length-1;n++){const r=t[n],o=t[n+1];for(let t=0;t<e.length-1;t++)i.push(I(r,e[t],o,e[t+1]))}}else i.push(I({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return i}function du(t,e,n){let r=0;for(const i of t)r+=Math.max(e,Math.min(n,i[1]))-Math.max(e,Math.min(n,i[0]));return r}function pu(t,e,n){const r=[{fixed:-1,stretch:0}];for(const[i,o]of t){const t=r[r.length-1];r.push({fixed:i-t.stretch,stretch:t.stretch}),r.push({fixed:i-t.stretch,stretch:t.stretch+(o-i)})}return r.push({fixed:e+1,stretch:n}),r}function fu(t,e,n,r){return t/e*n+r}function mu(t,e,n,r){return t-e*n/r}Ir("Anchor",nu);class gu{constructor(t,e,n,r,i,o,a,s,l,u){if(this.boxStartIndex=t.length,l){let t=o.top,e=o.bottom;const n=o.collisionPadding;n&&(t-=n[1],e+=n[3]);let r=e-t;r>0&&(r=Math.max(10,r),this.circleDiameter=r)}else{let l=o.top*a-s[0],c=o.bottom*a+s[2],h=o.left*a-s[3],d=o.right*a+s[1];const p=o.collisionPadding;if(p&&(h-=p[0]*a,l-=p[1]*a,d+=p[2]*a,c+=p[3]*a),u){const t=new C(h,l),e=new C(d,l),n=new C(h,c),r=new C(d,c),i=u*Math.PI/180;t._rotate(i),e._rotate(i),n._rotate(i),r._rotate(i),h=Math.min(t.x,e.x,n.x,r.x),d=Math.max(t.x,e.x,n.x,r.x),l=Math.min(t.y,e.y,n.y,r.y),c=Math.max(t.y,e.y,n.y,r.y)}t.emplaceBack(e.x,e.y,h,l,d,c,n,r,i)}this.boxEndIndex=t.length}}class yu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vu;if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,r=e[t];for(;t>0;){const i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}_down(t){const{data:e,compare:n}=this,r=this.length>>1,i=e[t];for(;t<r;){let r=1+(t<<1),o=e[r];const a=r+1;if(a<this.length&&n(e[a],o)<0&&(r=a,o=e[a]),n(o,i)>=0)break;e[t]=o,t=r}e[t]=i}}function vu(t,e){return t<e?-1:t>e?1:0}function _u(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1/0,i=1/0,o=-1/0,a=-1/0;const s=t[0];for(let p=0;p<s.length;p++){const t=s[p];(!p||t.x<r)&&(r=t.x),(!p||t.y<i)&&(i=t.y),(!p||t.x>o)&&(o=t.x),(!p||t.y>a)&&(a=t.y)}const l=Math.min(o-r,a-i);let u=l/2;const c=new yu([],bu);if(0===l)return new C(r,i);for(let p=r;p<o;p+=l)for(let e=i;e<a;e+=l)c.push(new xu(p+u,e+u,u,t));let h=function(t){let e=0,n=0,r=0;const i=t[0];for(let o=0,a=i.length,s=a-1;o<a;s=o++){const t=i[o],a=i[s],l=t.x*a.y-a.x*t.y;n+=(t.x+a.x)*l,r+=(t.y+a.y)*l,e+=3*l}return new xu(n/e,r/e,0,t)}(t),d=c.length;for(;c.length;){const r=c.pop();(r.d>h.d||!h.d)&&(h=r,n&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,d)),r.max-h.d<=e||(u=r.h/2,c.push(new xu(r.p.x-u,r.p.y-u,u,t)),c.push(new xu(r.p.x+u,r.p.y-u,u,t)),c.push(new xu(r.p.x-u,r.p.y+u,u,t)),c.push(new xu(r.p.x+u,r.p.y+u,u,t)),d+=4)}return n&&(console.log(`num probes: ${d}`),console.log(`best distance: ${h.d}`)),h.p}function bu(t,e){return e.max-t.max}function xu(t,e,n,r){this.p=new C(t,e),this.h=n,this.d=function(t,e){let n=!1,r=1/0;for(let i=0;i<e.length;i++){const o=e[i];for(let e=0,i=o.length,a=i-1;e<i;a=e++){const i=o[e],s=o[a];i.y>t.y!=s.y>t.y&&t.x<(s.x-i.x)*(t.y-i.y)/(s.y-i.y)+i.x&&(n=!n),r=Math.min(r,ra(t,i,s))}}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}const wu=Number.POSITIVE_INFINITY;function Eu(t,e){return e[1]!==wu?function(t,e,n){let r=0,i=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,i]}(t,e[0],e[1]):function(t,e){let n=0,r=0;e<0&&(e=0);const i=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-e;break;case"top":r=e-7}switch(t){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=e;break;case"right":n=-e}return[n,r]}(t,e[0])}function Su(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Cu(e,n,r,i,o,a,s,l,u,c,h){let d=a.textMaxSize.evaluate(n,{});void 0===d&&(d=s);const p=e.layers[0].layout,m=p.get("icon-offset").evaluate(n,{},h),g=ku(r.horizontal),y=s/24,v=e.tilePixelRatio*y,_=e.tilePixelRatio*d/24,b=e.tilePixelRatio*l,x=e.tilePixelRatio*p.get("symbol-spacing"),w=p.get("text-padding")*e.tilePixelRatio,E=function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=t.get("icon-padding").evaluate(e,{},n),o=i&&i.values;return[o[0]*r,o[1]*r,o[2]*r,o[3]*r]}(p,n,h,e.tilePixelRatio),S=p.get("text-max-angle")/180*Math.PI,C="viewport"!==p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),T="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),I=p.get("symbol-placement"),k=x/2,A=p.get("icon-text-fit");let P;i&&"none"!==A&&(e.allowVerticalPlacement&&r.vertical&&(P=Jl(i,r.vertical,A,p.get("icon-text-fit-padding"),m,y)),g&&(i=Jl(i,g,A,p.get("icon-text-fit-padding"),m,y)));const D=(l,d)=>{d.x<0||d.x>=qo||d.y<0||d.y>=qo||function(e,n,r,i,o,a,s,l,u,c,h,d,p,m,g,y,v,_,b,x,w,E,S,C,T){const I=e.addToLineVertexArray(n,r);let k,A,P,D,M=0,O=0,R=0,N=0,L=-1,F=-1;const z={};let B=_o.exports(""),j=0,U=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[j,U]=l.layout.get("text-offset").evaluate(w,{},C).map((t=>t*ll)):(j=l.layout.get("text-radial-offset").evaluate(w,{},C)*ll,U=wu),e.allowVerticalPlacement&&i.vertical){const t=l.layout.get("text-rotate").evaluate(w,{},C)+90;P=new gu(u,n,c,h,d,i.vertical,p,m,g,t),s&&(D=new gu(u,n,c,h,d,s,v,_,g,t))}if(o){const r=l.layout.get("icon-rotate").evaluate(w,{}),i="none"!==l.layout.get("icon-text-fit"),a=hu(o,r,S,i),p=s?hu(s,r,S,i):void 0;A=new gu(u,n,c,h,d,o,v,_,!1,r),M=4*a.length;const m=e.iconSizeData;let g=null;"source"===m.kind?(g=[tu*l.layout.get("icon-size").evaluate(w,{})],g[0]>Tu&&f(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===m.kind&&(g=[tu*E.compositeIconSizes[0].evaluate(w,{},C),tu*E.compositeIconSizes[1].evaluate(w,{},C)],(g[0]>Tu||g[1]>Tu)&&f(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),e.addSymbols(e.icon,a,g,x,b,w,t.WritingMode.none,n,I.lineStartIndex,I.lineLength,-1,C),L=e.icon.placedSymbolArray.length-1,p&&(O=4*p.length,e.addSymbols(e.icon,p,g,x,b,w,t.WritingMode.vertical,n,I.lineStartIndex,I.lineLength,-1,C),F=e.icon.placedSymbolArray.length-1)}const V=Object.keys(i.horizontal);for(const f of V){const r=i.horizontal[f];if(!k){B=_o.exports(r.text);const t=l.layout.get("text-rotate").evaluate(w,{},C);k=new gu(u,n,c,h,d,r,p,m,g,t)}const o=1===r.positionedLines.length;if(R+=Iu(e,n,r,a,l,g,w,y,I,i.vertical?t.WritingMode.horizontal:t.WritingMode.horizontalOnly,o?V:[f],z,L,E,C),o)break}i.vertical&&(N+=Iu(e,n,i.vertical,a,l,g,w,y,I,t.WritingMode.vertical,["vertical"],z,F,E,C));const q=k?k.boxStartIndex:e.collisionBoxArray.length,G=k?k.boxEndIndex:e.collisionBoxArray.length,Y=P?P.boxStartIndex:e.collisionBoxArray.length,$=P?P.boxEndIndex:e.collisionBoxArray.length,W=A?A.boxStartIndex:e.collisionBoxArray.length,H=A?A.boxEndIndex:e.collisionBoxArray.length,X=D?D.boxStartIndex:e.collisionBoxArray.length,Z=D?D.boxEndIndex:e.collisionBoxArray.length;let K=-1;const Q=(t,e)=>t&&t.circleDiameter?Math.max(t.circleDiameter,e):e;K=Q(k,K),K=Q(P,K),K=Q(A,K),K=Q(D,K);const J=K>-1?1:0;J&&(K*=T/ll),e.glyphOffsetArray.length>=Fu.MAX_GLYPHS&&f("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==w.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,w.sortKey),e.symbolInstances.emplaceBack(n.x,n.y,z.right>=0?z.right:-1,z.center>=0?z.center:-1,z.left>=0?z.left:-1,z.vertical||-1,L,F,B,q,G,Y,$,W,H,X,Z,c,R,N,M,O,J,0,p,j,U,K)}(e,d,l,r,i,o,P,e.layers[0],e.collisionBoxArray,n.index,n.sourceLayerIndex,e.index,v,[w,w,w,w],C,u,b,E,T,m,n,a,c,h,s)};if("line"===I)for(const t of cu(n.geometry,0,0,qo,qo)){const n=lu(t,x,S,r.vertical||g,i,24,_,e.overscaling,qo);for(const r of n)g&&Au(e,g.text,k,r)||D(t,r)}else if("line-center"===I){for(const t of n.geometry)if(t.length>1){const e=su(t,S,r.vertical||g,i,24,_);e&&D(t,e)}}else if("Polygon"===n.type)for(const t of ds(n.geometry,0)){const e=_u(t,16);D(t[0],new nu(e.x,e.y,0))}else if("LineString"===n.type)for(const t of n.geometry)D(t,new nu(t[0].x,t[0].y,0));else if("Point"===n.type)for(const t of n.geometry)for(const e of t)D([e],new nu(e.x,e.y,0))}const Tu=32640;function Iu(t,e,n,r,i,o,a,s,l,u,c,h,d,p,m){const g=function(t,e,n,r,i,o,a,s){const l=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=[];for(const c of e.positionedLines)for(const t of c.positionedGlyphs){if(!t.rect)continue;const r=t.rect||{};let o=4,h=!0,d=1,p=0;const f=(i||s)&&t.vertical,m=t.metrics.advance*t.scale/2;if(s&&e.verticalizable){const e=(t.scale-1)*ll,n=(ll-t.metrics.width*t.scale)/2;p=c.lineOffset/2-(t.imageName?-n:e)}if(t.imageName){const e=a[t.imageName];h=e.sdf,d=e.pixelRatio,o=1/d}const g=i?[t.x+m,t.y]:[0,0];let y=i?[0,0]:[t.x+m+n[0],t.y+n[1]-p],v=[0,0];f&&(v=y,y=[0,0]);const _=(t.metrics.left-o)*t.scale-m+y[0],b=(-t.metrics.top-o)*t.scale+y[1],x=_+r.w*t.scale/d,w=b+r.h*t.scale/d,E=new C(_,b),S=new C(x,b),T=new C(_,w),I=new C(x,w);if(f){const e=new C(-m,m-zl),n=-Math.PI/2,r=12-m,i=new C(22-r,-(t.imageName?r:0)),o=new C(...v);E._rotateAround(n,e)._add(i)._add(o),S._rotateAround(n,e)._add(i)._add(o),T._rotateAround(n,e)._add(i)._add(o),I._rotateAround(n,e)._add(i)._add(o)}if(l){const t=Math.sin(l),e=Math.cos(l),n=[e,-t,t,e];E._matMult(n),S._matMult(n),T._matMult(n),I._matMult(n)}const k=new C(0,0),A=new C(0,0);u.push({tl:E,tr:S,bl:T,br:I,tex:r,writingMode:e.writingMode,glyphOffset:g,sectionIndex:t.sectionIndex,isSDF:h,pixelOffsetTL:k,pixelOffsetBR:A,minFontScaleX:0,minFontScaleY:0})}return u}(0,n,s,i,o,a,r,t.allowVerticalPlacement),y=t.textSizeData;let v=null;"source"===y.kind?(v=[tu*i.layout.get("text-size").evaluate(a,{})],v[0]>Tu&&f(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===y.kind&&(v=[tu*p.compositeTextSizes[0].evaluate(a,{},m),tu*p.compositeTextSizes[1].evaluate(a,{},m)],(v[0]>Tu||v[1]>Tu)&&f(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),t.addSymbols(t.text,g,v,s,o,a,u,e,l.lineStartIndex,l.lineLength,d,m);for(const f of c)h[f]=t.text.placedSymbolArray.length-1;return 4*g.length}function ku(t){for(const e in t)return t[e];return null}function Au(t,e,n,r){const i=t.compareText;if(e in i){const t=i[e];for(let e=t.length-1;e>=0;e--)if(r.dist(t[e])<n)return!0}else i[e]=[];return i[e].push(r),!1}const Pu=ws.VectorTileFeature.types,Du=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Mu(t,e,n,r,i,o,a,s,l,u,c,h,d){const p=s?Math.min(Tu,Math.round(s[0])):0,f=s?Math.min(Tu,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,a,(p<<1)+(l?1:0),f,16*u,16*c,256*h,256*d)}function Ou(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function Ru(t){for(const e of t.sections)if(jr(e.text))return!0;return!1}class Nu{constructor(t){this.layoutVertexArray=new ao,this.indexArray=new ho,this.programConfigurations=t,this.segments=new go,this.dynamicLayoutVertexArray=new so,this.opacityVertexArray=new lo,this.placedSymbolArray=new $i}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,el.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,nl.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Du,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ir("SymbolBuffers",Nu);class Lu{constructor(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new go,this.collisionVertexArray=new co}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,rl.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ir("CollisionBuffers",Lu);class Fu{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ma([]),this.placementViewportMatrix=ma([]);const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=eu(this.zoom,n["text-size"]),this.iconSizeData=eu(this.zoom,n["icon-size"]);const r=this.layers[0].layout,i=r.get("symbol-sort-key"),o=r.get("symbol-z-order");this.canOverlap="never"!==Vu(r,"text-overlap","text-allow-overlap")||"never"!==Vu(r,"icon-overlap","icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&!i.isConstant(),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===r.get("symbol-placement")&&(this.writingModes=r.get("text-writing-mode").map((e=>t.WritingMode[e]))),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=e.sourceID}createArrays(){this.text=new Nu(new jo(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new Nu(new jo(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new Xi,this.lineVertexArray=new Zi,this.symbolInstances=new Hi}calculateGlyphDependencies(t,e,n,r,i){for(let o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(n||r)&&i){const n=sl[t.charAt(o)];n&&(e[n.charCodeAt(0)]=!0)}}populate(e,n,r){const i=this.layers[0],o=i.layout,a=o.get("text-font"),s=o.get("text-field"),l=o.get("icon-image"),u=("constant"!==s.value.kind||s.value.value instanceof Ft&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),c="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],!u&&!c)return;const d=n.iconDependencies,p=n.glyphDependencies,f=n.availableImages,m=new Jr(this.zoom);for(const{feature:g,id:y,index:v,sourceLayerIndex:_}of e){const e=i._featureFilter.needGeometry,n=Wo(g,e);if(!i._featureFilter.filter(m,n,r))continue;let s,l;if(e||(n.geometry=$o(g)),u){const t=i.getValueAndResolveTokens("text-field",n,r,f),e=Ft.factory(t);Ru(e)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Zr()||this.hasRTLText&&Qr.isParsed())&&(s=al(e,i,n))}if(c){const t=i.getValueAndResolveTokens("icon-image",n,r,f);l=t instanceof Bt?t:Bt.fromString(t)}if(!s&&!l)continue;const b=this.sortFeaturesByKey?h.evaluate(n,{},r):void 0;if(this.features.push({id:y,text:s,icon:l,index:v,sourceLayerIndex:_,geometry:n.geometry,properties:g.properties,type:Pu[g.type],sortKey:b}),l&&(d[l.name]=!0),s){const e=a.evaluate(n,{},r).join(","),i="viewport"!==o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(t.WritingMode.vertical)>=0;for(const t of s.sections)if(t.image)d[t.image.name]=!0;else{const n=Or(s.toString()),r=t.fontStack||e,o=p[r]=p[r]||{};this.calculateGlyphDependencies(t.text,o,i,this.allowVerticalPlacement,n)}}}"line"===o.get("symbol-placement")&&(this.features=function(t){const e={},n={},r=[];let i=0;function o(e){r.push(t[e]),i++}function a(t,e,i){const o=n[t];return delete n[t],n[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(t,n,i){const o=e[n];return delete e[n],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function l(t,e,n){const r=n?e[0][e[0].length-1]:e[0][0];return`${t}:${r.x}:${r.y}`}for(let u=0;u<t.length;u++){const c=t[u],h=c.geometry,d=c.text?c.text.toString():null;if(!d){o(u);continue}const p=l(d,h),f=l(d,h,!0);if(p in n&&f in e&&n[p]!==e[f]){const t=s(p,f,h),i=a(p,f,r[t].geometry);delete e[p],delete n[f],n[l(d,r[i].geometry,!0)]=i,r[t].geometry=null}else p in n?a(p,f,h):f in e?s(p,f,h):(o(u),e[p]=i-1,n[f]=i-1)}return r.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const n=this.lineVertexArray.length;if(void 0!==t.segment){let n=t.dist(e[t.segment+1]),r=t.dist(e[t.segment]);const i={};for(let o=t.segment+1;o<e.length;o++)i[o]={x:e[o].x,y:e[o].y,tileUnitDistanceFromAnchor:n},o<e.length-1&&(n+=e[o+1].dist(e[o]));for(let o=t.segment||0;o>=0;o--)i[o]={x:e[o].x,y:e[o].y,tileUnitDistanceFromAnchor:r},o>0&&(r+=e[o-1].dist(e[o]));for(let t=0;t<e.length;t++){const e=i[t];this.lineVertexArray.emplaceBack(e.x,e.y,e.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(e,n,r,i,o,a,s,l,u,c,h,d){const p=e.indexArray,f=e.layoutVertexArray,m=e.segments.prepareSegment(4*n.length,f,p,this.canOverlap?a.sortKey:void 0),g=this.glyphOffsetArray.length,y=m.vertexLength,v=this.allowVerticalPlacement&&s===t.WritingMode.vertical?Math.PI/2:0,_=a.text&&a.text.sections;for(let t=0;t<n.length;t++){const{tl:i,tr:o,bl:s,br:u,tex:c,pixelOffsetTL:h,pixelOffsetBR:g,minFontScaleX:y,minFontScaleY:b,glyphOffset:x,isSDF:w,sectionIndex:E}=n[t],S=m.vertexLength,C=x[1];Mu(f,l.x,l.y,i.x,C+i.y,c.x,c.y,r,w,h.x,h.y,y,b),Mu(f,l.x,l.y,o.x,C+o.y,c.x+c.w,c.y,r,w,g.x,h.y,y,b),Mu(f,l.x,l.y,s.x,C+s.y,c.x,c.y+c.h,r,w,h.x,g.y,y,b),Mu(f,l.x,l.y,u.x,C+u.y,c.x+c.w,c.y+c.h,r,w,g.x,g.y,y,b),Ou(e.dynamicLayoutVertexArray,l,v),p.emplaceBack(S,S+1,S+2),p.emplaceBack(S+1,S+2,S+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(x[0]),t!==n.length-1&&E===n[t+1].sectionIndex||e.programConfigurations.populatePaintArrays(f.length,a,a.index,{},d,_&&_[E])}e.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,y,u,c,l.segment,r?r[0]:0,r?r[1]:0,i[0],i[1],s,0,!1,0,h)}_addCollisionDebugVertex(t,e,n,r,i,o){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))}addCollisionDebugVertices(t,e,n,r,i,o,a){const s=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),l=s.vertexLength,u=i.layoutVertexArray,c=i.collisionVertexArray,h=a.anchorX,d=a.anchorY;this._addCollisionDebugVertex(u,c,o,h,d,new C(t,e)),this._addCollisionDebugVertex(u,c,o,h,d,new C(n,e)),this._addCollisionDebugVertex(u,c,o,h,d,new C(n,r)),this._addCollisionDebugVertex(u,c,o,h,d,new C(t,r)),s.vertexLength+=4;const p=i.indexArray;p.emplaceBack(l,l+1),p.emplaceBack(l+1,l+2),p.emplaceBack(l+2,l+3),p.emplaceBack(l+3,l),s.primitiveLength+=4}addDebugCollisionBoxes(t,e,n,r){for(let i=t;i<e;i++){const t=this.collisionBoxArray.get(i);this.addCollisionDebugVertices(t.x1,t.y1,t.x2,t.y2,r?this.textCollisionBox:this.iconCollisionBox,t.anchorPoint,n)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Lu(uo,il.members,po),this.iconCollisionBox=new Lu(uo,il.members,po);for(let t=0;t<this.symbolInstances.length;t++){const e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}}_deserializeCollisionBoxesForSymbol(t,e,n,r,i,o,a,s,l){const u={};for(let c=e;c<n;c++){const e=t.get(c);u.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},u.textFeatureIndex=e.featureIndex;break}for(let c=r;c<i;c++){const e=t.get(c);u.verticalTextBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},u.verticalTextFeatureIndex=e.featureIndex;break}for(let c=o;c<a;c++){const e=t.get(c);u.iconBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},u.iconFeatureIndex=e.featureIndex;break}for(let c=s;c<l;c++){const e=t.get(c);u.verticalIconBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},u.verticalIconFeatureIndex=e.featureIndex;break}return u}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const n=t.placedSymbolArray.get(e),r=n.vertexStartIndex+4*n.numGlyphs;for(let i=n.vertexStartIndex;i<r;i+=4)t.indexArray.emplaceBack(i,i+1,i+2),t.indexArray.emplaceBack(i+1,i+2,i+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),n=Math.cos(t),r=[],i=[],o=[];for(let a=0;a<this.symbolInstances.length;++a){o.push(a);const t=this.symbolInstances.get(a);r.push(0|Math.round(e*t.anchorX+n*t.anchorY)),i.push(t.featureIndex)}return o.sort(((t,e)=>r[t]-r[e]||i[e]-i[t])),o}addToSortKeyRanges(t,e){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex),[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach(((t,e,n)=>{t>=0&&n.indexOf(t)===e&&this.addIndicesForPlacedSymbol(this.text,t)})),e.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,e.verticalPlacedTextSymbolIndex),e.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.placedIconSymbolIndex),e.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Ir("SymbolBucket",Fu,{omit:["layers","collisionBoxArray","features","compareText"]}),Fu.MAX_GLYPHS=65535,Fu.addDynamicAttributes=Ou;const zu=new pi({"symbol-placement":new li(rt.layout_symbol["symbol-placement"]),"symbol-spacing":new li(rt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new li(rt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ui(rt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new li(rt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new li(rt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new li(rt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new li(rt.layout_symbol["icon-ignore-placement"]),"icon-optional":new li(rt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new li(rt.layout_symbol["icon-rotation-alignment"]),"icon-size":new ui(rt.layout_symbol["icon-size"]),"icon-text-fit":new li(rt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new li(rt.layout_symbol["icon-text-fit-padding"]),"icon-image":new ui(rt.layout_symbol["icon-image"]),"icon-rotate":new ui(rt.layout_symbol["icon-rotate"]),"icon-padding":new ui(rt.layout_symbol["icon-padding"]),"icon-keep-upright":new li(rt.layout_symbol["icon-keep-upright"]),"icon-offset":new ui(rt.layout_symbol["icon-offset"]),"icon-anchor":new ui(rt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new li(rt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new li(rt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new li(rt.layout_symbol["text-rotation-alignment"]),"text-field":new ui(rt.layout_symbol["text-field"]),"text-font":new ui(rt.layout_symbol["text-font"]),"text-size":new ui(rt.layout_symbol["text-size"]),"text-max-width":new ui(rt.layout_symbol["text-max-width"]),"text-line-height":new li(rt.layout_symbol["text-line-height"]),"text-letter-spacing":new ui(rt.layout_symbol["text-letter-spacing"]),"text-justify":new ui(rt.layout_symbol["text-justify"]),"text-radial-offset":new ui(rt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new li(rt.layout_symbol["text-variable-anchor"]),"text-anchor":new ui(rt.layout_symbol["text-anchor"]),"text-max-angle":new li(rt.layout_symbol["text-max-angle"]),"text-writing-mode":new li(rt.layout_symbol["text-writing-mode"]),"text-rotate":new ui(rt.layout_symbol["text-rotate"]),"text-padding":new li(rt.layout_symbol["text-padding"]),"text-keep-upright":new li(rt.layout_symbol["text-keep-upright"]),"text-transform":new ui(rt.layout_symbol["text-transform"]),"text-offset":new ui(rt.layout_symbol["text-offset"]),"text-allow-overlap":new li(rt.layout_symbol["text-allow-overlap"]),"text-overlap":new li(rt.layout_symbol["text-overlap"]),"text-ignore-placement":new li(rt.layout_symbol["text-ignore-placement"]),"text-optional":new li(rt.layout_symbol["text-optional"])});var Bu={paint:new pi({"icon-opacity":new ui(rt.paint_symbol["icon-opacity"]),"icon-color":new ui(rt.paint_symbol["icon-color"]),"icon-halo-color":new ui(rt.paint_symbol["icon-halo-color"]),"icon-halo-width":new ui(rt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ui(rt.paint_symbol["icon-halo-blur"]),"icon-translate":new li(rt.paint_symbol["icon-translate"]),"icon-translate-anchor":new li(rt.paint_symbol["icon-translate-anchor"]),"text-opacity":new ui(rt.paint_symbol["text-opacity"]),"text-color":new ui(rt.paint_symbol["text-color"],{runtimeType:mt,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new ui(rt.paint_symbol["text-halo-color"]),"text-halo-width":new ui(rt.paint_symbol["text-halo-width"]),"text-halo-blur":new ui(rt.paint_symbol["text-halo-blur"]),"text-translate":new li(rt.paint_symbol["text-translate"]),"text-translate-anchor":new li(rt.paint_symbol["text-translate-anchor"])}),layout:zu};class ju{constructor(t){if(void 0===t.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:ht,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ir("FormatSectionOverride",ju,{omit:["defaultValue"]});class Uu extends mi{constructor(t){super(t,Bu)}recalculate(t,e){if(super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const t=this.layout.get("text-writing-mode");if(t){const e=[];for(const n of t)e.indexOf(n)<0&&e.push(n);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,e,n,r){const i=this.layout.get(t).evaluate(e,{},n,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||Rn(o.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,((e,n)=>n in t?String(t[n]):""))}(e.properties,i)}createBucket(t){return new Fu(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of Bu.paint.overridableProperties){if(!Uu.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),n=new ju(e),r=new On(n,e.property.specification);let i=null;i="constant"===e.value.kind||"source"===e.value.kind?new Ln("source",r):new Fn("composite",r,e.value.zoomStops),this.paint._values[t]=new ai(e.property,i,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,n){return!(!this.layout||e.isDataDriven()||n.isDataDriven())&&Uu.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const n=t.get("text-field"),r=Bu.paint.properties[e];let i=!1;const o=t=>{for(const e of t)if(r.overrides&&r.overrides.hasOverride(e))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof Ft)o(n.value.value.sections);else if("source"===n.value.kind){const t=e=>{i||(e instanceof Gt&&Vt(e.value)===_t?o(e.value.sections):e instanceof hn?o(e.sections):e.eachChild(t))},e=n.value;e._styleExpression&&t(e._styleExpression.expression)}return i}}function Vu(t,e,n){let r="never";const i=t.get(e);return i?r=i:t.get(n)&&(r="always"),r}var qu={paint:new pi({"background-color":new li(rt.paint_background["background-color"]),"background-pattern":new hi(rt.paint_background["background-pattern"]),"background-opacity":new li(rt.paint_background["background-opacity"])})},Gu={paint:new pi({"raster-opacity":new li(rt.paint_raster["raster-opacity"]),"raster-hue-rotate":new li(rt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new li(rt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new li(rt.paint_raster["raster-brightness-max"]),"raster-saturation":new li(rt.paint_raster["raster-saturation"]),"raster-contrast":new li(rt.paint_raster["raster-contrast"]),"raster-resampling":new li(rt.paint_raster["raster-resampling"]),"raster-fade-duration":new li(rt.paint_raster["raster-fade-duration"])})};class Yu extends mi{constructor(t){super(t,{}),this.onAdd=t=>{this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},this.onRemove=t=>{this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const $u={circle:class extends mi{constructor(t){super(t,ha)}createBucket(t){return new Xo(t)}queryRadius(t){const e=t;return sa("circle-radius",this,e)+sa("circle-stroke-width",this,e)+la(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,n,r,i,o,a,s){const l=ua(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),u=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),c="map"===this.paint.get("circle-pitch-alignment"),h=c?l:function(t,e){return t.map((t=>Ea(t,e)))}(l,s),d=c?u*a:u;for(const p of r)for(const t of p){const e=c?t:Ea(t,s);let n=d;const r=xa([],[t.x,t.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?n*=r[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(n*=o.cameraToCenterDistance/r[3]),Ko(h,e,n))return!0}return!1}},heatmap:class extends mi{constructor(t){super(t,Ca),this._updateColorRamp()}createBucket(t){return new Sa(t)}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Da({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},hillshade:class extends mi{constructor(t){super(t,Ma)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},fill:class extends mi{constructor(t){super(t,vs)}recalculate(t,e){super.recalculate(t,e);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new gs(t)}queryRadius(){return la(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,n,r,i,o,a){return Qo(ua(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)}isTileClipped(){return!0}},"fill-extrusion":class extends mi{constructor(t){super(t,js)}createBucket(t){return new Fs(t)}queryRadius(){return la(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,e,n,r,i,o,a,s){const l=ua(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),u=this.paint.get("fill-extrusion-height").evaluate(e,n),c=this.paint.get("fill-extrusion-base").evaluate(e,n),h=function(t,e,n,r){const i=[];for(const o of t){const t=[o.x,o.y,0,1];xa(t,t,e),i.push(new C(t[0]/t[3],t[1]/t[3]))}return i}(l,s),d=function(t,e,n,r){const i=[],o=[],a=r[8]*e,s=r[9]*e,l=r[10]*e,u=r[11]*e,c=r[8]*n,h=r[9]*n,d=r[10]*n,p=r[11]*n;for(const f of t){const t=[],e=[];for(const n of f){const i=n.x,o=n.y,f=r[0]*i+r[4]*o+r[12],m=r[1]*i+r[5]*o+r[13],g=r[2]*i+r[6]*o+r[14],y=r[3]*i+r[7]*o+r[15],v=g+l,_=y+u,b=f+c,x=m+h,w=g+d,E=y+p,S=new C((f+a)/_,(m+s)/_);S.z=v/_,t.push(S);const T=new C(b/E,x/E);T.z=w/E,e.push(T)}i.push(t),o.push(e)}return[i,o]}(r,c,u,s);return function(t,e,n){let r=1/0;Qo(n,e)&&(r=Vs(n,e[0]));for(let i=0;i<e.length;i++){const o=e[i],a=t[i];for(let t=0;t<o.length-1;t++){const e=o[t],i=[e,o[t+1],a[t+1],a[t],e];Zo(n,i)&&(r=Math.min(r,Vs(n,i)))}}return r!==1/0&&r}(d[0],d[1],h)}},line:class extends mi{constructor(t){super(t,Qs),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Se,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=Js.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Zs(t)}queryRadius(t){const e=t,n=tl(sa("line-width",this,e),sa("line-gap-width",this,e)),r=sa("line-offset",this,e);return n/2+Math.abs(r)+la(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,n,r,i,o,a){const s=ua(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),l=a/2*tl(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),u=this.paint.get("line-offset").evaluate(e,n);return u&&(r=function(t,e){const n=[];for(let r=0;r<t.length;r++){const i=t[r],o=[];for(let t=0;t<i.length;t++){const n=i[t-1],r=i[t],a=i[t+1],s=0===t?new C(0,0):r.sub(n)._unit()._perp(),l=t===i.length-1?new C(0,0):a.sub(r)._unit()._perp(),u=s._add(l)._unit(),c=u.x*l.x+u.y*l.y;0!==c&&u._mult(1/c),o.push(u._mult(e)._add(r))}n.push(o)}return n}(r,u*a)),function(t,e,n){for(let r=0;r<e.length;r++){const i=e[r];if(t.length>=3)for(let e=0;e<i.length;e++)if(oa(t,i[e]))return!0;if(Jo(t,i,n))return!0}return!1}(s,r,l)}isTileClipped(){return!0}},symbol:Uu,background:class extends mi{constructor(t){super(t,qu)}},raster:class extends mi{constructor(t){super(t,Gu)}}};class Wu{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}const Hu=6371008.8;class Xu{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Xu(a(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return Hu*Math.acos(Math.min(i,1))}toBounds(){const t=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,e=t/Math.cos(Math.PI/180*this.lat);return new Zu(new Xu(this.lng-e,this.lat-t),new Xu(this.lng+e,this.lat+t))}static convert(t){if(t instanceof Xu)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Xu(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Xu(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Zu{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof Xu?new Xu(t.lng,t.lat):Xu.convert(t),this}setSouthWest(t){return this._sw=t instanceof Xu?new Xu(t.lng,t.lat):Xu.convert(t),this}extend(t){const e=this._sw,n=this._ne;let r,i;if(t instanceof Xu)r=t,i=t;else{if(!(t instanceof Zu))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Zu.convert(t)):this.extend(Xu.convert(t)):this;if(r=t._sw,i=t._ne,!r||!i)return this}return e||n?(e.lng=Math.min(r.lng,e.lng),e.lat=Math.min(r.lat,e.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new Xu(r.lng,r.lat),this._ne=new Xu(i.lng,i.lat)),this}getCenter(){return new Xu((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Xu(this.getWest(),this.getNorth())}getSouthEast(){return new Xu(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:n}=Xu.convert(t);let r=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&r}static convert(t){return t instanceof Zu?t:t?new Zu(t):t}}const Ku=2*Math.PI*Hu;function Qu(t){return Ku*Math.cos(t*Math.PI/180)}function Ju(t){return(180+t)/360}function tc(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function ec(t,e){return t/Qu(e)}function nc(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}class rc{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=+t,this.y=+e,this.z=+n}static fromLngLat(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Xu.convert(t);return new rc(Ju(n.lng),tc(n.lat),ec(e,n.lat))}toLngLat(){return new Xu(360*this.x-180,nc(this.y))}toAltitude(){return this.z*Qu(nc(this.y))}meterInMercatorCoordinateUnits(){return 1/Ku*(t=nc(this.y),1/Math.cos(t*Math.PI/180));var t}}function ic(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}class oc{constructor(t,e,n){if(t<0||t>25||n<0||n>=Math.pow(2,t)||e<0||e>=Math.pow(2,t))throw new Error(`x=${e}, y=${n}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=e,this.y=n,this.key=lc(0,t,t,e,n)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e,n){const r=(o=this.y,a=this.z,s=ic(256*(i=this.x),256*(o=Math.pow(2,a)-o-1),a),l=ic(256*(i+1),256*(o+1),a),s[0]+","+s[1]+","+l[0]+","+l[1]);var i,o,a,s,l;const u=function(t,e,n){let r,i="";for(let o=t;o>0;o--)r=1<<o-1,i+=(e&r?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,e>1?"@2x":"").replace(/{quadkey}/g,u).replace(/{bbox-epsg-3857}/g,r)}isChildOf(t){const e=this.z-t.z;return e>0&&t.x===this.x>>e&&t.y===this.y>>e}getTilePoint(t){const e=Math.pow(2,this.z);return new C((t.x*e-this.x)*qo,(t.y*e-this.y)*qo)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ac{constructor(t,e){this.wrap=t,this.canonical=e,this.key=lc(t,e.z,e.z,e.x,e.y)}}class sc{constructor(t,e,n,r,i){if(t<n)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${n}`);this.overscaledZ=t,this.wrap=e,this.canonical=new oc(n,+r,+i),this.key=lc(e,t,n,r,i)}clone(){return new sc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const e=this.canonical.z-t;return t>this.canonical.z?new sc(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new sc(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const n=this.canonical.z-t;return t>this.canonical.z?lc(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):lc(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new sc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new sc(e,this.wrap,e,n,r),new sc(e,this.wrap,e,n+1,r),new sc(e,this.wrap,e,n,r+1),new sc(e,this.wrap,e,n+1,r+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new sc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new sc(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ac(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new rc(t.x-this.wrap,t.y))}}function lc(t,e,n,r,i){(t*=2)<0&&(t=-1*t-1);const o=1<<n;return(o*o*t+o*i+r).toString(36)+n.toString(36)+e.toString(36)}Ir("CanonicalTileID",oc),Ir("OverscaledTileID",sc,{omit:["posMatrix"]});class uc{constructor(t,e,n){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return void f(`"${n}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=e.height;const r=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=n||"mapbox";for(let i=0;i<r;i++)this.data[this._idx(-1,i)]=this.data[this._idx(0,i)],this.data[this._idx(r,i)]=this.data[this._idx(r-1,i)],this.data[this._idx(i,-1)]=this.data[this._idx(i,0)],this.data[this._idx(i,r)]=this.data[this._idx(i,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let i=0;i<r;i++)for(let t=0;t<r;t++){const e=this.get(i,t);e>this.max&&(this.max=e),e<this.min&&(this.min=e)}}get(t,e){const n=new Uint8Array(this.data.buffer),r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[r],n[r+1],n[r+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}_unpackMapbox(t,e,n){return(256*t*256+256*e+n)/10-1e4}_unpackTerrarium(t,e,n){return 256*t+e+n/256-32768}getPixels(){return new Pa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let r=e*this.dim,i=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}const s=-e*this.dim,l=-n*this.dim;for(let u=o;u<a;u++)for(let e=r;e<i;e++)this.data[this._idx(e,u)]=t.data[this._idx(e+s,u+l)]}}Ir("DEMData",uc);class cc{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class hc{constructor(t,e,n,r,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t}}class dc{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Cr(qo,16,0),this.grid3D=new Cr(qo,16,0),this.featureIndexArray=new Qi,this.promoteId=e}insert(t,e,n,r,i,o){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);const s=o?this.grid3D:this.grid;for(let l=0;l<e.length;l++){const t=e[l],n=[1/0,1/0,-1/0,-1/0];for(let e=0;e<t.length;e++){const r=t[e];n[0]=Math.min(n[0],r.x),n[1]=Math.min(n[1],r.y),n[2]=Math.max(n[2],r.x),n[3]=Math.max(n[3],r.y)}n[0]<qo&&n[1]<qo&&n[2]>=0&&n[3]>=0&&s.insert(a,n[0],n[1],n[2],n[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ws.VectorTile(new ul(this.rawTileData)).layers,this.sourceLayerCoder=new cc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,e,n,r){this.loadVTLayers();const i=t.params||{},o=qo/t.tileSize/t.scale,a=Xn(i.filter),s=t.queryGeometry,l=t.queryPadding*o,u=fc(s),c=this.grid.query(u.minX-l,u.minY-l,u.maxX+l,u.maxY+l),h=fc(t.cameraQueryGeometry),d=this.grid3D.query(h.minX-l,h.minY-l,h.maxX+l,h.maxY+l,((e,n,r,i)=>function(t,e,n,r,i){for(const a of t)if(e<=a.x&&n<=a.y&&r>=a.x&&i>=a.y)return!0;const o=[new C(e,n),new C(e,i),new C(r,i),new C(r,n)];if(t.length>2)for(const a of o)if(oa(t,a))return!0;for(let a=0;a<t.length-1;a++)if(aa(t[a],t[a+1],o))return!0;return!1}(t.cameraQueryGeometry,e-l,n-l,r+l,i+l)));for(const m of d)c.push(m);c.sort(mc);const p={};let f;for(let m=0;m<c.length;m++){const l=c[m];if(l===f)continue;f=l;const u=this.featureIndexArray.get(l);let h=null;this.loadMatchingFeature(p,u.bucketIndex,u.sourceLayerIndex,u.featureIndex,a,i.layers,i.availableImages,e,n,r,((e,n,r)=>(h||(h=$o(e)),n.queryIntersectsFeature(s,e,r,h,this.z,t.transform,o,t.pixelPosMatrix))))}return p}loadMatchingFeature(t,e,n,r,i,o,a,l,u,c,h){const d=this.bucketLayerIDs[e];if(o&&!function(t,e){for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,d))return;const p=this.sourceLayerCoder.decode(n),f=this.vtLayers[p].feature(r);if(i.needGeometry){const t=Wo(f,!0);if(!i.filter(new Jr(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!i.filter(new Jr(this.tileID.overscaledZ),f))return;const m=this.getId(f,p);for(let g=0;g<d.length;g++){const e=d[g];if(o&&o.indexOf(e)<0)continue;const n=l[e];if(!n)continue;let i={};m&&c&&(i=c.getState(n.sourceLayer||"_geojsonTileLayer",m));const p=s({},u[e]);p.paint=pc(p.paint,n.paint,f,i,a),p.layout=pc(p.layout,n.layout,f,i,a);const y=!h||h(f,n,i);if(!y)continue;const v=new hc(f,this.z,this.x,this.y,m);v.layer=p;let _=t[e];void 0===_&&(_=t[e]=[]),_.push({featureIndex:r,feature:v,intersectionZ:y})}}lookupSymbolFeatures(t,e,n,r,i,o,a,s){const l={};this.loadVTLayers();const u=Xn(i);for(const c of t)this.loadMatchingFeature(l,n,r,c,u,o,a,s,e);return l}hasLayer(t){for(const e of this.bucketLayerIDs)for(const n of e)if(t===n)return!0;return!1}getId(t,e){let n=t.id;return this.promoteId&&(n=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]],"boolean"==typeof n&&(n=Number(n))),n}}function pc(t,e,n,r,i){return c(t,((t,o)=>{const a=e instanceof si?e.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a}))}function fc(t){let e=1/0,n=1/0,r=-1/0,i=-1/0;for(const o of t)e=Math.min(e,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x),i=Math.max(i,o.y);return{minX:e,minY:n,maxX:r,maxY:i}}function mc(t,e){return e-t}var gc;Ir("FeatureIndex",dc,{omit:["rawTileData","sourceLayerCoder"]}),t.PerformanceMarkers=void 0,(gc=t.PerformanceMarkers||(t.PerformanceMarkers={})).create="create",gc.load="load",gc.fullLoad="fullLoad";let yc=null,vc=[];const _c=1e3/30,bc={mark(t){performance.mark(t)},frame(t){const e=t;null!=yc&&vc.push(e-yc),yc=e},clearMetrics(){yc=null,vc=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const e in t.PerformanceMarkers)performance.clearMarks(t.PerformanceMarkers[e])},getPerformanceMetrics(){performance.measure("loadTime",t.PerformanceMarkers.create,t.PerformanceMarkers.load),performance.measure("fullLoadTime",t.PerformanceMarkers.create,t.PerformanceMarkers.fullLoad);const e=performance.getEntriesByName("loadTime")[0].duration,n=performance.getEntriesByName("fullLoadTime")[0].duration,r=vc.length,i=1/(vc.reduce(((t,e)=>t+e),0)/r/1e3),o=vc.filter((t=>t>_c)).reduce(((t,e)=>t+(e-_c)/_c),0);return{loadTime:e,fullLoadTime:n,fps:i,percentDroppedFrames:o/(r+o)*100}}};t.AJAXError=V,t.ARRAY_TYPE=pa,t.Actor=class{constructor(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},u(["receive","process"],this),this.invoker=new Wu(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=y()?t:window}send(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[o]=n);const a=w(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:t,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:Ar(e,a)},a),{cancel:()=>{n&&delete this.callbacks[o],this.target.postMessage({id:o,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}}receive(t){const e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[n];const t=this.cancelCallbacks[n];delete this.cancelCallbacks[n],t&&t()}else y()||e.mustQueue?(this.tasks[n]=e,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,e)}process(){if(!this.taskQueue.length)return;const t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}processTask(t,e){if("<response>"===e.type){const n=this.callbacks[t];delete this.callbacks[t],n&&(e.error?n(Pr(e.error)):n(null,Pr(e.data)))}else{let n=!1;const r=w(this.globalScope)?void 0:[],i=e.hasCallback?(e,i)=>{n=!0,delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?Ar(e):null,data:Ar(i,r)},r)}:t=>{n=!0};let o=null;const a=Pr(e.data);if(this.parent[e.type])o=this.parent[e.type](e.sourceMapId,a,i);else if(this.parent.getWorkerSource){const t=e.type.split(".");o=this.parent.getWorkerSource(e.sourceMapId,t[0],a.source)[t[1]](a,i)}else i(new Error(`Could not find function ${e.type}`));!n&&o&&o.cancel&&(this.cancelCallbacks[t]=o.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.AlphaImage=Aa,t.CanonicalTileID=oc,t.CollisionBoxArray=Gi,t.CollisionCircleLayoutArray=class extends Mi{},t.Color=Rt,t.DEMData=uc,t.DataConstantProperty=li,t.DictionaryCoder=cc,t.EXTENT=qo,t.ErrorEvent=et,t.EvaluationParameters=Jr,t.Event=tt,t.Evented=nt,t.FeatureIndex=dc,t.FillBucket=gs,t.FillExtrusionBucket=Fs,t.GeoJSONFeature=hc,t.ImageAtlas=Fl,t.ImagePosition=Ll,t.LineBucket=Zs,t.LineStripIndexArray=class extends Ui{},t.LngLat=Xu,t.LngLatBounds=Zu,t.MercatorCoordinate=rc,t.ONE_EM=ll,t.OverscaledTileID=sc,t.PerformanceUtils=bc,t.PosArray=Ji,t.Properties=pi,t.QuadTriangleArray=class extends Ri{},t.RGBAImage=Pa,t.RasterBoundsArray=class extends wi{},t.RequestPerformance=class{constructor(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let t=performance.getEntriesByName(this._marks.measure);return 0===t.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),t=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),t}},t.ResourceType=U,t.SegmentVector=go,t.SymbolBucket=Fu,t.Transitionable=ni,t.TriangleIndexArray=ho,t.Uniform1f=Ao,t.Uniform1i=class extends ko{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))}},t.Uniform2f=class extends ko{constructor(t,e){super(t,e),this.current=[0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))}},t.Uniform3f=class extends ko{constructor(t,e){super(t,e),this.current=[0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))}},t.Uniform4f=Po,t.UniformColor=Do,t.UniformMatrix4f=class extends ko{constructor(t,e){super(t,e),this.current=Mo}set(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(let e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}},t.UnwrappedTileID=ac,t.ValidationError=it,t.ZoomHistory=Dr,t.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},t.addDynamicAttributes=Ou,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);let r=t.length;const i=new Array(t.length);let o=null;t.forEach(((t,a)=>{e(t,((t,e)=>{t&&(o=t),i[a]=e,0==--r&&n(o,i)}))}))},t.bezier=r,t.bindAll=u,t.cacheEntryPossiblyAdded=function(t){R++,R>M&&(t.getActor().send("enforceCacheSizeLimit",D),R=0)},t.clamp=o,t.clearTileCache=function(t){const e=caches.delete(k);t&&e.catch(t).then((()=>t()))},t.clipLine=cu,t.clone=function(t){var e=new pa(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=d,t.clone$2=function(t){var e=new pa(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.collisionCircleLayout=ol,t.config=I,t.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.create=function(){var t=new pa(16);return pa!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=fa,t.createExpression=Nn,t.createFilter=Xn,t.createLayout=_i,t.createStyleLayer=function(t){return"custom"===t.type?new Yu(t):new $u[t.type](t)},t.cross=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],l=n[2];return t[0]=i*l-o*s,t[1]=o*a-r*l,t[2]=r*s-i*a,t},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=i,t.emitValidationErrors=Sr,t.enforceCacheSizeLimit=function(t){O(),A&&A.then((e=>{e.keys().then((n=>{for(let r=0;r<n.length-t;r++)e.delete(n[r])}))}))},t.equals=function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15],v=e[0],_=e[1],b=e[2],x=e[3],w=e[4],E=e[5],S=e[6],C=e[7],T=e[8],I=e[9],k=e[10],A=e[11],P=e[12],D=e[13],M=e[14],O=e[15];return Math.abs(n-v)<=da*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-_)<=da*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-b)<=da*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-x)<=da*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-w)<=da*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-E)<=da*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(l-S)<=da*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-C)<=da*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(c-T)<=da*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(h-I)<=da*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(d-k)<=da*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(p-A)<=da*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(f-P)<=da*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(m-D)<=da*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(g-M)<=da*Math.max(1,Math.abs(g),Math.abs(M))&&Math.abs(y-O)<=da*Math.max(1,Math.abs(y),Math.abs(O))},t.evaluateSizeForFeature=function(t,e,n){let{uSize:r,uSizeT:i}=e,{lowerSize:o,upperSize:a}=n;return"source"===t.kind?o/tu:"composite"===t.kind?Ce(o/tu,a/tu,i):r},t.evaluateSizeForZoom=function(t,e){let n=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){const{interpolationType:i,minZoom:a,maxZoom:s}=t,l=i?o(Ge.interpolationFactor(i,e,a,s),0,1):0;"camera"===t.kind?r=Ce(t.minSize,t.maxSize,l):n=l}return{uSizeT:n,uSize:r}},t.evaluateVariableOffset=Eu,t.evented=Xr,t.exported=S,t.exported$1=N,t.extend=s,t.filterObject=h,t.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.getAnchorAlignment=Zl,t.getAnchorJustification=Su,t.getArrayBuffer=$,t.getImage=K,t.getJSON=function(t,e){return Y(s(t,{type:"json"}),e)},t.getOverlapMode=Vu,t.getRTLTextPluginStatus=Zr,t.getReferrer=q,t.getVideo=function(t,e){const n=window.document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(let r=0;r<t.length;r++){const e=window.document.createElement("source");W(t[r])||(n.crossOrigin="Anonymous"),e.src=t[r],n.appendChild(e)}return{cancel:()=>{}}},t.identity=ma,t.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],g=e[14],y=e[15],v=n*s-r*a,_=n*l-i*a,b=n*u-o*a,x=r*l-i*s,w=r*u-o*s,E=i*u-o*l,S=c*m-h*f,C=c*g-d*f,T=c*y-p*f,I=h*g-d*m,k=h*y-p*m,A=d*y-p*g,P=v*A-_*k+b*I+x*T-w*C+E*S;return P?(t[0]=(s*A-l*k+u*I)*(P=1/P),t[1]=(i*k-r*A-o*I)*P,t[2]=(m*E-g*w+y*x)*P,t[3]=(d*w-h*E-p*x)*P,t[4]=(l*T-a*A-u*C)*P,t[5]=(n*A-i*T+o*C)*P,t[6]=(g*b-f*E-y*_)*P,t[7]=(c*E-d*b+p*_)*P,t[8]=(a*k-s*T+u*S)*P,t[9]=(r*T-n*k-o*S)*P,t[10]=(f*w-m*b+y*v)*P,t[11]=(h*b-c*w-p*v)*P,t[12]=(s*C-a*I-l*S)*P,t[13]=(n*I-r*C+i*S)*P,t[14]=(m*_-f*x-g*v)*P,t[15]=(c*x-h*_+d*v)*P,t):null},t.isImageBitmap=E,t.isSafari=w,t.isWorker=y,t.keysDifference=function(t,e){const n=[];for(const r in t)r in e||n.push(r);return n},t.lazyLoadRTLTextPlugin=function(){Qr.isLoading()||Qr.isLoaded()||"deferred"!==Zr()||Kr()},t.makeRequest=Y,t.mapObject=c,t.mercatorXfromLng=Ju,t.mercatorYfromLat=tc,t.mercatorZfromAltitude=ec,t.mul=va,t.mul$1=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},t.multiply=ga,t.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.normalize=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},t.number=Ce,t.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),l=1/(r-i),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(a+o)*u,t[15]=1,t},t.parseCacheControl=v,t.parseGlyphPbf=function(t){return new ul(t).readFields(Ml,[])},t.pbf=ul,t.performSymbolLayout=function(e){e.bucket.createArrays(),e.bucket.tilePixelRatio=qo/(512*e.bucket.overscaling),e.bucket.compareText={},e.bucket.iconsNeedLinear=!1;const n=e.bucket.layers[0].layout,r=e.bucket.layers[0]._unevaluatedLayout._values,i={layoutIconSize:r["icon-size"].possiblyEvaluate(new Jr(e.bucket.zoom+1),e.canonical),layoutTextSize:r["text-size"].possiblyEvaluate(new Jr(e.bucket.zoom+1),e.canonical),textMaxSize:r["text-size"].possiblyEvaluate(new Jr(18))};if("composite"===e.bucket.textSizeData.kind){const{minZoom:t,maxZoom:n}=e.bucket.textSizeData;i.compositeTextSizes=[r["text-size"].possiblyEvaluate(new Jr(t),e.canonical),r["text-size"].possiblyEvaluate(new Jr(n),e.canonical)]}if("composite"===e.bucket.iconSizeData.kind){const{minZoom:t,maxZoom:n}=e.bucket.iconSizeData;i.compositeIconSizes=[r["icon-size"].possiblyEvaluate(new Jr(t),e.canonical),r["icon-size"].possiblyEvaluate(new Jr(n),e.canonical)]}const o=n.get("text-line-height")*ll,a="viewport"!==n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement"),s=n.get("text-keep-upright"),l=n.get("text-size");for(const u of e.bucket.features){const r=n.get("text-font").evaluate(u,{},e.canonical).join(","),c=l.evaluate(u,{},e.canonical),h=i.layoutTextSize.evaluate(u,{},e.canonical),d=i.layoutIconSize.evaluate(u,{},e.canonical),p={horizontal:{},vertical:void 0},m=u.text;let g,y=[0,0];if(m){const i=m.toString(),l=n.get("text-letter-spacing").evaluate(u,{},e.canonical)*ll,d=Rr(i)?l:0,f=n.get("text-anchor").evaluate(u,{},e.canonical),g=n.get("text-variable-anchor");if(!g){const t=n.get("text-radial-offset").evaluate(u,{},e.canonical);y=t?Eu(f,[t*ll,wu]):n.get("text-offset").evaluate(u,{},e.canonical).map((t=>t*ll))}let v=a?"center":n.get("text-justify").evaluate(u,{},e.canonical);const _=n.get("symbol-placement"),b="point"===_?n.get("text-max-width").evaluate(u,{},e.canonical)*ll:0,x=()=>{e.bucket.allowVerticalPlacement&&Or(i)&&(p.vertical=Ul(m,e.glyphMap,e.glyphPositions,e.imagePositions,r,b,o,f,"left",d,y,t.WritingMode.vertical,!0,_,h,c))};if(!a&&g){const n="auto"===v?g.map((t=>Su(t))):[v];let i=!1;for(let a=0;a<n.length;a++){const s=n[a];if(!p.horizontal[s])if(i)p.horizontal[s]=p.horizontal[0];else{const n=Ul(m,e.glyphMap,e.glyphPositions,e.imagePositions,r,b,o,"center",s,d,y,t.WritingMode.horizontal,!1,_,h,c);n&&(p.horizontal[s]=n,i=1===n.positionedLines.length)}}x()}else{"auto"===v&&(v=Su(f));const n=Ul(m,e.glyphMap,e.glyphPositions,e.imagePositions,r,b,o,f,v,d,y,t.WritingMode.horizontal,!1,_,h,c);n&&(p.horizontal[v]=n),x(),Or(i)&&a&&s&&(p.vertical=Ul(m,e.glyphMap,e.glyphPositions,e.imagePositions,r,b,o,f,v,d,y,t.WritingMode.vertical,!1,_,h,c))}}let v=!1;if(u.icon&&u.icon.name){const t=e.imageMap[u.icon.name];t&&(g=Ql(e.imagePositions[u.icon.name],n.get("icon-offset").evaluate(u,{},e.canonical),n.get("icon-anchor").evaluate(u,{},e.canonical)),v=!!t.sdf,void 0===e.bucket.sdfIcons?e.bucket.sdfIcons=v:e.bucket.sdfIcons!==v&&f("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.bucket.pixelRatio||0!==n.get("icon-rotate").constantOr(1))&&(e.bucket.iconsNeedLinear=!0))}const _=ku(p.horizontal)||p.vertical;e.bucket.iconsInText=!!_&&_.iconsInText,(_||g)&&Cu(e.bucket,u,p,g,e.imageMap,i,h,d,y,v,e.canonical)}e.showCollisionBoxes&&e.bucket.generateCollisionDebugBuffers()},t.perspective=function(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(o=1/(r-i)),t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){const n={};for(let r=0;r<e.length;r++){const i=e[r];i in t&&(n[i]=t[i])}return n},t.plugin=Qr,t.pointGeometry=C,t.polygonIntersectsPolygon=Zo,t.potpack=Nl,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Ir,t.registerForPluginStateChange=function(t){return t({pluginStatus:Yr,pluginURL:$r}),Xr.on("pluginStateChange",t),t},t.renderColorRamp=Da,t.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+u*r,t[5]=a*i+c*r,t[6]=s*i+h*r,t[7]=l*i+d*r,t[8]=u*i-o*r,t[9]=c*i-a*r,t[10]=h*i-s*r,t[11]=d*i-l*r,t},t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+u*r,t[1]=a*i+c*r,t[2]=s*i+h*r,t[3]=l*i+d*r,t[4]=u*i-o*r,t[5]=c*i-a*r,t[6]=h*i-s*r,t[7]=d*i-l*r,t},t.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},t.setCacheLimits=function(t,e){D=t,M=e},t.setRTLTextPlugin=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Yr===Ur||Yr===Vr||Yr===qr)throw new Error("setRTLTextPlugin cannot be called multiple times.");$r=S.resolveURL(t),Yr=Ur,Gr=e,Hr(),n||Kr()},t.spec=rt,t.sphericalToCartesian=function(t){let[e,n,r]=t;return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(r),y:e*Math.sin(n)*Math.sin(r),z:e*Math.cos(r)}},t.sqrLen=function(t){var e=t[0],n=t[1];return e*e+n*n},t.sub=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},t.toEvaluationFeature=Wo,t.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},t.transformMat4=xa,t.transformMat4$1=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t},t.translate=function(t,e,n){var r,i,o,a,s,l,u,c,h,d,p,f,m=n[0],g=n[1],y=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],p=e[10],f=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=d,t[10]=p,t[11]=f,t[12]=r*m+s*g+h*y+e[12],t[13]=i*m+l*g+d*y+e[13],t[14]=o*m+u*g+p*y+e[14],t[15]=a*m+c*g+f*y+e[15]),t},t.triggerPluginCompletionEvent=Wr,t.unicodeBlockLookup=Mr,t.uniqueId=function(){return l++},t.validateCustomStyleLayer=function(t){const e=[],n=t.id;return void 0===n&&e.push({message:`layers.${n}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${n}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),e},t.validateLight=xr,t.validateStyle=br,t.vectorTile=ws,t.warnOnce=f,t.wrap=a})),r(["./shared"],(function(t){function e(t){const n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){let n="[";for(const r of t)n+=`${e(r)},`;return`${n}]`}const r=Object.keys(t).sort();let i="{";for(let o=0;o<r.length;o++)i+=`${JSON.stringify(r[o])}:${e(t[r[o]])},`;return`${i}}`}function n(n){let r="";for(const i of t.refProperties)r+=`/${e(n[i])}`;return r}class r{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,r){for(const n of e){this._layerConfigs[n.id]=n;const e=this._layers[n.id]=t.createStyleLayer(n);e._featureFilter=t.createFilter(e.filter),this.keyCache[n.id]&&delete this.keyCache[n.id]}for(const t of r)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const i=function(t,e){const r={};for(let o=0;o<t.length;o++){const i=e&&e[t[o].id]||n(t[o]);e&&(e[t[o].id]=i);let a=r[i];a||(a=r[i]=[]),a.push(t[o])}const i=[];for(const n in r)i.push(r[n]);return i}(Object.values(this._layerConfigs),this.keyCache);for(const t of i){const e=t.map((t=>this._layers[t.id])),n=e[0];if("none"===n.visibility)continue;const r=n.source||"";let i=this.familiesBySource[r];i||(i=this.familiesBySource[r]={});const o=n.sourceLayer||"_geojsonTileLayer";let a=i[o];a||(a=i[o]=[]),a.push(e)}}}class i{constructor(e){const n={},r=[];for(const t in e){const i=e[t],o=n[t]={};for(const t in i){const e=i[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const n={x:0,y:0,w:e.bitmap.width+2,h:e.bitmap.height+2};r.push(n),o[t]={rect:n,metrics:e.metrics}}}const{w:i,h:o}=t.potpack(r),a=new t.AlphaImage({width:i||1,height:o||1});for(const s in e){const r=e[s];for(const e in r){const i=r[+e];if(!i||0===i.bitmap.width||0===i.bitmap.height)continue;const o=n[s][e].rect;t.AlphaImage.copy(i.bitmap,a,{x:0,y:0},{x:o.x+1,y:o.y+1},i.bitmap)}}this.image=a,this.positions=n}}t.register("GlyphAtlas",i);class o{constructor(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId}parse(e,n,r,o,s){this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;const l=new t.DictionaryCoder(Object.keys(e.layers).sort()),u=new t.FeatureIndex(this.tileID,this.promoteId);u.bucketLayerIDs=[];const c={},h={featureIndex:u,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:r},d=n.familiesBySource[this.source];for(const i in d){const n=e.layers[i];if(!n)continue;1===n.version&&t.warnOnce(`Vector tile source "${this.source}" layer "${i}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const o=l.encode(i),s=[];for(let t=0;t<n.length;t++){const e=n.feature(t),r=u.getId(e,i);s.push({feature:e,id:r,index:t,sourceLayerIndex:o})}for(const e of d[i]){const n=e[0];n.source!==this.source&&t.warnOnce(`layer.source = ${n.source} does not equal this.source = ${this.source}`),n.minzoom&&this.zoom<Math.floor(n.minzoom)||n.maxzoom&&this.zoom>=n.maxzoom||"none"!==n.visibility&&(a(e,this.zoom,r),(c[n.id]=n.createBucket({index:u.bucketLayerIDs.length,layers:e,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:o,sourceID:this.source})).populate(s,h,this.tileID.canonical),u.bucketLayerIDs.push(e.map((t=>t.id))))}}let p,f,m,g;const y=t.mapObject(h.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(y).length?o.send("getGlyphs",{uid:this.uid,stacks:y},((t,e)=>{p||(p=t,f=e,b.call(this))})):f={};const v=Object.keys(h.iconDependencies);v.length?o.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"icons"},((t,e)=>{p||(p=t,m=e,b.call(this))})):m={};const _=Object.keys(h.patternDependencies);function b(){if(p)return s(p);if(f&&m&&g){const e=new i(f),n=new t.ImageAtlas(m,g);for(const i in c){const o=c[i];o instanceof t.SymbolBucket?(a(o.layers,this.zoom,r),t.performSymbolLayout({bucket:o,glyphMap:f,glyphPositions:e.positions,imageMap:m,imagePositions:n.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):o.hasPattern&&(o instanceof t.LineBucket||o instanceof t.FillBucket||o instanceof t.FillExtrusionBucket)&&(a(o.layers,this.zoom,r),o.addFeatures(h,this.tileID.canonical,n.patternPositions))}this.status="done",s(null,{buckets:Object.values(c).filter((t=>!t.isEmpty())),featureIndex:u,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:n,glyphMap:this.returnDependencies?f:null,iconMap:this.returnDependencies?m:null,glyphPositions:this.returnDependencies?e.positions:null})}}_.length?o.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"patterns"},((t,e)=>{p||(p=t,g=e,b.call(this))})):g={},b.call(this)}}function a(e,n,r){const i=new t.EvaluationParameters(n);for(const t of e)t.recalculate(i,r)}function s(e,n){const r=t.getArrayBuffer(e.request,((e,r,i,o)=>{e?n(e):r&&n(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(r)),rawData:r,cacheControl:i,expires:o})}));return()=>{r.cancel(),n()}}class l{constructor(t,e,n,r){this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=r||s,this.loading={},this.loaded={}}loadTile(e,n){const r=e.uid;this.loading||(this.loading={});const i=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),a=this.loading[r]=new o(e);a.abort=this.loadVectorData(e,((e,o)=>{if(delete this.loading[r],e||!o)return a.status="done",this.loaded[r]=a,n(e);const s=o.rawData,l={};o.expires&&(l.expires=o.expires),o.cacheControl&&(l.cacheControl=o.cacheControl);const u={};if(i){const t=i.finish();t&&(u.resourceTiming=JSON.parse(JSON.stringify(t)))}a.vectorTile=o.vectorTile,a.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((e,r)=>{if(e||!r)return n(e);n(null,t.extend({rawTileData:s.slice(0)},r,l,u))})),this.loaded=this.loaded||{},this.loaded[r]=a}))}reloadTile(t,e){const n=this.loaded,r=t.uid,i=this;if(n&&n[r]){const o=n[r];o.showCollisionBoxes=t.showCollisionBoxes;const a=(t,n)=>{const r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,this.availableImages,i.actor,r)),e(t,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(t,e){const n=this.loading,r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()}removeTile(t,e){const n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()}}class u{constructor(){this.loaded={}}loadTile(e,n){const{uid:r,encoding:i,rawImageData:o}=e,a=t.isImageBitmap(o)?this.getImageData(o):o,s=new t.DEMData(r,a,i);this.loaded=this.loaded||{},this.loaded[r]=s,n(null,s)}getImageData(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const n=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:n.width,height:n.height},n.data)}removeTile(t){const e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]}}var c=function t(e,n){var r,i=e&&e.type;if("FeatureCollection"===i)for(r=0;r<e.features.length;r++)t(e.features[r],n);else if("GeometryCollection"===i)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],n);else if("Feature"===i)t(e.geometry,n);else if("Polygon"===i)h(e.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<e.coordinates.length;r++)h(e.coordinates[r],n);return e};function h(t,e){if(0!==t.length){d(t[0],e);for(var n=1;n<t.length;n++)d(t[n],!e)}}function d(t,e){for(var n=0,r=0,i=0,o=t.length,a=o-1;i<o;a=i++){var s=(t[i][0]-t[a][0])*(t[a][1]+t[i][1]),l=n+s;r+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+r>=0!=!!e&&t.reverse()}const p=t.vectorTile.VectorTileFeature.prototype.toGeoJSON;class f{constructor(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const n of this._feature.geometry)e.push([new t.pointGeometry(n[0],n[1])]);return e}{const e=[];for(const n of this._feature.geometry){const r=[];for(const e of n)r.push(new t.pointGeometry(e[0],e[1]));e.push(r)}return e}}toGeoJSON(t,e,n){return p.call(this,t,e,n)}}class m{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e}feature(t){return new f(this._features[t])}}var g={exports:{}},y=t.pointGeometry,v=t.vectorTile.VectorTileFeature,_=b;function b(t,e){this.options=e||{},this.features=t,this.length=t.length}function x(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}b.prototype.feature=function(t){return new x(this.features[t],this.options.extent)},x.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],r=[],i=0;i<n.length;i++)r.push(new y(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},x.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[e,r,n,i]},x.prototype.toGeoJSON=v.prototype.toGeoJSON;var w=t.pbf,E=_;function S(t){var e=new w;return function(t,e){for(var n in t.layers)e.writeMessage(3,C,t.layers[n])}(t,e),e.finish()}function C(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,T,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,D,o[n])}function T(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,I,t),e.writeVarintField(3,n.type),e.writeMessage(4,P,n)}function I(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var l=n.properties[s],u=o[s];if(null!==l){void 0===u&&(r.push(s),o[s]=u=r.length-1),e.writeVarint(u);var c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var h=c+":"+l,d=a[h];void 0===d&&(i.push(l),a[h]=d=i.length-1),e.writeVarint(d)}}}function k(t,e){return(e<<3)+(7&t)}function A(t){return t<<1^t>>31}function P(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],u=1;1===r&&(u=l.length),e.writeVarint(k(1,u));for(var c=3===r?l.length-1:l.length,h=0;h<c;h++){1===h&&1!==r&&e.writeVarint(k(2,c-1));var d=l[h].x-i,p=l[h].y-o;e.writeVarint(A(d)),e.writeVarint(A(p)),i+=d,o+=p}3===r&&e.writeVarint(k(7,1))}}function D(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function M(t,e,n,r,i,o){if(i-r<=n)return;const a=r+i>>1;O(t,e,a,r,i,o%2),M(t,e,n,r,a-1,o+1),M(t,e,n,a+1,i,o+1)}function O(t,e,n,r,i,o){for(;i>r;){if(i-r>600){const a=i-r+1,s=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);O(t,e,n,Math.max(r,Math.floor(n-s*u/a+c)),Math.min(i,Math.floor(n+(a-s)*u/a+c)),o)}const a=e[2*n+o];let s=r,l=i;for(R(t,e,r,n),e[2*i+o]>a&&R(t,e,r,i);s<l;){for(R(t,e,s,l),s++,l--;e[2*s+o]<a;)s++;for(;e[2*l+o]>a;)l--}e[2*r+o]===a?R(t,e,r,l):(l++,R(t,e,l,i)),l<=n&&(r=l+1),n<=l&&(i=l-1)}}function R(t,e,n,r){N(t,n,r),N(e,2*n,2*r),N(e,2*n+1,2*r+1)}function N(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function L(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}g.exports=S,g.exports.fromVectorTileJs=S,g.exports.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new E(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return S({layers:n})},g.exports.GeoJSONWrapper=E;const F=t=>t[0],z=t=>t[1];class B{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:z,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Float64Array;this.nodeSize=r,this.points=t;const o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new i(2*t.length);for(let l=0;l<t.length;l++)a[l]=l,s[2*l]=e(t[l]),s[2*l+1]=n(t[l]);M(a,s,r,0,a.length-1,0)}range(t,e,n,r){return function(t,e,n,r,i,o,a){const s=[0,t.length-1,0],l=[];let u,c;for(;s.length;){const h=s.pop(),d=s.pop(),p=s.pop();if(d-p<=a){for(let a=p;a<=d;a++)u=e[2*a],c=e[2*a+1],u>=n&&u<=i&&c>=r&&c<=o&&l.push(t[a]);continue}const f=Math.floor((p+d)/2);u=e[2*f],c=e[2*f+1],u>=n&&u<=i&&c>=r&&c<=o&&l.push(t[f]);const m=(h+1)%2;(0===h?n<=u:r<=c)&&(s.push(p),s.push(f-1),s.push(m)),(0===h?i>=u:o>=c)&&(s.push(f+1),s.push(d),s.push(m))}return l}(this.ids,this.coords,t,e,n,r,this.nodeSize)}within(t,e,n){return function(t,e,n,r,i,o){const a=[0,t.length-1,0],s=[],l=i*i;for(;a.length;){const u=a.pop(),c=a.pop(),h=a.pop();if(c-h<=o){for(let i=h;i<=c;i++)L(e[2*i],e[2*i+1],n,r)<=l&&s.push(t[i]);continue}const d=Math.floor((h+c)/2),p=e[2*d],f=e[2*d+1];L(p,f,n,r)<=l&&s.push(t[d]);const m=(u+1)%2;(0===u?n-i<=p:r-i<=f)&&(a.push(h),a.push(d-1),a.push(m)),(0===u?n+i>=p:r+i>=f)&&(a.push(d+1),a.push(c),a.push(m))}return s}(this.ids,this.coords,t,e,n,this.nodeSize)}}const j={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},U=Math.fround||(V=new Float32Array(1),t=>(V[0]=+t,V[0]));var V;class q{constructor(t){this.options=K(Object.create(j),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:n,maxZoom:r,nodeSize:i}=this.options;e&&console.time("total time");const o=`prepare ${t.length} points`;e&&console.time(o),this.points=t;let a=[];for(let s=0;s<t.length;s++)t[s].geometry&&a.push(Y(t[s],s));this.trees[r+1]=new B(a,Q,J,i,Float32Array),e&&console.timeEnd(o);for(let s=r;s>=n;s--){const t=+Date.now();a=this._cluster(a,s),this.trees[s]=new B(a,Q,J,i,Float32Array),e&&console.log("z%d: %d clusters in %dms",s,a.length,+Date.now()-t)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,t[1]));let i=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){const t=this.getClusters([n,r,180,o],e),a=this.getClusters([-180,r,i,o],e);return t.concat(a)}const a=this.trees[this._limitZoom(e)],s=a.range(H(n),X(o),H(i),X(r)),l=[];for(const u of s){const t=a.points[u];l.push(t.numPoints?$(t):this.points[t.index])}return l}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.points[e];if(!o)throw new Error(r);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),l=[];for(const u of s){const e=i.points[u];e.parentId===t&&l.push(e.numPoints?$(e):this.points[e.index])}if(0===l.length)throw new Error(r);return l}getLeaves(t,e,n){const r=[];return this._appendLeaves(r,t,e=e||10,n=n||0,0),r}getTile(t,e,n){const r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),{extent:o,radius:a}=this.options,s=a/o,l=(n-s)/i,u=(n+1+s)/i,c={features:[]};return this._addTileFeatures(r.range((e-s)/i,l,(e+1+s)/i,u),r.points,e,n,i,c),0===e&&this._addTileFeatures(r.range(1-s/i,l,1,u),r.points,i,n,i,c),e===i-1&&this._addTileFeatures(r.range(0,l,s/i,u),r.points,-1,n,i,c),c.features.length?c:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,r,i){const o=this.getChildren(e);for(const a of o){const e=a.properties;if(e&&e.cluster?i+e.point_count<=r?i+=e.point_count:i=this._appendLeaves(t,e.cluster_id,n,r,i):i<r?i++:t.push(a),t.length===n)break}return i}_addTileFeatures(t,e,n,r,i,o){for(const a of t){const t=e[a],s=t.numPoints;let l,u,c;if(s)l=W(t),u=t.x,c=t.y;else{const e=this.points[t.index];l=e.properties,u=H(e.geometry.coordinates[0]),c=X(e.geometry.coordinates[1])}const h={type:1,geometry:[[Math.round(this.options.extent*(u*i-n)),Math.round(this.options.extent*(c*i-r))]],tags:l};let d;s?d=t.id:this.options.generateId?d=t.index:this.points[t.index].id&&(d=this.points[t.index].id),void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const n=[],{radius:r,extent:i,reduce:o,minPoints:a}=this.options,s=r/(i*Math.pow(2,e));for(let l=0;l<t.length;l++){const r=t[l];if(r.zoom<=e)continue;r.zoom=e;const i=this.trees[e+1],u=i.within(r.x,r.y,s),c=r.numPoints||1;let h=c;for(const t of u){const n=i.points[t];n.zoom>e&&(h+=n.numPoints||1)}if(h>c&&h>=a){let t=r.x*c,a=r.y*c,s=o&&c>1?this._map(r,!0):null;const d=(l<<5)+(e+1)+this.points.length;for(const n of u){const l=i.points[n];if(l.zoom<=e)continue;l.zoom=e;const u=l.numPoints||1;t+=l.x*u,a+=l.y*u,l.parentId=d,o&&(s||(s=this._map(r,!0)),o(s,this._map(l)))}r.parentId=d,n.push(G(t/h,a/h,d,h,s))}else if(n.push(r),h>1)for(const t of u){const r=i.points[t];r.zoom<=e||(r.zoom=e,n.push(r))}}return n}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?K({},t.properties):t.properties;const n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?K({},r):r}}function G(t,e,n,r,i){return{x:U(t),y:U(e),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function Y(t,e){const[n,r]=t.geometry.coordinates;return{x:U(H(n)),y:U(X(r)),zoom:1/0,index:e,parentId:-1}}function $(t){return{type:"Feature",id:t.id,properties:W(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),Z(t.y)]}};var e}function W(t){const e=t.numPoints,n=e>=1e4?`${Math.round(e/1e3)}k`:e>=1e3?Math.round(e/100)/10+"k":e;return K(K({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function H(t){return t/360+.5}function X(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function Z(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function K(t,e){for(const n in e)t[n]=e[n];return t}function Q(t){return t.x}function J(t){return t.y}function tt(t,e,n,r){for(var i,o=r,a=n-e>>1,s=n-e,l=t[e],u=t[e+1],c=t[n],h=t[n+1],d=e+3;d<n;d+=3){var p=et(t[d],t[d+1],l,u,c,h);if(p>o)i=d,o=p;else if(p===o){var f=Math.abs(d-a);f<s&&(i=d,s=f)}}o>r&&(i-e>3&&tt(t,e,i,r),t[i+2]=o,n-i>3&&tt(t,i,n,r))}function et(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var l=((t-n)*a+(e-r)*s)/(a*a+s*s);l>1?(n=i,r=o):l>0&&(n+=a*l,r+=s*l)}return(a=t-n)*a+(s=e-r)*s}function nt(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)rt(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)rt(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)rt(t,e[r][i])}(i),i}function rt(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function it(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)ot(i,s);else if("MultiPoint"===o)for(var u=0;u<i.length;u++)ot(i[u],s);else if("LineString"===o)at(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(u=0;u<i.length;u++)at(i[u],s=[],a,!1),t.push(nt(l,"LineString",s,e.properties));return}st(i,s,a,!1)}else if("Polygon"===o)st(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(u=0;u<e.geometry.geometries.length;u++)it(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<i.length;u++){var c=[];st(i[u],c,a,!0),s.push(c)}}t.push(nt(l,o,s,e.properties))}}function ot(t,e){e.push(lt(t[0])),e.push(ut(t[1])),e.push(0)}function at(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var l=lt(t[s][0]),u=ut(t[s][1]);e.push(l),e.push(u),e.push(0),s>0&&(a+=r?(i*u-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-o,2))),i=l,o=u}var c=e.length-3;e[2]=1,tt(e,0,c,n),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function st(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];at(t[i],o,n,r),e.push(o)}}function lt(t){return t/360+.5}function ut(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function ct(t,e,n,r,i,o,a,s){if(r/=e,o>=(n/=e)&&a<r)return t;if(a<n||o>=r)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],h=c.geometry,d=c.type,p=0===i?c.minX:c.minY,f=0===i?c.maxX:c.maxY;if(p>=n&&f<r)l.push(c);else if(!(f<n||p>=r)){var m=[];if("Point"===d||"MultiPoint"===d)ht(h,m,n,r,i);else if("LineString"===d)dt(h,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===d)ft(h,m,n,r,i,!1);else if("Polygon"===d)ft(h,m,n,r,i,!0);else if("MultiPolygon"===d)for(var g=0;g<h.length;g++){var y=[];ft(h[g],y,n,r,i,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(g=0;g<m.length;g++)l.push(nt(c.id,d,m[g],c.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(nt(c.id,d,m,c.tags))}}}return l.length?l:null}function ht(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function dt(t,e,n,r,i,o,a){for(var s,l,u=pt(t),c=0===i?gt:yt,h=t.start,d=0;d<t.length-3;d+=3){var p=t[d],f=t[d+1],m=t[d+2],g=t[d+3],y=t[d+4],v=0===i?p:f,_=0===i?g:y,b=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(f-y,2))),v<n?_>n&&(l=c(u,p,f,g,y,n),a&&(u.start=h+s*l)):v>r?_<r&&(l=c(u,p,f,g,y,r),a&&(u.start=h+s*l)):mt(u,p,f,m),_<n&&v>=n&&(l=c(u,p,f,g,y,n),b=!0),_>r&&v<=r&&(l=c(u,p,f,g,y,r),b=!0),!o&&b&&(a&&(u.end=h+s*l),e.push(u),u=pt(t)),a&&(h+=s)}var x=t.length-3;p=t[x],f=t[x+1],m=t[x+2],(v=0===i?p:f)>=n&&v<=r&&mt(u,p,f,m),x=u.length-3,o&&x>=3&&(u[x]!==u[0]||u[x+1]!==u[1])&&mt(u,u[0],u[1],u[2]),u.length&&e.push(u)}function pt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function ft(t,e,n,r,i,o){for(var a=0;a<t.length;a++)dt(t[a],e,n,r,i,o,!1)}function mt(t,e,n,r){t.push(e),t.push(n),t.push(r)}function gt(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function yt(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function vt(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=_t(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(_t(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(_t(o.geometry[s][u],e));i.push(l)}n.push(nt(o.id,a,i,o.tags))}return n}function _t(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function bt(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(r=0;r<u.length;r+=2)l.geometry.push(xt(u[r],u[r+1],e,o,a,s));else for(r=0;r<u.length;r++){var h=[];for(i=0;i<u[r].length;i+=2)h.push(xt(u[r][i],u[r][i+1],e,o,a,s));l.geometry.push(h)}}return t.transformed=!0,t}function xt(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function wt(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,Et(a,t[s],o,i);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),h>a.maxY&&(a.maxY=h)}return a}function Et(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)St(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)St(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var u=i[l];for(s=0;s<u.length;s++)St(a,u[s],t,n,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var d={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(d.id=e.id),t.features.push(d)}}function St(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===r||e[l+2]>a)&&(n.numSimplified++,s.push(e[l]),s.push(e[l+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(s,o),t.push(s)}}function Ct(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)it(n,t.features[r],e,r);else it(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(t,e){var n=e.buffer/e.extent,r=t,i=ct(t,1,-1-n,n,0,-1,2,e),o=ct(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=ct(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=vt(i,1).concat(r)),o&&(r=r.concat(vt(o,-1)))),r}(r,e),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Tt(t,e,n){return 32*((1<<t)*n+e)+t}function It(t,e){const n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);const r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);const i=new m(r.features);let o=g.exports(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}Ct.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ct.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],l=this.options,u=l.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,h=Tt(e,n,r),d=this.tiles[h];if(!d&&(u>1&&console.time("creation"),d=this.tiles[h]=wt(t,e,n,r,l),this.tileCoords.push({z:e,x:n,y:r}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(d.source=t,i){if(e===l.maxZoom||e===i)continue;var f=1<<i-e;if(n!==Math.floor(o/f)||r!==Math.floor(a/f))continue}else if(e===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==t.length){u>1&&console.time("clipping");var m,g,y,v,_,b,x=.5*l.buffer/l.extent,w=.5-x,E=.5+x,S=1+x;m=g=y=v=null,_=ct(t,c,n-x,n+E,0,d.minX,d.maxX,l),b=ct(t,c,n+w,n+S,0,d.minX,d.maxX,l),t=null,_&&(m=ct(_,c,r-x,r+E,1,d.minY,d.maxY,l),g=ct(_,c,r+w,r+S,1,d.minY,d.maxY,l),_=null),b&&(y=ct(b,c,r-x,r+E,1,d.minY,d.maxY,l),v=ct(b,c,r+w,r+S,1,d.minY,d.maxY,l),b=null),u>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*n,2*r),s.push(g||[],e+1,2*n,2*r+1),s.push(y||[],e+1,2*n+1,2*r),s.push(v||[],e+1,2*n+1,2*r+1)}}},Ct.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=Tt(t,e=(e%a+a)%a,n);if(this.tiles[s])return bt(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,u=t,c=e,h=n;!l&&u>0;)u--,c=Math.floor(c/2),h=Math.floor(h/2),l=this.tiles[Tt(u,c,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",u,c,h),o>1&&console.time("drilling down"),this.splitTile(l.source,u,c,h,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?bt(this.tiles[s],i):null):null};class kt extends l{constructor(t,e,n,r){super(t,e,n,It),r&&(this.loadGeoJSON=r)}loadData(e,n){var r;null===(r=this._pendingRequest)||void 0===r||r.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const i=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request);this._pendingCallback=n,this._pendingRequest=this.loadGeoJSON(e,((r,o)=>{if(delete this._pendingCallback,delete this._pendingRequest,r||!o)return n(r);if("object"!=typeof o)return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));{c(o,!0);try{if(e.filter){const n=t.createExpression(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map((t=>`${t.key}: ${t.message}`)).join(", "));const r=o.features.filter((t=>n.value.evaluate({zoom:0},t)));o={type:"FeatureCollection",features:r}}this._geoJSONIndex=e.cluster?new q(function(e){let{superclusterOptions:n,clusterProperties:r}=e;if(!r||!n)return n;const i={},o={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(r);for(const u of l){const[e,n]=r[u],a=t.createExpression(n),s=t.createExpression("string"==typeof e?[e,["accumulated"],["get",u]]:e);i[u]=a.value,o[u]=s.value}return n.map=t=>{s.properties=t;const e={};for(const n of l)e[n]=i[n].evaluate(a,s);return e},n.reduce=(t,e)=>{s.properties=e;for(const n of l)a.accumulated=t[n],t[n]=o[n].evaluate(a,s)},n}(e)).load(o.features):function(t,e){return new Ct(t,e)}(o,e.geojsonVtOptions)}catch(r){return n(r)}this.loaded={};const a={};if(i){const t=i.finish();t&&(a.resourceTiming={},a.resourceTiming[e.source]=JSON.parse(JSON.stringify(t)))}n(null,a)}}))}reloadTile(t,e){const n=this.loaded;return n&&n[t.uid]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(e,n){if(e.request)return t.getJSON(e.request,n);if("string"==typeof e.data)try{n(null,JSON.parse(e.data))}catch(t){n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`))}else n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}class At{constructor(e){this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:kt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(t,e)=>{if(this.workerSourceTypes[t])throw new Error(`Worker source with name "${t}" already registered.`);this.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=e=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}setReferrer(t,e){this.referrer=e}setImages(t,e,n){this.availableImages[t]=e;for(const r in this.workerSources[t]){const n=this.workerSources[t][r];for(const t in n)n[t].availableImages=e}n()}setLayers(t,e,n){this.getLayerIndex(t).replace(e),n()}updateLayers(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()}loadTile(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)}loadDEMTile(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)}reloadTile(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)}abortTile(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)}removeTile(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)}removeDEMTile(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)}removeSource(t,e,n){if(!this.workerSources[t]||!this.workerSources[t][e.type]||!this.workerSources[t][e.type][e.source])return;const r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}loadWorkerSource(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}}syncRTLPluginState(e,n,r){try{t.plugin.setState(n);const e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=e){this.self.importScripts(e);const n=t.plugin.isParsed();r(n?void 0:new Error(`RTL Text Plugin failed to import scripts from ${e}`),n)}}catch(t){r(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e}getWorkerSource(t,e,n){if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){const r={send:(e,n,r)=>{this.actor.send(e,n,r,t)}};this.workerSources[t][e][n]=new this.workerSourceTypes[e](r,this.getLayerIndex(t),this.getAvailableImages(t))}return this.workerSources[t][e][n]}getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new u),this.demWorkerSources[t][e]}enforceCacheSizeLimit(e,n){t.enforceCacheSizeLimit(n)}}return t.isWorker()&&(self.worker=new At(self)),At})),r(["./shared"],(function(t){var e=n;function n(t){return!function(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(void 0===r[e=t&&t.failIfMajorPerformanceCaveat]&&(r[e]=function(t){var e,r=function(t){var e=document.createElement("canvas"),r=Object.create(n.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,e.getContext("webgl",r)||e.getContext("experimental-webgl",r)}(t);if(!r)return!1;try{e=r.createShader(r.VERTEX_SHADER)}catch(t){return!1}return!(!e||r.isContextLost())&&(r.shaderSource(e,"void main() {}"),r.compileShader(e),!0===r.getShaderParameter(e,r.COMPILE_STATUS))}(e)),r[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var e}(t)}var r={};function i(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!i(t[n],e[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!i(t[n],e[n]))return!1;return!0}return t===e}n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class o{static testProp(t){if(!o.docStyle)return t[0];for(let e=0;e<t.length;e++)if(t[e]in o.docStyle)return t[e];return t[0]}static create(t,e,n){const r=window.document.createElement(t);return void 0!==e&&(r.className=e),n&&n.appendChild(r),r}static createNS(t,e){return window.document.createElementNS(t,e)}static disableDrag(){o.docStyle&&o.selectProp&&(o.userSelect=o.docStyle[o.selectProp],o.docStyle[o.selectProp]="none")}static enableDrag(){o.docStyle&&o.selectProp&&(o.docStyle[o.selectProp]=o.userSelect)}static setTransform(t,e){t.style[o.transformProp]=e}static addEventListener(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.addEventListener(e,n,"passive"in r?r:r.capture)}static removeEventListener(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.removeEventListener(e,n,"passive"in r?r:r.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",o.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",o.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",o.suppressClickInternal,!0)}),0)}static mousePos(e,n){const r=e.getBoundingClientRect();return new t.pointGeometry(n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop)}static touchPos(e,n){const r=e.getBoundingClientRect(),i=[];for(let o=0;o<n.length;o++)i.push(new t.pointGeometry(n[o].clientX-r.left-e.clientLeft,n[o].clientY-r.top-e.clientTop));return i}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}}o.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,o.selectProp=o.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),o.transformProp=o.testProp(["transform","WebkitTransform"]);class a{constructor(t){this._transformRequestFn=t}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeSpriteURL(t,e,n){const r=function(t){const e=t.match(s);if(!e)throw new Error(`Unable to parse URL "${t}"`);return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}(t);return r.path+=`${e}${n}`,function(t){const e=t.params.length?`?${t.params.join("&")}`:"";return`${t.protocol}://${t.authority}${t.path}${e}`}(r)}setTransformRequest(t){this._transformRequestFn=t}}const s=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class l{constructor(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)}update(e,n,r){const{width:i,height:o}=e,a=!(this.size&&this.size[0]===i&&this.size[1]===o||r),{context:s}=this,{gl:l}=s;if(this.useMipmap=Boolean(n&&n.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!n||!1!==n.premultiply)),a)this.size=[i,o],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.isImageBitmap(e)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,e):l.texImage2D(l.TEXTURE_2D,0,this.format,i,o,0,this.format,l.UNSIGNED_BYTE,e.data);else{const{x:n,y:a}=r||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.isImageBitmap(e)?l.texSubImage2D(l.TEXTURE_2D,0,n,a,l.RGBA,l.UNSIGNED_BYTE,e):l.texSubImage2D(l.TEXTURE_2D,0,n,a,i,o,l.RGBA,l.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D)}bind(t,e,n){const{context:r}=this,{gl:i}=r;i.bindTexture(i.TEXTURE_2D,this.texture),n!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=i.LINEAR),t!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function u(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}class c extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,callback:e}of this.requestors)this._notify(t,e);this.requestors=[]}}getImage(t){return this.images[t]}addImage(t,e){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,e)&&(this.images[t]=e)}_validate(e,n){let r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchX" value`))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchY" value`))),r=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "content" value`))),r=!1),r}_validateStretch(t,e){if(!t)return!0;let n=0;for(const r of t){if(r[0]<n||r[1]<r[0]||e<r[1])return!1;n=r[1]}return!0}_validateContent(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,e){const n=this.images[t];if(n.data.width!==e.data.width||n.data.height!==e.data.height)throw new Error(`size mismatch between old image (${n.data.width}x${n.data.height}) and new image (${e.data.width}x${e.data.height}).`);e.version=n.version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){const e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let n=!0;if(!this.isLoaded())for(const r of t)this.images[r]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,n){const r={};for(const i of e){this.images[i]||this.fire(new t.Event("styleimagemissing",{id:i}));const e=this.images[i];e?r[i]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.warnOnce(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}n(null,r)}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(e){const n=this.patterns[e],r=this.getImage(e);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{const n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new t.ImagePosition(n,r);this.patterns[e]={bin:n,position:i}}return this._updatePatternAtlas(),this.patterns[e].position}bind(t){const e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:n,h:r}=t.potpack(e),i=this.atlasImage;i.resize({width:n||1,height:r||1});for(const o in this.patterns){const{bin:e}=this.patterns[o],n=e.x+1,r=e.y+1,a=this.images[o].data,s=a.width,l=a.height;t.RGBAImage.copy(a,i,{x:0,y:0},{x:n,y:r},{width:s,height:l}),t.RGBAImage.copy(a,i,{x:0,y:l-1},{x:n,y:r-1},{width:s,height:1}),t.RGBAImage.copy(a,i,{x:0,y:0},{x:n,y:r+l},{width:s,height:1}),t.RGBAImage.copy(a,i,{x:s-1,y:0},{x:n-1,y:r},{width:1,height:l}),t.RGBAImage.copy(a,i,{x:0,y:0},{x:n+s,y:r},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const n of e){if(this.callbackDispatchedThisFrame[n])continue;this.callbackDispatchedThisFrame[n]=!0;const e=this.images[n];e||t.warnOnce(`Image with ID: "${n}" was not found`),u(e)&&this.updateImage(n,e)}}}const h=1e20;function d(t,e,n,r,i,o,a,s,l){for(let u=e;u<e+r;u++)p(t,n*o+u,o,i,a,s,l);for(let u=n;u<n+i;u++)p(t,u*o+e,1,r,a,s,l)}function p(t,e,n,r,i,o,a){o[0]=0,a[0]=-h,a[1]=h,i[0]=t[e];for(let s=1,l=0,u=0;s<r;s++){i[s]=t[e+s*n];const r=s*s;do{const t=o[l];u=(i[s]-i[t]+r-t*t)/(s-t)/2}while(u<=a[l]&&--l>-1);l++,o[l]=s,a[l]=u,a[l+1]=h}for(let s=0,l=0;s<r;s++){for(;a[l+1]<s;)l++;const r=o[l],u=s-r;t[e+s*n]=i[r]+u*u}}class f{constructor(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}}setURL(t){this.url=t}getGlyphs(e,n){const r=[];for(const t in e)for(const n of e[t])r.push({stack:t,id:n});t.asyncAll(r,((t,e)=>{let{stack:n,id:r}=t,i=this.entries[n];i||(i=this.entries[n]={glyphs:{},requests:{},ranges:{}});let o=i.glyphs[r];if(void 0!==o)return void e(null,{stack:n,id:r,glyph:o});if(o=this._tinySDF(i,n,r),o)return i.glyphs[r]=o,void e(null,{stack:n,id:r,glyph:o});const a=Math.floor(r/256);if(256*a>65535)return void e(new Error("glyphs > 65535 not supported"));if(i.ranges[a])return void e(null,{stack:n,id:r,glyph:o});let s=i.requests[a];s||(s=i.requests[a]=[],f.loadGlyphRange(n,a,this.url,this.requestManager,((t,e)=>{if(e){for(const t in e)this._doesCharSupportLocalGlyph(+t)||(i.glyphs[+t]=e[+t]);i.ranges[a]=!0}for(const n of s)n(t,e);delete i.requests[a]}))),s.push(((t,i)=>{t?e(t):i&&e(null,{stack:n,id:r,glyph:i[r]||null})}))}),((t,e)=>{if(t)n(t);else if(e){const t={};for(const{stack:n,id:r,glyph:i}of e)(t[n]||(t[n]={}))[r]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics};n(null,t)}}))}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(t.unicodeBlockLookup["CJK Unified Ideographs"](e)||t.unicodeBlockLookup["Hangul Syllables"](e)||t.unicodeBlockLookup.Hiragana(e)||t.unicodeBlockLookup.Katakana(e))}_tinySDF(e,n,r){const i=this.localIdeographFontFamily;if(!i)return;if(!this._doesCharSupportLocalGlyph(r))return;let o=e.tinySDF;if(!o){let t="400";/bold/i.test(n)?t="900":/medium/i.test(n)?t="500":/light/i.test(n)&&(t="200"),o=e.tinySDF=new f.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:i,fontWeight:t})}const a=o.draw(String.fromCharCode(r));return{id:r,bitmap:new t.AlphaImage({width:a.width||30,height:a.height||30},a.data),metrics:{width:a.glyphWidth||24,height:a.glyphHeight||24,left:a.glyphLeft||0,top:a.glyphTop-27||-8,advance:a.glyphAdvance||24}}}}f.loadGlyphRange=function(e,n,r,i,o){const a=256*n,s=a+255,l=i.transformRequest(r.replace("{fontstack}",e).replace("{range}",`${a}-${s}`),t.ResourceType.Glyphs);t.getArrayBuffer(l,((e,n)=>{if(e)o(e);else if(n){const e={};for(const r of t.parseGlyphPbf(n))e[r.id]=r;o(null,e)}}))},f.TinySDF=class{constructor(){let{fontSize:t=24,buffer:e=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=e,this.cutoff=r,this.radius=n;const s=this.size=t+4*e,l=this._createCanvas(s),u=this.ctx=l.getContext("2d",{willReadFrequently:!0});u.font=`${a} ${o} ${t}px ${i}`,u.textBaseline="alphabetic",u.textAlign="left",u.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(t),a=Math.ceil(n),s=Math.min(this.size-this.buffer,Math.ceil(o-i)),l=Math.min(this.size-this.buffer,a+Math.ceil(r)),u=s+2*this.buffer,c=l+2*this.buffer,p=Math.max(u*c,0),f=new Uint8ClampedArray(p),m={data:f,width:u,height:c,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:e};if(0===s||0===l)return m;const{ctx:g,buffer:y,gridInner:v,gridOuter:_}=this;g.clearRect(y,y,s,l),g.fillText(t,y,y+a);const b=g.getImageData(y,y,s,l);_.fill(h,0,p),v.fill(0,0,p);for(let d=0;d<l;d++)for(let t=0;t<s;t++){const e=b.data[4*(d*s+t)+3]/255;if(0===e)continue;const n=(d+y)*u+t+y;if(1===e)_[n]=0,v[n]=h;else{const t=.5-e;_[n]=t>0?t*t:0,v[n]=t<0?t*t:0}}d(_,0,0,u,c,u,this.f,this.v,this.z),d(v,y,y,s,l,u,this.f,this.v,this.z);for(let h=0;h<p;h++){const t=Math.sqrt(_[h])-Math.sqrt(v[h]);f[h]=Math.round(255-255*(t/this.radius+this.cutoff))}return m}};const m=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new class{constructor(){this.specification=t.spec.light.position}possiblyEvaluate(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))}interpolate(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r)}}},color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)}),g="-transition";class y extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(m),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.validateLight,e,n))for(const t in e){const n=e[t];t.endsWith(g)?this._transitionable.setTransition(t.slice(0,-g.length),n):this._transitionable.setValue(t,n)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}class v{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,e){const n=t.join(",")+String(e);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(t,e)),this.dashEntry[n]}getDashRanges(t,e,n){const r=[];let i=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===t[0]});let s=t[0];for(let l=1;l<t.length;l++){a=!a;const e=t[l];i=s*n,s+=e,o=s*n,r.push({left:i,right:o,isDash:a,zeroLength:0===e})}return r}addRoundDash(t,e,n){const r=e/2;for(let i=-n;i<=n;i++){const e=this.width*(this.nextRow+n+i);let o=0,a=t[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=t[++o]);const l=Math.abs(s-a.left),u=Math.abs(s-a.right),c=Math.min(l,u);let h;const d=i/n*(r+1);if(a.isDash){const t=r-Math.abs(d);h=Math.sqrt(c*c+t*t)}else h=r-Math.sqrt(c*c+d*d);this.data[e+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(t){for(let a=t.length-1;a>=0;--a){const e=t[a],n=t[a+1];e.zeroLength?t.splice(a,1):n&&n.isDash===e.isDash&&(n.left=e.left,t.splice(a,1))}const e=t[0],n=t[t.length-1];e.isDash===n.isDash&&(e.left=n.left-this.width,n.right=e.right+this.width);const r=this.width*this.nextRow;let i=0,o=t[i];for(let a=0;a<this.width;a++){a/o.right>1&&(o=t[++i]);const e=Math.abs(a-o.left),n=Math.abs(a-o.right),s=Math.min(e,n);this.data[r+a]=Math.max(0,Math.min(255,(o.isDash?s:-s)+128))}}addDash(e,n){const r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;let o=0;for(let t=0;t<e.length;t++)o+=e[t];if(0!==o){const t=this.width/o,i=this.getDashRanges(e,this.width,t);n?this.addRoundDash(i,t,r):this.addRegularDash(i)}const a={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,a}bind(t){const e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))}}class _{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const r=this.workerPool.acquire(this.id);for(let t=0;t<r.length;t++){const e=new _.Actor(r[t],n,this.id);e.name=`Worker ${t}`,this.actors.push(e)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,n,r){t.asyncAll(this.actors,((t,r)=>{t.send(e,n,r)}),r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((t=>{t.remove()})),this.actors=[],this.workerPool.release(this.id)}}function b(e,n,r){const i=function(n,i){if(n)return r(n);if(i){const n=t.pick(t.extend(i,e),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(n.vectorLayers=i.vector_layers,n.vectorLayerIds=n.vectorLayers.map((t=>t.id))),r(null,n)}};return e.url?t.getJSON(n.transformRequest(e.url,t.ResourceType.Source),i):t.exported.frame((()=>i(null,e)))}_.Actor=t.Actor;class x{constructor(e,n,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=r||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(e){const n=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=r&&e.x<o&&e.y>=i&&e.y<a}}class w extends t.Evented{constructor(e,n,r,i){if(super(),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(n,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=b(this._options,this.map._requestManager,((e,n)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e?this.fire(new t.ErrorEvent(e)):n&&(t.extend(this,n),n.bounds&&(this.tileBounds=new x(n.bounds,this.minzoom,this.maxzoom)),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}loadTile(e,n){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),i={request:this.map._requestManager.transformRequest(r,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function o(r,i){return delete e.request,e.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}i.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",i,o.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",i,o.bind(this)))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class E extends t.Evented{constructor(e,n,r,i){super(),this.id=e,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},n),t.extend(this,t.pick(n,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=b(this._options,this.map._requestManager,((e,n)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(t.extend(this,n),n.bounds&&(this.tileBounds=new x(n.bounds,this.minzoom,this.maxzoom)),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,n){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),((r,i,o)=>{if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(i){this.map._refreshExpiredTiles&&e.setExpiryData(o);const r=this.map.painter.context,a=r.gl;e.texture=this.map.painter.getTileTexture(i.width),e.texture?e.texture.update(i,{useMipmap:!0}):(e.texture=new l(r,i,a.RGBA,{useMipmap:!0}),e.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),r.extTextureFilterAnisotropic&&a.texParameterf(a.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),n(null)}}))}abortTile(t,e){t.request&&(t.request.cancel(),delete t.request),e()}unloadTile(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}hasTransition(){return!1}}let S;class C extends E{constructor(e,n,r,i){super(e,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(e,n){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function i(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),function(r,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;const n=t.isImageBitmap(o)&&(null==S&&(S="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),S)?o:t.exported.getImageData(o,1),r={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:n,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",r,i.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)}_getNeighboringTiles(e){const n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})}}class T extends t.Evented{constructor(e,n,r,i){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=r.getActor(),this.setEventedParent(i),this._data=n.data,this._options=t.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.EXTENT,radius:(n.clusterRadius||50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData("content"),this}getClusterExpansionZoom(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}getClusterChildren(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}getClusterLeaves(t,e,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r),this}_updateWorkerData(e){const n=t.extend({},this.workerOptions),r=this._data;"string"==typeof r?(n.request=this.map._requestManager.transformRequest(t.exported.resolveURL(r),t.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(r),this._pendingLoads++,this.fire(new t.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,n,((n,r)=>{if(this._pendingLoads--,this._removed||r&&r.abandoned)return void this.fire(new t.Event("dataabort",{dataType:"source",sourceDataType:e}));let i=null;if(r&&r.resourceTiming&&r.resourceTiming[this.id]&&(i=r.resourceTiming[this.id].slice(0)),n)return void this.fire(new t.ErrorEvent(n));const o={dataType:"source",sourceDataType:e};this._collectResourceTiming&&i&&i.length>0&&t.extend(o,{resourceTiming:i}),this.fire(new t.Event("data",o))}))}loaded(){return 0===this._pendingLoads}loadTile(t,e){const n=t.actor?"reloadTile":"loadTile";t.actor=this.actor;const r={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.request=this.actor.send(n,r,((r,i)=>(delete t.request,t.unloadVectorData(),t.aborted?e(null):r?e(r):(t.loadVectorData(i,this.map.painter,"reloadTile"===n),e(null)))))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var I=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class k extends t.Evented{constructor(t,e,n,r){super(),this.id=t,this.dispatcher=n,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=e}load(e,n){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),((r,i)=>{this._loaded=!0,r?this.fire(new t.ErrorEvent(r)):i&&(this.image=i,e&&(this.coordinates=e),n&&n(),this._finishLoading())}))}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}setCoordinates(e){this.coordinates=e;const n=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){let n=1/0,r=1/0,i=-1/0,o=-1/0;for(const t of e)n=Math.min(n,t.x),r=Math.min(r,t.y),i=Math.max(i,t.x),o=Math.max(o,t.y);const a=Math.max(i-n,o-r),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new t.CanonicalTileID(s,Math.floor((n+i)/2*l),Math.floor((r+o)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z;const r=n.map((t=>this.tileID.getTilePoint(t)._round()));return this._boundsArray=new t.RasterBoundsArray,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(r[2].x,r[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,n=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,I.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}loadTile(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class A extends k{constructor(t,e,n,r){super(t,e,n,r),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const n of e.urls)this.urls.push(this.map._requestManager.transformRequest(n,t.ResourceType.Source).url);t.getVideo(this.urls,((e,n)=>{this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(this.video=n,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,n=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,I.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new l(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class P extends k{constructor(e,n,r,i){super(e,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((t=>!Array.isArray(t)||2!==t.length||t.some((t=>"number"!=typeof t))))||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context,r=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,I.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l(n,this.canvas,r.RGBA,{premultiply:!0});for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const D={vector:w,raster:E,"raster-dem":C,geojson:T,video:A,image:k,canvas:P};function M(e,n){const r=t.create();return t.translate(r,r,[1,1,0]),t.scale(r,r,[.5*e.width,.5*e.height,1]),t.multiply(r,r,e.calculatePosMatrix(n.toUnwrapped()))}function O(t,e,n,r,i,o){const a=function(t,e,n){if(t)for(const r of t){const t=e[r];if(t&&t.source===n&&"fill-extrusion"===t.type)return!0}else for(const r in e){const t=e[r];if(t.source===n&&"fill-extrusion"===t.type)return!0}return!1}(i&&i.layers,e,t.id),s=o.maxPitchScaleFactor(),l=t.tilesIn(r,s,a);l.sort(R);const u=[];for(const h of l)u.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,n,t._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,i,o,s,M(t.transform,h.tileID))});const c=function(t){const e={},n={};for(const r of t){const t=r.queryResults,i=r.wrappedTileID,o=n[i]=n[i]||{};for(const n in t){const r=t[n],i=o[n]=o[n]||{},a=e[n]=e[n]||[];for(const t of r)i[t.featureIndex]||(i[t.featureIndex]=!0,a.push(t))}}return e}(u);for(const h in c)c[h].forEach((e=>{const n=e.feature,r=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}));return c}function R(t,e){const n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}class N{constructor(e,n){this.tileID=e,this.uid=t.uniqueId(),this.uses=0,this.tileSize=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const n=e+this.timeAdded;n<t.exported.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.textures.forEach((e=>t.saveTileTexture(e))),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(e,n,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(t,e){const n={};if(!e)return n;for(const r of t){const t=r.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){r.layers=t,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)n[e.id]=r}}return n}(e.buckets,n.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const n=this.buckets[e];if(n instanceof t.SymbolBucket){if(this.hasSymbolBuckets=!0,!r)break;n.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const n=this.buckets[e];if(n instanceof t.SymbolBucket&&n.hasRTLText){this.hasRTLText=!0,t.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const t in this.buckets){const e=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(t).queryRadius(e))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new t.CollisionBoxArray}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const n in this.buckets){const e=this.buckets[n];e.uploadPending()&&e.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new l(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new l(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,n,r,i,o,a,s,l,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:i,scale:o,tileSize:this.tileSize,pixelPosMatrix:u,transform:s,params:a,queryPadding:this.queryPadding*l},t,e,n):{}}querySourceFeatures(e,n){const r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;const i=r.loadVTLayers(),o=n?n.sourceLayer:"",a=i._geojsonTileLayer||i[o];if(!a)return;const s=t.createFilter(n&&n.filter),{z:l,x:u,y:c}=this.tileID.canonical,h={z:l,x:u,y:c};for(let d=0;d<a.length;d++){const n=a.feature(d);if(s.needGeometry){const e=t.toEvaluationFeature(n,!0);if(!s.filter(new t.EvaluationParameters(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!s.filter(new t.EvaluationParameters(this.tileID.overscaledZ),n))continue;const i=r.getId(n,o),p=new t.GeoJSONFeature(n,l,u,c,i);p.tile=h,e.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const n=this.expirationTime;if(e.cacheControl){const n=t.parseCacheControl(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const t=Date.now();let e=!1;if(this.expirationTime>t)e=!1;else if(n)if(this.expirationTime<n)e=!0;else{const r=this.expirationTime-n;r?this.expirationTime=t+Math.max(r,3e4):e=!0}else e=!0;e?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length)return;const n=this.latestFeatureIndex.loadVTLayers();for(const r in this.buckets){if(!e.style.hasLayer(r))continue;const i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=t[o];if(!a||!s||0===Object.keys(s).length)continue;i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=e&&e.style&&e.style.getLayer(r);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(i)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<t.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=t.exported.now()+e}setDependencies(t,e){const n={};for(const r of e)n[r]=!0;this.dependencies[t]=n}hasDependency(t,e){for(const n of t){const t=this.dependencies[n];if(t)for(const n of e)if(t[n])return!0}return!1}}class L{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,n){const r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const i={value:e,timeout:void 0};if(void 0!==n&&(i.timeout=setTimeout((()=>{this.remove(t,i)}),n)),this.data[r].push(i),this.order.push(r),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const n in this.data)for(const r of this.data[n])t(r.value)||e.push(r);for(const n of e)this.remove(n.value.tileID,n)}}class F{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,n,r){const i=String(n);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][i]=this.stateChanges[e][i]||{},t.extend(this.stateChanges[e][i],r),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==i&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][i]){this.deletedStates[e][i]={};for(const t in this.state[e][i])r[t]||(this.deletedStates[e][i][t]=null)}else for(const t in r)this.deletedStates[e]&&this.deletedStates[e][i]&&null===this.deletedStates[e][i][t]&&delete this.deletedStates[e][i][t]}removeFeatureState(t,e,n){if(null===this.deletedStates[t])return;const r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(n in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][n]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}getState(e,n){const r=String(n),i=t.extend({},(this.state[e]||{})[r],(this.stateChanges[e]||{})[r]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const t=this.deletedStates[e][n];if(null===t)return{};for(const e in t)delete i[e]}return i}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(e,n){const r={};for(const i in this.stateChanges){this.state[i]=this.state[i]||{};const e={};for(const n in this.stateChanges[i])this.state[i][n]||(this.state[i][n]={}),t.extend(this.state[i][n],this.stateChanges[i][n]),e[n]=this.state[i][n];r[i]=e}for(const i in this.deletedStates){this.state[i]=this.state[i]||{};const e={};if(null===this.deletedStates[i])for(const t in this.state[i])e[t]={},this.state[i][t]={};else for(const t in this.deletedStates[i]){if(null===this.deletedStates[i][t])this.state[i][t]={};else for(const e of Object.keys(this.deletedStates[i][t]))delete this.state[i][t][e];e[t]=this.state[i][t]}r[i]=r[i]||{},t.extend(r[i],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(const t in e)e[t].setFeatureState(r,n)}}class z extends t.Evented{constructor(e,n,r){super(),this.id=e,this.dispatcher=r,this.on("data",(t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))})),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=function(e,n,r,i){const o=new D[n.type](e,n,r,i);if(o.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${o.id}`);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o}(e,n,r,this),this._tiles={},this._cache=new L(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new F}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,e){return this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,(()=>{}))}_abortTile(e){this._source.abortTile&&this._source.abortTile(e,(()=>{})),this._source.fire(new t.Event("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((t=>t.tileID)).sort(B).map((t=>t.key))}getRenderableIds(e){const n=[];for(const t in this._tiles)this._isIdRenderable(t,e)&&n.push(this._tiles[t]);return e?n.sort(((e,n)=>{const r=e.tileID,i=n.tileID,o=new t.pointGeometry(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),a=new t.pointGeometry(i.canonical.x,i.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-i.overscaledZ||a.y-o.y||a.x-o.x})).map((t=>t.tileID.key)):n.map((t=>t.tileID)).sort(B).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")}}_reloadTile(t,e){const n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))}_tileLoaded(e,n,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform,this.terrain));e.timeAdded=t.exported.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(t){const e=this.getRenderableIds();for(let r=0;r<e.length;r++){const i=e[r];if(t.neighboringTiles&&t.neighboringTiles[i]){const e=this.getTileByID(i);n(t,e),n(e,t)}}function n(t,e){t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0;let n=e.tileID.canonical.x-t.tileID.canonical.x;const r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,n,r){for(const i in this._tiles){let o=this._tiles[i];if(r[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>e+1;){const t=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[t.key],o&&o.hasData()&&(a=t)}let s=a;for(;s.overscaledZ>e;)if(s=s.scaledTo(s.overscaledZ-1),t[s.key]){r[a.key]=a;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(let n=t.overscaledZ-1;n>=e;n--){const e=t.scaledTo(n),r=this._getLoadedTile(e);if(r)return r}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const e=Math.ceil(t.width/this._source.tileSize)+1,n=Math.ceil(t.height/this._source.tileSize)+1,r=Math.floor(e*n*5),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i)}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const n in this._tiles){const r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),t[r.tileID.key]=r}this._tiles=t;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(e,this._tiles[e])}}update(e,n){if(this.transform=e,this.terrain=n,!this._sourceLoaded||this._paused)return;let r;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(r=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:n}),this._source.hasTile&&(r=r.filter((t=>this._source.hasTile(t))))):r=[];const i=e.coveringZoomLevel(this._source),o=Math.max(i-z.maxOverzooming,this._source.minzoom),a=Math.max(i+z.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const t={};for(const e of r)if(e.canonical.z>this._source.minzoom){const n=e.scaledTo(e.canonical.z-1);t[n.key]=n;const r=e.scaledTo(Math.max(this._source.minzoom,Math.min(e.canonical.z,5)));t[r.key]=r}r=r.concat(Object.values(t))}const s=this._updateRetainedTiles(r,i);if(j(this._source.type)){const e={},l={},u=Object.keys(s);for(const n of u){const r=s[n],i=this._tiles[n];if(!i||i.fadeEndTime&&i.fadeEndTime<=t.exported.now())continue;const a=this.findLoadedParent(r,o);a&&(this._addTile(a.tileID),e[a.tileID.key]=a.tileID),l[n]=r}this._retainLoadedChildren(l,i,a,s);for(const t in e)s[t]||(this._coveredTiles[t]=!0,s[t]=e[t]);if(n){const t={},e={};for(const n of r)this._tiles[n.key].hasData()?t[n.key]=n:e[n.key]=n;for(const n in e){const r=e[n].children(this._source.maxzoom);this._tiles[r[0].key]&&this._tiles[r[1].key]&&this._tiles[r[2].key]&&this._tiles[r[3].key]&&(t[r[0].key]=s[r[0].key]=r[0],t[r[1].key]=s[r[1].key]=r[1],t[r[2].key]=s[r[2].key]=r[2],t[r[3].key]=s[r[3].key]=r[3],delete e[n])}for(const n in e){const r=this.findLoadedParent(e[n],this._source.minzoom);if(r){t[r.tileID.key]=s[r.tileID.key]=r.tileID;for(const e in t)t[e].isChildOf(r.tileID)&&delete t[e]}}for(const n in this._tiles)t[n]||(this._coveredTiles[n]=!0)}}for(const t in s)this._tiles[t].clearFadeHold();const l=t.keysDifference(this._tiles,s);for(const t of l){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(t)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,e){const n={},r={},i=Math.max(e-z.maxOverzooming,this._source.minzoom),o=Math.max(e+z.maxUnderzooming,this._source.minzoom),a={};for(const s of t){const t=this._addTile(s);n[s.key]=s,t.hasData()||e<this._source.maxzoom&&(a[s.key]=s)}this._retainLoadedChildren(a,e,o,n);for(const s of t){let t=this._tiles[s.key];if(t.hasData())continue;if(e+1>this._source.maxzoom){const t=s.children(this._source.maxzoom)[0],e=this.getTile(t);if(e&&e.hasData()){n[t.key]=t;continue}}else{const t=s.children(this._source.maxzoom);if(n[t[0].key]&&n[t[1].key]&&n[t[2].key]&&n[t[3].key])continue}let o=t.wasRequested();for(let e=s.overscaledZ-1;e>=i;--e){const i=s.scaledTo(e);if(r[i.key])break;if(r[i.key]=!0,t=this.getTile(i),!t&&o&&(t=this._addTile(i)),t&&(n[i.key]=i,o=t.wasRequested(),t.hasData()))break}}return n}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let n,r=this._tiles[t].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}e.push(r.key);const t=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(t),n)break;r=t}for(const t of e)this._loadedParentTiles[t]=n}}_addTile(e){let n=this._tiles[e.key];if(n)return n;n=this._cache.getAndRemove(e),n&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));const r=n;return n||(n=new N(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),n))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(e,n,r){const i=[],o=this.transform;if(!o)return i;const a=r?o.getCameraQueryGeometry(e):e,s=e.map((t=>o.pointCoordinate(t,this.terrain))),l=a.map((t=>o.pointCoordinate(t,this.terrain))),u=this.getIds();let c=1/0,h=1/0,d=-1/0,p=-1/0;for(const t of l)c=Math.min(c,t.x),h=Math.min(h,t.y),d=Math.max(d,t.x),p=Math.max(p,t.y);for(let f=0;f<u.length;f++){const e=this._tiles[u[f]];if(e.holdingForFade())continue;const r=e.tileID,a=Math.pow(2,o.zoom-e.tileID.overscaledZ),m=n*e.queryPadding*t.EXTENT/e.tileSize/a,g=[r.getTilePoint(new t.MercatorCoordinate(c,h)),r.getTilePoint(new t.MercatorCoordinate(d,p))];if(g[0].x-m<t.EXTENT&&g[0].y-m<t.EXTENT&&g[1].x+m>=0&&g[1].y+m>=0){const t=s.map((t=>r.getTilePoint(t))),n=l.map((t=>r.getTilePoint(t)));i.push({tile:e,tileID:r,queryGeometry:t,cameraQueryGeometry:n,scale:a})}}return i}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const n of e)n.posMatrix=this.transform.calculatePosMatrix(n.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(j(this._source.type))for(const e in this._tiles){const n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.exported.now())return!0}return!1}setFeatureState(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)}removeFeatureState(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,n){const r=this._tiles[t];r&&r.setDependencies(e,n)}reloadTilesForDependencies(t,e){for(const n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(n,"reloading");this._cache.filter((n=>!n.hasDependency(t,e)))}}function B(t,e){const n=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function j(t){return"raster"===t||"image"===t||"video"===t}z.maxOverzooming=10,z.maxUnderzooming=3;const U="mapboxgl_preloaded_worker_pool";class V{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<V.workerCount;)this.workers.push(new Worker(xi.workerUrl));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((t=>{t.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[U]}numActive(){return Object.keys(this.active).length}}const q=Math.floor(t.exported.hardwareConcurrency/2);let G;function Y(){return G||(G=new V),G}function $(e,n){const r={};for(const t in e)"ref"!==t&&(r[t]=e[t]);return t.refProperties.forEach((t=>{t in n&&(r[t]=n[t])})),r}function W(t){t=t.slice();const e=Object.create(null);for(let n=0;n<t.length;n++)e[t[n].id]=t[n];for(let n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=$(t[n],e[t[n].ref]));return t}V.workerCount=Math.max(Math.min(q,6),1);const H={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function X(t,e,n){n.push({command:H.addSource,args:[t,e[t]]})}function Z(t,e,n){e.push({command:H.removeSource,args:[t]}),n[t]=!0}function K(t,e,n,r){Z(t,n,r),X(t,e,n)}function Q(t,e,n){let r;for(r in t[n])if(Object.prototype.hasOwnProperty.call(t[n],r)&&"data"!==r&&!i(t[n][r],e[n][r]))return!1;for(r in e[n])if(Object.prototype.hasOwnProperty.call(e[n],r)&&"data"!==r&&!i(t[n][r],e[n][r]))return!1;return!0}function J(t,e,n,r,o,a){let s;for(s in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,s)&&(i(t[s],e[s])||n.push({command:a,args:[r,s,e[s],o]}));for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&!Object.prototype.hasOwnProperty.call(t,s)&&(i(t[s],e[s])||n.push({command:a,args:[r,s,e[s],o]}))}function tt(t){return t.id}function et(t,e){return t[e.id]=e,t}class nt{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);let n=1,r=this._distances[n];const i=e*this.paddedLength+this.padding;for(;r<i&&n<this._distances.length;)r=this._distances[++n];const o=n-1,a=this._distances[o],s=r-a,l=s>0?(i-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}function rt(t,e){let n=!0;return"always"===t||"never"!==t&&"never"!==e||(n=!1),n}class it{constructor(t,e,n){const r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(let o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}insertCircle(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)}_insertBoxCell(t,e,n,r,i,o){this.boxCells[i].push(o)}_insertCircleCell(t,e,n,r,i,o){this.circleCells[i].push(o)}_query(t,e,n,r,i,o,a){if(n<0||t>this.width||r<0||e>this.height)return[];const s=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return[{key:null,x1:t,y1:e,x2:n,y2:r}];for(let t=0;t<this.boxKeys.length;t++)s.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],n=this.circles[3*t+1],r=this.circles[3*t+2];s.push({key:this.circleKeys[t],x1:e-r,y1:n-r,x2:e+r,y2:n+r})}}else this._forEachCell(t,e,n,r,this._queryCell,s,{hitTest:i,overlapMode:o,seenUids:{box:{},circle:{}}},a);return s}query(t,e,n,r){return this._query(t,e,n,r,!1,null)}hitTest(t,e,n,r,i,o){return this._query(t,e,n,r,!0,i,o).length>0}hitTestCircle(t,e,n,r,i){const o=t-n,a=t+n,s=e-n,l=e+n;if(a<0||o>this.width||l<0||s>this.height)return!1;const u=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,u,{hitTest:!0,overlapMode:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},i),u.length>0}_queryCell(t,e,n,r,i,o,a,s){const{seenUids:l,hitTest:u,overlapMode:c}=a,h=this.boxCells[i];if(null!==h){const i=this.bboxes;for(const a of h)if(!l.box[a]){l.box[a]=!0;const h=4*a,d=this.boxKeys[a];if(t<=i[h+2]&&e<=i[h+3]&&n>=i[h+0]&&r>=i[h+1]&&(!s||s(d))&&(!u||!rt(c,d.overlapMode))&&(o.push({key:d,x1:i[h],y1:i[h+1],x2:i[h+2],y2:i[h+3]}),u))return!0}}const d=this.circleCells[i];if(null!==d){const i=this.circles;for(const a of d)if(!l.circle[a]){l.circle[a]=!0;const h=3*a,d=this.circleKeys[a];if(this._circleAndRectCollide(i[h],i[h+1],i[h+2],t,e,n,r)&&(!s||s(d))&&(!u||!rt(c,d.overlapMode))){const t=i[h],e=i[h+1],n=i[h+2];if(o.push({key:d,x1:t-n,y1:e-n,x2:t+n,y2:e+n}),u)return!0}}}return!1}_queryCellCircle(t,e,n,r,i,o,a,s){const{circle:l,seenUids:u,overlapMode:c}=a,h=this.boxCells[i];if(null!==h){const t=this.bboxes;for(const e of h)if(!u.box[e]){u.box[e]=!0;const n=4*e,r=this.boxKeys[e];if(this._circleAndRectCollide(l.x,l.y,l.radius,t[n+0],t[n+1],t[n+2],t[n+3])&&(!s||s(r))&&!rt(c,r.overlapMode))return o.push(!0),!0}}const d=this.circleCells[i];if(null!==d){const t=this.circles;for(const e of d)if(!u.circle[e]){u.circle[e]=!0;const n=3*e,r=this.circleKeys[e];if(this._circlesCollide(t[n],t[n+1],t[n+2],l.x,l.y,l.radius)&&(!s||s(r))&&!rt(c,r.overlapMode))return o.push(!0),!0}}}_forEachCell(t,e,n,r,i,o,a,s){const l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r);for(let d=l;d<=c;d++)for(let l=u;l<=h;l++)if(i.call(this,t,e,n,r,this.xCellCount*l+d,o,a,s))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,n,r,i,o){const a=r-t,s=i-e,l=n+o;return l*l>a*a+s*s}_circleAndRectCollide(t,e,n,r,i,o,a){const s=(o-r)/2,l=Math.abs(t-(r+s));if(l>s+n)return!1;const u=(a-i)/2,c=Math.abs(e-(i+u));if(c>u+n)return!1;if(l<=s||c<=u)return!0;const h=l-s,d=c-u;return h*h+d*d<=n*n}}function ot(e,n,r,i,o){const a=t.create();return n?(t.scale(a,a,[1/o,1/o,1]),r||t.rotateZ(a,a,i.angle)):t.multiply(a,i.labelPlaneMatrix,e),a}function at(e,n,r,i,o){if(n){const n=t.clone(e);return t.scale(n,n,[o,o,1]),r||t.rotateZ(n,n,-i.angle),n}return i.glCoordMatrix}function st(e,n,r){let i;r?(i=[e.x,e.y,r(e.x,e.y),1],t.transformMat4(i,i,n)):(i=[e.x,e.y,0,1],vt(i,i,n));const o=i[3];return{point:new t.pointGeometry(i[0]/o,i[1]/o),signedDistanceFromCamera:o}}function lt(t,e){return.5+t/e*.5}function ut(t,e){const n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function ct(e,n,r,i,o,a,s,l,u,c){const h=i?e.textSizeData:e.iconSizeData,d=t.evaluateSizeForZoom(h,r.transform.zoom),p=[256/r.width*2+1,256/r.height*2+1],f=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;f.clear();const m=e.lineVertexArray,g=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,y=r.transform.width/r.transform.height;let v=!1;for(let _=0;_<g.length;_++){const i=g.get(_);if(i.hidden||i.writingMode===t.WritingMode.vertical&&!v){yt(i.numGlyphs,f);continue}let b;if(v=!1,c?(b=[i.anchorX,i.anchorY,c(i.anchorX,i.anchorY),1],t.transformMat4(b,b,n)):(b=[i.anchorX,i.anchorY,0,1],vt(b,b,n)),!ut(b,p)){yt(i.numGlyphs,f);continue}const x=lt(r.transform.cameraToCenterDistance,b[3]),w=t.evaluateSizeForFeature(h,d,i),E=s?w/x:w*x,S=new t.pointGeometry(i.anchorX,i.anchorY),C=st(S,o,c).point,T={},I=pt(i,E,!1,l,n,o,a,e.glyphOffsetArray,m,f,C,S,T,y,u,c);v=I.useVertical,(I.notEnoughRoom||v||I.needsFlipping&&pt(i,E,!0,l,n,o,a,e.glyphOffsetArray,m,f,C,S,T,y,u,c).notEnoughRoom)&&yt(i.numGlyphs,f)}i?e.text.dynamicLayoutVertexBuffer.updateData(f):e.icon.dynamicLayoutVertexBuffer.updateData(f)}function ht(t,e,n,r,i,o,a,s,l,u,c,h,d){const p=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,g=e.getoffsetX(s.glyphStartIndex),y=e.getoffsetX(p-1),v=mt(t*g,n,r,i,o,a,s.segment,f,m,l,u,c,h,d);if(!v)return null;const _=mt(t*y,n,r,i,o,a,s.segment,f,m,l,u,c,h,d);return _?{first:v,last:_}:null}function dt(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function pt(e,n,r,i,o,a,s,l,u,c,h,d,p,f,m,g){const y=n/24,v=e.lineOffsetX*y,_=e.lineOffsetY*y;let b;if(e.numGlyphs>1){const t=e.glyphStartIndex+e.numGlyphs,n=e.lineStartIndex,o=e.lineStartIndex+e.lineLength,c=ht(y,l,v,_,r,h,d,e,u,a,p,m,g);if(!c)return{notEnoughRoom:!0};const x=st(c.first.point,s,g).point,w=st(c.last.point,s,g).point;if(i&&!r){const t=dt(e.writingMode,x,w,f);if(t)return t}b=[c.first];for(let i=e.glyphStartIndex+1;i<t-1;i++)b.push(mt(y*l.getoffsetX(i),v,_,r,h,d,e.segment,n,o,u,a,p,m,g));b.push(c.last)}else{if(i&&!r){const n=st(d,o,g).point,r=e.lineStartIndex+e.segment+1,i=new t.pointGeometry(u.getx(r),u.gety(r)),a=st(i,o,g),s=a.signedDistanceFromCamera>0?a.point:ft(d,i,n,1,o,g),l=dt(e.writingMode,n,s,f);if(l)return l}const n=mt(y*l.getoffsetX(e.glyphStartIndex),v,_,r,h,d,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,a,p,m,g);if(!n)return{notEnoughRoom:!0};b=[n]}for(const x of b)t.addDynamicAttributes(c,x.point,x.angle);return{}}function ft(t,e,n,r,i,o){const a=st(t.add(t.sub(e)._unit()),i,o).point,s=n.sub(a);return n.add(s._mult(r/s.mag()))}function mt(e,n,r,i,o,a,s,l,u,c,h,d,p,f){const m=i?e-n:e+n;let g=m>0?1:-1,y=0;i&&(g*=-1,y=Math.PI),g<0&&(y+=Math.PI);let v=g>0?l+s:l+s+1,_=o,b=o,x=0,w=0;const E=Math.abs(m),S=[];for(;x+w<=E;){if(v+=g,v<l||v>=u)return null;if(b=_,S.push(_),_=d[v],void 0===_){const e=new t.pointGeometry(c.getx(v),c.gety(v)),n=st(e,h,f);if(n.signedDistanceFromCamera>0)_=d[v]=n.point;else{const n=v-g;_=ft(0===x?a:new t.pointGeometry(c.getx(n),c.gety(n)),e,b,E-x+1,h,f)}}x+=w,w=b.dist(_)}const C=(E-x)/w,T=_.sub(b),I=T.mult(C)._add(b);I._add(T._unit()._perp()._mult(r*g));const k=y+Math.atan2(_.y-b.y,_.x-b.x);return S.push(I),{point:I,angle:p?k:0,path:S}}const gt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function yt(t,e){for(let n=0;n<t;n++){const t=e.length;e.resize(t+4),e.float32.set(gt,3*t)}}function vt(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}const _t=100;class bt{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new it(t.width+200,t.height+200,25),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new it(t.width+200,t.height+200,25);this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+_t,this.screenBottomBoundary=t.height+_t,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,e,n,r,i,o){const a=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY,o),s=n*a.perspectiveRatio,l=t.x1*s+a.point.x,u=t.y1*s+a.point.y,c=t.x2*s+a.point.x,h=t.y2*s+a.point.y;return!this.isInsideGrid(l,u,c,h)||"always"!==e&&this.grid.hitTest(l,u,c,h,e,i)||a.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[l,u,c,h],offscreen:this.isOffscreen(l,u,c,h)}}placeCollisionCircles(e,n,r,i,o,a,s,l,u,c,h,d,p,f){const m=[],g=new t.pointGeometry(n.anchorX,n.anchorY),y=st(g,a,f),v=lt(this.transform.cameraToCenterDistance,y.signedDistanceFromCamera),_=(c?o/v:o*v)/t.ONE_EM,b=st(g,s,f).point,x=ht(_,i,n.lineOffsetX*_,n.lineOffsetY*_,!1,b,g,n,r,s,{},!1,f);let w=!1,E=!1,S=!0;if(x){const n=.5*d*v+p,r=new t.pointGeometry(-100,-100),i=new t.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),o=new nt,a=x.first,s=x.last;let c=[];for(let t=a.path.length-1;t>=1;t--)c.push(a.path[t]);for(let t=1;t<s.path.length;t++)c.push(s.path[t]);const g=2.5*n;if(l){const t=c.map((t=>st(t,l,f)));c=t.some((t=>t.signedDistanceFromCamera<=0))?[]:t.map((t=>t.point))}let y=[];if(c.length>0){const e=c[0].clone(),n=c[0].clone();for(let t=1;t<c.length;t++)e.x=Math.min(e.x,c[t].x),e.y=Math.min(e.y,c[t].y),n.x=Math.max(n.x,c[t].x),n.y=Math.max(n.y,c[t].y);y=e.x>=r.x&&n.x<=i.x&&e.y>=r.y&&n.y<=i.y?[c]:n.x<r.x||e.x>i.x||n.y<r.y||e.y>i.y?[]:t.clipLine([c],r.x,r.y,i.x,i.y)}for(const t of y){o.reset(t,.25*n);let r=0;r=o.length<=.5*n?1:Math.ceil(o.paddedLength/g)+1;for(let t=0;t<r;t++){const i=t/Math.max(r-1,1),a=o.lerp(i),s=a.x+_t,l=a.y+_t;m.push(s,l,n,0);const c=s-n,d=l-n,p=s+n,f=l+n;if(S=S&&this.isOffscreen(c,d,p,f),E=E||this.isInsideGrid(c,d,p,f),"always"!==e&&this.grid.hitTestCircle(s,l,n,e,h)&&(w=!0,!u))return{circles:[],offscreen:!1,collisionDetected:w}}}}return{circles:!u&&w||!E||v<this.perspectiveRatioCutoff?[]:m,offscreen:S,collisionDetected:w}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let r=1/0,i=1/0,o=-1/0,a=-1/0;for(const c of e){const e=new t.pointGeometry(c.x+_t,c.y+_t);r=Math.min(r,e.x),i=Math.min(i,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y),n.push(e)}const s=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a)),l={},u={};for(const c of s){const e=c.key;if(void 0===l[e.bucketInstanceId]&&(l[e.bucketInstanceId]={}),l[e.bucketInstanceId][e.featureIndex])continue;const r=[new t.pointGeometry(c.x1,c.y1),new t.pointGeometry(c.x2,c.y1),new t.pointGeometry(c.x2,c.y2),new t.pointGeometry(c.x1,c.y2)];t.polygonIntersectsPolygon(n,r)&&(l[e.bucketInstanceId][e.featureIndex]=!0,void 0===u[e.bucketInstanceId]&&(u[e.bucketInstanceId]=[]),u[e.bucketInstanceId].push(e.featureIndex))}return u}insertCollisionBox(t,e,n,r,i,o){(n?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:i,collisionGroupID:o,overlapMode:e},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,n,r,i,o){const a=n?this.ignoredGrid:this.grid,s={bucketInstanceId:r,featureIndex:i,collisionGroupID:o,overlapMode:e};for(let l=0;l<t.length;l+=4)a.insertCircle(s,t[l],t[l+1],t[l+2])}projectAndGetPerspectiveRatio(e,n,r,i){let o;return i?(o=[n,r,i(n,r),1],t.transformMat4(o,o,e)):(o=[n,r,0,1],vt(o,o,e)),{point:new t.pointGeometry((o[0]/o[3]+1)/2*this.transform.width+_t,(-o[1]/o[3]+1)/2*this.transform.height+_t),perspectiveRatio:.5+this.transform.cameraToCenterDistance/o[3]*.5}}isOffscreen(t,e,n,r){return n<_t||t>=this.screenRightBoundary||r<_t||e>this.screenBottomBoundary}isInsideGrid(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}function xt(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}class wt{constructor(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class Et{constructor(t,e,n,r,i){this.text=new wt(t?t.text:null,e,n,i),this.icon=new wt(t?t.icon:null,e,r,i)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class St{constructor(t,e,n){this.text=t,this.icon=e,this.skipFade=n}}class Ct{constructor(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]}}class Tt{constructor(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}}class It{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function kt(e,n,r,i,o){const{horizontalAlign:a,verticalAlign:s}=t.getAnchorAlignment(e),l=-(a-.5)*n,u=-(s-.5)*r,c=t.evaluateVariableOffset(e,i);return new t.pointGeometry(l+c[0]*o,u+c[1]*o)}function At(e,n,r,i,o,a){const{x1:s,x2:l,y1:u,y2:c,anchorPointX:h,anchorPointY:d}=e,p=new t.pointGeometry(n,r);return i&&p._rotate(o?a:-a),{x1:s+p.x,y1:u+p.y,x2:l+p.x,y2:c+p.y,anchorPointX:h,anchorPointY:d}}class Pt{constructor(t,e,n,r,i){this.transform=t.clone(),this.terrain=e,this.collisionIndex=new bt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new It(r),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,n,r,i){const o=r.getBucket(n),a=r.latestFeatureIndex;if(!o||!a||n.id!==o.layerIds[0])return;const s=r.collisionBoxArray,l=o.layers[0].layout,u=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/t.EXTENT,h=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),d="map"===l.get("text-pitch-alignment"),p="map"===l.get("text-rotation-alignment"),f=xt(r,1,this.transform.zoom),m=ot(h,d,p,this.transform,f);let g=null;if(d){const e=at(h,d,p,this.transform,f);g=t.multiply([],this.transform.labelPlaneMatrix,e)}this.retainedQueryData[o.bucketInstanceId]=new Tt(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);const y={bucket:o,layout:l,posMatrix:h,textLabelPlaneMatrix:m,labelToScreenMatrix:g,scale:u,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(const t of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i}=t;e.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i,parameters:y})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:y})}attemptAnchorPlacement(t,e,n,r,i,o,a,s,l,u,c,h,d,p,f,m){const g=[h.textOffset0,h.textOffset1],y=kt(t,n,r,g,i),v=this.collisionIndex.placeCollisionBox(At(e,y.x,y.y,o,a,this.transform.angle),c,s,l,u.predicate,m);if((!f||0!==this.collisionIndex.placeCollisionBox(At(f,y.x,y.y,o,a,this.transform.angle),c,s,l,u.predicate,m).box.length)&&v.box.length>0){let e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(e=this.prevPlacement.variableOffsets[h.crossTileID].anchor),0===h.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[h.crossTileID]={textOffset:g,width:n,height:r,anchor:t,textBoxScale:i,prevAnchor:e},this.markUsedJustification(d,t,h,p),d.allowVerticalPlacement&&(this.markUsedOrientation(d,p,h),this.placedOrientations[h.crossTileID]=p),{shift:y,placedGlyphBoxes:v}}}placeLayerBucketPart(e,n,r){const{bucket:i,layout:o,posMatrix:a,textLabelPlaneMatrix:s,labelToScreenMatrix:l,textPixelRatio:u,holdingForFade:c,collisionBoxArray:h,partiallyEvaluatedTextSize:d,collisionGroup:p}=e.parameters,f=o.get("text-optional"),m=o.get("icon-optional"),g=t.getOverlapMode(o,"text-overlap","text-allow-overlap"),y="always"===g,v=t.getOverlapMode(o,"icon-overlap","icon-allow-overlap"),_="always"===v,b="map"===o.get("text-rotation-alignment"),x="map"===o.get("text-pitch-alignment"),w="none"!==o.get("icon-text-fit"),E="viewport-y"===o.get("symbol-z-order"),S=y&&(_||!i.hasIconData()||m),C=_&&(y||!i.hasTextData()||f);!i.collisionArrays&&h&&i.deserializeCollisionBoxes(h);const T=(e,h)=>{if(n[e.crossTileID])return;if(c)return void(this.placements[e.crossTileID]=new St(!1,!1,!1));let _=!1,E=!1,T=!0,I=null,k={box:null,offscreen:null},A={box:null,offscreen:null},P=null,D=null,M=null,O=0,R=0,N=0;h.textFeatureIndex?O=h.textFeatureIndex:e.useRuntimeCollisionCircles&&(O=e.featureIndex),h.verticalTextFeatureIndex&&(R=h.verticalTextFeatureIndex);const L=this.retainedQueryData[i.bucketInstanceId].tileID,F=this.terrain?(t,e)=>this.terrain.getElevation(L,t,e):null;for(const t of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const e=h[t];e&&(e.elevation=F?F(e.anchorPointX,e.anchorPointY):0)}const z=h.textBox;if(z){const n=n=>{let r=t.WritingMode.horizontal;if(i.allowVerticalPlacement&&!n&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,r=t,this.markUsedOrientation(i,r,e))}return r},r=(n,r)=>{if(i.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&h.verticalTextBox){for(const e of i.writingModes)if(e===t.WritingMode.vertical?(k=r(),A=k):k=n(),k&&k.box&&k.box.length)break}else k=n()};if(o.get("text-variable-anchor")){let s=o.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[e.crossTileID]){const t=this.prevPlacement.variableOffsets[e.crossTileID];s.indexOf(t.anchor)>0&&(s=s.filter((e=>e!==t.anchor)),s.unshift(t.anchor))}const l=(t,n,r)=>{const o=t.x2-t.x1,l=t.y2-t.y1,c=e.textBoxScale,h=w&&"never"===v?n:null;let d={box:[],offscreen:!1};const f="never"!==g?2*s.length:s.length;for(let m=0;m<f;++m){const n=this.attemptAnchorPlacement(s[m%s.length],t,o,l,c,b,x,u,a,p,m>=s.length?g:"never",e,i,r,h,F);if(n&&(d=n.placedGlyphBoxes,d&&d.box&&d.box.length)){_=!0,I=n.shift;break}}return d};r((()=>l(z,h.iconBox,t.WritingMode.horizontal)),(()=>{const n=h.verticalTextBox;return i.allowVerticalPlacement&&!(k&&k.box&&k.box.length)&&e.numVerticalGlyphVertices>0&&n?l(n,h.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),k&&(_=k.box,T=k.offscreen);const c=n(k&&k.box);if(!_&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(i,t.anchor,e,c))}}else{const o=(t,n)=>{const r=this.collisionIndex.placeCollisionBox(t,g,u,a,p.predicate,F);return r&&r.box&&r.box.length&&(this.markUsedOrientation(i,n,e),this.placedOrientations[e.crossTileID]=n),r};r((()=>o(z,t.WritingMode.horizontal)),(()=>{const n=h.verticalTextBox;return i.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?o(n,t.WritingMode.vertical):{box:null,offscreen:null}})),n(k&&k.box&&k.box.length)}}if(P=k,_=P&&P.box&&P.box.length>0,T=P&&P.offscreen,e.useRuntimeCollisionCircles){const n=i.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),u=t.evaluateSizeForFeature(i.textSizeData,d,n),c=o.get("text-padding");D=this.collisionIndex.placeCollisionCircles(g,n,i.lineVertexArray,i.glyphOffsetArray,u,a,s,l,r,x,p.predicate,e.collisionCircleDiameter,c,F),D.circles.length&&D.collisionDetected&&!r&&t.warnOnce("Collisions detected, but collision boxes are not shown"),_=y||D.circles.length>0&&!D.collisionDetected,T=T&&D.offscreen}if(h.iconFeatureIndex&&(N=h.iconFeatureIndex),h.iconBox){const t=t=>{const e=w&&I?At(t,I.x,I.y,b,x,this.transform.angle):t;return this.collisionIndex.placeCollisionBox(e,v,u,a,p.predicate,F)};A&&A.box&&A.box.length&&h.verticalIconBox?(M=t(h.verticalIconBox),E=M.box.length>0):(M=t(h.iconBox),E=M.box.length>0),T=T&&M.offscreen}const B=f||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,j=m||0===e.numIconVertices;if(B||j?j?B||(E=E&&_):_=E&&_:E=_=E&&_,_&&P&&P.box&&this.collisionIndex.insertCollisionBox(P.box,g,o.get("text-ignore-placement"),i.bucketInstanceId,A&&A.box&&R?R:O,p.ID),E&&M&&this.collisionIndex.insertCollisionBox(M.box,v,o.get("icon-ignore-placement"),i.bucketInstanceId,N,p.ID),D&&(_&&this.collisionIndex.insertCollisionCircles(D.circles,g,o.get("text-ignore-placement"),i.bucketInstanceId,O,p.ID),r)){const t=i.bucketInstanceId;let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new Ct);for(let n=0;n<D.circles.length;n+=4)e.circles.push(D.circles[n+0]),e.circles.push(D.circles[n+1]),e.circles.push(D.circles[n+2]),e.circles.push(D.collisionDetected?1:0)}if(0===e.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===i.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[e.crossTileID]=new St(_||S,E||C,T||i.justReloaded),n[e.crossTileID]=!0};if(E){if(0!==e.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const t=i.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const n=t[e];T(i.symbolInstances.get(n),i.collisionArrays[n])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)T(i.symbolInstances.get(t),i.collisionArrays[t]);if(r&&i.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[i.bucketInstanceId];t.invert(e.invProjMatrix,a),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}i.justReloaded=!1}markUsedJustification(e,n,r,i){let o;o=i===t.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(n)];const a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];for(const t of a)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=o>=0&&t!==o?0:r.crossTileID)}markUsedOrientation(e,n,r){const i=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];for(const t of a)e.text.placedSymbolArray.get(t).placedOrientation=i;r.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const e=this.prevPlacement;let n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;const r=e?e.symbolFadeChange(t):1,i=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(const s in this.placements){const t=this.placements[s],e=i[s];e?(this.opacities[s]=new Et(e,r,t.text,t.icon),n=n||t.text!==e.text.placed||t.icon!==e.icon.placed):(this.opacities[s]=new Et(null,r,t.text,t.icon,t.skipFade),n=n||t.text||t.icon)}for(const s in i){const t=i[s];if(!this.opacities[s]){const e=new Et(t,r,!1,!1);e.isHidden()||(this.opacities[s]=e,n=n||t.text.placed||t.icon.placed)}}for(const s in o)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=o[s]);for(const s in a)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=a[s]);if(e&&void 0===e.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){const n={};for(const r of e){const e=r.getBucket(t);e&&r.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,n,r.collisionBoxArray)}}updateBucketOpacities(e,n,r){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const i=e.layers[0].layout,o=new Et(null,0,!1,!1,!0),a=i.get("text-allow-overlap"),s=i.get("icon-allow-overlap"),l=i.get("text-variable-anchor"),u="map"===i.get("text-rotation-alignment"),c="map"===i.get("text-pitch-alignment"),h="none"!==i.get("icon-text-fit"),d=new Et(null,0,a&&(s||!e.hasIconData()||i.get("icon-optional")),s&&(a||!e.hasTextData()||i.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);const p=(t,e,n)=>{for(let r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(n)};for(let f=0;f<e.symbolInstances.length;f++){const r=e.symbolInstances.get(f),{numHorizontalGlyphVertices:i,numVerticalGlyphVertices:a,crossTileID:s}=r;let m=this.opacities[s];n[s]?m=o:m||(m=d,this.opacities[s]=m),n[s]=!0;const g=r.numIconVertices>0,y=this.placedOrientations[r.crossTileID],v=y===t.WritingMode.vertical,_=y===t.WritingMode.horizontal||y===t.WritingMode.horizontalOnly;if(i>0||a>0){const t=Bt(m.text);p(e.text,i,v?jt:t),p(e.text,a,_?jt:t);const n=m.text.isHidden();[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=n||v?1:0)})),r.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).hidden=n||_?1:0);const o=this.variableOffsets[r.crossTileID];o&&this.markUsedJustification(e,o.anchor,r,y);const s=this.placedOrientations[r.crossTileID];s&&(this.markUsedJustification(e,"left",r,s),this.markUsedOrientation(e,s,r))}if(g){const t=Bt(m.icon),n=!(h&&r.verticalPlacedIconSymbolIndex&&v);r.placedIconSymbolIndex>=0&&(p(e.icon,r.numIconVertices,n?t:jt),e.icon.placedSymbolArray.get(r.placedIconSymbolIndex).hidden=m.icon.isHidden()),r.verticalPlacedIconSymbolIndex>=0&&(p(e.icon,r.numVerticalIconVertices,n?jt:t),e.icon.placedSymbolArray.get(r.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const n=e.collisionArrays[f];if(n){let r=new t.pointGeometry(0,0);if(n.textBox||n.verticalTextBox){let t=!0;if(l){const e=this.variableOffsets[s];e?(r=kt(e.anchor,e.width,e.height,e.textOffset,e.textBoxScale),u&&r._rotate(c?this.transform.angle:-this.transform.angle)):t=!1}n.textBox&&Dt(e.textCollisionBox.collisionVertexArray,m.text.placed,!t||v,r.x,r.y),n.verticalTextBox&&Dt(e.textCollisionBox.collisionVertexArray,m.text.placed,!t||_,r.x,r.y)}const i=Boolean(!_&&n.verticalIconBox);n.iconBox&&Dt(e.iconCollisionBox.collisionVertexArray,m.icon.placed,i,h?r.x:0,h?r.y:0),n.verticalIconBox&&Dt(e.iconCollisionBox.collisionVertexArray,m.icon.placed,!i,h?r.x:0,h?r.y:0)}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);if(e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t}setStale(){this.stale=!0}}function Dt(t,e,n,r,i){t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0)}const Mt=Math.pow(2,25),Ot=Math.pow(2,24),Rt=Math.pow(2,17),Nt=Math.pow(2,16),Lt=Math.pow(2,9),Ft=Math.pow(2,8),zt=Math.pow(2,1);function Bt(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*Mt+e*Ot+n*Rt+e*Nt+n*Lt+e*Ft+n*zt+e}const jt=0;class Ut{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,e,n,r,i){const o=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((t,e)=>t.sortKey-e.sortKey)));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,i())return!0;return!1}}class Vt{constructor(t,e,n,r,i,o,a,s){this.placement=new Pt(t,e,o,a,s),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=i,this._done=!1}isDone(){return this._done}continuePlacement(e,n,r){const i=t.exported.now(),o=()=>{const e=t.exported.now()-i;return!this._forceFullPlacement&&e>2};for(;this._currentPlacementIndex>=0;){const t=n[e[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=i)&&(!t.maxzoom||t.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new Ut(t)),this._inProgressLayer.continuePlacement(r[t.source],this.placement,this._showCollisionBoxes,t,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const qt=512/t.EXTENT/2;class Gt{constructor(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(let r=0;r<e.length;r++){const n=e.get(r),i=n.key;this.indexedSymbolInstances[i]||(this.indexedSymbolInstances[i]=[]),this.indexedSymbolInstances[i].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,t)})}}getScaledCoordinates(e,n){const r=qt/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*r)}}findMatches(t,e,n){const r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z);for(let i=0;i<t.length;i++){const o=t.get(i);if(o.crossTileID)continue;const a=this.indexedSymbolInstances[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,e);for(const t of a)if(Math.abs(t.coord.x-s.x)<=r&&Math.abs(t.coord.y-s.y)<=r&&!n[t.crossTileID]){n[t.crossTileID]=!0,o.crossTileID=t.crossTileID;break}}}}class Yt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class $t{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const n in this.indexes){const t=this.indexes[n],r={};for(const n in t){const i=t[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),r[i.tileID.key]=i}this.indexes[n]=r}this.lng=t}addBucket(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let i=0;i<e.symbolInstances.length;i++)e.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const r=this.usedCrossTileIDs[t.overscaledZ];for(const i in this.indexes){const n=this.indexes[i];if(Number(i)>t.overscaledZ)for(const i in n){const o=n[i];o.tileID.isChildOf(t)&&o.findMatches(e.symbolInstances,t,r)}else{const o=n[t.scaledTo(Number(i)).key];o&&o.findMatches(e.symbolInstances,t,r)}}for(let i=0;i<e.symbolInstances.length;i++){const t=e.symbolInstances.get(i);t.crossTileID||(t.crossTileID=n.generate(),r[t.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Gt(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const n in e.indexedSymbolInstances)for(const r of e.indexedSymbolInstances[n])delete this.usedCrossTileIDs[t][r.crossTileID]}removeStaleBuckets(t){let e=!1;for(const n in this.indexes){const r=this.indexes[n];for(const i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e}}class Wt{constructor(){this.layerIndexes={},this.crossTileIDs=new Yt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,n){let r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new $t);let i=!1;const o={};r.handleWrapJump(n);for(const a of e){const e=a.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(a.tileID,e,this.crossTileIDs)&&(i=!0),o[e.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i}pruneUnusedLayers(t){const e={};t.forEach((t=>{e[t]=!0}));for(const n in this.layerIndexes)e[n]||delete this.layerIndexes[n]}}var Ht=t.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Xt extends t.Evented{constructor(t){super(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=t._cache.max,t.usedForTerrain=!0,t.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const t in this._tiles){const e=this._tiles[t];e.textures.forEach((t=>t.destroy())),e.textures=[]}}update(e,n){this.sourceCache.update(e,n),this._renderableTilesKeys=[];for(const r of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:n}))this._renderableTilesKeys.push(r.key),this._tiles[r.key]||(r.posMatrix=new Float64Array(16),t.ortho(r.posMatrix,0,t.EXTENT,0,t.EXTENT,0,1),this._tiles[r.key]=new N(r,this.tileSize))}removeOutdated(t){const e={};this.renderHistory=this.renderHistory.filter(((t,e)=>this.renderHistory.indexOf(t)===e)).slice(0,this.renderHistorySize);for(const n of this._renderableTilesKeys)e[n]=!0;for(const n of this.renderHistory)e[n]=!0;for(const n in this._tiles)e[n]||(this._tiles[n].clearTextures(t),delete this._tiles[n])}getRenderableTiles(){return this._renderableTilesKeys.map((t=>this.getTileByID(t)))}getTileByID(t){return this._tiles[t]}getTerrainCoords(e){const n={};for(const r of this._renderableTilesKeys){const i=this._tiles[r].tileID;if(i.canonical.equals(e.canonical)){const i=e.clone();i.posMatrix=new Float64Array(16),t.ortho(i.posMatrix,0,t.EXTENT,0,t.EXTENT,0,1),n[r]=i}else if(i.canonical.isChildOf(e.canonical)){const o=e.clone();o.posMatrix=new Float64Array(16);const a=i.canonical.z-e.canonical.z,s=i.canonical.x-(i.canonical.x>>a<<a),l=i.canonical.y-(i.canonical.y>>a<<a),u=t.EXTENT>>a;t.ortho(o.posMatrix,0,u,0,u,0,1),t.translate(o.posMatrix,o.posMatrix,[-s*u,-l*u,0]),n[r]=o}else if(e.canonical.isChildOf(i.canonical)){const o=e.clone();o.posMatrix=new Float64Array(16);const a=e.canonical.z-i.canonical.z,s=e.canonical.x-(e.canonical.x>>a<<a),l=e.canonical.y-(e.canonical.y>>a<<a),u=t.EXTENT>>a;t.ortho(o.posMatrix,0,t.EXTENT,0,t.EXTENT,0,1),t.translate(o.posMatrix,o.posMatrix,[s*u,l*u,0]),t.scale(o.posMatrix,o.posMatrix,[1/2**a,1/2**a,0]),n[r]=o}}return n}getSourceTile(t,e){const n=this.sourceCache._source;let r=t.overscaledZ-this.deltaZoom;if(r>n.maxzoom&&(r=n.maxzoom),r<n.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(r).key);let i=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!i||!i.dem)&&e)for(;r>=n.minzoom&&(!i||!i.dem);)i=this.sourceCache.getTileByID(t.scaledTo(r--).key);return i}tilesAfterTime(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return Object.values(this._tiles).filter((e=>e.timeLoaded>=t))}}class Zt{constructor(t,e,n){this.style=t,this.sourceCache=new Xt(e),this.options=n,this.exaggeration="number"==typeof n.exaggeration?n.exaggeration:1,this.elevationOffset="number"==typeof n.elevationOffset?n.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.EXTENT;if(!(n>=0&&n<i&&r>=0&&r<i))return this.elevationOffset;let o=0;const a=this.getTerrainData(e);if(a.tile&&a.tile.dem){const e=t.transformMat4$1([],[n/i*t.EXTENT,r/i*t.EXTENT],a.u_terrain_matrix),s=[e[0]*a.tile.dem.dim,e[1]*a.tile.dem.dim],l=[Math.floor(s[0]),Math.floor(s[1])],u=a.tile.dem.get(l[0],l[1]),c=a.tile.dem.get(l[0],l[1]+1),h=a.tile.dem.get(l[0]+1,l[1]),d=a.tile.dem.get(l[0]+1,l[1]+1);o=t.number(t.number(u,c,s[0]-l[0]),t.number(h,d,s[0]-l[0]),s[1]-l[1])}return o}rememberForRerender(t,e){for(const n in this.sourceCache._tiles){const r=this.sourceCache._tiles[n];(r.tileID.equals(e)||r.tileID.isChildOf(e))&&(t===this.sourceCache.sourceCache.id&&(r.timeLoaded=Date.now()),this._rerender[t]=this._rerender[t]||{},this._rerender[t][r.tileID.key]=!0)}}needsRerender(t,e){return this._rerender[t]&&this._rerender[t][e.key]}clearRerenderCache(){this._rerender={}}getElevation(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.EXTENT;return(this.getDEMElevation(e,n,r,i)+this.elevationOffset)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const e=this.style.map.painter.context,n=new t.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new l(e,n,e.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new l(e,new t.RGBAImage({width:1,height:1}),e.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=t.identity([])}const n=this.sourceCache.getSourceTile(e,!0);if(n&&n.dem&&(!n.demTexture||n.needsTerrainPrepare)){const t=this.style.map.painter.context;n.demTexture=this.style.map.painter.getTileTexture(n.dem.stride),n.demTexture?n.demTexture.update(n.dem.getPixels(),{premultiply:!1}):n.demTexture=new l(t,n.dem.getPixels(),t.gl.RGBA,{premultiply:!1}),n.demTexture.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),n.needsTerrainPrepare=!1}const r=n&&n+n.tileID.key+e.key;if(r&&!this._demMatrixCache[r]){const r=this.sourceCache.sourceCache._source.maxzoom;let i=e.canonical.z-n.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=r?i=e.canonical.z-r:t.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const o=e.canonical.x-(e.canonical.x>>i<<i),a=e.canonical.y-(e.canonical.y>>i<<i),s=t.fromScaling(new Float64Array(16),[1/(t.EXTENT<<i),1/(t.EXTENT<<i),0]);t.translate(s,s,[o*t.EXTENT,a*t.EXTENT,0]),this._demMatrixCache[e.key]={matrix:s,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:n&&n.dem&&n.dem.dim||1,u_terrain_matrix:r?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:n&&n.dem&&n.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(n&&n.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:n}}getRTTFramebuffer(){const t=this.style.map.painter;if(!this._rttFramebuffer){const e=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=t.context.createFramebuffer(e,e,!0),this._rttFramebuffer.depthAttachment.set(t.context.createRenderbuffer(t.context.gl.DEPTH_COMPONENT16,e,e))}return this._rttFramebuffer}getFramebuffer(t){const e=this.style.map.painter,n=e.width/devicePixelRatio,r=e.height/devicePixelRatio;return!this._fbo||this._fbo.width===n&&this._fbo.height===r||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new l(e.context,{width:n,height:r,data:null},e.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(e.context.gl.NEAREST,e.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new l(e.context,{width:n,height:r,data:null},e.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(e.context.gl.NEAREST,e.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=e.context.createFramebuffer(n,r,!0),this._fbo.depthAttachment.set(e.context.createRenderbuffer(e.context.gl.DEPTH_COMPONENT16,n,r))),this._fbo.colorAttachment.set("coords"===t?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const n=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let t=0,o=0;t<this._coordsTextureSize;t++)for(let e=0;e<this._coordsTextureSize;e++,o+=4)n[o+0]=255&e,n[o+1]=255&t,n[o+2]=e>>8<<4|t>>8,n[o+3]=0;const r=new t.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(n.buffer)),i=new l(e,r,e.gl.RGBA,{premultiply:!1});return i.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=i,i}pointCoordinate(e){const n=new Uint8Array(4),r=this.style.map.painter,i=r.context,o=i.gl;i.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),o.readPixels(e.x,r.height/devicePixelRatio-e.y-1,1,1,o.RGBA,o.UNSIGNED_BYTE,n),i.bindFramebuffer.set(null);const a=n[0]+(n[2]>>4<<8),s=n[1]+((15&n[2])<<8),l=this.coordsIndex[255-n[3]],u=l&&this.sourceCache.getTileByID(l);if(!u)return null;const c=this._coordsTextureSize,h=(1<<u.tileID.canonical.z)*c;return new t.MercatorCoordinate((u.tileID.canonical.x*c+a)/h,(u.tileID.canonical.y*c+s)/h,this.getElevation(u.tileID,a,s,c))}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.style.map.painter.context,n=new t.PosArray,r=new t.TriangleIndexArray,i=this.meshSize,o=t.EXTENT/i,a=i*i;for(let t=0;t<=i;t++)for(let e=0;e<=i;e++)n.emplaceBack(e*o,t*o);for(let t=0;t<a;t+=i+1)for(let e=0;e<i;e++)r.emplaceBack(e+t,i+e+t+1,i+e+t+2),r.emplaceBack(e+t,i+e+t+2,e+t+1);return this._mesh={indexBuffer:e.createIndexBuffer(r),vertexBuffer:e.createVertexBuffer(n,Ht.members),segments:t.SegmentVector.simpleSegment(0,0,n.length,r.length)},this._mesh}getMinMaxElevation(t){const e=this.getTerrainData(t).tile,n={minElevation:null,maxElevation:null};return e&&e.dem&&(n.minElevation=(e.dem.min+this.elevationOffset)*this.exaggeration,n.maxElevation=(e.dem.max+this.elevationOffset)*this.exaggeration),n}}const Kt=(e,n)=>t.emitValidationErrors(e,n&&n.filter((t=>"source.canvas"!==t.identifier))),Qt=t.pick(H,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Jt=t.pick(H,["setCenter","setZoom","setBearing","setPitch"]),te=function(){const e={},n=t.spec.$version;for(const r in t.spec.$root){const i=t.spec.$root[r];if(i.required){let t=null;t="version"===r?n:"array"===i.type?[]:{},null!=t&&(e[r]=t)}}return e}();class ee extends t.Evented{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.map=e,this.dispatcher=new _(Y(),this),this.imageManager=new c,this.imageManager.setEventedParent(this),this.glyphManager=new f(e._requestManager,n.localIdeographFontFamily),this.lineAtlas=new v(256,512),this.crossTileSymbolIndex=new Wt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const r=this;this._rtlTextPluginCallback=ee.registerForPluginStateChange((e=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},((e,n)=>{if(t.triggerPluginCompletionEvent(e),n&&n.every((t=>t)))for(const t in r.sourceCaches)r.sourceCaches[t].reload()}))})),this.on("data",(t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.sourceCaches[t.sourceId];if(!e)return;const n=e.getSource();if(n&&n.vectorLayerIds)for(const r in this._layers){const t=this._layers[r];t.source===n.id&&this._validateLayer(t)}}))}loadURL(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new t.Event("dataloading",{dataType:"style"}));const r="boolean"!=typeof n.validate||n.validate,i=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(i,((e,n)=>{this._request=null,e?this.fire(new t.ErrorEvent(e)):n&&this._load(n,r)}))}loadJSON(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame((()=>{this._request=null,this._load(e,!1!==n.validate)}))}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(te,!1)}_load(e,n){if(n&&Kt(this,t.validateStyle(e)))return;this._loaded=!0,this.stylesheet=e;for(const t in e.sources)this.addSource(t,e.sources[t],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);const r=W(this.stylesheet.layers);this._order=r.map((t=>t.id)),this._layers={},this._serializedLayers={};for(let i of r)i=t.createStyleLayer(i),i.setEventedParent(this,{layer:{id:i.id}}),this._layers[i.id]=i,this._serializedLayers[i.id]=i.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new y(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}_loadSprite(e){this._spriteRequest=function(e,n,r,i){let o,a,s;const l=r>1?"@2x":"";let u=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,l,".json"),t.ResourceType.SpriteJSON),((t,e)=>{u=null,s||(s=t,o=e,h())})),c=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,l,".png"),t.ResourceType.SpriteImage),((t,e)=>{c=null,s||(s=t,a=e,h())}));function h(){if(s)i(s);else if(o&&a){const e=t.exported.getImageData(a),n={};for(const r in o){const{width:i,height:a,x:s,y:l,sdf:u,pixelRatio:c,stretchX:h,stretchY:d,content:p}=o[r],f=new t.RGBAImage({width:i,height:a});t.RGBAImage.copy(e,f,{x:s,y:l},{x:0,y:0},{width:i,height:a}),n[r]={data:f,pixelRatio:c,sdf:u,stretchX:h,stretchY:d,content:p}}i(null,n)}}return{cancel(){u&&(u.cancel(),u=null),c&&(c.cancel(),c=null)}}}(e,this.map._requestManager,this.map.getPixelRatio(),((e,n)=>{if(this._spriteRequest=null,e)this.fire(new t.ErrorEvent(e));else if(n)for(const t in n)this.imageManager.addImage(t,n[t]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}))}_validateLayer(e){const n=this.sourceCaches[e.source];if(!n)return;const r=e.sourceLayer;if(!r)return;const i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error(`Source layer "${r}" does not exist on source "${i.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const e=[];for(const n of t){const t=this._layers[n];"custom"!==t.type&&e.push(t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const n=this._changed;if(this._changed){const t=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(t.length||n.length)&&this._updateWorkerLayers(t,n);for(const e in this._updatedSources){const t=this._updatedSources[e];if("reload"===t)this._reloadSource(e);else{if("clear"!==t)throw new Error(`Invalid action ${t}`);this._clearSource(e)}}this._updateTilesForChangedImages();for(const r in this._updatedPaintProps)this._layers[r].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}const r={};for(const t in this.sourceCaches){const e=this.sourceCaches[t];r[t]=e.used,e.used=!1}for(const t of this._order){const n=this._layers[t];n.recalculate(e,this._availableImages),!n.isHidden(e.zoom)&&n.source&&(this.sourceCaches[n.source].used=!0)}for(const i in r){const e=this.sourceCaches[i];r[i]!==e.used&&e.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:i}))}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(e){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),e){const t=this.sourceCaches[e.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${e.source}`);this.terrain=new Zt(this,t,e),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=t=>{t.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=t=>{t.tile&&(t.sourceId===e.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(t.sourceId,t.tile.tileID)):"geojson"===t.source.type&&this.terrain.rememberForRerender(t.sourceId,t.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new t.Event("terrain",{terrain:e}))}setState(e){if(this._checkLoaded(),Kt(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=W(e.layers);const n=function(t,e){if(!t)return[{command:H.setStyle,args:[e]}];let n=[];try{if(!i(t.version,e.version))return[{command:H.setStyle,args:[e]}];i(t.center,e.center)||n.push({command:H.setCenter,args:[e.center]}),i(t.zoom,e.zoom)||n.push({command:H.setZoom,args:[e.zoom]}),i(t.bearing,e.bearing)||n.push({command:H.setBearing,args:[e.bearing]}),i(t.pitch,e.pitch)||n.push({command:H.setPitch,args:[e.pitch]}),i(t.sprite,e.sprite)||n.push({command:H.setSprite,args:[e.sprite]}),i(t.glyphs,e.glyphs)||n.push({command:H.setGlyphs,args:[e.glyphs]}),i(t.transition,e.transition)||n.push({command:H.setTransition,args:[e.transition]}),i(t.light,e.light)||n.push({command:H.setLight,args:[e.light]});const r={},o=[];!function(t,e,n,r){let o;for(o in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,o)&&(Object.prototype.hasOwnProperty.call(e,o)||Z(o,n,r));for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(Object.prototype.hasOwnProperty.call(t,o)?i(t[o],e[o])||("geojson"===t[o].type&&"geojson"===e[o].type&&Q(t,e,o)?n.push({command:H.setGeoJSONSourceData,args:[o,e[o].data]}):K(o,e,n,r)):X(o,e,n))}(t.sources,e.sources,o,r);const a=[];t.layers&&t.layers.forEach((t=>{r[t.source]?n.push({command:H.removeLayer,args:[t.id]}):a.push(t)})),n=n.concat(o),function(t,e,n){e=e||[];const r=(t=t||[]).map(tt),o=e.map(tt),a=t.reduce(et,{}),s=e.reduce(et,{}),l=r.slice(),u=Object.create(null);let c,h,d,p,f,m,g;for(c=0,h=0;c<r.length;c++)d=r[c],Object.prototype.hasOwnProperty.call(s,d)?h++:(n.push({command:H.removeLayer,args:[d]}),l.splice(l.indexOf(d,h),1));for(c=0,h=0;c<o.length;c++)d=o[o.length-1-c],l[l.length-1-c]!==d&&(Object.prototype.hasOwnProperty.call(a,d)?(n.push({command:H.removeLayer,args:[d]}),l.splice(l.lastIndexOf(d,l.length-h),1)):h++,m=l[l.length-c],n.push({command:H.addLayer,args:[s[d],m]}),l.splice(l.length-c,0,d),u[d]=!0);for(c=0;c<o.length;c++)if(d=o[c],p=a[d],f=s[d],!u[d]&&!i(p,f))if(i(p.source,f.source)&&i(p["source-layer"],f["source-layer"])&&i(p.type,f.type)){for(g in J(p.layout,f.layout,n,d,null,H.setLayoutProperty),J(p.paint,f.paint,n,d,null,H.setPaintProperty),i(p.filter,f.filter)||n.push({command:H.setFilter,args:[d,f.filter]}),i(p.minzoom,f.minzoom)&&i(p.maxzoom,f.maxzoom)||n.push({command:H.setLayerZoomRange,args:[d,f.minzoom,f.maxzoom]}),p)Object.prototype.hasOwnProperty.call(p,g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?J(p[g],f[g],n,d,g.slice(6),H.setPaintProperty):i(p[g],f[g])||n.push({command:H.setLayerProperty,args:[d,g,f[g]]}));for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&!Object.prototype.hasOwnProperty.call(p,g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?J(p[g],f[g],n,d,g.slice(6),H.setPaintProperty):i(p[g],f[g])||n.push({command:H.setLayerProperty,args:[d,g,f[g]]}))}else n.push({command:H.removeLayer,args:[d]}),m=l[l.lastIndexOf(d)+1],n.push({command:H.addLayer,args:[f,m]})}(a,e.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:H.setStyle,args:[e]}]}return n}(this.serialize(),e).filter((t=>!(t.command in Jt)));if(0===n.length)return!1;const r=n.filter((t=>!(t.command in Qt)));if(r.length>0)throw new Error(`Unimplemented: ${r.map((t=>t.command)).join(", ")}.`);return n.forEach((t=>{"setTransition"!==t.command&&this[t.command].apply(this,t.args)})),this.stylesheet=e,!0}addImage(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,n),this._afterImageUpdated(e)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error(`Source "${e}" already exists.`);if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,`sources.${e}`,n,null,r))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const i=this.sourceCaches[e]=new z(e,n,this.dispatcher);i.style=this,i.setEventedParent(this,(()=>({isSourceLoaded:this.loaded(),source:i.serialize(),sourceId:e}))),i.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(const r in this._layers)if(this._layers[r].source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while layer "${r}" is using it.`)));const n=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],n.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),n.setEventedParent(null),n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,e){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error(`There is no source with this ID=${t}`);const n=this.sourceCaches[t].getSource();if("geojson"!==n.type)throw new Error(`geojsonSource.type is ${n.type}, which is !== 'geojson`);n.setData(e),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const i=e.id;if(this.getLayer(i))return void this.fire(new t.ErrorEvent(new Error(`Layer "${i}" already exists on this map.`)));let o;if("custom"===e.type){if(Kt(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone$1(e),e=t.extend(e,{source:i})),this._validate(t.validateStyle.layer,`layers.${i}`,e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize()}const a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error(`Cannot add layer "${i}" before non-existing layer "${n}".`)));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){const t=this._removedLayers[i];delete this._removedLayers[i],t.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===n)return;const r=this._order.indexOf(e);this._order.splice(r,1);const i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error(`Cannot move layer "${e}" before non-existing layer "${n}".`))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const n=this._layers[e];if(!n)return void this.fire(new t.ErrorEvent(new Error(`Cannot remove non-existing layer "${e}".`)));n.setEventedParent(null);const r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}setLayerZoomRange(e,n,r){this._checkLoaded();const i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const o=this.getLayer(e);if(o){if(!i(o.filter,n))return null==n?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(t.validateStyle.filter,`layers.${o.id}.filter`,n,null,r)||(o.filter=t.clone$1(n),this._updateLayer(o)))}else this.fire(new t.ErrorEvent(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return t.clone$1(this.getLayer(e).filter)}setLayoutProperty(e,n,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const a=this.getLayer(e);a?i(a.getLayoutProperty(n),r)||(a.setLayoutProperty(n,r,o),this._updateLayer(a)):this.fire(new t.ErrorEvent(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,n){const r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,n,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const a=this.getLayer(e);a?i(a.getPaintProperty(n),r)||(a.setPaintProperty(n,r,o)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(t,e){return this.getLayer(t).getPaintProperty(e)}setFeatureState(e,n){this._checkLoaded();const r=e.source,i=e.sourceLayer,o=this.sourceCaches[r];if(void 0===o)return void this.fire(new t.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const a=o.getSource().type;"geojson"===a&&i?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||i?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(i,e.id,n)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,n){this._checkLoaded();const r=e.source,i=this.sourceCaches[r];if(void 0===i)return void this.fire(new t.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const o=i.getSource().type,a="vector"===o?e.sourceLayer:void 0;"vector"!==o||a?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):i.removeFeatureState(a,e.id,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const n=e.source,r=e.sourceLayer,i=this.sourceCaches[n];if(void 0!==i)return"vector"!==i.getSource().type||r?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),i.getFeatureState(r,e.id)):void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new t.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(t=>t.serialize())),layers:this._serializeLayers(this._order)},(t=>void 0!==t))}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,n={},r=[];for(let o=this._order.length-1;o>=0;o--){const i=this._order[o];if(e(i)){n[i]=o;for(const e of t){const t=e[i];if(t)for(const e of t)r.push(e)}}}r.sort(((t,e)=>e.intersectionZ-t.intersectionZ));const i=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(e(a))for(let t=r.length-1;t>=0;t--){const e=r[t].feature;if(n[e.layer.id]<o)break;i.push(e),r.pop()}else for(const e of t){const t=e[a];if(t)for(const e of t)i.push(e.feature)}}return i}queryRenderedFeatures(e,n,r){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);const i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const e of n.layers){const n=this._layers[e];if(!n)return this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];i[n.source]=!0}}const o=[];n.availableImages=this._availableImages;for(const t in this.sourceCaches)n.layers&&!i[t]||o.push(O(this.sourceCaches[t],this._layers,this._serializedLayers,e,n,r));return this.placement&&o.push(function(t,e,n,r,i,o,a){const s={},l=o.queryRenderedSymbols(r),u=[];for(const c of Object.keys(l).map(Number))u.push(a[c]);u.sort(R);for(const c of u){const n=c.featureIndex.lookupSymbolFeatures(l[c.bucketInstanceId],e,c.bucketIndex,c.sourceLayerIndex,i.filter,i.layers,i.availableImages,t);for(const t in n){const e=s[t]=s[t]||[],r=n[t];r.sort(((t,e)=>{const n=c.featureSortOrder;if(n){const r=n.indexOf(t.featureIndex);return n.indexOf(e.featureIndex)-r}return e.featureIndex-t.featureIndex}));for(const t of r)e.push(t)}}for(const c in s)s[c].forEach((e=>{const r=e.feature,i=n[t[c].source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=i}));return s}(this._layers,this._serializedLayers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);const r=this.sourceCaches[e];return r?function(t,e){const n=t.getRenderableIds().map((e=>t.getTileByID(e))),r=[],i={};for(let o=0;o<n.length;o++){const t=n[o],a=t.tileID.canonical.key;i[a]||(i[a]=!0,t.querySourceFeatures(r,e))}return r}(r,n):[]}addSourceType(t,e,n){return ee.getSourceType(t)?n(new Error(`A source type called "${t}" already exists.`)):(ee.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();const r=this.light.getLight();let o=!1;for(const t in e)if(!i(e[t],r[t])){o=!0;break}if(!o)return;const a={now:t.exported.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(a)}_validate(e,n,r,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!o||!1!==o.validate)&&Kt(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.spec},i)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this.sourceCaches){const e=this.sourceCaches[t];e.setEventedParent(null),e.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const e in this.sourceCaches)this.sourceCaches[e].update(t,this.terrain)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(e,n,r,i){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=!1,s=!1;const l={};for(const t of this._order){const n=this._layers[t];if("symbol"!==n.type)continue;if(!l[n.source]){const t=this.sourceCaches[n.source];l[n.source]=t.getRenderableIds(!0).map((e=>t.getTileByID(e))).sort(((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)))}const r=this.crossTileSymbolIndex.addLayer(n,l[n.source],e.center.lng);a=a||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),e.zoom))&&(this.pauseablePlacement=new Vt(e,this.terrain,this._order,o,n,r,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();const r=this.sourceCaches[e.source];r&&r.setDependencies(e.tileID.key,e.type,e.icons)}getGlyphs(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)}getResource(e,n,r){return t.makeRequest(n,r)}}ee.getSourceType=function(t){return D[t]},ee.setSourceType=function(t,e){D[t]=e},ee.registerForPluginStateChange=t.registerForPluginStateChange;var ne="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const re={prelude:ie("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:ie("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:ie("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ie("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:ie("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ie("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:ie("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ie("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ie("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ie("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:ie("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:ie("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:ie("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:ie("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:ie("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:ie("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:ie("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ie("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:ie("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:ie("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:ie("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:ie("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:ie("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:ie("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:ie("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:ie("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:ie("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ne),terrainDepth:ie("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ne),terrainCoords:ie("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ne)};function ie(t,e){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute ([\w]+) ([\w]+)/g),i=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(i):i,s={};return{fragmentSource:t=t.replace(n,((t,e,n,r,i)=>(s[i]=!0,"define"===e?`\n#ifndef HAS_UNIFORM_u_${i}\nvarying ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = u_${i};\n#endif\n`))),vertexSource:e=e.replace(n,((t,e,n,r,i)=>{const o="float"===r?"vec2":"vec4",a=i.match(/color/)?"color":o;return s[i]?"define"===e?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${n} ${o} a_${i};\nvarying ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = unpack_mix_${a}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:"define"===e?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${n} ${o} a_${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = unpack_mix_${a}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`})),staticAttributes:r,staticUniforms:a}}class oe{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,e,n,r,i,o,a,s,l){this.context=t;let u=this.boundPaintVertexBuffers.length!==r.length;for(let c=0;!u&&c<r.length;c++)this.boundPaintVertexBuffers[c]!==r[c]&&(u=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!u&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s&&this.boundDynamicVertexBuffer3===l?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind(),l&&l.bind()):this.freshBind(e,n,r,i,o,a,s,l)}freshBind(t,e,n,r,i,o,a,s){let l;const u=t.numAttributes,c=this.context,h=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),l=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a,this.boundDynamicVertexBuffer3=s;else{l=c.currentNumAttributes||0;for(let t=u;t<l;t++)h.disableVertexAttribArray(t)}e.enableAttributes(h,t);for(const d of n)d.enableAttributes(h,t);o&&o.enableAttributes(h,t),a&&a.enableAttributes(h,t),s&&s.enableAttributes(h,t),e.bind(),e.setVertexAttribPointers(h,t,i);for(const d of n)d.bind(),d.setVertexAttribPointers(h,t,i);o&&(o.bind(),o.setVertexAttribPointers(h,t,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(h,t,i)),s&&(s.bind(),s.setVertexAttribPointers(h,t,i)),c.currentNumAttributes=u}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function ae(t){const e=[];for(let n=0;n<t.length;n++){if(null===t[n])continue;const r=t[n].split(" ");e.push(r.pop())}return e}class se{constructor(e,n,r,i,o,a,s){const l=e.gl;this.program=l.createProgram();const u=ae(r.staticAttributes),c=i?i.getBinderAttributes():[],h=u.concat(c),d=re.prelude.staticUniforms?ae(re.prelude.staticUniforms):[],p=r.staticUniforms?ae(r.staticUniforms):[],f=i?i.getBinderUniforms():[],m=d.concat(p).concat(f),g=[];for(const t of m)g.indexOf(t)<0&&g.push(t);const y=i?i.defines():[];a&&y.push("#define OVERDRAW_INSPECTOR;"),s&&y.push("#define TERRAIN3D;");const v=y.concat(re.prelude.fragmentSource,r.fragmentSource).join("\n"),_=y.concat(re.prelude.vertexSource,r.vertexSource).join("\n"),b=l.createShader(l.FRAGMENT_SHADER);if(l.isContextLost())return void(this.failedToCreate=!0);l.shaderSource(b,v),l.compileShader(b),l.attachShader(this.program,b);const x=l.createShader(l.VERTEX_SHADER);if(l.isContextLost())return void(this.failedToCreate=!0);l.shaderSource(x,_),l.compileShader(x),l.attachShader(this.program,x),this.attributes={};const w={};this.numAttributes=h.length;for(let t=0;t<this.numAttributes;t++)h[t]&&(l.bindAttribLocation(this.program,t,h[t]),this.attributes[h[t]]=t);l.linkProgram(this.program),l.deleteShader(x),l.deleteShader(b);for(let t=0;t<g.length;t++){const e=g[t];if(e&&!w[e]){const t=l.getUniformLocation(this.program,e);t&&(w[e]=t)}}this.fixedUniforms=o(e,w),this.terrainUniforms=((e,n)=>({u_depth:new t.Uniform1i(e,n.u_depth),u_terrain:new t.Uniform1i(e,n.u_terrain),u_terrain_dim:new t.Uniform1f(e,n.u_terrain_dim),u_terrain_matrix:new t.UniformMatrix4f(e,n.u_terrain_matrix),u_terrain_unpack:new t.Uniform4f(e,n.u_terrain_unpack),u_terrain_offset:new t.Uniform1f(e,n.u_terrain_offset),u_terrain_exaggeration:new t.Uniform1f(e,n.u_terrain_exaggeration)}))(e,w),this.binderUniforms=i?i.getUniforms(e,w):[]}draw(t,e,n,r,i,o,a,s,l,u,c,h,d,p,f,m,g,y){const v=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(r),t.setColorMode(i),t.setCullFace(o),s){t.activeTexture.set(v.TEXTURE2),v.bindTexture(v.TEXTURE_2D,s.depthTexture),t.activeTexture.set(v.TEXTURE3),v.bindTexture(v.TEXTURE_2D,s.texture);for(const t in this.terrainUniforms)this.terrainUniforms[t].set(s[t])}for(const b in this.fixedUniforms)this.fixedUniforms[b].set(a[b]);f&&f.setUniforms(t,this.binderUniforms,d,{zoom:p});let _=0;switch(e){case v.LINES:_=2;break;case v.TRIANGLES:_=3;break;case v.LINE_STRIP:_=1}for(const b of h.get()){const n=b.vaos||(b.vaos={});(n[l]||(n[l]=new oe)).bind(t,this,u,f?f.getPaintVertexBuffers():[],c,b.vertexOffset,m,g,y),v.drawElements(e,b.primitiveLength*_,v.UNSIGNED_SHORT,b.primitiveOffset*_*2)}}}function le(t,e,n){const r=1/xt(n,1,e.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,e.transform.tileZoom)/i,a=o*(n.tileID.canonical.x+n.tileID.wrap*i),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}const ue=(e,n,r,i)=>{const o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=t.create$1();"viewport"===o.properties.get("anchor")&&t.fromRotation(l,-n.transform.angle),t.transformMat3(s,s,l);const u=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+r,u_opacity:i}},ce=(e,n,r,i,o,a,s)=>t.extend(ue(e,n,r,i),le(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8}),he=t=>({u_matrix:t}),de=(e,n,r,i)=>t.extend(he(e),le(r,n,i)),pe=(t,e)=>({u_matrix:t,u_world:e}),fe=(e,n,r,i,o)=>t.extend(de(e,n,r,i),{u_world:o}),me=(t,e,n,r)=>{const i=t.transform;let o,a;if("map"===r.paint.get("circle-pitch-alignment")){const t=xt(n,1,i.zoom);o=!0,a=[t,t]}else o=!1,a=i.pixelsToGLUnits;return{u_camera_to_center_distance:i.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.pixelRatio,u_extrude_scale:a}},ge=(t,e,n)=>{const r=xt(n,1,e.zoom),i=Math.pow(2,e.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*i),e.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:o}},ye=function(t,e){return{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},ve=t=>({u_matrix:t}),_e=(t,e,n,r)=>({u_matrix:t,u_extrude_scale:xt(e,1,n),u_intensity:r});function be(e,n){const r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new t.MercatorCoordinate(0,i/r).toLngLat().lat,new t.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}const xe=(t,e,n,r)=>{const i=t.transform;return{u_matrix:Te(t,e,n,r),u_ratio:1/xt(e,1,i.zoom),u_device_pixel_ratio:t.pixelRatio,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},we=(e,n,r,i,o)=>t.extend(xe(e,n,r,o),{u_image:0,u_image_height:i}),Ee=(t,e,n,r,i)=>{const o=t.transform,a=Ce(e,o);return{u_matrix:Te(t,e,n,i),u_texsize:e.imageAtlasTexture.size,u_ratio:1/xt(e,1,o.zoom),u_device_pixel_ratio:t.pixelRatio,u_image:0,u_scale:[a,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Se=(e,n,r,i,o,a)=>{const s=e.lineAtlas,l=Ce(n,e.transform),u="round"===r.layout.get("line-cap"),c=s.getDash(i.from,u),h=s.getDash(i.to,u),d=c.width*o.fromScale,p=h.width*o.toScale;return t.extend(xe(e,n,r,a),{u_patternscale_a:[l/d,-c.height/2],u_patternscale_b:[l/p,-h.height/2],u_sdfgamma:s.width/(256*Math.min(d,p)*e.pixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:h.y,u_mix:o.t})};function Ce(t,e){return 1/xt(t,1,e.tileZoom)}function Te(t,e,n,r){return t.translatePosMatrix(r?r.posMatrix:e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}const Ie=(t,e,n,r,i)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:ke(i.paint.get("raster-hue-rotate"))};var o,a};function ke(t){t*=Math.PI/180;const e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}const Ae=(t,e,n,r,i,o,a,s,l,u)=>{const c=i.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+r,u_texsize:u,u_texture:0}},Pe=(e,n,r,i,o,a,s,l,u,c,h)=>{const d=o.transform;return t.extend(Ae(e,n,r,i,o,a,s,l,u,c),{u_gamma_scale:i?Math.cos(d._pitch)*d.cameraToCenterDistance:1,u_device_pixel_ratio:o.pixelRatio,u_is_halo:+h})},De=(e,n,r,i,o,a,s,l,u,c)=>t.extend(Pe(e,n,r,i,o,a,s,l,!0,u,!0),{u_texsize_icon:c,u_texture_icon:1}),Me=(t,e,n)=>({u_matrix:t,u_opacity:e,u_color:n}),Oe=(e,n,r,i,o,a)=>t.extend(function(t,e,n,r){const i=n.imageManager.getPattern(t.from.toString()),o=n.imageManager.getPattern(t.to.toString()),{width:a,height:s}=n.imageManager.getPixelSize(),l=Math.pow(2,r.tileID.overscaledZ),u=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,c=u*(r.tileID.canonical.x+r.tileID.wrap*l),h=u*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[a,s],u_mix:e.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/xt(r,1,n.transform.tileZoom),u_pixel_coord_upper:[c>>16,h>>16],u_pixel_coord_lower:[65535&c,65535&h]}}(i,a,r,o),{u_matrix:e,u_opacity:n}),Re={fillExtrusion:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_opacity:new t.Uniform1f(e,n.u_opacity)}),fillExtrusionPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade),u_opacity:new t.Uniform1f(e,n.u_opacity)}),fill:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),fillPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),fillOutline:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}),fillOutlinePattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),circle:(e,n)=>({u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),collisionBox:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}),collisionCircle:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,n.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,n.u_viewport_size)}),debug:(e,n)=>({u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_overlay:new t.Uniform1i(e,n.u_overlay),u_overlay_scale:new t.Uniform1f(e,n.u_overlay_scale)}),clippingMask:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),heatmap:(e,n)=>({u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),heatmapTexture:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}),hillshade:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}),hillshadePrepare:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_unpack:new t.Uniform4f(e,n.u_unpack)}),line:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels)}),lineGradient:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image),u_image_height:new t.Uniform1f(e,n.u_image_height)}),linePattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_image:new t.Uniform1i(e,n.u_image),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),lineSDF:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}),raster:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}),symbolIcon:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}),symbolSDF:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}),symbolTextAndIcon:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texsize_icon:new t.Uniform2f(e,n.u_texsize_icon),u_texture:new t.Uniform1i(e,n.u_texture),u_texture_icon:new t.Uniform1i(e,n.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}),background:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}),backgroundPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}),terrain:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texture:new t.Uniform1i(e,n.u_texture)}),terrainDepth:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),terrainCoords:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texture:new t.Uniform1i(e,n.u_texture),u_terrain_coords_id:new t.Uniform1f(e,n.u_terrain_coords_id)})};class Ne{constructor(t,e,n){this.context=t;const r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Le={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Fe{constructor(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;const i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let n=0;n<this.attributes.length;n++){const r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}}setVertexAttribPointers(t,e,n){for(let r=0;r<this.attributes.length;r++){const i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[Le[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ze{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Be extends ze{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class je extends ze{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class Ue extends ze{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class Ve extends ze{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class qe extends ze{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class Ge extends ze{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Ye extends ze{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class $e extends ze{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class We extends ze{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class He extends ze{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Xe extends ze{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class Ze extends ze{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Ke extends ze{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class Qe extends ze{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class Je extends ze{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class tn extends ze{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class en extends ze{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class nn extends ze{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class rn extends ze{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class on extends ze{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class an extends ze{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class sn extends ze{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class ln extends ze{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class un extends ze{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class cn extends ze{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class hn extends ze{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class dn extends ze{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class pn extends ze{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class fn extends ze{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class mn extends ze{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class gn extends ze{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class yn extends ze{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class vn extends yn{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class _n extends yn{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class bn{constructor(t,e,n,r){this.context=t,this.width=e,this.height=n;const i=t.gl,o=this.framebuffer=i.createFramebuffer();if(this.colorAttachment=new vn(t,o),r&&(this.depthAttachment=new _n(t,o)),i.checkFramebufferStatus(i.FRAMEBUFFER)!==i.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class xn{constructor(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n}}xn.Replace=[1,0],xn.disabled=new xn(xn.Replace,t.Color.transparent,[!1,!1,!1,!1]),xn.unblended=new xn(xn.Replace,t.Color.transparent,[!0,!0,!0,!0]),xn.alphaBlended=new xn([1,771],t.Color.transparent,[!0,!0,!0,!0]);class wn{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Be(this),this.clearDepth=new je(this),this.clearStencil=new Ue(this),this.colorMask=new Ve(this),this.depthMask=new qe(this),this.stencilMask=new Ge(this),this.stencilFunc=new Ye(this),this.stencilOp=new $e(this),this.stencilTest=new We(this),this.depthRange=new He(this),this.depthTest=new Xe(this),this.depthFunc=new Ze(this),this.blend=new Ke(this),this.blendFunc=new Qe(this),this.blendColor=new Je(this),this.blendEquation=new tn(this),this.cullFace=new en(this),this.cullFaceSide=new nn(this),this.frontFace=new rn(this),this.program=new on(this),this.activeTexture=new an(this),this.viewport=new sn(this),this.bindFramebuffer=new ln(this),this.bindRenderbuffer=new un(this),this.bindTexture=new cn(this),this.bindVertexBuffer=new hn(this),this.bindElementBuffer=new dn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new pn(this),this.pixelStoreUnpack=new fn(this),this.pixelStoreUnpackPremultiplyAlpha=new mn(this),this.pixelStoreUnpackFlipY=new gn(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new Ne(this,t,e)}createVertexBuffer(t,e,n){return new Fe(this,t,e,n)}createRenderbuffer(t,e,n){const r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i}createFramebuffer(t,e,n){return new bn(this,t,e,n)}clear(t){let{color:e,depth:n}=t;const r=this.gl;let i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){i(t.blendFunction,xn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class En{constructor(t,e,n){this.func=t,this.mask=e,this.range=n}}En.ReadOnly=!1,En.ReadWrite=!0,En.disabled=new En(519,En.ReadOnly,[0,1]);const Sn=7680;class Cn{constructor(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o}}Cn.disabled=new Cn({func:519,mask:0},0,0,Sn,Sn,Sn);class Tn{constructor(t,e,n){this.enable=t,this.mode=e,this.frontFace=n}}let In;function kn(e,n,r,i,o,a,s){const l=e.context,u=l.gl,c=e.useProgram("collisionBox"),h=[];let d=0,p=0;for(let b=0;b<i.length;b++){const f=i[b],m=n.getTile(f),g=m.getBucket(r);if(!g)continue;let y=f.posMatrix;0===o[0]&&0===o[1]||(y=e.translatePosMatrix(f.posMatrix,m,o,a));const v=s?g.textCollisionBox:g.iconCollisionBox,_=g.collisionCircleArray;if(_.length>0){const n=t.create(),r=y;t.mul(n,g.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(n,n,g.placementViewportMatrix),h.push({circleArray:_,circleOffset:p,transform:r,invTransform:n,coord:f}),d+=_.length/4,p=d}v&&c.draw(l,u.LINES,En.disabled,Cn.disabled,e.colorModeForRenderPass(),Tn.disabled,ge(y,e.transform,m),e.style.terrain&&e.style.terrain.getTerrainData(f),r.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,e.transform.zoom,null,null,v.collisionVertexBuffer)}if(!s||!h.length)return;const f=e.useProgram("collisionCircle"),m=new t.CollisionCircleLayoutArray;m.resize(4*d),m._trim();let g=0;for(const t of h)for(let e=0;e<t.circleArray.length/4;e++){const n=4*e,r=t.circleArray[n+0],i=t.circleArray[n+1],o=t.circleArray[n+2],a=t.circleArray[n+3];m.emplace(g++,r,i,o,a,0),m.emplace(g++,r,i,o,a,1),m.emplace(g++,r,i,o,a,2),m.emplace(g++,r,i,o,a,3)}(!In||In.length<2*d)&&(In=function(e){const n=2*e,r=new t.QuadTriangleArray;r.resize(n),r._trim();for(let t=0;t<n;t++){const e=6*t;r.uint16[e+0]=4*t+0,r.uint16[e+1]=4*t+1,r.uint16[e+2]=4*t+2,r.uint16[e+3]=4*t+2,r.uint16[e+4]=4*t+3,r.uint16[e+5]=4*t+0}return r}(d));const y=l.createIndexBuffer(In,!0),v=l.createVertexBuffer(m,t.collisionCircleLayout.members,!0);for(const b of h){const n={u_matrix:b.transform,u_inv_matrix:b.invTransform,u_camera_to_center_distance:(_=e.transform).cameraToCenterDistance,u_viewport_size:[_.width,_.height]};f.draw(l,u.TRIANGLES,En.disabled,Cn.disabled,e.colorModeForRenderPass(),Tn.disabled,n,e.style.terrain&&e.style.terrain.getTerrainData(b.coord),r.id,v,y,t.SegmentVector.simpleSegment(0,2*b.circleOffset,b.circleArray.length,b.circleArray.length/2),null,e.transform.zoom,null,null,null)}var _;v.destroy(),y.destroy()}Tn.disabled=new Tn(!1,1029,2305),Tn.backCCW=new Tn(!0,1029,2305);const An=t.identity(new Float32Array(16));function Pn(e,n,r,i,o,a){const{horizontalAlign:s,verticalAlign:l}=t.getAnchorAlignment(e),u=-(s-.5)*n,c=-(l-.5)*r,h=t.evaluateVariableOffset(e,i);return new t.pointGeometry((u/o+h[0])*a,(c/o+h[1])*a)}function Dn(e,n,r,i,o,a,s,l,u,c,h){const d=e.text.placedSymbolArray,p=e.text.dynamicLayoutVertexArray,f=e.icon.dynamicLayoutVertexArray,m={};p.clear();for(let g=0;g<d.length;g++){const f=d.get(g),y=e.allowVerticalPlacement&&!f.placedOrientation,v=f.hidden||!f.crossTileID||y?null:i[f.crossTileID];if(v){const i=new t.pointGeometry(f.anchorX,f.anchorY),d=st(i,r?s:a,h),g=lt(o.cameraToCenterDistance,d.signedDistanceFromCamera);let y=t.evaluateSizeForFeature(e.textSizeData,u,f)*g/t.ONE_EM;r&&(y*=e.tilePixelRatio/l);const{width:_,height:b,anchor:x,textOffset:w,textBoxScale:E}=v,S=Pn(x,_,b,w,E,y),C=r?st(i.add(S),a,h).point:d.point.add(n?S.rotate(-o.angle):S),T=e.allowVerticalPlacement&&f.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<f.numGlyphs;e++)t.addDynamicAttributes(p,C,T);c&&f.associatedIconIndex>=0&&(m[f.associatedIconIndex]={shiftedAnchor:C,angle:T})}else yt(f.numGlyphs,p)}if(c){f.clear();const n=e.icon.placedSymbolArray;for(let e=0;e<n.length;e++){const r=n.get(e);if(r.hidden)yt(r.numGlyphs,f);else{const n=m[e];if(n)for(let e=0;e<r.numGlyphs;e++)t.addDynamicAttributes(f,n.shiftedAnchor,n.angle);else yt(r.numGlyphs,f)}}e.icon.dynamicLayoutVertexBuffer.updateData(f)}e.text.dynamicLayoutVertexBuffer.updateData(p)}function Mn(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function On(e,n,r,i,o,a,s,l,u,c,h,d){const p=e.context,f=p.gl,m=e.transform,g="map"===l,y="map"===u,v="viewport"!==l&&"point"!==r.layout.get("symbol-placement"),_=g&&!y&&!v,b=!r.layout.get("symbol-sort-key").isConstant();let x=!1;const w=e.depthModeForSublayer(0,En.ReadOnly),E=r.layout.get("text-variable-anchor"),S=[];for(const C of i){const i=n.getTile(C),l=i.getBucket(r);if(!l)continue;const u=o?l.text:l.icon;if(!u||!u.segments.get().length)continue;const h=u.programConfigurations.get(r.id),d=o||l.sdfIcons,p=o?l.textSizeData:l.iconSizeData,w=y||0!==m.pitch,T=e.useProgram(Mn(d,o,l),h),I=t.evaluateSizeForZoom(p,m.zoom),k=e.style.terrain&&e.style.terrain.getTerrainData(C);let A,P,D,M,O=[0,0],R=null;if(o){if(P=i.glyphAtlasTexture,D=f.LINEAR,A=i.glyphAtlasTexture.size,l.iconsInText){O=i.imageAtlasTexture.size,R=i.imageAtlasTexture;const t="composite"===p.kind||"camera"===p.kind;M=w||e.options.rotating||e.options.zooming||t?f.LINEAR:f.NEAREST}}else{const t=1!==r.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;P=i.imageAtlasTexture,D=d||e.options.rotating||e.options.zooming||t||w?f.LINEAR:f.NEAREST,A=i.imageAtlasTexture.size}const N=xt(i,1,e.transform.zoom),L=ot(C.posMatrix,y,g,e.transform,N),F=at(C.posMatrix,y,g,e.transform,N),z=E&&l.hasTextData(),B="none"!==r.layout.get("icon-text-fit")&&z&&l.hasIconData();if(v){const t=e.style.terrain?(t,n)=>e.style.terrain.getElevation(C,t,n):null,n="map"===r.layout.get("text-rotation-alignment");ct(l,C.posMatrix,e,o,L,F,y,c,n,t)}const j=e.translatePosMatrix(C.posMatrix,i,a,s),U=v||o&&E||B?An:L,V=e.translatePosMatrix(F,i,a,s,!0),q=d&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let G;G=d?l.iconsInText?De(p.kind,I,_,y,e,j,U,V,A,O):Pe(p.kind,I,_,y,e,j,U,V,o,A,!0):Ae(p.kind,I,_,y,e,j,U,V,o,A);const Y={program:T,buffers:u,uniformValues:G,atlasTexture:P,atlasTextureIcon:R,atlasInterpolation:D,atlasInterpolationIcon:M,isSDF:d,hasHalo:q};if(b&&l.canOverlap){x=!0;const e=u.segments.get();for(const n of e)S.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:Y,terrainData:k})}else S.push({segments:u.segments,sortKey:0,state:Y,terrainData:k})}x&&S.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of S){const n=t.state;if(p.activeTexture.set(f.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,f.CLAMP_TO_EDGE),n.atlasTextureIcon&&(p.activeTexture.set(f.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),n.isSDF){const i=n.uniformValues;n.hasHalo&&(i.u_is_halo=1,Rn(n.buffers,t.segments,r,e,n.program,w,h,d,i,t.terrainData)),i.u_is_halo=0}Rn(n.buffers,t.segments,r,e,n.program,w,h,d,n.uniformValues,t.terrainData)}}function Rn(t,e,n,r,i,o,a,s,l,u){const c=r.context;i.draw(c,c.gl.TRIANGLES,o,a,s,Tn.disabled,l,u,n.id,t.layoutVertexBuffer,t.indexBuffer,e,n.paint,r.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Nn(t,e,n,r,i,o,a){const s=t.context.gl,l=n.paint.get("fill-pattern"),u=l&&l.constantOr(1),c=n.getCrossfadeParameters();let h,d,p,f,m;a?(d=u&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",h=s.LINES):(d=u?"fillPattern":"fill",h=s.TRIANGLES);for(const g of r){const r=e.getTile(g);if(u&&!r.patternsLoaded())continue;const y=r.getBucket(n);if(!y)continue;const v=y.programConfigurations.get(n.id),_=t.useProgram(d,v),b=t.style.terrain&&t.style.terrain.getTerrainData(g);u&&(t.context.activeTexture.set(s.TEXTURE0),r.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),v.updatePaintBuffers(c));const x=l.constantOr(null);if(x&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[x.to.toString()],n=t.patternPositions[x.from.toString()];e&&n&&v.setConstantPatternPositions(e,n)}const w=b?g:null,E=t.translatePosMatrix(w?w.posMatrix:g.posMatrix,r,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){f=y.indexBuffer2,m=y.segments2;const e=[s.drawingBufferWidth,s.drawingBufferHeight];p="fillOutlinePattern"===d&&u?fe(E,t,c,r,e):pe(E,e)}else f=y.indexBuffer,m=y.segments,p=u?de(E,t,c,r):he(E);_.draw(t.context,h,i,t.stencilModeForClipping(g),o,Tn.disabled,p,b,n.id,y.layoutVertexBuffer,f,m,n.paint,t.transform.zoom,v)}}function Ln(t,e,n,r,i,o,a){const s=t.context,l=s.gl,u=n.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),h=n.getCrossfadeParameters(),d=n.paint.get("fill-extrusion-opacity");for(const p of r){const r=e.getTile(p),f=r.getBucket(n);if(!f)continue;const m=t.style.terrain&&t.style.terrain.getTerrainData(p),g=f.programConfigurations.get(n.id),y=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",g);c&&(t.context.activeTexture.set(l.TEXTURE0),r.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),g.updatePaintBuffers(h));const v=u.constantOr(null);if(v&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[v.to.toString()],n=t.patternPositions[v.from.toString()];e&&n&&g.setConstantPatternPositions(e,n)}const _=t.translatePosMatrix(p.posMatrix,r,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),b=n.paint.get("fill-extrusion-vertical-gradient"),x=c?ce(_,t,b,d,p,h,r):ue(_,t,b,d);y.draw(s,s.gl.TRIANGLES,i,o,a,Tn.backCCW,x,m,n.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,n.paint,t.transform.zoom,g,t.style.terrain&&f.centroidVertexBuffer)}}function Fn(t,e,n,r,i,o,a){const s=t.context,l=s.gl,u=n.fbo;if(!u)return;const c=t.useProgram("hillshade"),h=t.style.terrain&&t.style.terrain.getTerrainData(e);s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,u.colorAttachment.get()),c.draw(s,l.TRIANGLES,i,o,a,Tn.disabled,((t,e,n,r)=>{const i=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);const l=!t.options.moving;return{u_matrix:r?r.posMatrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),l),u_image:0,u_latrange:be(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}})(t,n,r,h?e:null),h,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}function zn(e,n,r,i,o,a){const s=e.context,u=s.gl,c=n.dem;if(c&&c.data){const h=c.dim,d=c.stride,p=c.getPixels();if(s.activeTexture.set(u.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(d),n.demTexture){const t=n.demTexture;t.update(p,{premultiply:!1}),t.bind(u.NEAREST,u.CLAMP_TO_EDGE)}else n.demTexture=new l(s,p,u.RGBA,{premultiply:!1}),n.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);s.activeTexture.set(u.TEXTURE0);let f=n.fbo;if(!f){const t=new l(s,{width:h,height:h,data:null},u.RGBA);t.bind(u.LINEAR,u.CLAMP_TO_EDGE),f=n.fbo=s.createFramebuffer(h,h,!0),f.colorAttachment.set(t.texture)}s.bindFramebuffer.set(f.framebuffer),s.viewport.set([0,0,h,h]),e.useProgram("hillshadePrepare").draw(s,u.TRIANGLES,i,o,a,Tn.disabled,((e,n)=>{const r=n.stride,i=t.create();return t.ortho(i,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(i,i,[0,-t.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_unpack:n.getUnpackVector()}})(n.tileID,c),null,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Bn(e,n,r,i,o,a){const s=i.paint.get("raster-fade-duration");if(!a&&s>0){const i=t.exported.now(),a=(i-e.timeAdded)/s,l=n?(i-n.timeAdded)/s:-1,u=r.getSource(),c=o.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-c)>Math.abs(e.tileID.overscaledZ-c),d=h&&e.refreshedUponExpiration?1:t.clamp(h?a:1-l,0,1);return e.refreshedUponExpiration&&a>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}const jn=new t.Color(1,0,0,1),Un=new t.Color(0,1,0,1),Vn=new t.Color(0,0,1,1),qn=new t.Color(1,0,1,1),Gn=new t.Color(0,1,1,1);function Yn(t,e,n,r){Wn(t,0,e+n/2,t.transform.width,n,r)}function $n(t,e,n,r){Wn(t,e-n/2,0,n,t.transform.height,r)}function Wn(t,e,n,r,i,o){const a=t.context,s=a.gl;s.enable(s.SCISSOR_TEST),s.scissor(e*t.pixelRatio,n*t.pixelRatio,r*t.pixelRatio,i*t.pixelRatio),a.clear({color:o}),s.disable(s.SCISSOR_TEST)}function Hn(e,n,r){const i=e.context,o=i.gl,a=r.posMatrix,s=e.useProgram("debug"),l=En.disabled,u=Cn.disabled,c=e.colorModeForRenderPass(),h="$debug",d=e.style.terrain&&e.style.terrain.getTerrainData(r);i.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE);const p=n.getTileByID(r.key).latestRawTileData,f=Math.floor((p&&p.byteLength||0)/1024),m=n.getTile(r).tileSize,g=512/Math.min(m,512)*(r.overscaledZ/e.transform.zoom)*.5;let y=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(y+=` => ${r.overscaledZ}`),function(t,e){t.initDebugOverlayCanvas();const n=t.debugOverlayCanvas,r=t.context.gl,i=t.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(e,5,5),i.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,`${y} ${f}kB`),s.draw(i,o.TRIANGLES,l,u,xn.alphaBlended,Tn.disabled,ye(a,t.Color.transparent,g),null,h,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments),s.draw(i,o.LINE_STRIP,l,u,c,Tn.disabled,ye(a,t.Color.red),d,h,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments)}function Xn(t,e,n){const r=t.context,i=r.gl,o=t.colorModeForRenderPass(),a=new En(i.LEQUAL,En.ReadWrite,t.depthRangeFor3D),s=t.useProgram("terrain"),l=e.getTerrainMesh(),u=e.getTerrainData(n.tileID);r.bindFramebuffer.set(null),r.viewport.set([0,0,t.width,t.height]),r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.getRTTFramebuffer().colorAttachment.get());const c=t.transform.calculatePosMatrix(n.tileID.toUnwrapped());s.draw(r,i.TRIANGLES,a,Cn.disabled,o,Tn.backCCW,{u_matrix:c,u_texture:0},u,"terrain",l.vertexBuffer,l.indexBuffer,l.segments)}function Zn(t,e,n,r){const i=t.context,o=n.tileSize*e.qualityFactor;n.textures[r]||(n.textures[r]=t.getTileTexture(o)||new l(i,{width:o,height:o,data:null},i.gl.RGBA),n.textures[r].bind(i.gl.LINEAR,i.gl.CLAMP_TO_EDGE),0===r&&e.sourceCache.renderHistory.unshift(n.tileID.key));const a=e.getRTTFramebuffer();a.colorAttachment.set(n.textures[r].texture),i.bindFramebuffer.set(a.framebuffer),i.viewport.set([0,0,o,o])}class Kn{constructor(t){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=t,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=t.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const t=this.painter.style,e=t.terrain;for(const n in t.sourceCaches){this._coordsDescendingInv[n]={};const r=t.sourceCaches[n].getVisibleCoordinates();for(const t of r){const r=e.sourceCache.getTerrainCoords(t);for(const t in r)this._coordsDescendingInv[n][t]||(this._coordsDescendingInv[n][t]=[]),this._coordsDescendingInv[n][t].push(r[t])}}for(const n of t._order){const e=t._layers[n],r=e.source;if(this._renderToTexture[e.type]&&!this._coordsDescendingInvStr[r]){this._coordsDescendingInvStr[r]={};for(const t in this._coordsDescendingInv[r])this._coordsDescendingInvStr[r][t]=this._coordsDescendingInv[r][t].map((t=>t.key)).sort().join()}}return this._renderableTiles.forEach((t=>{for(const n in this._coordsDescendingInvStr){const r=this._coordsDescendingInvStr[n][t.tileID.key];r&&r!==t.textureCoords[n]&&t.clearTextures(this.painter),e.needsRerender(n,t.tileID)&&t.clearTextures(this.painter)}this._rerender[t.tileID.key]=!t.textures.length})),e.clearRerenderCache(),e.sourceCache.removeOutdated(this.painter),this}renderLayer(e){const n=e.type,r=this.painter,i=r.style._order,o=r.currentLayer,a=o+1===i.length;if(this._renderToTexture[n]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=n,this._stacks[this._stacks.length-1].push(i[o]),!a))return!0;if(this._renderToTexture[this._prevType]||"hillshade"===n||this._renderToTexture[n]&&a){this._prevType=n;const a=this._stacks.length-1,s=this._stacks[a]||[];for(const e of this._renderableTiles){if(Zn(r,r.style.terrain,e,a),this._rerender[e.tileID.key]){r.context.clear({color:t.Color.transparent});for(let t=0;t<s.length;t++){const n=r.style._layers[s[t]],i=n.source?this._coordsDescendingInv[n.source][e.tileID.key]:[e.tileID];r._renderTileClippingMasks(n,i),r.renderLayer(r,r.style.sourceCaches[n.source],n,i),n.source&&(e.textureCoords[n.source]=this._coordsDescendingInvStr[n.source][e.tileID.key])}}Xn(r,r.style.terrain,e)}if("hillshade"===n){this._stacks.push([i[o]]);for(const n of this._renderableTiles){const i=this._coordsDescendingInv[e.source][n.tileID.key];Zn(r,r.style.terrain,n,this._stacks.length-1),r.context.clear({color:t.Color.transparent}),r._renderTileClippingMasks(e,i),r.renderLayer(r,r.style.sourceCaches[e.source],e,i),Xn(r,r.style.terrain,n)}return!0}return this._renderToTexture[n]}return!1}}const Qn={symbol:function(e,n,r,i,o){if("translucent"!==e.renderPass)return;const a=Cn.disabled,s=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,n,r,i,o,a,s){const l=n.transform,u="map"===o,c="map"===a;for(const h of e){const e=i.getTile(h),o=e.getBucket(r);if(!o||!o.text||!o.text.segments.get().length)continue;const a=t.evaluateSizeForZoom(o.textSizeData,l.zoom),d=xt(e,1,n.transform.zoom),p=ot(h.posMatrix,c,u,n.transform,d),f="none"!==r.layout.get("icon-text-fit")&&o.hasIconData();if(a){const t=Math.pow(2,l.zoom-e.tileID.overscaledZ);Dn(o,u,c,s,l,p,h.posMatrix,t,a,f,n.style.terrain?(t,e)=>n.style.terrain.getElevation(h,t,e):null)}}}(i,e,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&On(e,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&On(e,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(kn(e,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),kn(e,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(e,n,r,i){if("translucent"!==e.renderPass)return;const o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=!r.layout.get("circle-sort-key").isConstant();if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const u=e.context,c=u.gl,h=e.depthModeForSublayer(0,En.ReadOnly),d=Cn.disabled,p=e.colorModeForRenderPass(),f=[];for(let m=0;m<i.length;m++){const o=i[m],a=n.getTile(o),s=a.getBucket(r);if(!s)continue;const u=s.programConfigurations.get(r.id),c=e.useProgram("circle",u),h=s.layoutVertexBuffer,d=s.indexBuffer,p=e.style.terrain&&e.style.terrain.getTerrainData(o),g={programConfiguration:u,program:c,layoutVertexBuffer:h,indexBuffer:d,uniformValues:me(e,o,a,r),terrainData:p};if(l){const e=s.segments.get();for(const n of e)f.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:g})}else f.push({segments:s.segments,sortKey:0,state:g})}l&&f.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of f){const{programConfiguration:n,program:i,layoutVertexBuffer:o,indexBuffer:a,uniformValues:s,terrainData:l}=t.state;i.draw(u,c.TRIANGLES,h,d,p,Tn.disabled,s,l,r.id,o,a,t.segments,r.paint,e.transform.zoom,n)}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const o=e.context,a=o.gl,s=Cn.disabled,l=new xn([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){const r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);let i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{const o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,n,r){const i=t.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e.width/4,e.height/4,0,i.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(t,e,o,i)}}(o,e,r),o.clear({color:t.Color.transparent});for(let t=0;t<i.length;t++){const u=i[t];if(n.hasRenderableParent(u))continue;const c=n.getTile(u),h=c.getBucket(r);if(!h)continue;const d=h.programConfigurations.get(r.id),p=e.useProgram("heatmap",d),{zoom:f}=e.transform;p.draw(o,a.TRIANGLES,En.disabled,s,l,Tn.disabled,_e(u.posMatrix,c,f,r.paint.get("heatmap-intensity")),null,r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,r.paint,e.transform.zoom,d)}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){const r=e.context,i=r.gl,o=n.heatmapFbo;if(!o)return;r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);let a=n.colorRampTexture;a||(a=n.colorRampTexture=new l(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,En.disabled,Cn.disabled,e.colorModeForRenderPass(),Tn.disabled,((e,n,r,i)=>{const o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);const a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}})(e,n),null,n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}(e,r))},line:function(e,n,r,i){if("translucent"!==e.renderPass)return;const o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=e.depthModeForSublayer(0,En.ReadOnly),u=e.colorModeForRenderPass(),c=r.paint.get("line-dasharray"),h=r.paint.get("line-pattern"),d=h.constantOr(1),p=r.paint.get("line-gradient"),f=r.getCrossfadeParameters(),m=d?"linePattern":c?"lineSDF":p?"lineGradient":"line",g=e.context,y=g.gl;let v=!0;for(const _ of i){const i=n.getTile(_);if(d&&!i.patternsLoaded())continue;const o=i.getBucket(r);if(!o)continue;const a=o.programConfigurations.get(r.id),b=e.context.program.get(),x=e.useProgram(m,a),w=v||x.program!==b,E=e.style.terrain&&e.style.terrain.getTerrainData(_),S=h.constantOr(null);if(S&&i.imageAtlas){const t=i.imageAtlas,e=t.patternPositions[S.to.toString()],n=t.patternPositions[S.from.toString()];e&&n&&a.setConstantPatternPositions(e,n)}const C=E?_:null,T=d?Ee(e,i,r,f,C):c?Se(e,i,r,c,f,C):p?we(e,i,r,o.lineClipsArray.length,C):xe(e,i,r,C);if(d)g.activeTexture.set(y.TEXTURE0),i.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),a.updatePaintBuffers(f);else if(c&&(w||e.lineAtlas.dirty))g.activeTexture.set(y.TEXTURE0),e.lineAtlas.bind(g);else if(p){const i=o.gradients[r.id];let a=i.texture;if(r.gradientVersion!==i.version){let s=256;if(r.stepInterpolant){const r=n.getSource().maxzoom,i=_.canonical.z===r?Math.ceil(1<<e.transform.maxZoom-_.canonical.z):1;s=t.clamp(t.nextPowerOfTwo(o.maxLineLength/t.EXTENT*1024*i),256,g.maxTextureSize)}i.gradient=t.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:s,image:i.gradient||void 0,clips:o.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new l(g,i.gradient,y.RGBA),i.version=r.gradientVersion,a=i.texture}g.activeTexture.set(y.TEXTURE0),a.bind(r.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}x.draw(g,y.TRIANGLES,s,e.stencilModeForClipping(_),u,Tn.disabled,T,E,r.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,r.paint,e.transform.zoom,a,o.layoutVertexBuffer2),v=!1}},fill:function(e,n,r,i){const o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=e.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),u=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===u){const t=e.depthModeForSublayer(1,"opaque"===e.renderPass?En.ReadWrite:En.ReadOnly);Nn(e,n,r,i,t,s,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){const t=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,En.ReadOnly);Nn(e,n,r,i,t,s,!0)}},"fill-extrusion":function(t,e,n,r){const i=n.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===t.renderPass){const o=new En(t.context.gl.LEQUAL,En.ReadWrite,t.depthRangeFor3D);if(1!==i||n.paint.get("fill-extrusion-pattern").constantOr(1))Ln(t,e,n,r,o,Cn.disabled,xn.disabled),Ln(t,e,n,r,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{const i=t.colorModeForRenderPass();Ln(t,e,n,r,o,Cn.disabled,i)}}},hillshade:function(t,e,n,r){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const i=t.context,o=t.depthModeForSublayer(0,En.ReadOnly),a=t.colorModeForRenderPass(),[s,l]="translucent"===t.renderPass?t.stencilConfigForOverlap(r):[{},r];for(const u of l){const r=e.getTile(u);void 0!==r.needsHillshadePrepare&&r.needsHillshadePrepare&&"offscreen"===t.renderPass?zn(t,r,n,o,Cn.disabled,a):"translucent"===t.renderPass&&Fn(t,u,r,n,o,s[u.overscaledZ],a)}i.viewport.set([0,0,t.width,t.height])},raster:function(t,e,n,r){if("translucent"!==t.renderPass)return;if(0===n.paint.get("raster-opacity"))return;if(!r.length)return;const i=t.context,o=i.gl,a=e.getSource(),s=t.useProgram("raster"),l=t.colorModeForRenderPass(),[u,c]=a instanceof k?[{},r]:t.stencilConfigForOverlap(r),h=c[c.length-1].overscaledZ,d=!t.options.moving;for(const p of c){const r=t.depthModeForSublayer(p.overscaledZ-h,1===n.paint.get("raster-opacity")?En.ReadWrite:En.ReadOnly,o.LESS),c=e.getTile(p);c.registerFadeDuration(n.paint.get("raster-fade-duration"));const f=e.findLoadedParent(p,0),m=Bn(c,f,e,n,t.transform,t.style.terrain);let g,y;const v="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),c.texture.bind(v,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),f?(f.texture.bind(v,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),g=Math.pow(2,f.tileID.overscaledZ-c.tileID.overscaledZ),y=[c.tileID.canonical.x*g%1,c.tileID.canonical.y*g%1]):c.texture.bind(v,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);const _=t.style.terrain&&t.style.terrain.getTerrainData(p),b=_?p:null,x=b?b.posMatrix:t.transform.calculatePosMatrix(p.toUnwrapped(),d),w=Ie(x,y||[0,0],g||1,m,n);a instanceof k?s.draw(i,o.TRIANGLES,r,Cn.disabled,l,Tn.disabled,w,_,n.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(i,o.TRIANGLES,r,u[p.overscaledZ],l,Tn.disabled,w,_,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,n,r){const i=n.paint.get("background-color"),o=n.paint.get("background-opacity");if(0===o)return;const a=t.context,s=a.gl,l=t.transform,u=l.tileSize,c=n.paint.get("background-pattern");if(t.isPatternMissing(c))return;const h=!c&&1===i.a&&1===o&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==h)return;const d=Cn.disabled,p=t.depthModeForSublayer(0,"opaque"===h?En.ReadWrite:En.ReadOnly),f=t.colorModeForRenderPass(),m=t.useProgram(c?"backgroundPattern":"background"),g=r||l.coveringTiles({tileSize:u,terrain:t.style.terrain});c&&(a.activeTexture.set(s.TEXTURE0),t.imageManager.bind(t.context));const y=n.getCrossfadeParameters();for(const v of g){const e=r?v.posMatrix:t.transform.calculatePosMatrix(v.toUnwrapped()),l=c?Oe(e,o,t,c,{tileID:v,tileSize:u},y):Me(e,o,i),h=t.style.terrain&&t.style.terrain.getTerrainData(v);m.draw(a,s.TRIANGLES,p,d,f,Tn.disabled,l,h,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}},debug:function(t,e,n){for(let r=0;r<n.length;r++)Hn(t,e,n[r])},custom:function(t,e,n){const r=t.context,i=n.implementation;if("offscreen"===t.renderPass){const e=i.prerender;e&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),e.call(i,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(Cn.disabled);const e="3d"===i.renderingMode?new En(t.context.gl.LEQUAL,En.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,En.ReadOnly);r.setDepthMode(e),i.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}};class Jn{constructor(e,n){this.context=new wn(e),this.transform=n,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:t.create(),renderTime:0},this.setup(),this.numSublayers=z.maxUnderzooming+z.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Wt,this.gpuTimers={}}resize(t,e,n){if(this.width=t*n,this.height=e*n,this.pixelRatio=n,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const r of this.style._order)this.style._layers[r].resize()}setup(){const e=this.context,n=new t.PosArray;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,Ht.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const r=new t.PosArray;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,Ht.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const i=new t.RasterBoundsArray;i.emplaceBack(0,0,0,0),i.emplaceBack(t.EXTENT,0,t.EXTENT,0),i.emplaceBack(0,t.EXTENT,0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(i,I.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const o=new t.PosArray;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,Ht.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const a=new t.LineStripIndexArray;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);const s=new t.TriangleIndexArray;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new l(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);const u=this.context.gl;this.stencilClearMode=new Cn({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO)}clearStencil(){const e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const r=t.create();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,En.disabled,this.stencilClearMode,xn.disabled,Tn.disabled,ve(r),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,e){if(this.currentStencilSource===t.source||!t.isTileClipped()||!e||!e.length)return;this.currentStencilSource=t.source;const n=this.context,r=n.gl;this.nextStencilID+e.length>256&&this.clearStencil(),n.setColorMode(xn.disabled),n.setDepthMode(En.disabled);const i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const o of e){const t=this._tileClippingMaskIDs[o.key]=this.nextStencilID++,e=this.style.terrain&&this.style.terrain.getTerrainData(o);i.draw(n,r.TRIANGLES,En.disabled,new Cn({func:r.ALWAYS,mask:0},t,255,r.KEEP,r.KEEP,r.REPLACE),xn.disabled,Tn.disabled,ve(o.posMatrix),e,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,e=this.context.gl;return new Cn({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)}stencilModeForClipping(t){const e=this.context.gl;return new Cn({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)}stencilConfigForOverlap(t){const e=this.context.gl,n=t.sort(((t,e)=>e.overscaledZ-t.overscaledZ)),r=n[n.length-1].overscaledZ,i=n[0].overscaledZ-r+1;if(i>1){this.currentStencilSource=void 0,this.nextStencilID+i>256&&this.clearStencil();const t={};for(let n=0;n<i;n++)t[n+r]=new Cn({func:e.GEQUAL,mask:255},n+this.nextStencilID,255,e.KEEP,e.KEEP,e.REPLACE);return this.nextStencilID+=i,[t,n]}return[{[r]:Cn.disabled},n]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new xn([e.CONSTANT_COLOR,e.ONE],new t.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?xn.unblended:xn.alphaBlended}depthModeForSublayer(t,e,n){if(!this.opaquePassEnabledForLayer())return En.disabled;const r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new En(n||this.context.gl.LEQUAL,e,[r,r])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();const r=this.style._order,i=this.style.sourceCaches,o=this.style.terrain&&new Kn(this);for(const t in i){const e=i[t];e.used&&e.prepare(this.context)}const a={},s={},l={};for(const t in i){const e=i[t];a[t]=e.getVisibleCoordinates(),s[t]=a[t].slice().reverse(),l[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<r.length;t++)if(this.style._layers[r[t]].is3D()){this.opaquePassCutoff=t;break}if(o){this.opaquePassCutoff=0;const e=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!t.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||e.length)&&(t.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(e,n){const r=e.context,i=r.gl,o=xn.unblended,a=new En(i.LEQUAL,En.ReadWrite,[0,1]),s=n.getTerrainMesh(),l=n.sourceCache.getRenderableTiles(),u=e.useProgram("terrainDepth");r.bindFramebuffer.set(n.getFramebuffer("depth").framebuffer),r.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),r.clear({color:t.Color.transparent,depth:1});for(const t of l){const l=n.getTerrainData(t.tileID),c=e.transform.calculatePosMatrix(t.tileID.toUnwrapped());u.draw(r,i.TRIANGLES,a,Cn.disabled,o,Tn.backCCW,{u_matrix:c},l,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}r.bindFramebuffer.set(null),r.viewport.set([0,0,e.width,e.height])}(this,this.style.terrain),function(e,n){const r=e.context,i=r.gl,o=xn.unblended,a=new En(i.LEQUAL,En.ReadWrite,[0,1]),s=n.getTerrainMesh(),l=n.getCoordsTexture(),u=n.sourceCache.getRenderableTiles(),c=e.useProgram("terrainCoords");r.bindFramebuffer.set(n.getFramebuffer("coords").framebuffer),r.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),r.clear({color:t.Color.transparent,depth:1}),n.coordsIndex=[];for(const t of u){const u=n.getTerrainData(t.tileID);r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,l.texture);const h=e.transform.calculatePosMatrix(t.tileID.toUnwrapped());c.draw(r,i.TRIANGLES,a,Cn.disabled,o,Tn.backCCW,{u_matrix:h,u_terrain_coords_id:(255-n.coordsIndex.length)/255,u_texture:0},u,"terrain",s.vertexBuffer,s.indexBuffer,s.segments),n.coordsIndex.push(t.tileID.key)}r.bindFramebuffer.set(null),r.viewport.set([0,0,e.width,e.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const t of r){const e=this.style._layers[t];if(!e.hasOffscreenPass()||e.isHidden(this.transform.zoom))continue;const n=s[e.source];("custom"===e.type||n.length)&&this.renderLayer(this,i[e.source],e,n)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!o)for(this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[r[this.currentLayer]],e=i[t.source],n=a[t.source];this._renderTileClippingMasks(t,n),this.renderLayer(this,e,t,n)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const t=this.style._layers[r[this.currentLayer]],e=i[t.source];if(o&&o.renderLayer(t))continue;const n=("symbol"===t.type?l:s)[t.source];this._renderTileClippingMasks(t,a[t.source]),this.renderLayer(this,e,t,n)}if(this.options.showTileBoundaries){let t,e;Object.values(this.style._layers).forEach((n=>{n.source&&!n.isHidden(this.transform.zoom)&&(n.source!==(e&&e.id)&&(e=this.style.sourceCaches[n.source]),(!t||t.getSource().maxzoom<e.getSource().maxzoom)&&(t=e))})),t&&Qn.debug(this,t,t.getVisibleCoordinates())}this.options.showPadding&&function(t){const e=t.transform.padding;Yn(t,t.transform.height-(e.top||0),3,jn),Yn(t,e.bottom||0,3,Un),$n(t,e.left||0,3,Vn),$n(t,t.transform.width-(e.right||0),3,qn);const n=t.transform.centerPoint;!function(t,e,n,r){Wn(t,e-1,n-10,2,20,r),Wn(t,e-10,n-1,20,2,r)}(t,n.x,t.transform.height-n.y,Gn)}(this),this.context.setDefault()}renderLayer(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||(r||[]).length)&&(this.id=n.id,this.gpuTimingStart(n),Qn[n.type](t,e,n,r,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;let n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}queryGpuTimers(t){const e={};for(const n in t){const r=t[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),e[n]=o}return e}translatePosMatrix(e,n,r,i,o){if(!r[0]&&!r[1])return e;const a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){const t=Math.sin(a),e=Math.cos(a);r=[r[0]*e-r[1]*t,r[0]*t+r[1]*e]}const s=[o?r[0]:xt(n,r[0],this.transform.zoom),o?r[1]:xt(n,r[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,s),l}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n}useProgram(t,e){this.cache=this.cache||{};const n=t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[n]||(this.cache[n]=new se(this.context,t,re[t],e,Re[t],this._showOverdrawInspector,this.style.terrain)),this.cache[n]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class tr{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(e,n,r){const i=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((r=>{const o=1/(r=t.transformMat4([],r,e))[3]/n*i;return t.mul$1(r,r,[o,o,1/r[3],o])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const n=t.sub([],o[e[0]],o[e[1]]),r=t.sub([],o[e[2]],o[e[1]]),i=t.normalize([],t.cross([],n,r)),a=-t.dot(i,o[e[1]]);return i.concat(a)}));return new tr(o,a)}}class er{constructor(e,n){this.min=e,this.max=n,this.center=t.scale$1([],t.add([],this.min,this.max),.5)}quadrant(e){const n=[e%2==0,e<2],r=t.clone$2(this.min),i=t.clone$2(this.max);for(let t=0;t<n.length;t++)r[t]=n[t]?this.min[t]:this.center[t],i[t]=n[t]?this.center[t]:this.max[t];return i[2]=this.max[2],new er(r,i)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersects(e){const n=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let r=!0;for(let i=0;i<e.planes.length;i++){const o=e.planes[i];let a=0;for(let e=0;e<n.length;e++)t.dot$1(o,n[e])>=0&&a++;if(0===a)return 0;a!==n.length&&(r=!1)}if(r)return 2;for(let t=0;t<3;t++){let n=Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let i=0;i<e.points.length;i++){const o=e.points[i][t]-this.min[t];n=Math.min(n,o),r=Math.max(r,o)}if(r<0||n>this.max[t]-this.min[t])return 0}return 1}}class nr{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=r}interpolate(e,n,r){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,r)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,r)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,r)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,r)),this}getCenter(e,n){const r=t.clamp((this.left+e-this.right)/2,0,e),i=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.pointGeometry(r,i)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new nr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class rr{constructor(e,n,r,i,o){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=void 0===o||!!o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new nr,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const t=new rr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t._elevation=this._elevation,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const n=-t.wrap(e,-180,180)*Math.PI/180;var r;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(r=new t.ARRAY_TYPE(4),t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r),function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);t[0]=r*l+o*s,t[1]=i*l+a*s,t[2]=r*-s+o*l,t[3]=i*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(e){const n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies){const r=this.pointCoordinate(new t.pointGeometry(0,0)),i=this.pointCoordinate(new t.pointGeometry(this.width,0)),o=this.pointCoordinate(new t.pointGeometry(this.width,this.height)),a=this.pointCoordinate(new t.pointGeometry(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),l=Math.floor(Math.max(r.x,i.x,o.x,a.x)),u=1;for(let c=s-u;c<=l+u;c++)0!==c&&n.push(new t.UnwrappedTileID(c,e))}return n}coveringTiles(e){var n,r;let i=this.coveringZoomLevel(e);const o=i;if(void 0!==e.minzoom&&i<e.minzoom)return[];void 0!==e.maxzoom&&i>e.maxzoom&&(i=e.maxzoom);const a=this.pointCoordinate(this.getCameraPoint()),s=t.MercatorCoordinate.fromLngLat(this.center),l=Math.pow(2,i),u=[l*a.x,l*a.y,0],c=[l*s.x,l*s.y,0],h=tr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i);let d=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(d=i);const p=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,f=t=>({aabb:new er([t*l,0,0],[(t+1)*l,l,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}),m=[],g=[],y=i,v=e.reparseOverscaled?o:i;if(this._renderWorldCopies)for(let t=1;t<=3;t++)m.push(f(-t)),m.push(f(t));for(m.push(f(0));m.length>0;){const i=m.pop(),o=i.x,a=i.y;let s=i.fullyVisible;if(!s){const t=i.aabb.intersects(h);if(0===t)continue;s=2===t}const l=e.terrain?u:c,f=i.aabb.distanceX(l),_=i.aabb.distanceY(l),b=Math.max(Math.abs(f),Math.abs(_)),x=p+(1<<y-i.zoom)-2;if(i.zoom===y||b>x&&i.zoom>=d){const e=y-i.zoom,n=u[0]-.5-(o<<e),r=u[1]-.5-(a<<e);g.push({tileID:new t.OverscaledTileID(i.zoom===y?v:i.zoom,i.wrap,i.zoom,o,a),distanceSq:t.sqrLen([c[0]-.5-o,c[1]-.5-a]),tileDistanceToCamera:Math.sqrt(n*n+r*r)})}else for(let u=0;u<4;u++){const l=(o<<1)+u%2,c=(a<<1)+(u>>1),h=i.zoom+1;let d=i.aabb.quadrant(u);if(e.terrain){const o=new t.OverscaledTileID(h,i.wrap,h,l,c),a=e.terrain.getMinMaxElevation(o),s=null!==(n=a.minElevation)&&void 0!==n?n:this.elevation,u=null!==(r=a.maxElevation)&&void 0!==r?r:this.elevation;d=new er([d.min[0],d.min[1],s],[d.max[0],d.max[1],u])}m.push({aabb:d,zoom:h,x:l,y:c,wrap:i.wrap,fullyVisible:s})}}return g.sort(((t,e)=>t.distanceSq-e.distanceSq)).map((t=>t.tileID))}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(e){const n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.pointGeometry(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)}unproject(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(t){this.freezeElevation||(this.elevation=t?this.getElevation(this._center,t):0)}getElevation(e,n){const r=t.MercatorCoordinate.fromLngLat(e),i=(1<<this.tileZoom)*t.EXTENT,o=r.x*i,a=r.y*i,s=Math.floor(o/t.EXTENT),l=Math.floor(a/t.EXTENT),u=new t.OverscaledTileID(this.tileZoom,0,this.tileZoom,s,l);return n.getElevation(u,o%t.EXTENT,a%t.EXTENT,t.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const n=this.pointLocation(this.centerPoint,e),r=this.getElevation(n,e);if(!(this.elevation-r))return;const i=this.getCameraPosition(),o=t.MercatorCoordinate.fromLngLat(i.lngLat,i.altitude),a=t.MercatorCoordinate.fromLngLat(n,r),s=o.x-a.x,l=o.y-a.y,u=o.z-a.z,c=Math.sqrt(s*s+l*l+u*u),h=this.scaleZoom(this.cameraToCenterDistance/c/this.tileSize);this._elevation=r,this._center=n,this.zoom=h}setLocationAtPoint(e,n){const r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t,e){return e?this.coordinatePoint(this.locationCoordinate(t),this.getElevation(t,e),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(t))}pointLocation(t,e){return this.coordinateLocation(this.pointCoordinate(t,e))}locationCoordinate(e){return t.MercatorCoordinate.fromLngLat(e)}coordinateLocation(t){return t&&t.toLngLat()}pointCoordinate(e,n){if(n){const t=n.pointCoordinate(e);if(null!=t)return t}const r=[e.x,e.y,0,1],i=[e.x,e.y,1,1];t.transformMat4(r,r,this.pixelMatrixInverse),t.transformMat4(i,i,this.pixelMatrixInverse);const o=r[3],a=i[3],s=r[1]/o,l=i[1]/a,u=r[2]/o,c=i[2]/a,h=u===c?0:(0-u)/(c-u);return new t.MercatorCoordinate(t.number(r[0]/o,i[0]/a,h)/this.worldSize,t.number(s,l,h)/this.worldSize)}coordinatePoint(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.pixelMatrix;const i=[e.x*this.worldSize,e.y*this.worldSize,n,1];return t.transformMat4(i,i,r),new t.pointGeometry(i[0]/i[3],i[1]/i[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return(new t.LngLatBounds).extend(this.pointLocation(new t.pointGeometry(0,e))).extend(this.pointLocation(new t.pointGeometry(this.width,e))).extend(this.pointLocation(new t.pointGeometry(this.width,this.height))).extend(this.pointLocation(new t.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];const o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*a,o.y*a,0]),t.scale(l,l,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(l,n?this.alignedProjMatrix:this.projMatrix,l),i[r]=new Float32Array(l),i[r]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let e,n,r,i,o=-90,a=90,s=-180,l=180;const u=this.size,c=this._unmodified;if(this.latRange){const n=this.latRange;o=t.mercatorYfromLat(n[1])*this.worldSize,a=t.mercatorYfromLat(n[0])*this.worldSize,e=a-o<u.y?u.y/(a-o):0}if(this.lngRange){const e=this.lngRange;s=t.wrap(t.mercatorXfromLng(e[0])*this.worldSize,0,this.worldSize),l=t.wrap(t.mercatorXfromLng(e[1])*this.worldSize,0,this.worldSize),l<s&&(l+=this.worldSize),n=l-s<u.x?u.x/(l-s):0}const h=this.point,d=Math.max(n||0,e||0);if(d)return this.center=this.unproject(new t.pointGeometry(n?(l+s)/2:h.x,e?(a+o)/2:h.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){const t=h.y,e=u.y/2;t-e<o&&(i=o+e),t+e>a&&(i=a-e)}if(this.lngRange){const e=(s+l)/2,n=t.wrap(h.x,e-this.worldSize/2,e+this.worldSize/2),i=u.x/2;n-i<s&&(r=s+i),n+i>l&&(r=l-i)}void 0===r&&void 0===i||(this.center=this.unproject(new t.pointGeometry(void 0!==r?r:h.x,void 0!==i?i:h.y)).wrap()),this._unmodified=c,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,n=this.point.x,r=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let i=t.identity(new Float64Array(16));t.scale(i,i,[this.width/2,-this.height/2,1]),t.translate(i,i,[1,-1,0]),this.labelPlaneMatrix=i,i=t.identity(new Float64Array(16)),t.scale(i,i,[1,-1,1]),t.translate(i,i,[-1,-1,0]),t.scale(i,i,[2/this.width,2/this.height,1]),this.glCoordMatrix=i,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const o=Math.PI/2+this._pitch,a=this._fov*(.5+e.y/this.height),s=Math.sin(a)*this.cameraToSeaLevelDistance/Math.sin(t.clamp(Math.PI-o-a,.01,Math.PI-.01)),l=this.getHorizon(),u=2*Math.atan(l/this.cameraToCenterDistance)*(.5+e.y/(2*l)),c=Math.sin(u)*this.cameraToSeaLevelDistance/Math.sin(t.clamp(Math.PI-o-u,.01,Math.PI-.01)),h=Math.cos(Math.PI/2-this._pitch)*s+this.cameraToSeaLevelDistance,d=Math.cos(Math.PI/2-this._pitch)*c+this.cameraToSeaLevelDistance,p=1.01*Math.min(h,d),f=this.height/50;i=new Float64Array(16),t.perspective(i,this._fov,this.width/this.height,f,p),i[8]=2*-e.x/this.width,i[9]=2*e.y/this.height,t.scale(i,i,[1,-1,1]),t.translate(i,i,[0,0,-this.cameraToCenterDistance]),t.rotateX(i,i,this._pitch),t.rotateZ(i,i,this.angle),t.translate(i,i,[-n,-r,0]),this.mercatorMatrix=t.scale([],i,[this.worldSize,this.worldSize,this.worldSize]),t.scale(i,i,[1,1,this._pixelPerMeter]),this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,i),t.translate(i,i,[0,0,-this.elevation]),this.projMatrix=i,this.invProjMatrix=t.invert([],i),this.pixelMatrix3D=t.multiply(new Float64Array(16),this.labelPlaneMatrix,i);const m=this.width%2/2,g=this.height%2/2,y=Math.cos(this.angle),v=Math.sin(this.angle),_=n-Math.round(n)+y*m+v*g,b=r-Math.round(r)+y*g+v*m,x=new Float64Array(i);if(t.translate(x,x,[_>.5?_-1:_,b>.5?b-1:b,0]),this.alignedProjMatrix=x,i=t.invert(new Float64Array(16),this.pixelMatrix),!i)throw new Error("failed to invert matrix");this.pixelMatrixInverse=i,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new t.pointGeometry(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.pointGeometry(0,e))}getCameraQueryGeometry(e){const n=this.getCameraPoint();if(1===e.length)return[e[0],n];{let r=n.x,i=n.y,o=n.x,a=n.y;for(const t of e)r=Math.min(r,t.x),i=Math.min(i,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y);return[new t.pointGeometry(r,i),new t.pointGeometry(o,i),new t.pointGeometry(o,a),new t.pointGeometry(r,a),new t.pointGeometry(r,i)]}}}class ir{constructor(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(t,e){let n=!1,r=null;const i=()=>{r=null,n&&(t(),r=setTimeout(i,300),n=!1)};return()=>(n=!0,r||i(),r)}(this._updateHashUnthrottled.bind(this))}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(t){const e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(e.lng*i)/i,a=Math.round(e.lat*i)/i,s=this._map.getBearing(),l=this._map.getPitch();let u="";if(u+=t?`/${o}/${a}/${n}`:`${n}/${a}/${o}`,(s||l)&&(u+="/"+Math.round(10*s)/10),l&&(u+=`/${Math.round(l)}`),this._hashName){const t=this._hashName;let e=!1;const n=window.location.hash.slice(1).split("&").map((n=>{const r=n.split("=")[0];return r===t?(e=!0,`${r}=${u}`):n})).filter((t=>t));return e||n.push(`${t}=${u}`),`#${n.join("&")}`}return`#${u}`}_getCurrentHash(){const t=window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((t=>t.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const t=this._getCurrentHash();if(t.length>=3&&!t.some((t=>isNaN(t)))){const e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,t)}catch(t){}}}const or={linearity:.3,easing:t.bezier(0,0,.3,1)},ar=t.extend({deceleration:2500,maxSpeed:1400},or),sr=t.extend({deceleration:20,maxSpeed:1400},or),lr=t.extend({deceleration:1e3,maxSpeed:360},or),ur=t.extend({deceleration:1e3,maxSpeed:90},or);class cr{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,n=t.exported.now();for(;e.length>0&&n-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new t.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)n.zoom+=t.zoomDelta||0,n.bearing+=t.bearingDelta||0,n.pitch+=t.pitchDelta||0,t.panDelta&&n.pan._add(t.panDelta),t.around&&(n.around=t.around),t.pinchAround&&(n.pinchAround=t.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(n.pan.mag()){const o=dr(n.pan.mag(),r,t.extend({},ar,e||{}));i.offset=n.pan.mult(o.amount/n.pan.mag()),i.center=this._map.transform.center,hr(i,o)}if(n.zoom){const t=dr(n.zoom,r,sr);i.zoom=this._map.transform.zoom+t.amount,hr(i,t)}if(n.bearing){const e=dr(n.bearing,r,lr);i.bearing=this._map.transform.bearing+t.clamp(e.amount,-179,179),hr(i,e)}if(n.pitch){const t=dr(n.pitch,r,ur);i.pitch=this._map.transform.pitch+t.amount,hr(i,t)}if(i.zoom||i.bearing){const t=void 0===n.pinchAround?n.around:n.pinchAround;i.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),t.extend(i,{noMoveStart:!0})}}function hr(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function dr(e,n,r){const{maxSpeed:i,linearity:o,deceleration:a}=r,s=t.clamp(e*o/(n/1e3),-i,i),l=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}class pr extends t.Event{constructor(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=o.mousePos(n.getCanvasContainer(),r),s=n.unproject(a);super(e,t.extend({point:a,lngLat:s,originalEvent:r},i)),this._defaultPrevented=!1,this.target=n}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class fr extends t.Event{constructor(e,n,r){const i="touchend"===e?r.changedTouches:r.touches,a=o.touchPos(n.getCanvasContainer(),i),s=a.map((t=>n.unproject(t))),l=a.reduce(((t,e,n,r)=>t.add(e.div(r.length))),new t.pointGeometry(0,0));super(e,{points:a,point:l,lngLats:s,lngLat:n.unproject(l),originalEvent:r}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class mr extends t.Event{constructor(t,e,n){super(t,{originalEvent:n}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class gr{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new mr(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new pr(t.type,this._map,t))}mouseup(t){this._map.fire(new pr(t.type,this._map,t))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new pr(t.type,this._map,t))}dblclick(t){return this._firePreventable(new pr(t.type,this._map,t))}mouseover(t){this._map.fire(new pr(t.type,this._map,t))}mouseout(t){this._map.fire(new pr(t.type,this._map,t))}touchstart(t){return this._firePreventable(new fr(t.type,this._map,t))}touchmove(t){this._map.fire(new fr(t.type,this._map,t))}touchend(t){this._map.fire(new fr(t.type,this._map,t))}touchcancel(t){this._map.fire(new fr(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class yr{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new pr(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new pr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new pr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class vr{constructor(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(o.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const n=e;if(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)return;const r=this._startPos;this._lastPos=n,this._box||(this._box=o.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const i=Math.min(r.x,n.x),a=Math.max(r.x,n.x),s=Math.min(r.y,n.y),l=Math.max(r.y,n.y);o.setTransform(this._box,`translate(${i}px,${s}px)`),this._box.style.width=a-i+"px",this._box.style.height=l-s+"px"}mouseupWindow(e,n){if(!this._active)return;if(0!==e.button)return;const r=this._startPos,i=n;if(this.reset(),o.suppressClick(),r.x!==i.x||r.y!==i.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:t=>t.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(o.remove(this._box),this._box=null),o.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))}}function _r(t,e){if(t.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${t.length}, points ${e.length}`);const n={};for(let r=0;r<t.length;r++)n[t[r].identifier]=e[r];return n}class br{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){const n=new t.pointGeometry(0,0);for(const t of e)n._add(t);return n.div(e.length)}(n),this.touches=_r(r,n)))}touchmove(t,e,n){if(this.aborted||!this.centroid)return;const r=_r(n,e);for(const i in this.touches){const t=this.touches[i],e=r[i];(!e||e.dist(t)>30)&&(this.aborted=!0)}}touchend(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class xr{constructor(t){this.singleTap=new br(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,e,n){this.singleTap.touchstart(t,e,n)}touchmove(t,e,n){this.singleTap.touchmove(t,e,n)}touchend(t,e,n){const r=this.singleTap.touchend(t,e,n);if(r){const e=t.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(r)<30;if(e&&n||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class wr{constructor(){this._zoomIn=new xr({numTouches:1,numTaps:2}),this._zoomOut=new xr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)}touchmove(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)}touchend(t,e,n){const r=this._zoomIn.touchend(t,e,n),i=this._zoomOut.touchend(t,e,n);return r?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(r)},{originalEvent:t})}):i?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(i)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Er={0:1,2:2};class Sr{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(t,e){return!1}_move(t,e){return{}}mousedown(t,e){if(this._lastPoint)return;const n=o.mouseButton(t);this._correctButton(t,n)&&(this._lastPoint=e,this._eventButton=n)}mousemoveWindow(t,e){const n=this._lastPoint;if(n)if(t.preventDefault(),function(t,e){const n=Er[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)}mouseupWindow(t){this._lastPoint&&o.mouseButton(t)===this._eventButton&&(this._moved&&o.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cr extends Sr{mousedown(t,e){super.mousedown(t,e),this._lastPoint&&(this._active=!0)}_correctButton(t,e){return 0===e&&!t.ctrlKey}_move(t,e){return{around:e,panDelta:e.sub(t)}}}class Tr extends Sr{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(t){t.preventDefault()}}class Ir extends Sr{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(t){t.preventDefault()}}class kr{constructor(t,e){this._minTouches=t.cooperativeGestures?2:1,this._clickTolerance=t.clickTolerance||1,this._map=e,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.pointGeometry(0,0),setTimeout((()=>{this._cancelCooperativeMessage=!1}),200)}touchstart(t,e,n){return this._calculateTransform(t,e,n)}touchmove(t,e,n){if(this._map._cooperativeGestures&&(2===this._minTouches&&n.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(t,!1,n.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(n.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,n)}touchend(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,r){r.length>0&&(this._active=!0);const i=_r(r,n),o=new t.pointGeometry(0,0),a=new t.pointGeometry(0,0);let s=0;for(const t in i){const e=i[t],n=this._touches[t];n&&(o._add(e),a._add(e.sub(n)),s++,i[t]=e)}if(this._touches=i,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ar{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(t){}_move(t,e,n){return{}}touchstart(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,n){if(!this._firstTwoTouches)return;t.preventDefault();const[r,i]=this._firstTwoTouches,o=Pr(n,e,r),a=Pr(n,e,i);if(!o||!a)return;const s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}touchend(t,e,n){if(!this._firstTwoTouches)return;const[r,i]=this._firstTwoTouches,a=Pr(n,e,r),s=Pr(n,e,i);a&&s||(this._active&&o.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Pr(t,e,n){for(let r=0;r<t.length;r++)if(t[r].identifier===n)return e[r]}function Dr(t,e){return Math.log(t/e)/Math.LN2}class Mr extends Ar{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Dr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Dr(this._distance,n),pinchAround:e}}}function Or(t,e){return 180*t.angleWith(e)/Math.PI}class Rr extends Ar{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e){const n=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Or(this._vector,n),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,n=Or(t,this._startVector);return Math.abs(n)<e}}function Nr(t){return Math.abs(t.y)>Math.abs(t.x)}class Lr extends Ar{constructor(t){super(),this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,e,n){super.touchstart(t,e,n),this._currentTouchCount=n.length}_start(t){this._lastPoints=t,Nr(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,e,n){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const r=t[0].sub(this._lastPoints[0]),i=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(r,i,n.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(r.y+i.y)/2*-.5}):void 0}gestureBeginsVertically(t,e,n){if(void 0!==this._valid)return this._valid;const r=t.mag()>=2,i=e.mag()>=2;if(!r&&!i)return;if(!r||!i)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=t.y>0==e.y>0;return Nr(t)&&Nr(e)&&o}}const Fr={panStep:100,bearingStep:15,pitchStep:10};class zr{constructor(){const t=Fr;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,n=0,r=0,i=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(t.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:Br,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+n*this._bearingStep,pitch:a.getPitch()+r*this._pitchStep,offset:[-i*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Br(t){return t*(2-t)}const jr=4.000244140625;class Ur{constructor(e,n){this._map=e,this._el=e.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(e){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;e.preventDefault()}let n=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const r=t.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%jr==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const n=o.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._map.transform;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>jr?this._wheelZoomRate:this._defaultZoomRate;let n=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==n&&(n=1/n);const r="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(r*n))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const n="number"==typeof this._targetZoom?this._targetZoom:e.zoom,r=this._startZoom,i=this._easing;let o,a=!1;if("wheel"===this._type&&r&&i){const e=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),s=i(e);o=t.number(r,n,s),e<1?this._frameId||(this._frameId=!0):a=!0}else o=n,a=!0;return this._active=!0,a&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!a,zoomDelta:o-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=t.ease;if(this._prevEase){const e=this._prevEase,r=(t.exported.now()-e.start)/e.duration,i=e.easing(r+.01)-e.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);n=t.bezier(o,a,.25,1)}return this._prevEase={start:t.exported.now(),duration:e,easing:n},n}reset(){this._active=!1}}class Vr{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class qr{constructor(){this.reset()}reset(){this._active=!1}dblclick(t,e){return t.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gr{constructor(){this._tap=new xr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))}touchmove(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const r=e[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(t,e,n)}touchend(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yr{constructor(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class $r{constructor(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Wr{constructor(t,e,n,r){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Hr=t=>t.zoom||t.drag||t.pitch||t.rotate;class Xr extends t.Event{}function Zr(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class Kr{constructor(e,n){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new cr(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(n),t.bindAll(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[window,"blur",void 0]];for(const[t,i,a]of this._listeners)o.addEventListener(t,i,t===document?this.handleWindowEvent:this.handleEvent,a)}destroy(){for(const[t,e,n]of this._listeners)o.removeEventListener(t,e,t===document?this.handleWindowEvent:this.handleEvent,n)}_addDefaultHandlers(t){const e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new gr(e,t));const r=e.boxZoom=new vr(e,t);this._add("boxZoom",r);const i=new wr,o=new qr;e.doubleClickZoom=new Vr(o,i),this._add("tapZoom",i),this._add("clickZoom",o);const a=new Gr;this._add("tapDragZoom",a);const s=e.touchPitch=new Lr(e);this._add("touchPitch",s);const l=new Tr(t),u=new Ir(t);e.dragRotate=new $r(t,l,u),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]);const c=new Cr(t),h=new kr(t,e);e.dragPan=new Yr(n,c,h),this._add("mousePan",c),this._add("touchPan",h,["touchZoom","touchRotate"]);const d=new Rr,p=new Mr;e.touchZoomRotate=new Wr(n,p,d,a),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]);const f=e.scrollZoom=new Ur(e,this);this._add("scrollZoom",f,["mousePan"]);const m=e.keyboard=new zr;this._add("keyboard",m),this._add("blockableMapEvent",new yr(e));for(const g of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[g]&&e[g].enable(t[g])}_add(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Hr(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,e,n){for(const r in t)if(r!==n&&(!e||e.indexOf(r)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const e=[];for(const n of t)this._el.contains(n.target)&&e.push(n);return e}handleEvent(t,e){if("blur"===t.type)return void this.stop(!0);this._updatingCamera=!0;const n="renderFrame"===t.type?void 0:t,r={needsRenderFrame:!1},i={},a={},s=t.touches,l=s?this._getMapTouches(s):void 0,u=l?o.touchPos(this._el,l):o.mousePos(this._el,t);for(const{handlerName:o,handler:d,allowed:p}of this._handlers){if(!d.isEnabled())continue;let s;this._blockedByActive(a,p,o)?d.reset():d[e||t.type]&&(s=d[e||t.type](t,u,l),this.mergeHandlerResult(r,i,s,o,n),s&&s.needsRenderFrame&&this._triggerRenderFrame()),(s||d.isActive())&&(a[o]=d)}const c={};for(const o in this._previousActiveHandlers)a[o]||(c[o]=n);this._previousActiveHandlers=a,(Object.keys(c).length||Zr(r))&&(this._changes.push([r,i,c]),this._triggerRenderFrame()),(Object.keys(a).length||Zr(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:h}=r;h&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],h(this._map))}mergeHandlerResult(e,n,r,i,o){if(!r)return;t.extend(e,r);const a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}_applyChanges(){const e={},n={},r={};for(const[i,o,a]of this._changes)i.panDelta&&(e.panDelta=(e.panDelta||new t.pointGeometry(0,0))._add(i.panDelta)),i.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(e.around=i.around),void 0!==i.pinchAround&&(e.pinchAround=i.pinchAround),i.noInertia&&(e.noInertia=i.noInertia),t.extend(n,o),t.extend(r,a);this._updateMapTransform(e,n,r),this._changes=[]}_updateMapTransform(e,n,r){const i=this._map,o=i.transform,a=i.style&&i.style.terrain;if(!(Zr(e)||a&&this._drag))return this._fireEvents(n,r,!0);let{panDelta:s,zoomDelta:l,bearingDelta:u,pitchDelta:c,around:h,pinchAround:d}=e;void 0!==d&&(h=d),i._stop(!0),h=h||i.transform.centerPoint;const p=o.pointLocation(s?h.sub(s):h);u&&(o.bearing+=u),c&&(o.pitch+=c),l&&(o.zoom+=l),a?n.drag&&!this._drag?(this._drag={center:o.centerPoint,lngLat:o.pointLocation(h),point:h,handlerName:n.drag.handlerName},i.fire(new t.Event("freezeElevation",{freeze:!0}))):this._drag&&r[this._drag.handlerName]?(i.fire(new t.Event("freezeElevation",{freeze:!1})),this._drag=null):n.drag&&this._drag&&(o.center=o.pointLocation(o.centerPoint.sub(s))):o.setLocationAtPoint(p,h),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(n,r,!0)}_fireEvents(e,n,r){const i=Hr(this._eventsInProgress),o=Hr(e),a={};for(const t in e){const{originalEvent:n}=e[t];this._eventsInProgress[t]||(a[`${t}start`]=n),this._eventsInProgress[t]=e[t]}!i&&o&&this._fireEvent("movestart",o.originalEvent);for(const t in a)this._fireEvent(t,a[t]);o&&this._fireEvent("move",o.originalEvent);for(const t in e){const{originalEvent:n}=e[t];this._fireEvent(t,n)}const s={};let l;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:r}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],l=n[e]||r,s[`${t}end`]=l)}for(const t in s)this._fireEvent(t,s[t]);const u=Hr(this._eventsInProgress);if(r&&(i||o)&&!u){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;e?(n(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:l})):(this._map.fire(new t.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new Xr("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Qr={extend:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.extend(e,...r)},run(t){t()},logToElement(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"log";const r=window.document.getElementById(n);r&&(e&&(r.innerHTML=""),r.innerHTML+=`<br>${t}`)}};class Jr extends t.Evented{constructor(e,n){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=n.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(e,n,r){return e=t.pointGeometry.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)}panTo(e,n,r){return this.easeTo(t.extend({center:e},n),r)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)}resetNorth(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(e,n){e=t.LngLatBounds.convert(e);const r=n&&n.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),r,n)}_cameraForBoxAndBearing(e,n,r,i){const o={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=t.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){const t=i.padding;i.padding={top:t,bottom:t,right:t,left:t}}i.padding=t.extend(o,i.padding);const a=this.transform,s=a.padding,l=a.project(t.LngLat.convert(e)),u=a.project(t.LngLat.convert(n)),c=l.rotate(-r*Math.PI/180),h=u.rotate(-r*Math.PI/180),d=new t.pointGeometry(Math.max(c.x,h.x),Math.max(c.y,h.y)),p=new t.pointGeometry(Math.min(c.x,h.x),Math.min(c.y,h.y)),f=d.sub(p),m=(a.width-(s.left+s.right+i.padding.left+i.padding.right))/f.x,g=(a.height-(s.top+s.bottom+i.padding.top+i.padding.bottom))/f.y;if(g<0||m<0)return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const y=Math.min(a.scaleZoom(a.scale*Math.min(m,g)),i.maxZoom),v=t.pointGeometry.convert(i.offset),_=new t.pointGeometry((i.padding.left-i.padding.right)/2,(i.padding.top-i.padding.bottom)/2).rotate(r*Math.PI/180),b=v.add(_).mult(a.scale/a.zoomScale(y));return{center:a.unproject(l.add(u).div(2).sub(b)),zoom:y,bearing:r}}fitBounds(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)}fitScreenCoordinates(e,n,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.pointGeometry.convert(e)),this.transform.pointLocation(t.pointGeometry.convert(n)),r,i),i,o)}_fitInternal(e,n,r){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}jumpTo(e,n){this.stop();const r=this.transform;let i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))}calculateCameraOptionsFromTo(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=t.MercatorCoordinate.fromLngLat(e,n),a=t.MercatorCoordinate.fromLngLat(r,i),s=a.x-o.x,l=a.y-o.y,u=a.z-o.z,c=Math.hypot(s,l,u);if(0===c)throw new Error("Can't calculate camera options with same From and To");const h=Math.hypot(s,l),d=this.transform.scaleZoom(this.transform.cameraToCenterDistance/c/this.transform.tileSize),p=180*Math.atan2(s,-l)/Math.PI;let f=180*Math.acos(h/c)/Math.PI;return f=u<0?90-f:90+f,{center:a.toLngLat(),zoom:d,pitch:f,bearing:p}}easeTo(e,n){this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.exported.prefersReducedMotion)&&(e.duration=0);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in e?+e.zoom:i,u="bearing"in e?this._normalizeBearing(e.bearing,o):o,c="pitch"in e?+e.pitch:a,h="padding"in e?e.padding:r.padding,d=t.pointGeometry.convert(e.offset);let p=r.centerPoint.add(d);const f=r.pointLocation(p),m=t.LngLat.convert(e.center||f);this._normalizeCenter(m);const g=r.project(f),y=r.project(m).sub(g),v=r.zoomScale(l-i);let _,b;e.around&&(_=t.LngLat.convert(e.around),b=r.locationPoint(_));const x={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==i,this._rotating=this._rotating||o!==u,this._pitching=this._pitching||c!==a,this._padding=!r.isPaddingEqual(h),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,x),this._ease((e=>{if(this._zooming&&(r.zoom=t.number(i,l,e)),this._rotating&&(r.bearing=t.number(o,u,e)),this._pitching&&(r.pitch=t.number(a,c,e)),this._padding&&(r.interpolatePadding(s,h,e),p=r.centerPoint.add(d)),_)r.setLocationAtPoint(_,b);else{const t=r.zoomScale(r.zoom-i),n=l>i?Math.min(2,v):Math.max(.5,v),o=Math.pow(n,1-e),a=r.unproject(g.add(y.mult(e*o)).mult(t));r.setLocationAtPoint(r.renderWorldCopies?a.wrap():a,p)}this._fireMoveEvents(n)}),(t=>{this._afterEase(n,t)}),e),this}_prepareEase(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.fire(new t.Event("freezeElevation",{freeze:!0})),n||r.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId,this.fire(new t.Event("freezeElevation",{freeze:!1}));const r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new t.Event("zoomend",e)),i&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}flyTo(e,n){if(!e.essential&&t.exported.prefersReducedMotion){const r=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,r.minZoom,r.maxZoom):i,u="bearing"in e?this._normalizeBearing(e.bearing,o):o,c="pitch"in e?+e.pitch:a,h="padding"in e?e.padding:r.padding,d=r.zoomScale(l-i),p=t.pointGeometry.convert(e.offset);let f=r.centerPoint.add(p);const m=r.pointLocation(f),g=t.LngLat.convert(e.center||m);this._normalizeCenter(g);const y=r.project(m),v=r.project(g).sub(y);let _=e.curve;const b=Math.max(r.width,r.height),x=b/d,w=v.mag();if("minZoom"in e){const n=t.clamp(Math.min(e.minZoom,i,l),r.minZoom,r.maxZoom),o=b/r.zoomScale(n-i);_=Math.sqrt(o/w*2)}const E=_*_;function S(t){const e=(x*x-b*b+(t?-1:1)*E*E*w*w)/(2*(t?x:b)*E*w);return Math.log(Math.sqrt(e*e+1)-e)}function C(t){return(Math.exp(t)-Math.exp(-t))/2}function T(t){return(Math.exp(t)+Math.exp(-t))/2}const I=S(0);let k=function(t){return T(I)/T(I+_*t)},A=function(t){return b*((T(I)*(C(e=I+_*t)/T(e))-C(I))/E)/w;var e},P=(S(1)-I)/_;if(Math.abs(w)<1e-6||!isFinite(P)){if(Math.abs(b-x)<1e-6)return this.easeTo(e,n);const t=x<b?-1:1;P=Math.abs(Math.log(x/b))/_,A=function(){return 0},k=function(e){return Math.exp(t*_*e)}}return e.duration="duration"in e?+e.duration:1e3*P/("screenSpeed"in e?+e.screenSpeed/_:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=o!==u,this._pitching=c!==a,this._padding=!r.isPaddingEqual(h),this._prepareEase(n,!1),this._ease((e=>{const d=e*P,m=1/k(d);r.zoom=1===e?l:i+r.scaleZoom(m),this._rotating&&(r.bearing=t.number(o,u,e)),this._pitching&&(r.pitch=t.number(a,c,e)),this._padding&&(r.interpolatePadding(s,h,e),f=r.centerPoint.add(p));const _=1===e?g:r.unproject(y.add(v.mult(A(d))).mult(m));r.setLocationAtPoint(r.renderWorldCopies?_.wrap():_,f),this._fireMoveEvents(n)}),(()=>this._afterEase(n)),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const t=this._onEaseEnd;delete this._onEaseEnd,t.call(this,e)}if(!t){const t=this.handlers;t&&t.stop(!1)}return this}_ease(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.exported.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,n){e=t.wrap(e,-180,180);const r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.lngRange)return;const n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}}class ti{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,t.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options&&this.options.compact,this._container=o.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){o.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const n=this._map._getUIString(`AttributionControl.${e}`);t.title=n,t.setAttribute("aria-label",n)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType&&"terrain"!==t.type||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((t=>"string"!=typeof t?"":t))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style.sourceCaches;for(const r in e){const n=e[r];if(n.used||n.usedForTerrain){const e=n.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t=t.filter((t=>String(t).trim())),t.sort(((t,e)=>t.length-e.length)),t=t.filter(((e,n)=>{for(let r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0}));const n=t.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,t.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class ei{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,t.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=o.create("div","maplibregl-ctrl mapboxgl-ctrl");const e=o.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://maplibre.org/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){o.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&e.classList.add("maplibregl-compact","mapboxgl-compact"):e.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class ni{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,n=e?this._queue.concat(e):this._queue;for(const r of n)if(r.id===t)return void(r.cancelled=!0)}run(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const e=this._currentlyRunning=this._queue;this._queue=[];for(const n of e)if(!n.cancelled&&(n.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const ri={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},ii={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},oi={showCompass:!0,showZoom:!0,visualizePitch:!1};class ai{constructor(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._clickTolerance=10,this.element=n,this.mouseRotate=new Tr({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,r&&(this.mousePitch=new Ir({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),o.addEventListener(n,"mousedown",this.mousedown),o.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),o.addEventListener(n,"touchmove",this.touchmove),o.addEventListener(n,"touchend",this.touchend),o.addEventListener(n,"touchcancel",this.reset)}down(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),o.disableDrag()}move(t,e){const n=this.map,r=this.mouseRotate.mousemoveWindow(t,e);if(r&&r.bearingDelta&&n.setBearing(n.getBearing()+r.bearingDelta),this.mousePitch){const r=this.mousePitch.mousemoveWindow(t,e);r&&r.pitchDelta&&n.setPitch(n.getPitch()+r.pitchDelta)}}off(){const t=this.element;o.removeEventListener(t,"mousedown",this.mousedown),o.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),o.removeEventListener(t,"touchmove",this.touchmove),o.removeEventListener(t,"touchend",this.touchend),o.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){o.enableDrag(),o.removeEventListener(window,"mousemove",this.mousemove),o.removeEventListener(window,"mouseup",this.mouseup)}mousedown(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),o.mousePos(this.element,e)),o.addEventListener(window,"mousemove",this.mousemove),o.addEventListener(window,"mouseup",this.mouseup)}mousemove(t){this.move(t,o.mousePos(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=o.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=o.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function si(e,n,r){if(e=new t.LngLat(e.lng,e.lat),n){const i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=r.locationPoint(e).distSqr(n);r.locationPoint(i).distSqr(n)<a?e=i:r.locationPoint(o).distSqr(n)<a&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){const t=r.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=r.width&&t.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}const li={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ui(t,e,n){const r=t.classList;for(const i in li)r.remove(`maplibregl-${n}-anchor-${i}`,`mapboxgl-${n}-anchor-${i}`);r.add(`maplibregl-${n}-anchor-${e}`,`mapboxgl-${n}-anchor-${e}`)}class ci extends t.Evented{constructor(e,n){if(super(),(e instanceof HTMLElement||n)&&(e=t.extend({element:e},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,e&&e.element)this._element=e.element,this._offset=t.pointGeometry.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=o.create("div"),this._element.setAttribute("aria-label","Map marker");const n=o.createNS("http://www.w3.org/2000/svg","svg"),r=41,i=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height",`${r}px`),n.setAttributeNS(null,"width",`${i}px`),n.setAttributeNS(null,"viewBox",`0 0 ${i} ${r}`);const a=o.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");const s=o.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=o.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const u=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const t of u){const e=o.createNS("http://www.w3.org/2000/svg","ellipse");e.setAttributeNS(null,"opacity","0.04"),e.setAttributeNS(null,"cx","10.5"),e.setAttributeNS(null,"cy","5.80029008"),e.setAttributeNS(null,"rx",t.rx),e.setAttributeNS(null,"ry",t.ry),l.appendChild(e)}const c=o.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"fill",this._color);const h=o.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),c.appendChild(h);const d=o.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");const p=o.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(p);const f=o.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF");const m=o.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=o.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const y=o.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(y),s.appendChild(l),s.appendChild(c),s.appendChild(d),s.appendChild(f),s.appendChild(m),n.appendChild(s),n.setAttributeNS(null,"height",r*this._scale+"px"),n.setAttributeNS(null,"width",i*this._scale+"px"),this._element.appendChild(n),this._offset=t.pointGeometry.convert(e&&e.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",(t=>{t.preventDefault()})),this._element.addEventListener("mousedown",(t=>{t.preventDefault()})),ui(this._element,this._anchor,"marker"),this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),o.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[r,-1*(e-n+r)],"bottom-right":[-r,-1*(e-n+r)],left:[n,-1*(e-n)],right:[-n,-1*(e-n)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(t){const e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()}_onMapClick(t){const e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}_update(t){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=si(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(e=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n=`rotateX(${this._map.getPitch()}deg)`),t&&"moveend"!==t.type||(this._pos=this._pos.round()),o.setTransform(this._element,`${li[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${n} ${e}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout((()=>{const t=this._map.unproject(this._pos),e=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=t.distanceTo(this._lngLat)>20*e?"0.2":"1.0",this._opacityTimeout=null}),100))}getOffset(){return this._offset}setOffset(e){return this._offset=t.pointGeometry.convert(e),this._update(),this}_onMove(e){if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const hi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let di,pi=0,fi=!1;const mi={maxWidth:100,unit:"metric"};function gi(t,e,n){const r=n&&n.maxWidth||100,i=t._container.clientHeight/2,o=t.unproject([0,i]),a=t.unproject([r,i]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){const n=3.2808*s;n>5280?yi(e,r,n/5280,t._getUIString("ScaleControl.Miles")):yi(e,r,n,t._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?yi(e,r,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?yi(e,r,s/1e3,t._getUIString("ScaleControl.Kilometers")):yi(e,r,s,t._getUIString("ScaleControl.Meters"))}function yi(t,e,n,r){const i=function(t){const e=Math.pow(10,`${Math.floor(t)}`.length-1);let n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n),e*n}(n);t.style.width=e*(i/n)+"px",t.innerHTML=`${i}&nbsp;${r}`}const vi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},_i=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function bi(e){if(e){if("number"==typeof e){const n=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new t.pointGeometry(0,0),top:new t.pointGeometry(0,e),"top-left":new t.pointGeometry(n,n),"top-right":new t.pointGeometry(-n,n),bottom:new t.pointGeometry(0,-e),"bottom-left":new t.pointGeometry(n,-n),"bottom-right":new t.pointGeometry(-n,-n),left:new t.pointGeometry(e,0),right:new t.pointGeometry(-e,0)}}if(e instanceof t.pointGeometry||Array.isArray(e)){const n=t.pointGeometry.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:t.pointGeometry.convert(e.center||[0,0]),top:t.pointGeometry.convert(e.top||[0,0]),"top-left":t.pointGeometry.convert(e["top-left"]||[0,0]),"top-right":t.pointGeometry.convert(e["top-right"]||[0,0]),bottom:t.pointGeometry.convert(e.bottom||[0,0]),"bottom-left":t.pointGeometry.convert(e["bottom-left"]||[0,0]),"bottom-right":t.pointGeometry.convert(e["bottom-right"]||[0,0]),left:t.pointGeometry.convert(e.left||[0,0]),right:t.pointGeometry.convert(e.right||[0,0])}}return bi(new t.pointGeometry(0,0))}const xi={supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends Jr{constructor(e){var n;if(t.PerformanceUtils.mark(t.PerformanceMarkers.create),null!=(e=t.extend({},ii,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new rr(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._interactive=e.interactive,this._cooperativeGestures=e.cooperativeGestures,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new ni,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},ri,e.locale),this._clickTolerance=e.clickTolerance,this._pixelRatio=null!==(n=e.pixelRatio)&&void 0!==n?n:devicePixelRatio,this._requestManager=new a(e.transformRequest),"string"==typeof e.container){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),"undefined"!=typeof window&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Kr(this,e),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=e.hash&&new ir("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new ti({customAttribution:e.customAttribution})),e.maplibreLogo&&this.addControl(new ei,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.Event(`${e.dataType}data`,e))})),this.on("dataloading",(e=>{this.fire(new t.Event(`${e.dataType}dataloading`,e))})),this.on("dataabort",(e=>{this.fire(new t.Event("sourcedataabort",e))}))}_getMapId(){return this._mapId}addControl(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=e.onAdd(this);this._controls.push(e);const i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}calculateCameraOptionsFromTo(t,e,n,r){return null==r&&this.style.terrain&&(r=this.transform.getElevation(n,this.style.terrain)),super.calculateCameraOptionsFromTo(t,e,n,r)}resize(e){const n=this._containerDimensions(),r=n[0],i=n[1];this._resizeCanvas(r,i,this.getPixelRatio()),this.transform.resize(r,i),this.painter.resize(r,i,this.getPixelRatio());const o=!this._moving;return o&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),o&&this.fire(new t.Event("moveend",e)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(t){const[e,n]=this._containerDimensions();this._pixelRatio=t,this._resizeCanvas(e,n,t),this.painter.resize(e,n,t)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?60:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this._update()}project(e){return this.transform.locationPoint(t.LngLat.convert(e),this.style&&this.style.terrain)}unproject(e){return this.transform.pointLocation(t.pointGeometry.convert(e),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(t,e,n){if("mouseenter"===t||"mouseover"===t){let r=!1;const i=i=>{const o=this.getLayer(e)?this.queryRenderedFeatures(i.point,{layers:[e]}):[];o.length?r||(r=!0,n.call(this,new pr(t,this,i.originalEvent,{features:o}))):r=!1};return{layer:e,listener:n,delegates:{mousemove:i,mouseout:()=>{r=!1}}}}if("mouseleave"===t||"mouseout"===t){let r=!1;const i=i=>{(this.getLayer(e)?this.queryRenderedFeatures(i.point,{layers:[e]}):[]).length?r=!0:r&&(r=!1,n.call(this,new pr(t,this,i.originalEvent)))},o=e=>{r&&(r=!1,n.call(this,new pr(t,this,e.originalEvent)))};return{layer:e,listener:n,delegates:{mousemove:i,mouseout:o}}}{const r=t=>{const r=this.getLayer(e)?this.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,n.call(this,t),delete t.features)};return{layer:e,listener:n,delegates:{[t]:r}}}}on(t,e,n){if(void 0===n)return super.on(t,e);const r=this._createDelegatedListener(t,e,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(r);for(const i in r.delegates)this.on(i,r.delegates[i]);return this}once(t,e,n){if(void 0===n)return super.once(t,e);const r=this._createDelegatedListener(t,e,n);for(const i in r.delegates)this.once(i,r.delegates[i]);return this}off(t,e,n){return void 0===n?super.off(t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&(r=>{const i=this._delegatedListeners[t];for(let t=0;t<i.length;t++){const r=i[t];if(r.layer===e&&r.listener===n){for(const t in r.delegates)this.off(t,r.delegates[t]);return i.splice(t,1),this}}})(),this)}queryRenderedFeatures(e,n){if(!this.style)return[];let r;if(void 0!==n||void 0===e||e instanceof t.pointGeometry||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.pointGeometry||"number"==typeof e[0])r=[t.pointGeometry.convert(e)];else{const n=t.pointGeometry.convert(e[0]),i=t.pointGeometry.convert(e[1]);r=[n,new t.pointGeometry(i.x,n.y),i,new t.pointGeometry(n.x,i.y),n]}return this.style.queryRenderedFeatures(r,n,this.transform)}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}setStyle(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))}setTransformRequest(t){return this._requestManager.setTransformRequest(t),this}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error(`Missing UI string '${t}'`);return e}_updateStyle(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new ee(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ee(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,n){if("string"==typeof e){const r=this._requestManager.transformRequest(e,t.ResourceType.Style);t.getJSON(r,((e,r)=>{e?this.fire(new t.ErrorEvent(e)):r&&this._updateDiff(r,n)}))}else"object"==typeof e&&this._updateDiff(e,n)}_updateDiff(e,n){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(e,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(e){const n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error(`There is no source with ID '${e}'`)))}setTerrain(t){return this.style.setTerrain(t),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const t=this.style&&this.style.sourceCaches;for(const e in t){const n=t[e]._tiles;for(const t in n){const e=n[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}addSourceType(t,e,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)}removeSource(t){return this.style.removeSource(t),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(e,n){let{pixelRatio:r=1,sdf:i=!1,stretchX:o,stretchY:a,content:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._lazyInitEmptyStyle(),n instanceof HTMLImageElement||t.isImageBitmap(n)){const{width:l,height:u,data:c}=t.exported.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:l,height:u},c),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:u,data:c}=n,h=n;this.style.addImage(e,{data:new t.RGBAImage({width:l,height:u},new Uint8Array(c)),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0,userImage:h}),h.onAdd&&h.onAdd(this,e)}}}updateImage(e,n){const r=this.style.getImage(e);if(!r)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=n instanceof HTMLImageElement||t.isImageBitmap(n)?t.exported.getImageData(n):n,{width:o,height:a,data:s}=i;if(void 0===o||void 0===a)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(o!==r.data.width||a!==r.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const l=!(n instanceof HTMLImageElement||t.isImageBitmap(n));r.data.replace(s,l),this.style.updateImage(e,r)}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),n)}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}setLayerZoomRange(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)}setFilter(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(t,e,n),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(t,e,n,r),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(t,e,n,r),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setLight(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]}_setupContainer(){const t=this._container;t.classList.add("maplibregl-map","mapboxgl-map");const e=this._canvasContainer=o.create("div","maplibregl-canvas-container mapboxgl-canvas-container",t);this._interactive&&e.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=o.create("canvas","maplibregl-canvas mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const n=this._containerDimensions();this._resizeCanvas(n[0],n[1],this.getPixelRatio());const r=this._controlContainer=o.create("div","maplibregl-control-container mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{i[t]=o.create("div",`maplibregl-ctrl-${t} mapboxgl-ctrl-${t}`,r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const t=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=o.create("div","maplibregl-cooperative-gesture-screen",t);let e="Control",n="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(n="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map",e="Meta"),this._cooperativeGesturesScreen.innerHTML=`\n            <div class="maplibregl-desktop-message">${n}</div>\n            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>\n        `,document.addEventListener("keydown",(t=>{t.key===e&&(this._metaPress=!0)})),document.addEventListener("keyup",(t=>{t.key===e&&(this._metaPress=!1)})),this._canvasContainer.addEventListener("wheel",(t=>{this._onCooperativeGesture(t,this._metaPress,1)}),!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(t,e,n){this._canvas.width=n*t,this._canvas.height=n*e,this._canvas.style.width=`${t}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const n=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(this.painter=new Jn(r,this.transform),t.exported$1.testSupport(r)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(t,e,n){return!e&&n<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout((()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")}),100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_render(e){let n,r=0;const i=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,n),r=t.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._removed)return;let o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,n=t.exported.now();this.style.zoomHistory.update(e,n);const r=new t.EvaluationParameters(e,{now:n,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),i=r.crossFadingFactor();1===i&&i===this._crossFadingFactor||(o=!0,this._crossFadingFactor=i),this.style.update(r)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,t.PerformanceUtils.mark(t.PerformanceMarkers.load),this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const e=t.exported.now()-r;i.endQueryEXT(i.TIME_ELAPSED_EXT,n),setTimeout((()=>{const r=i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n),this.fire(new t.Event("gpu-timing-frame",{cpuTime:e,gpuTime:r}))}),50)}if(this.listens("gpu-timing-layer")){const e=this.painter.collectGpuTimers();setTimeout((()=>{const n=this.painter.queryGpuTimers(e);this.fire(new t.Event("gpu-timing-layer",{layerTimes:n}))}),50)}const a=this._sourcesDirty||this._styleDirty||this._placementDirty;return a||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||a||(this._fullyLoaded=!0,t.PerformanceUtils.mark(t.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),o.remove(this._canvasContainer),o.remove(this._controlContainer),this._cooperativeGestures&&o.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),t.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=t.exported.frame((e=>{t.PerformanceUtils.frame(e),this._frame=null,this._render(e)})))}_onWindowOnline(){this._update()}_onWindowResize(t){this._trackResize&&this.resize({originalEvent:t})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}_setCacheLimits(e,n){t.setCacheLimits(e,n)}get version(){return"2.4.0"}},NavigationControl:class{constructor(e){this.options=t.extend({},oi,e),this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const t=this._map.getZoom(),e=t===this._map.getMaxZoom(),n=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}_rotateCompassArrow(){const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ai(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){o.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(t,e){const n=o.create("button",t,this._container);return n.type="button",n.addEventListener("click",e),n}_setButtonTitle(t,e){const n=this._map._getUIString(`NavigationControl.${e}`);t.title=n,t.setAttribute("aria-label",n)}},GeolocateControl:class extends t.Evented{constructor(e){super(),this.options=t.extend({},hi,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(t){var e;return this._map=t,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),e=this._setupUI,void 0!==di?e(di):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((t=>{di="denied"!==t.state,e(di)})):(di=!!window.navigator.geolocation,e(di)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),o.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,pi=0,fi=!1}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}_updateCamera(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,i=this._map.getBearing(),o=t.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})}_updateMarker(e){if(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),n=this._map.unproject([1,t]),r=e.distanceTo(n),i=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=`${i}px`,this._circleElement.style.height=`${i}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&fi)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=o.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new ci(this._dotElement),this._circleElement=o.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ci({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))}))}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":pi--,fi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),pi++,pi>1?(t={maximumAge:6e5,timeout:0},fi=!0):(t=this.options.positionOptions,fi=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ti,LogoControl:ei,ScaleControl:class{constructor(e){this.options=t.extend({},mi,e),t.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){gi(this._map,this._container,this.options)}onAdd(t){return this._map=t,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){o.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(t){this.options.unit=t,gi(this._map,this._container,this.options)}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){o.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=o.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(e){this.options=e,t.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=o.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){o.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends t.Evented{constructor(e){super(),this.options=t.extend(Object.create(vi),e),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(document.createTextNode(t))}setHTML(t){const e=document.createDocumentFragment(),n=document.createElement("body");let r;for(n.innerHTML=t;r=n.firstChild,r;)e.appendChild(r);return this.setDOMContent(e)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=o.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(t){this._container&&this._container.classList.add(t)}removeClassName(t){this._container&&this._container.classList.remove(t)}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){if(this._container)return this._container.classList.toggle(t)}_createCloseButton(){this.options.closeButton&&(this._closeButton=o.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(t){this._update(t.point)}_onMouseMove(t){this._update(t.point)}_onDrag(t){this._update(t.point)}_update(t){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(this._container||(this._container=o.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((t=>this._container.classList.add(t))),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=si(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!t)return;const e=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);let n=this.options.anchor;const r=bi(this.options.offset);if(!n){const t=this._container.offsetWidth,i=this._container.offsetHeight;let o;o=e.y+r.bottom.y<i?["top"]:e.y>this._map.transform.height-i?["bottom"]:[],e.x<t/2?o.push("left"):e.x>this._map.transform.width-t/2&&o.push("right"),n=0===o.length?"bottom":o.join("-")}const i=e.add(r[n]).round();o.setTransform(this._container,`${li[n]} translate(${i.x}px,${i.y}px)`),ui(this._container,n,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(_i);t&&t.focus()}_onClose(){this.remove()}},Marker:ci,Style:ee,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.pointGeometry,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,AJAXError:t.AJAXError,config:t.config,CanvasSource:P,GeoJSONSource:T,ImageSource:k,RasterDEMTileSource:C,RasterTileSource:E,VectorTileSource:w,VideoSource:A,prewarm:function(){Y().acquire(U)},clearPrewarmedResources:function(){const t=G;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(U),G=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return V.workerCount},set workerCount(t){V.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){t.clearTileCache(e)},workerUrl:"",addProtocol(e,n){t.config.REGISTERED_PROTOCOLS[e]=n},removeProtocol(e){delete t.config.REGISTERED_PROTOCOLS[e]}};return Qr.extend(xi,{isSafari:t.isSafari,getPerformanceMetrics:t.PerformanceUtils.getPerformanceMetrics}),xi})),n}()}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};t=t||[null,e({}),e([]),e(e)];for(var s=2&i&&r;"object"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((t=>a[t]=()=>r[t]));return a.default=()=>r,n.d(o,a),o}})(),n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,r)=>(n.f[r](t,e),e)),[])),n.u=t=>"static/js/"+t+".7be0dc1c.chunk.js",n.miniCssF=t=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="trip-planner-app:";n.l=(r,i,o,a)=>{if(t[r])t[r].push(i);else{var s,l;if(void 0!==o)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==e+o){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",e+o),s.src=r),t[r]=[i];var d=(e,n)=>{s.onerror=s.onload=null,clearTimeout(p);var i=t[r];if(delete t[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((t=>t(n))),e)return e(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n.p="/Trip-Planner/",(()=>{var t={179:0};n.f.j=(e,r)=>{var i=n.o(t,e)?t[e]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=t[e]=[n,r]));r.push(i[2]=o);var a=n.p+n.u(e),s=new Error;n.l(a,(r=>{if(n.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+e,e)}};var e=(e,r)=>{var i,o,[a,s,l]=r,u=0;if(a.some((e=>0!==t[e]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(e&&e(r);u<a.length;u++)o=a[u],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0},r=globalThis.webpackChunktrip_planner_app=globalThis.webpackChunktrip_planner_app||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),(()=>{"use strict";var t=n(2791),e=n.t(t,2),r=n(1250);var i=function(){function t(t){var e=this;this._insertTag=function(t){var n;n=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,n),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{n.insertRule(t,n.cssRules.length)}catch(r){0}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}(),o=Math.abs,a=String.fromCharCode,s=Object.assign;function l(t){return t.trim()}function u(t,e,n){return t.replace(e,n)}function c(t,e){return t.indexOf(e)}function h(t,e){return 0|t.charCodeAt(e)}function d(t,e,n){return t.slice(e,n)}function p(t){return t.length}function f(t){return t.length}function m(t,e){return e.push(t),t}var g=1,y=1,v=0,_=0,b=0,x="";function w(t,e,n,r,i,o,a){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:g,column:y,length:a,return:""}}function E(t,e){return s(w("",null,null,"",null,null,0),t,{length:-t.length},e)}function S(){return b=_>0?h(x,--_):0,y--,10===b&&(y=1,g--),b}function C(){return b=_<v?h(x,_++):0,y++,10===b&&(y=1,g++),b}function T(){return h(x,_)}function I(){return _}function k(t,e){return d(x,t,e)}function A(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function P(t){return g=y=1,v=p(x=t),_=0,[]}function D(t){return x="",t}function M(t){return l(k(_-1,N(91===t?t+2:40===t?t+1:t)))}function O(t){for(;(b=T())&&b<33;)C();return A(t)>2||A(b)>3?"":" "}function R(t,e){for(;--e&&C()&&!(b<48||b>102||b>57&&b<65||b>70&&b<97););return k(t,I()+(e<6&&32==T()&&32==C()))}function N(t){for(;C();)switch(b){case t:return _;case 34:case 39:34!==t&&39!==t&&N(b);break;case 40:41===t&&N(t);break;case 92:C()}return _}function L(t,e){for(;C()&&t+b!==57&&(t+b!==84||47!==T()););return"/*"+k(e,_-1)+"*"+a(47===t?t:C())}function F(t){for(;!A(T());)C();return k(t,_)}var z="-ms-",B="-moz-",j="-webkit-",U="comm",V="rule",q="decl",G="@import",Y="@keyframes";function $(t,e){for(var n="",r=f(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function W(t,e,n,r){switch(t.type){case G:case q:return t.return=t.return||t.value;case U:return"";case Y:return t.return=t.value+"{"+$(t.children,r)+"}";case V:t.value=t.props.join(",")}return p(n=$(t.children,r))?t.return=t.value+"{"+n+"}":""}function H(t){return D(X("",null,null,null,[""],t=P(t),0,[0],t))}function X(t,e,n,r,i,o,s,l,d){for(var f=0,g=0,y=s,v=0,_=0,b=0,x=1,w=1,E=1,k=0,A="",P=i,D=o,N=r,z=A;w;)switch(b=k,k=C()){case 40:if(108!=b&&58==h(z,y-1)){-1!=c(z+=u(M(k),"&","&\f"),"&\f")&&(E=-1);break}case 34:case 39:case 91:z+=M(k);break;case 9:case 10:case 13:case 32:z+=O(b);break;case 92:z+=R(I()-1,7);continue;case 47:switch(T()){case 42:case 47:m(K(L(C(),I()),e,n),d);break;default:z+="/"}break;case 123*x:l[f++]=p(z)*E;case 125*x:case 59:case 0:switch(k){case 0:case 125:w=0;case 59+g:_>0&&p(z)-y&&m(_>32?Q(z+";",r,n,y-1):Q(u(z," ","")+";",r,n,y-2),d);break;case 59:z+=";";default:if(m(N=Z(z,e,n,f,g,i,l,A,P=[],D=[],y),o),123===k)if(0===g)X(z,e,N,N,P,o,y,l,D);else switch(99===v&&110===h(z,3)?100:v){case 100:case 109:case 115:X(t,N,N,r&&m(Z(t,N,N,0,0,i,l,A,i,P=[],y),D),i,D,y,l,r?P:D);break;default:X(z,N,N,N,[""],D,0,l,D)}}f=g=_=0,x=E=1,A=z="",y=s;break;case 58:y=1+p(z),_=b;default:if(x<1)if(123==k)--x;else if(125==k&&0==x++&&125==S())continue;switch(z+=a(k),k*x){case 38:E=g>0?1:(z+="\f",-1);break;case 44:l[f++]=(p(z)-1)*E,E=1;break;case 64:45===T()&&(z+=M(C())),v=T(),g=y=p(A=z+=F(I())),k++;break;case 45:45===b&&2==p(z)&&(x=0)}}return o}function Z(t,e,n,r,i,a,s,c,h,p,m){for(var g=i-1,y=0===i?a:[""],v=f(y),_=0,b=0,x=0;_<r;++_)for(var E=0,S=d(t,g+1,g=o(b=s[_])),C=t;E<v;++E)(C=l(b>0?y[E]+" "+S:u(S,/&\f/g,y[E])))&&(h[x++]=C);return w(t,e,n,0===i?V:c,h,p,m)}function K(t,e,n){return w(t,e,n,U,a(b),d(t,2,-2),0)}function Q(t,e,n,r){return w(t,e,n,q,d(t,0,r),d(t,r+1,-1),r)}var J=function(t,e,n){for(var r=0,i=0;r=i,i=T(),38===r&&12===i&&(e[n]=1),!A(i);)C();return k(t,_)},tt=function(t,e){return D(function(t,e){var n=-1,r=44;do{switch(A(r)){case 0:38===r&&12===T()&&(e[n]=1),t[n]+=J(_-1,e,n);break;case 2:t[n]+=M(r);break;case 4:if(44===r){t[++n]=58===T()?"&\f":"",e[n]=t[n].length;break}default:t[n]+=a(r)}}while(r=C());return t}(P(t),e))},et=new WeakMap,nt=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,n=t.parent,r=t.column===n.column&&t.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||et.get(n))&&!r){et.set(t,!0);for(var i=[],o=tt(e,i),a=n.props,s=0,l=0;s<o.length;s++)for(var u=0;u<a.length;u++,l++)t.props[l]=i[s]?o[s].replace(/&\f/g,a[u]):a[u]+" "+o[s]}}},rt=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}};function it(t,e){switch(function(t,e){return 45^h(t,0)?(((e<<2^h(t,0))<<2^h(t,1))<<2^h(t,2))<<2^h(t,3):0}(t,e)){case 5103:return j+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return j+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return j+t+B+t+z+t+t;case 6828:case 4268:return j+t+z+t+t;case 6165:return j+t+z+"flex-"+t+t;case 5187:return j+t+u(t,/(\w+).+(:[^]+)/,j+"box-$1$2"+z+"flex-$1$2")+t;case 5443:return j+t+z+"flex-item-"+u(t,/flex-|-self/,"")+t;case 4675:return j+t+z+"flex-line-pack"+u(t,/align-content|flex-|-self/,"")+t;case 5548:return j+t+z+u(t,"shrink","negative")+t;case 5292:return j+t+z+u(t,"basis","preferred-size")+t;case 6060:return j+"box-"+u(t,"-grow","")+j+t+z+u(t,"grow","positive")+t;case 4554:return j+u(t,/([^-])(transform)/g,"$1"+j+"$2")+t;case 6187:return u(u(u(t,/(zoom-|grab)/,j+"$1"),/(image-set)/,j+"$1"),t,"")+t;case 5495:case 3959:return u(t,/(image-set\([^]*)/,j+"$1$`$1");case 4968:return u(u(t,/(.+:)(flex-)?(.*)/,j+"box-pack:$3"+z+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+j+t+t;case 4095:case 3583:case 4068:case 2532:return u(t,/(.+)-inline(.+)/,j+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(p(t)-1-e>6)switch(h(t,e+1)){case 109:if(45!==h(t,e+4))break;case 102:return u(t,/(.+:)(.+)-([^]+)/,"$1"+j+"$2-$3$1"+B+(108==h(t,e+3)?"$3":"$2-$3"))+t;case 115:return~c(t,"stretch")?it(u(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==h(t,e+1))break;case 6444:switch(h(t,p(t)-3-(~c(t,"!important")&&10))){case 107:return u(t,":",":"+j)+t;case 101:return u(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+j+(45===h(t,14)?"inline-":"")+"box$3$1"+j+"$2$3$1"+z+"$2box$3")+t}break;case 5936:switch(h(t,e+11)){case 114:return j+t+z+u(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return j+t+z+u(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return j+t+z+u(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return j+t+z+t+t}return t}var ot=[function(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case q:t.return=it(t.value,t.length);break;case Y:return $([E(t,{value:u(t.value,"@","@"+j)})],r);case V:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=e.exec(t))?t[0]:t}(e,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return $([E(t,{props:[u(e,/:(read-\w+)/,":"+B+"$1")]})],r);case"::placeholder":return $([E(t,{props:[u(e,/:(plac\w+)/,":"+j+"input-$1")]}),E(t,{props:[u(e,/:(plac\w+)/,":"+B+"$1")]}),E(t,{props:[u(e,/:(plac\w+)/,z+"input-$1")]})],r)}return""}))}}];const at=function(t){var e=t.key;if("css"===e){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var r=t.stylisPlugins||ot;var o,a,s={},l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),n=1;n<e.length;n++)s[e[n]]=!0;l.push(t)}));var u,c,h=[W,(c=function(t){u.insert(t)},function(t){t.root||(t=t.return)&&c(t)})],d=function(t){var e=f(t);return function(n,r,i,o){for(var a="",s=0;s<e;s++)a+=t[s](n,r,i,o)||"";return a}}([nt,rt].concat(r,h));a=function(t,e,n,r){u=n,function(t){$(H(t),d)}(t?t+"{"+e.styles+"}":e.styles),r&&(p.inserted[e.name]=!0)};var p={key:e,sheet:new i({key:e,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:a};return p.sheet.hydrate(l),p};function st(){return st=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},st.apply(this,arguments)}const lt=function(t){var e=new WeakMap;return function(n){if(e.has(n))return e.get(n);var r=t(n);return e.set(n,r),r}};const ut=function(t){for(var e,n=0,r=0,i=t.length;i>=4;++r,i-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&t.charCodeAt(r+2))<<16;case 2:n^=(255&t.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)};const ct={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};const ht=function(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}};var dt=/[A-Z]|^ms/g,pt=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ft=function(t){return 45===t.charCodeAt(1)},mt=function(t){return null!=t&&"boolean"!==typeof t},gt=ht((function(t){return ft(t)?t:t.replace(dt,"-$&").toLowerCase()})),yt=function(t,e){switch(t){case"animation":case"animationName":if("string"===typeof e)return e.replace(pt,(function(t,e,n){return _t={name:e,styles:n,next:_t},e}))}return 1===ct[t]||ft(t)||"number"!==typeof e||0===e?e:e+"px"};function vt(t,e,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return _t={name:n.name,styles:n.styles,next:_t},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)_t={name:r.name,styles:r.styles,next:_t},r=r.next;return n.styles+";"}return function(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=vt(t,e,n[i])+";";else for(var o in n){var a=n[o];if("object"!==typeof a)null!=e&&void 0!==e[a]?r+=o+"{"+e[a]+"}":mt(a)&&(r+=gt(o)+":"+yt(o,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=e&&void 0!==e[a[0]]){var s=vt(t,e,a);switch(o){case"animation":case"animationName":r+=gt(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var l=0;l<a.length;l++)mt(a[l])&&(r+=gt(o)+":"+yt(o,a[l])+";")}return r}(t,e,n);case"function":if(void 0!==t){var i=_t,o=n(t);return _t=i,vt(t,e,o)}}if(null==e)return n;var a=e[n];return void 0!==a?a:n}var _t,bt=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var xt=function(t,e,n){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var r=!0,i="";_t=void 0;var o=t[0];null==o||void 0===o.raw?(r=!1,i+=vt(n,e,o)):i+=o[0];for(var a=1;a<t.length;a++)i+=vt(n,e,t[a]),r&&(i+=o[a]);bt.lastIndex=0;for(var s,l="";null!==(s=bt.exec(i));)l+="-"+s[1];return{name:ut(i)+l,styles:i,next:_t}},wt=!!e.useInsertionEffect&&e.useInsertionEffect,Et=wt||function(t){return t()},St=wt||t.useLayoutEffect,Ct=(0,t.createContext)("undefined"!==typeof HTMLElement?at({key:"css"}):null);Ct.Provider;var Tt=function(e){return(0,t.forwardRef)((function(n,r){var i=(0,t.useContext)(Ct);return e(n,i,r)}))},It=(0,t.createContext)({});var kt=lt((function(t){return lt((function(e){return function(t,e){return"function"===typeof e?e(t):st({},t,e)}(t,e)}))})),At=function(e){var n=(0,t.useContext)(It);return e.theme!==n&&(n=kt(n)(e.theme)),(0,t.createElement)(It.Provider,{value:n},e.children)};n(2110);var Pt=function(t,e,n){var r=t.key+"-"+e.name;!1===n&&void 0===t.registered[r]&&(t.registered[r]=e.styles)},Dt=function(t,e,n){Pt(t,e,n);var r=t.key+"-"+e.name;if(void 0===t.inserted[e.name]){var i=e;do{t.insert(e===i?"."+r:"",i,t.sheet,!0);i=i.next}while(void 0!==i)}},Mt=Tt((function(e,n){var r=e.styles,i=xt([r],void 0,(0,t.useContext)(It)),o=(0,t.useRef)();return St((function(){var t=n.key+"-global",e=new n.sheet.constructor({key:t,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),r=!1,a=document.querySelector('style[data-emotion="'+t+" "+i.name+'"]');return n.sheet.tags.length&&(e.before=n.sheet.tags[0]),null!==a&&(r=!0,a.setAttribute("data-emotion",t),e.hydrate([a])),o.current=[e,r],function(){e.flush()}}),[n]),St((function(){var t=o.current,e=t[0];if(t[1])t[1]=!1;else{if(void 0!==i.next&&Dt(n,i.next,!0),e.tags.length){var r=e.tags[e.tags.length-1].nextElementSibling;e.before=r,e.flush()}n.insert("",i,e,!1)}}),[n,i.name]),null}));function Ot(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return xt(e)}var Rt=n(184),Nt="\n  :root {\n    --chakra-vh: 100vh;\n  }\n\n  @supports (height: -webkit-fill-available) {\n    :root {\n      --chakra-vh: -webkit-fill-available;\n    }\n  }\n\n  @supports (height: -moz-fill-available) {\n    :root {\n      --chakra-vh: -moz-fill-available;\n    }\n  }\n\n  @supports (height: 100dvh) {\n    :root {\n      --chakra-vh: 100dvh;\n    }\n  }\n",Lt=()=>(0,Rt.jsx)(Mt,{styles:Nt}),Ft=()=>(0,Rt.jsx)(Mt,{styles:`\n      html {\n        line-height: 1.5;\n        -webkit-text-size-adjust: 100%;\n        font-family: system-ui, sans-serif;\n        -webkit-font-smoothing: antialiased;\n        text-rendering: optimizeLegibility;\n        -moz-osx-font-smoothing: grayscale;\n        touch-action: manipulation;\n      }\n\n      body {\n        position: relative;\n        min-height: 100%;\n        font-feature-settings: 'kern';\n      }\n\n      *,\n      *::before,\n      *::after {\n        border-width: 0;\n        border-style: solid;\n        box-sizing: border-box;\n      }\n\n      main {\n        display: block;\n      }\n\n      hr {\n        border-top-width: 1px;\n        box-sizing: content-box;\n        height: 0;\n        overflow: visible;\n      }\n\n      pre,\n      code,\n      kbd,\n      samp {\n        font-family: SFMono-Regular,  Menlo, Monaco, Consolas, monospace;\n        font-size: 1em;\n      }\n\n      a {\n        background-color: transparent;\n        color: inherit;\n        text-decoration: inherit;\n      }\n\n      abbr[title] {\n        border-bottom: none;\n        text-decoration: underline;\n        -webkit-text-decoration: underline dotted;\n        text-decoration: underline dotted;\n      }\n\n      b,\n      strong {\n        font-weight: bold;\n      }\n\n      small {\n        font-size: 80%;\n      }\n\n      sub,\n      sup {\n        font-size: 75%;\n        line-height: 0;\n        position: relative;\n        vertical-align: baseline;\n      }\n\n      sub {\n        bottom: -0.25em;\n      }\n\n      sup {\n        top: -0.5em;\n      }\n\n      img {\n        border-style: none;\n      }\n\n      button,\n      input,\n      optgroup,\n      select,\n      textarea {\n        font-family: inherit;\n        font-size: 100%;\n        line-height: 1.15;\n        margin: 0;\n      }\n\n      button,\n      input {\n        overflow: visible;\n      }\n\n      button,\n      select {\n        text-transform: none;\n      }\n\n      button::-moz-focus-inner,\n      [type="button"]::-moz-focus-inner,\n      [type="reset"]::-moz-focus-inner,\n      [type="submit"]::-moz-focus-inner {\n        border-style: none;\n        padding: 0;\n      }\n\n      fieldset {\n        padding: 0.35em 0.75em 0.625em;\n      }\n\n      legend {\n        box-sizing: border-box;\n        color: inherit;\n        display: table;\n        max-width: 100%;\n        padding: 0;\n        white-space: normal;\n      }\n\n      progress {\n        vertical-align: baseline;\n      }\n\n      textarea {\n        overflow: auto;\n      }\n\n      [type="checkbox"],\n      [type="radio"] {\n        box-sizing: border-box;\n        padding: 0;\n      }\n\n      [type="number"]::-webkit-inner-spin-button,\n      [type="number"]::-webkit-outer-spin-button {\n        -webkit-appearance: none !important;\n      }\n\n      input[type="number"] {\n        -moz-appearance: textfield;\n      }\n\n      [type="search"] {\n        -webkit-appearance: textfield;\n        outline-offset: -2px;\n      }\n\n      [type="search"]::-webkit-search-decoration {\n        -webkit-appearance: none !important;\n      }\n\n      ::-webkit-file-upload-button {\n        -webkit-appearance: button;\n        font: inherit;\n      }\n\n      details {\n        display: block;\n      }\n\n      summary {\n        display: list-item;\n      }\n\n      template {\n        display: none;\n      }\n\n      [hidden] {\n        display: none !important;\n      }\n\n      body,\n      blockquote,\n      dl,\n      dd,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6,\n      hr,\n      figure,\n      p,\n      pre {\n        margin: 0;\n      }\n\n      button {\n        background: transparent;\n        padding: 0;\n      }\n\n      fieldset {\n        margin: 0;\n        padding: 0;\n      }\n\n      ol,\n      ul {\n        margin: 0;\n        padding: 0;\n      }\n\n      textarea {\n        resize: vertical;\n      }\n\n      button,\n      [role="button"] {\n        cursor: pointer;\n      }\n\n      button::-moz-focus-inner {\n        border: 0 !important;\n      }\n\n      table {\n        border-collapse: collapse;\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        font-size: inherit;\n        font-weight: inherit;\n      }\n\n      button,\n      input,\n      optgroup,\n      select,\n      textarea {\n        padding: 0;\n        line-height: inherit;\n        color: inherit;\n      }\n\n      img,\n      svg,\n      video,\n      canvas,\n      audio,\n      iframe,\n      embed,\n      object {\n        display: block;\n      }\n\n      img,\n      video {\n        max-width: 100%;\n        height: auto;\n      }\n\n      [data-js-focus-visible] :focus:not([data-focus-visible-added]):not([data-focus-visible-disabled]) {\n        outline: none;\n        box-shadow: none;\n      }\n\n      select::-ms-expand {\n        display: none;\n      }\n\n      ${Nt}\n    `});function zt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{name:n,strict:r=!0,hookName:i="useContext",providerName:o="Provider",errorMessage:a}=e,s=(0,t.createContext)(void 0);return s.displayName=n,[s.Provider,function e(){var n;const l=(0,t.useContext)(s);if(!l&&r){const t=new Error(null!=a?a:`${i} returned \`undefined\`. Seems you forgot to wrap component within ${o}`);throw t.name="ContextError",null==(n=Error.captureStackTrace)||n.call(Error,t,e),t}return l},s]}var[Bt,jt]=zt({strict:!1,name:"PortalManagerContext"});function Ut(t){const{children:e,zIndex:n}=t;return(0,Rt.jsx)(Bt,{value:{zIndex:n},children:e})}Ut.displayName="PortalManager";var Vt=(0,t.createContext)({});function qt(){const e=(0,t.useContext)(Vt);if(void 0===e)throw new Error("useColorMode must be used within a ColorModeProvider");return e}Vt.displayName="ColorModeContext";var Gt=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(Boolean).join(" ")};function Yt(t){const e=typeof t;return null!=t&&("object"===e||"function"===e)&&!Array.isArray(t)}function $t(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Wt(t)?t(...n):t}var Wt=t=>"function"===typeof t,Ht=t=>t?"":void 0;function Xt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){e.some((e=>(null==e||e(t),null==t?void 0:t.defaultPrevented)))}}var Zt=n(6198),Kt=t=>"string"===typeof t?t.replace(/!(important)?$/,"").trim():t,Qt=(t,e)=>n=>{const r=String(e),i=(t=>/!(important)?$/.test(t))(r),o=Kt(r),a=t?`${t}.${o}`:o;let s=Yt(n.__cssMap)&&a in n.__cssMap?n.__cssMap[a].varRef:e;return s=Kt(s),i?`${s} !important`:s};function Jt(t){const{scale:e,transform:n,compose:r}=t;return(t,i)=>{var o;const a=Qt(e,t)(i);let s=null!=(o=null==n?void 0:n(a,i))?o:a;return r&&(s=r(s,i)),s}}var te=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return t=>e.reduce(((t,e)=>e(t)),t)};function ee(t,e){return n=>{const r={property:n,scale:t};return r.transform=Jt({scale:t,transform:e}),r}}var ne=t=>{let{rtl:e,ltr:n}=t;return t=>"rtl"===t.direction?e:n};var re=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];var ie={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},oe={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};var ae={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},se={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},le=new Set(Object.values(se)),ue=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),ce=t=>t.trim();var he=t=>"string"===typeof t&&t.includes("(")&&t.includes(")");var de=t=>e=>`${t}(${e})`,pe={filter:t=>"auto"!==t?t:ie,backdropFilter:t=>"auto"!==t?t:oe,ring:t=>function(t){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":t,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}(pe.px(t)),bgClip:t=>"text"===t?{color:"transparent",backgroundClip:"text"}:{backgroundClip:t},transform:t=>"auto"===t?["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...re].join(" "):"auto-gpu"===t?["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...re].join(" "):t,vh:t=>"$100vh"===t?"var(--chakra-vh)":t,px(t){if(null==t)return t;const{unitless:e}=(t=>{const e=parseFloat(t.toString()),n=t.toString().replace(String(e),"");return{unitless:!n,value:e,unit:n}})(t);return e||"number"===typeof t?`${t}px`:t},fraction:t=>"number"!==typeof t||t>1?t:100*t+"%",float:(t,e)=>"rtl"===e.direction?{left:"right",right:"left"}[t]:t,degree(t){if(function(t){return/^var\(--.+\)$/.test(t)}(t)||null==t)return t;const e="string"===typeof t&&!t.endsWith("deg");return"number"===typeof t||e?`${t}deg`:t},gradient:(t,e)=>function(t,e){if(null==t||ue.has(t))return t;const n=/(^[a-z-A-Z]+)\((.*)\)/g.exec(t),r=null==n?void 0:n[1],i=null==n?void 0:n[2];if(!r||!i)return t;const o=r.includes("-gradient")?r:`${r}-gradient`,[a,...s]=i.split(",").map(ce).filter(Boolean);if(0===(null==s?void 0:s.length))return t;const l=a in se?se[a]:a;return s.unshift(l),`${o}(${s.map((t=>{if(le.has(t))return t;const n=t.indexOf(" "),[r,i]=-1!==n?[t.substr(0,n),t.substr(n+1)]:[t],o=he(i)?i:i&&i.split(" "),a=`colors.${r}`,s=a in e.__cssMap?e.__cssMap[a].varRef:r;return o?[s,...Array.isArray(o)?o:[o]].join(" "):s})).join(", ")})`}(t,null!=e?e:{}),blur:de("blur"),opacity:de("opacity"),brightness:de("brightness"),contrast:de("contrast"),dropShadow:de("drop-shadow"),grayscale:de("grayscale"),hueRotate:de("hue-rotate"),invert:de("invert"),saturate:de("saturate"),sepia:de("sepia"),bgImage(t){if(null==t)return t;return he(t)||ue.has(t)?t:`url(${t})`},outline(t){const e="0"===String(t)||"none"===String(t);return null!==t&&e?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:t}},flexDirection(t){var e;const{space:n,divide:r}=null!=(e=ae[t])?e:{},i={flexDirection:t};return n&&(i[n]=1),r&&(i[r]=1),i}},fe={borderWidths:ee("borderWidths"),borderStyles:ee("borderStyles"),colors:ee("colors"),borders:ee("borders"),radii:ee("radii",pe.px),space:ee("space",te(pe.vh,pe.px)),spaceT:ee("space",te(pe.vh,pe.px)),degreeT:t=>({property:t,transform:pe.degree}),prop:(t,e,n)=>({property:t,scale:e,...e&&{transform:Jt({scale:e,transform:n})}}),propT:(t,e)=>({property:t,transform:e}),sizes:ee("sizes",te(pe.vh,pe.px)),sizesT:ee("sizes",te(pe.vh,pe.fraction)),shadows:ee("shadows"),logical:function(t){const{property:e,scale:n,transform:r}=t;return{scale:n,property:ne(e),transform:n?Jt({scale:n,compose:r}):r}},blur:ee("blur",pe.blur)},me={background:fe.colors("background"),backgroundColor:fe.colors("backgroundColor"),backgroundImage:fe.propT("backgroundImage",pe.bgImage),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:pe.bgClip},bgSize:fe.prop("backgroundSize"),bgPosition:fe.prop("backgroundPosition"),bg:fe.colors("background"),bgColor:fe.colors("backgroundColor"),bgPos:fe.prop("backgroundPosition"),bgRepeat:fe.prop("backgroundRepeat"),bgAttachment:fe.prop("backgroundAttachment"),bgGradient:fe.propT("backgroundImage",pe.gradient),bgClip:{transform:pe.bgClip}};Object.assign(me,{bgImage:me.backgroundImage,bgImg:me.backgroundImage});var ge={border:fe.borders("border"),borderWidth:fe.borderWidths("borderWidth"),borderStyle:fe.borderStyles("borderStyle"),borderColor:fe.colors("borderColor"),borderRadius:fe.radii("borderRadius"),borderTop:fe.borders("borderTop"),borderBlockStart:fe.borders("borderBlockStart"),borderTopLeftRadius:fe.radii("borderTopLeftRadius"),borderStartStartRadius:fe.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:fe.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:fe.radii("borderTopRightRadius"),borderStartEndRadius:fe.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:fe.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:fe.borders("borderRight"),borderInlineEnd:fe.borders("borderInlineEnd"),borderBottom:fe.borders("borderBottom"),borderBlockEnd:fe.borders("borderBlockEnd"),borderBottomLeftRadius:fe.radii("borderBottomLeftRadius"),borderBottomRightRadius:fe.radii("borderBottomRightRadius"),borderLeft:fe.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:fe.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:fe.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:fe.borders(["borderLeft","borderRight"]),borderInline:fe.borders("borderInline"),borderY:fe.borders(["borderTop","borderBottom"]),borderBlock:fe.borders("borderBlock"),borderTopWidth:fe.borderWidths("borderTopWidth"),borderBlockStartWidth:fe.borderWidths("borderBlockStartWidth"),borderTopColor:fe.colors("borderTopColor"),borderBlockStartColor:fe.colors("borderBlockStartColor"),borderTopStyle:fe.borderStyles("borderTopStyle"),borderBlockStartStyle:fe.borderStyles("borderBlockStartStyle"),borderBottomWidth:fe.borderWidths("borderBottomWidth"),borderBlockEndWidth:fe.borderWidths("borderBlockEndWidth"),borderBottomColor:fe.colors("borderBottomColor"),borderBlockEndColor:fe.colors("borderBlockEndColor"),borderBottomStyle:fe.borderStyles("borderBottomStyle"),borderBlockEndStyle:fe.borderStyles("borderBlockEndStyle"),borderLeftWidth:fe.borderWidths("borderLeftWidth"),borderInlineStartWidth:fe.borderWidths("borderInlineStartWidth"),borderLeftColor:fe.colors("borderLeftColor"),borderInlineStartColor:fe.colors("borderInlineStartColor"),borderLeftStyle:fe.borderStyles("borderLeftStyle"),borderInlineStartStyle:fe.borderStyles("borderInlineStartStyle"),borderRightWidth:fe.borderWidths("borderRightWidth"),borderInlineEndWidth:fe.borderWidths("borderInlineEndWidth"),borderRightColor:fe.colors("borderRightColor"),borderInlineEndColor:fe.colors("borderInlineEndColor"),borderRightStyle:fe.borderStyles("borderRightStyle"),borderInlineEndStyle:fe.borderStyles("borderInlineEndStyle"),borderTopRadius:fe.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:fe.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:fe.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:fe.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(ge,{rounded:ge.borderRadius,roundedTop:ge.borderTopRadius,roundedTopLeft:ge.borderTopLeftRadius,roundedTopRight:ge.borderTopRightRadius,roundedTopStart:ge.borderStartStartRadius,roundedTopEnd:ge.borderStartEndRadius,roundedBottom:ge.borderBottomRadius,roundedBottomLeft:ge.borderBottomLeftRadius,roundedBottomRight:ge.borderBottomRightRadius,roundedBottomStart:ge.borderEndStartRadius,roundedBottomEnd:ge.borderEndEndRadius,roundedLeft:ge.borderLeftRadius,roundedRight:ge.borderRightRadius,roundedStart:ge.borderInlineStartRadius,roundedEnd:ge.borderInlineEndRadius,borderStart:ge.borderInlineStart,borderEnd:ge.borderInlineEnd,borderTopStartRadius:ge.borderStartStartRadius,borderTopEndRadius:ge.borderStartEndRadius,borderBottomStartRadius:ge.borderEndStartRadius,borderBottomEndRadius:ge.borderEndEndRadius,borderStartRadius:ge.borderInlineStartRadius,borderEndRadius:ge.borderInlineEndRadius,borderStartWidth:ge.borderInlineStartWidth,borderEndWidth:ge.borderInlineEndWidth,borderStartColor:ge.borderInlineStartColor,borderEndColor:ge.borderInlineEndColor,borderStartStyle:ge.borderInlineStartStyle,borderEndStyle:ge.borderInlineEndStyle});var ye={color:fe.colors("color"),textColor:fe.colors("color"),fill:fe.colors("fill"),stroke:fe.colors("stroke")},ve={boxShadow:fe.shadows("boxShadow"),mixBlendMode:!0,blendMode:fe.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:fe.prop("backgroundBlendMode"),opacity:!0};Object.assign(ve,{shadow:ve.boxShadow});var _e={filter:{transform:pe.filter},blur:fe.blur("--chakra-blur"),brightness:fe.propT("--chakra-brightness",pe.brightness),contrast:fe.propT("--chakra-contrast",pe.contrast),hueRotate:fe.degreeT("--chakra-hue-rotate"),invert:fe.propT("--chakra-invert",pe.invert),saturate:fe.propT("--chakra-saturate",pe.saturate),dropShadow:fe.propT("--chakra-drop-shadow",pe.dropShadow),backdropFilter:{transform:pe.backdropFilter},backdropBlur:fe.blur("--chakra-backdrop-blur"),backdropBrightness:fe.propT("--chakra-backdrop-brightness",pe.brightness),backdropContrast:fe.propT("--chakra-backdrop-contrast",pe.contrast),backdropHueRotate:fe.degreeT("--chakra-backdrop-hue-rotate"),backdropInvert:fe.propT("--chakra-backdrop-invert",pe.invert),backdropSaturate:fe.propT("--chakra-backdrop-saturate",pe.saturate)},be={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:pe.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:fe.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:fe.space("gap"),rowGap:fe.space("rowGap"),columnGap:fe.space("columnGap")};Object.assign(be,{flexDir:be.flexDirection});var xe={gridGap:fe.space("gridGap"),gridColumnGap:fe.space("gridColumnGap"),gridRowGap:fe.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},we={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:pe.outline},outlineOffset:!0,outlineColor:fe.colors("outlineColor")},Ee={width:fe.sizesT("width"),inlineSize:fe.sizesT("inlineSize"),height:fe.sizes("height"),blockSize:fe.sizes("blockSize"),boxSize:fe.sizes(["width","height"]),minWidth:fe.sizes("minWidth"),minInlineSize:fe.sizes("minInlineSize"),minHeight:fe.sizes("minHeight"),minBlockSize:fe.sizes("minBlockSize"),maxWidth:fe.sizes("maxWidth"),maxInlineSize:fe.sizes("maxInlineSize"),maxHeight:fe.sizes("maxHeight"),maxBlockSize:fe.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,hideFrom:{scale:"breakpoints",transform:(t,e)=>{var n,r,i;return{[null!=(i=null==(r=null==(n=e.__breakpoints)?void 0:n.get(t))?void 0:r.minWQuery)?i:`@media screen and (min-width: ${t})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(t,e)=>{var n,r,i;return{[null!=(i=null==(r=null==(n=e.__breakpoints)?void 0:n.get(t))?void 0:r.maxWQuery)?i:`@media screen and (max-width: ${t})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:fe.propT("float",pe.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(Ee,{w:Ee.width,h:Ee.height,minW:Ee.minWidth,maxW:Ee.maxWidth,minH:Ee.minHeight,maxH:Ee.maxHeight,overscroll:Ee.overscrollBehavior,overscrollX:Ee.overscrollBehaviorX,overscrollY:Ee.overscrollBehaviorY});var Se={listStyleType:!0,listStylePosition:!0,listStylePos:fe.prop("listStylePosition"),listStyleImage:!0,listStyleImg:fe.prop("listStyleImage")};var Ce=(t=>{const e=new WeakMap;return(n,r,i,o)=>{if("undefined"===typeof n)return t(n,r,i);e.has(n)||e.set(n,new Map);const a=e.get(n);if(a.has(r))return a.get(r);const s=t(n,r,i,o);return a.set(r,s),s}})((function(t,e,n,r){const i="string"===typeof e?e.split("."):[e];for(r=0;r<i.length&&t;r+=1)t=t[i[r]];return void 0===t?n:t})),Te={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},Ie={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},ke=(t,e,n)=>{const r={},i=Ce(t,e,{});for(const o in i){o in n&&null!=n[o]||(r[o]=i[o])}return r},Ae={srOnly:{transform:t=>!0===t?Te:"focusable"===t?Ie:{}},layerStyle:{processResult:!0,transform:(t,e,n)=>ke(e,`layerStyles.${t}`,n)},textStyle:{processResult:!0,transform:(t,e,n)=>ke(e,`textStyles.${t}`,n)},apply:{processResult:!0,transform:(t,e,n)=>ke(e,t,n)}},Pe={position:!0,pos:fe.prop("position"),zIndex:fe.prop("zIndex","zIndices"),inset:fe.spaceT("inset"),insetX:fe.spaceT(["left","right"]),insetInline:fe.spaceT("insetInline"),insetY:fe.spaceT(["top","bottom"]),insetBlock:fe.spaceT("insetBlock"),top:fe.spaceT("top"),insetBlockStart:fe.spaceT("insetBlockStart"),bottom:fe.spaceT("bottom"),insetBlockEnd:fe.spaceT("insetBlockEnd"),left:fe.spaceT("left"),insetInlineStart:fe.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:fe.spaceT("right"),insetInlineEnd:fe.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(Pe,{insetStart:Pe.insetInlineStart,insetEnd:Pe.insetInlineEnd});var De={ring:{transform:pe.ring},ringColor:fe.colors("--chakra-ring-color"),ringOffset:fe.prop("--chakra-ring-offset-width"),ringOffsetColor:fe.colors("--chakra-ring-offset-color"),ringInset:fe.prop("--chakra-ring-inset")},Me={margin:fe.spaceT("margin"),marginTop:fe.spaceT("marginTop"),marginBlockStart:fe.spaceT("marginBlockStart"),marginRight:fe.spaceT("marginRight"),marginInlineEnd:fe.spaceT("marginInlineEnd"),marginBottom:fe.spaceT("marginBottom"),marginBlockEnd:fe.spaceT("marginBlockEnd"),marginLeft:fe.spaceT("marginLeft"),marginInlineStart:fe.spaceT("marginInlineStart"),marginX:fe.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:fe.spaceT("marginInline"),marginY:fe.spaceT(["marginTop","marginBottom"]),marginBlock:fe.spaceT("marginBlock"),padding:fe.space("padding"),paddingTop:fe.space("paddingTop"),paddingBlockStart:fe.space("paddingBlockStart"),paddingRight:fe.space("paddingRight"),paddingBottom:fe.space("paddingBottom"),paddingBlockEnd:fe.space("paddingBlockEnd"),paddingLeft:fe.space("paddingLeft"),paddingInlineStart:fe.space("paddingInlineStart"),paddingInlineEnd:fe.space("paddingInlineEnd"),paddingX:fe.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:fe.space("paddingInline"),paddingY:fe.space(["paddingTop","paddingBottom"]),paddingBlock:fe.space("paddingBlock")};Object.assign(Me,{m:Me.margin,mt:Me.marginTop,mr:Me.marginRight,me:Me.marginInlineEnd,marginEnd:Me.marginInlineEnd,mb:Me.marginBottom,ml:Me.marginLeft,ms:Me.marginInlineStart,marginStart:Me.marginInlineStart,mx:Me.marginX,my:Me.marginY,p:Me.padding,pt:Me.paddingTop,py:Me.paddingY,px:Me.paddingX,pb:Me.paddingBottom,pl:Me.paddingLeft,ps:Me.paddingInlineStart,paddingStart:Me.paddingInlineStart,pr:Me.paddingRight,pe:Me.paddingInlineEnd,paddingEnd:Me.paddingInlineEnd});var Oe={textDecorationColor:fe.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:fe.shadows("textShadow")},Re={clipPath:!0,transform:fe.propT("transform",pe.transform),transformOrigin:!0,translateX:fe.spaceT("--chakra-translate-x"),translateY:fe.spaceT("--chakra-translate-y"),skewX:fe.degreeT("--chakra-skew-x"),skewY:fe.degreeT("--chakra-skew-y"),scaleX:fe.prop("--chakra-scale-x"),scaleY:fe.prop("--chakra-scale-y"),scale:fe.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:fe.degreeT("--chakra-rotate")},Ne={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:fe.prop("transitionDuration","transition.duration"),transitionProperty:fe.prop("transitionProperty","transition.property"),transitionTimingFunction:fe.prop("transitionTimingFunction","transition.easing")},Le={fontFamily:fe.prop("fontFamily","fonts"),fontSize:fe.prop("fontSize","fontSizes",pe.px),fontWeight:fe.prop("fontWeight","fontWeights"),lineHeight:fe.prop("lineHeight","lineHeights"),letterSpacing:fe.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(t){if(!0===t)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},Fe={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:fe.spaceT("scrollMargin"),scrollMarginTop:fe.spaceT("scrollMarginTop"),scrollMarginBottom:fe.spaceT("scrollMarginBottom"),scrollMarginLeft:fe.spaceT("scrollMarginLeft"),scrollMarginRight:fe.spaceT("scrollMarginRight"),scrollMarginX:fe.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:fe.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:fe.spaceT("scrollPadding"),scrollPaddingTop:fe.spaceT("scrollPaddingTop"),scrollPaddingBottom:fe.spaceT("scrollPaddingBottom"),scrollPaddingLeft:fe.spaceT("scrollPaddingLeft"),scrollPaddingRight:fe.spaceT("scrollPaddingRight"),scrollPaddingX:fe.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:fe.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function ze(t){return Yt(t)&&t.reference?t.reference:String(t)}var Be=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.map(ze).join(` ${t} `).replace(/calc/g,"")},je=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return`calc(${Be("+",...e)})`},Ue=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return`calc(${Be("-",...e)})`},Ve=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return`calc(${Be("*",...e)})`},qe=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return`calc(${Be("/",...e)})`},Ge=t=>{const e=ze(t);return null==e||Number.isNaN(parseFloat(e))?Ve(e,-1):String(e).startsWith("-")?String(e).slice(1):`-${e}`},Ye=Object.assign((t=>({add:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ye(je(t,...n))},subtract:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ye(Ue(t,...n))},multiply:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ye(Ve(t,...n))},divide:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ye(qe(t,...n))},negate:()=>Ye(Ge(t)),toString:()=>t.toString()})),{add:je,subtract:Ue,multiply:Ve,divide:qe,negate:Ge});function $e(t){const e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return t.replace(/\s+/g,e)}(t.toString());return function(t){return t.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}(function(t){if(t.includes("\\."))return t;const e=!Number.isInteger(parseFloat(t.toString()));return e?t.replace(".","\\."):t}(e))}function We(t,e){return`var(${t}${e?`, ${e}`:""})`}function He(t){return $e(`--${function(t){return[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t].filter(Boolean).join("-")}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")}`)}function Xe(t,e,n){const r=He(t,n);return{variable:r,reference:We(r,e)}}function Ze(t){const e=null==t?0:t.length;return e?t[e-1]:void 0}function Ke(t){if(null==t)return t;const{unitless:e}=function(t){const e=parseFloat(t.toString()),n=t.toString().replace(String(e),"");return{unitless:!n,value:e,unit:n}}(t);return e||"number"===typeof t?`${t}px`:t}var Qe=(t,e)=>parseInt(t[1],10)>parseInt(e[1],10)?1:-1,Je=t=>Object.fromEntries(Object.entries(t).sort(Qe));function tn(t){const e=Je(t);return Object.assign(Object.values(e),e)}function en(t){var e;if(!t)return t;t=null!=(e=Ke(t))?e:t;return"number"===typeof t?`${t+-.02}`:t.replace(/(\d+\.?\d*)/u,(t=>`${parseFloat(t)+-.02}`))}function nn(t,e){const n=["@media screen"];return t&&n.push("and",`(min-width: ${Ke(t)})`),e&&n.push("and",`(max-width: ${Ke(e)})`),n.join(" ")}function rn(t){var e;if(!t)return null;t.base=null!=(e=t.base)?e:"0px";const n=tn(t),r=Object.entries(t).sort(Qe).map(((t,e,n)=>{let[r,i]=t;var o;let[,a]=null!=(o=n[e+1])?o:[];return a=parseFloat(a)>0?en(a):void 0,{_minW:en(i),breakpoint:r,minW:i,maxW:a,maxWQuery:nn(null,a),minWQuery:nn(i),minMaxQuery:nn(i,a)}})),i=function(t){const e=Object.keys(Je(t));return new Set(e)}(t),o=Array.from(i.values());return{keys:i,normalized:n,isResponsive(t){const e=Object.keys(t);return e.length>0&&e.every((t=>i.has(t)))},asObject:Je(t),asArray:tn(t),details:r,get:t=>r.find((e=>e.breakpoint===t)),media:[null,...n.map((t=>nn(t))).slice(1)],toArrayValue(t){if(!Yt(t))throw new Error("toArrayValue: value must be an object");const e=o.map((e=>{var n;return null!=(n=t[e])?n:null}));for(;null===Ze(e);)e.pop();return e},toObjectValue(t){if(!Array.isArray(t))throw new Error("toObjectValue: value must be an array");return t.reduce(((t,e,n)=>{const r=o[n];return null!=r&&null!=e&&(t[r]=e),t}),{})}}}var on=(t,e)=>`${t}:hover ${e}, ${t}[data-hover] ${e}`,an=(t,e)=>`${t}:focus ${e}, ${t}[data-focus] ${e}`,sn=(t,e)=>`${t}:focus-visible ${e}`,ln=(t,e)=>`${t}:focus-within ${e}`,un=(t,e)=>`${t}:active ${e}, ${t}[data-active] ${e}`,cn=(t,e)=>`${t}:disabled ${e}, ${t}[data-disabled] ${e}`,hn=(t,e)=>`${t}:invalid ${e}, ${t}[data-invalid] ${e}`,dn=(t,e)=>`${t}:checked ${e}, ${t}[data-checked] ${e}`,pn=(t,e)=>`${t}:placeholder-shown ${e}`,fn=t=>gn((e=>t(e,"&")),"[role=group]","[data-group]",".group"),mn=t=>gn((e=>t(e,"~ &")),"[data-peer]",".peer"),gn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.map(t).join(", ")},yn={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:fn(on),_peerHover:mn(on),_groupFocus:fn(an),_peerFocus:mn(an),_groupFocusVisible:fn(sn),_peerFocusVisible:mn(sn),_groupActive:fn(un),_peerActive:mn(un),_groupDisabled:fn(cn),_peerDisabled:mn(cn),_groupInvalid:fn(hn),_peerInvalid:mn(hn),_groupChecked:fn(dn),_peerChecked:mn(dn),_groupFocusWithin:fn(ln),_peerFocusWithin:mn(ln),_peerPlaceholderShown:mn(pn),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]"},vn=Object.keys(yn);function _n(t,e){return Xe(String(t).replace(/\./g,"-"),void 0,e)}var bn=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function xn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;return(Yt(t)||Array.isArray(t))&&e?Object.entries(t).reduce(((t,n)=>{let[r,i]=n;return Yt(i)||Array.isArray(i)?Object.entries(xn(i,e-1)).forEach((e=>{let[n,i]=e;t[`${r}.${n}`]=i})):t[r]=i,t}),{}):t}function wn(t){var e;const n=function(t){const{__cssMap:e,__cssVars:n,__breakpoints:r,...i}=t;return i}(t),r=function(t){return function(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}(t,bn)}(n),i=function(t){return t.semanticTokens}(n),o=function(t){let{tokens:e,semanticTokens:n}=t;var r,i;const o=Object.entries(null!=(r=xn(e))?r:{}).map((t=>{let[e,n]=t;return[e,{isSemantic:!1,value:n}]})),a=Object.entries(null!=(i=xn(n,1))?i:{}).map((t=>{let[e,n]=t;return[e,{isSemantic:!0,value:n}]}));return Object.fromEntries([...o,...a])}({tokens:r,semanticTokens:i}),a=null==(e=n.config)?void 0:e.cssVarPrefix,{cssMap:s,cssVars:l}=function(t,e){let n={};const r={};for(const[i,o]of Object.entries(t)){const{isSemantic:a,value:s}=o,{variable:l,reference:u}=_n(i,null==e?void 0:e.cssVarPrefix);if(!a){if(i.startsWith("space")){const t=i.split("."),[e,...n]=t,o=`${e}.-${n.join(".")}`,a=Ye.negate(s),c=Ye.negate(u);r[o]={value:a,var:l,varRef:c}}n[l]=s,r[i]={value:s,var:l,varRef:u};continue}const c=n=>{const r=[String(i).split(".")[0],n].join(".");if(!t[r])return n;const{reference:o}=_n(r,null==e?void 0:e.cssVarPrefix);return o},h=Yt(s)?s:{default:s};n=Zt(n,Object.entries(h).reduce(((t,e)=>{let[n,r]=e;var i,o;const a=c(r);return"default"===n?(t[l]=a,t):(t[null!=(o=null==(i=yn)?void 0:i[n])?o:n]={[l]:a},t)}),{})),r[i]={value:u,var:l,varRef:u}}return{cssVars:n,cssMap:r}}(o,{cssVarPrefix:a});return Object.assign(n,{__cssVars:{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0",...l},__cssMap:s,__breakpoints:rn(n.breakpoints)}),n}var En=Zt({},me,ge,ye,be,Ee,_e,De,we,xe,Ae,Pe,ve,Me,Fe,Le,Oe,Re,Se,Ne),Sn=Object.assign({},Me,Ee,be,xe,Pe),Cn=(Object.keys(Sn),[...Object.keys(En),...vn]),Tn={...En,...yn},In=t=>t in Tn,kn=t=>e=>{if(!e.__breakpoints)return t;const{isResponsive:n,toArrayValue:r,media:i}=e.__breakpoints,o={};for(const a in t){let s=$t(t[a],e);if(null==s)continue;if(s=Yt(s)&&n(s)?r(s):s,!Array.isArray(s)){o[a]=s;continue}const l=s.slice(0,i.length).length;for(let t=0;t<l;t+=1){const e=null==i?void 0:i[t];e?(o[e]=o[e]||{},null!=s[t]&&(o[e][a]=s[t])):o[a]=s[t]}}return o};var An=(t,e)=>t.startsWith("--")&&"string"===typeof e&&!function(t){return/^var\(--.+\)$/.test(t)}(e),Pn=(t,e)=>{var n,r;if(null==e)return e;const i=e=>{var n,r;return null==(r=null==(n=t.__cssMap)?void 0:n[e])?void 0:r.varRef},o=t=>{var e;return null!=(e=i(t))?e:t},[a,s]=function(t){const e=[];let n="",r=!1;for(let i=0;i<t.length;i++){const o=t[i];"("===o?(r=!0,n+=o):")"===o?(r=!1,n+=o):","!==o||r?n+=o:(e.push(n),n="")}return n=n.trim(),n&&e.push(n),e}(e);return e=null!=(r=null!=(n=i(a))?n:o(s))?r:o(e)};var Dn=t=>e=>{const n=function(t){const{configs:e={},pseudos:n={},theme:r}=t,i=function(t){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a,s,l;const u=$t(t,r),c=kn(u)(r);let h={};for(let d in c){let t=$t(c[d],r);d in n&&(d=n[d]),An(d,t)&&(t=Pn(r,t));let p=e[d];if(!0===p&&(p={property:d}),Yt(t)){h[d]=null!=(a=h[d])?a:{},h[d]=Zt({},h[d],i(t,!0));continue}let f=null!=(l=null==(s=null==p?void 0:p.transform)?void 0:s.call(p,t,r,u))?l:t;f=(null==p?void 0:p.processResult)?i(f,!0):f;const m=$t(null==p?void 0:p.property,r);if(!o&&(null==p?void 0:p.static)){const t=$t(p.static,r);h=Zt({},h,t)}if(m&&Array.isArray(m))for(const e of m)h[e]=f;else m?"&"===m&&Yt(f)?h=Zt({},h,f):h[m]=f:Yt(f)?h=Zt({},h,f):h[d]=f}return h};return i}({theme:e,pseudos:yn,configs:En});return n(t)};function Mn(t){return{definePartsStyle:t=>t,defineMultiStyleConfig:e=>({parts:t,...e})}}function On(t,e){for(let n=e+1;n<t.length;n++)if(null!=t[n])return n;return-1}function Rn(t){const e=t.__breakpoints;return function(t,n,r,i){var o,a;if(!e)return;const s={},l=function(t,e){return Array.isArray(t)?t:Yt(t)?e(t):null!=t?[t]:void 0}(r,e.toArrayValue);if(!l)return s;const u=l.length,c=1===u,h=!!t.parts;for(let d=0;d<u;d++){const r=e.details[d],u=e.details[On(l,d)],p=nn(r.minW,null==u?void 0:u._minW),f=$t(null==(o=t[n])?void 0:o[l[d]],i);f&&(h?null==(a=t.parts)||a.forEach((t=>{Zt(s,{[t]:c?f[t]:{[p]:f[t]}})})):h?s[p]=f:c?Zt(s,f):s[p]=f)}return s}}function Nn(t){return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=Object.assign({},t);for(const r of e)r in n&&delete n[r];return n}(t,["styleConfig","size","variant","colorScheme"])}var Ln=(t=>{const e=new WeakMap;return(n,r,i,o)=>{if("undefined"===typeof n)return t(n,r,i);e.has(n)||e.set(n,new Map);const a=e.get(n);if(a.has(r))return a.get(r);const s=t(n,r,i,o);return a.set(r,s),s}})((function(t,e,n,r){const i="string"===typeof e?e.split("."):[e];for(r=0;r<i.length&&t;r+=1)t=t[i[r]];return void 0===t?n:t}));function Fn(t,e){const n={};return Object.keys(t).forEach((r=>{const i=t[r];e(i,r,t)&&(n[r]=i)})),n}var zn=t=>Fn(t,(t=>null!==t&&void 0!==t));function Bn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return"function"===typeof t?t(...n):t}function jn(e){const{cssVarsRoot:n,theme:r,children:i}=e,o=(0,t.useMemo)((()=>wn(r)),[r]);return(0,Rt.jsxs)(At,{theme:o,children:[(0,Rt.jsx)(Un,{root:n}),i]})}function Un(t){let{root:e=":host, :root"}=t;const n=[e,"[data-theme]"].join(",");return(0,Rt.jsx)(Mt,{styles:t=>({[n]:t.__cssVars})})}var[Vn,qn]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{strict:n=!0,errorMessage:r="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:i}=e,o=(0,t.createContext)(void 0);return o.displayName=i,[o.Provider,function e(){var i;const a=(0,t.useContext)(o);if(!a&&n){const t=new Error(r);throw t.name="ContextError",null==(i=Error.captureStackTrace)||i.call(Error,t,e),t}return a},o]}({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function Gn(){const{colorMode:t}=qt();return(0,Rt.jsx)(Mt,{styles:e=>{const n=Bn(Ln(e,"styles.global"),{theme:e,colorMode:t});if(!n)return;return Dn(n)(e)}})}var Yn={light:"chakra-ui-light",dark:"chakra-ui-dark"};var $n="chakra-ui-color-mode";var Wn,Hn=(Wn=$n,{ssr:!1,type:"localStorage",get(t){if(!(null==globalThis?void 0:globalThis.document))return t;let e;try{e=localStorage.getItem(Wn)||t}catch(n){}return e||t},set(t){try{localStorage.setItem(Wn,t)}catch(e){}}});function Xn(t,e){const n=t.match(new RegExp(`(^| )${e}=([^;]+)`));return null==n?void 0:n[2]}function Zn(t,e){return{ssr:!!e,type:"cookie",get:n=>e?Xn(e,t):(null==globalThis?void 0:globalThis.document)&&Xn(document.cookie,t)||n,set(e){document.cookie=`${t}=${e}; max-age=31536000; path=/`}}}Zn($n);var Kn=Boolean(null==globalThis?void 0:globalThis.document)?t.useLayoutEffect:t.useEffect,Qn=()=>{};function Jn(t,e){return"cookie"===t.type&&t.ssr?t.get(e):e}function tr(e){const{value:n,children:r,options:{useSystemColorMode:i,initialColorMode:o,disableTransitionOnChange:a}={},colorModeManager:s=Hn}=e,l="dark"===o?"dark":"light",[u,c]=(0,t.useState)((()=>Jn(s,l))),[h,d]=(0,t.useState)((()=>Jn(s))),{getSystemTheme:p,setClassName:f,setDataset:m,addListener:g}=(0,t.useMemo)((()=>function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{preventTransition:e=!0}=t,n={setDataset:t=>{const r=e?n.preventTransition():void 0;document.documentElement.dataset.theme=t,document.documentElement.style.colorScheme=t,null==r||r()},setClassName(t){document.body.classList.add(t?Yn.dark:Yn.light),document.body.classList.remove(t?Yn.light:Yn.dark)},query:()=>window.matchMedia("(prefers-color-scheme: dark)"),getSystemTheme(t){var e;return(null!=(e=n.query().matches)?e:"dark"===t)?"dark":"light"},addListener(t){const e=n.query(),r=e=>{t(e.matches?"dark":"light")};return"function"===typeof e.addListener?e.addListener(r):e.addEventListener("change",r),()=>{"function"===typeof e.removeListener?e.removeListener(r):e.removeEventListener("change",r)}},preventTransition(){const t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),requestAnimationFrame((()=>{requestAnimationFrame((()=>{document.head.removeChild(t)}))}))}}};return n}({preventTransition:a})),[a]),y="system"!==o||u?u:h,v=(0,t.useCallback)((t=>{const e="system"===t?p():t;c(e),f("dark"===e),m(e),s.set(e)}),[s,p,f,m]);Kn((()=>{"system"===o&&d(p())}),[]),(0,t.useEffect)((()=>{const t=s.get();v(t||("system"!==o?l:"system"))}),[s,l,o,v]);const _=(0,t.useCallback)((()=>{v("dark"===y?"light":"dark")}),[y,v]);(0,t.useEffect)((()=>{if(i)return g(v)}),[i,g,v]);const b=(0,t.useMemo)((()=>({colorMode:null!=n?n:y,toggleColorMode:n?Qn:_,setColorMode:n?Qn:v,forced:void 0!==n})),[y,_,v,n]);return(0,Rt.jsx)(Vt.Provider,{value:b,children:r})}tr.displayName="ColorModeProvider";var er=(0,t.createContext)({getDocument:()=>document,getWindow:()=>window});function nr(e){const{children:n,environment:r,disabled:i}=e,o=(0,t.useRef)(null),a=(0,t.useMemo)((()=>r||{getDocument:()=>{var t,e;return null!=(e=null==(t=o.current)?void 0:t.ownerDocument)?e:document},getWindow:()=>{var t,e;return null!=(e=null==(t=o.current)?void 0:t.ownerDocument.defaultView)?e:window}}),[r]),s=!i||!r;return(0,Rt.jsxs)(er.Provider,{value:a,children:[n,s&&(0,Rt.jsx)("span",{id:"__chakra_env",hidden:!0,ref:o})]})}er.displayName="EnvironmentContext",nr.displayName="EnvironmentProvider";var rr=t=>{const{children:e,colorModeManager:n,portalZIndex:r,resetCSS:i=!0,theme:o={},environment:a,cssVarsRoot:s,disableEnvironment:l}=t,u=(0,Rt.jsx)(nr,{environment:a,disabled:l,children:e});return(0,Rt.jsx)(jn,{theme:o,cssVarsRoot:s,children:(0,Rt.jsxs)(tr,{colorModeManager:n,options:o.config,children:[i?(0,Rt.jsx)(Ft,{}):(0,Rt.jsx)(Lt,{}),(0,Rt.jsx)(Gn,{}),r?(0,Rt.jsx)(Ut,{zIndex:r,children:u}):u]})})},ir={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},or={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},ar={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},sr={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},lr={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},ur={property:{common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},easing:{"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},duration:{"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"}},cr={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},hr={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},dr={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},pr={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},fr={...pr,max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch",container:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px"}},mr={breakpoints:or,zIndices:ir,radii:sr,blur:cr,colors:ar,...dr,sizes:fr,shadows:lr,space:pr,borders:hr,transition:ur};function gr(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1;function r(e){const n=`chakra-${(["container","root"].includes(null!=e?e:"")?[t]:[t,e]).filter(Boolean).join("__")}`;return{className:n,selector:`.${n}`,toString:()=>e}}return{parts:function(){!function(){if(n)throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?");n=!0}();for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];for(const t of o)e[t]=r(t);return gr(t,e)},toPart:r,extend:function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];for(const t of i)t in e||(e[t]=r(t));return gr(t,e)},selectors:function(){const t=Object.fromEntries(Object.entries(e).map((t=>{let[e,n]=t;return[e,n.selector]})));return t},classnames:function(){const t=Object.fromEntries(Object.entries(e).map((t=>{let[e,n]=t;return[e,n.className]})));return t},get keys(){return Object.keys(e)},__type:{}}}var yr=gr("accordion").parts("root","container","button","panel").extend("icon"),vr=gr("alert").parts("title","description","container").extend("icon","spinner"),_r=gr("avatar").parts("label","badge","container").extend("excessLabel","group"),br=gr("breadcrumb").parts("link","item","container").extend("separator"),xr=(gr("button").parts(),gr("checkbox").parts("control","icon","container").extend("label")),wr=(gr("progress").parts("track","filledTrack").extend("label"),gr("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer")),Er=gr("editable").parts("preview","input","textarea"),Sr=gr("form").parts("container","requiredIndicator","helperText"),Cr=gr("formError").parts("text","icon"),Tr=gr("input").parts("addon","field","element"),Ir=gr("list").parts("container","item","icon"),kr=gr("menu").parts("button","list","item").extend("groupTitle","command","divider"),Ar=gr("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),Pr=gr("numberinput").parts("root","field","stepperGroup","stepper"),Dr=(gr("pininput").parts("field"),gr("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton")),Mr=gr("progress").parts("label","filledTrack","track"),Or=gr("radio").parts("container","control","label"),Rr=gr("select").parts("field","icon"),Nr=gr("slider").parts("container","track","thumb","filledTrack","mark"),Lr=gr("stat").parts("container","label","helpText","number","icon"),Fr=gr("switch").parts("container","track","thumb"),zr=gr("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),Br=gr("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),jr=gr("tag").parts("container","label","closeButton"),Ur=gr("card").parts("container","header","body","footer");function Vr(t){const e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return t.replace(/\s+/g,e)}(t.toString());return e.includes("\\.")?t:function(t){return!Number.isInteger(parseFloat(t.toString()))}(t)?e.replace(".","\\."):t}function qr(t,e){return`var(${Vr(t)}${e?`, ${e}`:""})`}function Gr(t){return`--${function(t){return[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",Vr(t)].filter(Boolean).join("-")}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")}`}function Yr(t,e){const n=Gr(t,null==e?void 0:e.prefix);return{variable:n,reference:qr(n,$r(null==e?void 0:e.fallback))}}function $r(t){return"string"===typeof t?t:null==t?void 0:t.reference}function Wr(t){return Yt(t)&&t.reference?t.reference:String(t)}var Hr=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.map(Wr).join(` ${t} `).replace(/calc/g,"")},Xr=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return`calc(${Hr("+",...e)})`},Zr=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return`calc(${Hr("-",...e)})`},Kr=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return`calc(${Hr("*",...e)})`},Qr=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return`calc(${Hr("/",...e)})`},Jr=t=>{const e=Wr(t);return null==e||Number.isNaN(parseFloat(e))?Kr(e,-1):String(e).startsWith("-")?String(e).slice(1):`-${e}`},ti=Object.assign((t=>({add:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ti(Xr(t,...n))},subtract:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ti(Zr(t,...n))},multiply:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ti(Kr(t,...n))},divide:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ti(Qr(t,...n))},negate:()=>ti(Jr(t)),toString:()=>t.toString()})),{add:Xr,subtract:Zr,multiply:Kr,divide:Qr,negate:Jr}),{defineMultiStyleConfig:ei,definePartsStyle:ni}=Mn(Fr.keys),ri=Yr("switch-track-width"),ii=Yr("switch-track-height"),oi=Yr("switch-track-diff"),ai=ti.subtract(ri,ii),si=Yr("switch-thumb-x"),li=Yr("switch-bg"),ui=t=>{const{colorScheme:e}=t;return{borderRadius:"full",p:"0.5",width:[ri.reference],height:[ii.reference],transitionProperty:"common",transitionDuration:"fast",[li.variable]:"colors.gray.300",_dark:{[li.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[li.variable]:`colors.${e}.500`,_dark:{[li.variable]:`colors.${e}.200`}},bg:li.reference}},ci={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[ii.reference],height:[ii.reference],_checked:{transform:`translateX(${si.reference})`}},hi=ei({baseStyle:ni((t=>({container:{[oi.variable]:ai,[si.variable]:oi.reference,_rtl:{[si.variable]:ti(oi).negate().toString()}},track:ui(t),thumb:ci}))),sizes:{sm:ni({container:{[ri.variable]:"1.375rem",[ii.variable]:"sizes.3"}}),md:ni({container:{[ri.variable]:"1.875rem",[ii.variable]:"sizes.4"}}),lg:ni({container:{[ri.variable]:"2.875rem",[ii.variable]:"sizes.6"}})},defaultProps:{size:"md",colorScheme:"blue"}});function di(t,e){return n=>"dark"===n.colorMode?e:t}function pi(t){const{orientation:e,vertical:n,horizontal:r}=t;return e?"vertical"===e?n:r:{}}var{defineMultiStyleConfig:fi,definePartsStyle:mi}=Mn(zr.keys),gi=mi({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),yi={"&[data-is-numeric=true]":{textAlign:"end"}},vi=mi((t=>{const{colorScheme:e}=t;return{th:{color:di("gray.600","gray.400")(t),borderBottom:"1px",borderColor:di(`${e}.100`,`${e}.700`)(t),...yi},td:{borderBottom:"1px",borderColor:di(`${e}.100`,`${e}.700`)(t),...yi},caption:{color:di("gray.600","gray.100")(t)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}})),_i=mi((t=>{const{colorScheme:e}=t;return{th:{color:di("gray.600","gray.400")(t),borderBottom:"1px",borderColor:di(`${e}.100`,`${e}.700`)(t),...yi},td:{borderBottom:"1px",borderColor:di(`${e}.100`,`${e}.700`)(t),...yi},caption:{color:di("gray.600","gray.100")(t)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:di(`${e}.100`,`${e}.700`)(t)},td:{background:di(`${e}.100`,`${e}.700`)(t)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}})),bi=fi({baseStyle:gi,variants:{simple:vi,striped:_i,unstyled:{}},sizes:{sm:mi({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:mi({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:mi({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}});function xi(t,e,n){return Math.min(Math.max(t,n),e)}class wi extends Error{constructor(t){super(`Failed to parse color: "${t}"`)}}var Ei=wi;function Si(t){if("string"!==typeof t)throw new Ei(t);if("transparent"===t.trim().toLowerCase())return[0,0,0,0];let e=t.trim();e=Mi.test(t)?function(t){const e=t.toLowerCase().trim(),n=Ti[function(t){let e=5381,n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return(e>>>0)%2341}(e)];if(!n)throw new Ei(t);return`#${n}`}(t):t;const n=ki.exec(e);if(n){const t=Array.from(n).slice(1);return[...t.slice(0,3).map((t=>parseInt(Ii(t,2),16))),parseInt(Ii(t[3]||"f",2),16)/255]}const r=Ai.exec(e);if(r){const t=Array.from(r).slice(1);return[...t.slice(0,3).map((t=>parseInt(t,16))),parseInt(t[3]||"ff",16)/255]}const i=Pi.exec(e);if(i){const t=Array.from(i).slice(1);return[...t.slice(0,3).map((t=>parseInt(t,10))),parseFloat(t[3]||"1")]}const o=Di.exec(e);if(o){const[e,n,r,i]=Array.from(o).slice(1).map(parseFloat);if(xi(0,100,n)!==n)throw new Ei(t);if(xi(0,100,r)!==r)throw new Ei(t);return[...Ri(e,n,r),Number.isNaN(i)?1:i]}throw new Ei(t)}const Ci=t=>parseInt(t.replace(/_/g,""),36),Ti="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce(((t,e)=>{const n=Ci(e.substring(0,3)),r=Ci(e.substring(3)).toString(16);let i="";for(let o=0;o<6-r.length;o++)i+="0";return t[n]=`${i}${r}`,t}),{});const Ii=(t,e)=>Array.from(Array(e)).map((()=>t)).join(""),ki=new RegExp(`^#${Ii("([a-f0-9])",3)}([a-f0-9])?$`,"i"),Ai=new RegExp(`^#${Ii("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),Pi=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${Ii(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),Di=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,Mi=/^[a-z]+$/i,Oi=t=>Math.round(255*t),Ri=(t,e,n)=>{let r=n/100;if(0===e)return[r,r,r].map(Oi);const i=(t%360+360)%360/60,o=(1-Math.abs(2*r-1))*(e/100),a=o*(1-Math.abs(i%2-1));let s=0,l=0,u=0;i>=0&&i<1?(s=o,l=a):i>=1&&i<2?(s=a,l=o):i>=2&&i<3?(l=o,u=a):i>=3&&i<4?(l=a,u=o):i>=4&&i<5?(s=a,u=o):i>=5&&i<6&&(s=o,u=a);const c=r-o/2;return[s+c,l+c,u+c].map(Oi)};function Ni(t,e,n,r){return`rgba(${xi(0,255,t).toFixed()}, ${xi(0,255,e).toFixed()}, ${xi(0,255,n).toFixed()}, ${parseFloat(xi(0,1,r).toFixed(3))})`}function Li(t,e){const[n,r,i,o]=Si(t);return Ni(n,r,i,o-e)}var Fi=t=>0===Object.keys(t).length,zi=(t,e,n)=>{const r=function(t,e,n,r,i){for(e=e.split?e.split("."):e,r=0;r<e.length;r++)t=t?t[e[r]]:i;return t===i?n:t}(t,`colors.${e}`,e);try{return function(t){const[e,n,r,i]=Si(t);let o=t=>{const e=xi(0,255,t).toString(16);return 1===e.length?`0${e}`:e};o(e),o(n),o(r),i<1&&o(Math.round(255*i))}(r),r}catch{return null!=n?n:"#000000"}},Bi=t=>e=>{const n=(t=>{const[e,n,r]=Si(t);return(299*e+587*n+114*r)/1e3})(zi(e,t));return n<128?"dark":"light"},ji=(t,e)=>n=>Li(zi(n,t),1-e);function Ui(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1rem",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgba(255, 255, 255, 0.15)";return{backgroundImage:`linear-gradient(\n    45deg,\n    ${e} 25%,\n    transparent 25%,\n    transparent 50%,\n    ${e} 50%,\n    ${e} 75%,\n    transparent 75%,\n    transparent\n  )`,backgroundSize:`${t} ${t}`}}var Vi=()=>`#${Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0")}`;function qi(t){const e=Vi();return!t||Fi(t)?e:t.string&&t.colors?function(t,e){let n=0;if(0===t.length)return e[0];for(let r=0;r<t.length;r+=1)n=t.charCodeAt(r)+((n<<5)-n),n&=n;return n=(n%e.length+e.length)%e.length,e[n]}(t.string,t.colors):t.string&&!t.colors?function(t){let e=0;if(0===t.length)return e.toString();for(let r=0;r<t.length;r+=1)e=t.charCodeAt(r)+((e<<5)-e),e&=e;let n="#";for(let r=0;r<3;r+=1){n+=`00${(e>>8*r&255).toString(16)}`.substr(-2)}return n}(t.string):t.colors&&!t.string?function(t){return t[Math.floor(Math.random()*t.length)]}(t.colors):e}var Gi=Xe("tabs-color"),Yi=Xe("tabs-bg"),$i=Xe("tabs-border-color"),{defineMultiStyleConfig:Wi,definePartsStyle:Hi}=Mn(Br.keys),Xi=t=>{const{orientation:e}=t;return{display:"vertical"===e?"flex":"block"}},Zi=t=>{const{isFitted:e}=t;return{flex:e?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},Ki=t=>{const{align:e="start",orientation:n}=t;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[e],flexDirection:"vertical"===n?"column":"row"}},Qi={p:4},Ji=Hi((t=>({root:Xi(t),tab:Zi(t),tablist:Ki(t),tabpanel:Qi}))),to={sm:Hi({tab:{py:1,px:4,fontSize:"sm"}}),md:Hi({tab:{fontSize:"md",py:2,px:4}}),lg:Hi({tab:{fontSize:"lg",py:3,px:4}})},eo=Hi((t=>{const{colorScheme:e,orientation:n}=t,r="vertical"===n?"borderStart":"borderBottom";return{tablist:{[r]:"2px solid",borderColor:"inherit"},tab:{[r]:"2px solid",borderColor:"transparent",["vertical"===n?"marginStart":"marginBottom"]:"-2px",_selected:{[Gi.variable]:`colors.${e}.600`,_dark:{[Gi.variable]:`colors.${e}.300`},borderColor:"currentColor"},_active:{[Yi.variable]:"colors.gray.200",_dark:{[Yi.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:Gi.reference,bg:Yi.reference}}})),no=Hi((t=>{const{colorScheme:e}=t;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[$i.variable]:"transparent",_selected:{[Gi.variable]:`colors.${e}.600`,[$i.variable]:"colors.white",_dark:{[Gi.variable]:`colors.${e}.300`,[$i.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:$i.reference},color:Gi.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}})),ro=Hi((t=>{const{colorScheme:e}=t;return{tab:{border:"1px solid",borderColor:"inherit",[Yi.variable]:"colors.gray.50",_dark:{[Yi.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[Yi.variable]:"colors.white",[Gi.variable]:`colors.${e}.600`,_dark:{[Yi.variable]:"colors.gray.800",[Gi.variable]:`colors.${e}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:Gi.reference,bg:Yi.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}})),io=Hi((t=>{const{colorScheme:e,theme:n}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:zi(n,`${e}.700`),bg:zi(n,`${e}.100`)}}}})),oo=Hi((t=>{const{colorScheme:e}=t;return{tab:{borderRadius:"full",fontWeight:"semibold",[Gi.variable]:"colors.gray.600",_dark:{[Gi.variable]:"inherit"},_selected:{[Gi.variable]:"colors.white",[Yi.variable]:`colors.${e}.600`,_dark:{[Gi.variable]:"colors.gray.800",[Yi.variable]:`colors.${e}.300`}},color:Gi.reference,bg:Yi.reference}}})),ao=Wi({baseStyle:Ji,sizes:to,variants:{line:eo,enclosed:no,"enclosed-colored":ro,"soft-rounded":io,"solid-rounded":oo,unstyled:Hi({})},defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),so={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold"},lo=Xe("badge-bg"),uo=Xe("badge-color"),co=t=>{const{colorScheme:e,theme:n}=t,r=ji(`${e}.500`,.6)(n);return{[lo.variable]:`colors.${e}.500`,[uo.variable]:"colors.white",_dark:{[lo.variable]:r,[uo.variable]:"colors.whiteAlpha.800"},bg:lo.reference,color:uo.reference}},ho=t=>{const{colorScheme:e,theme:n}=t,r=ji(`${e}.200`,.16)(n);return{[lo.variable]:`colors.${e}.100`,[uo.variable]:`colors.${e}.800`,_dark:{[lo.variable]:r,[uo.variable]:`colors.${e}.200`},bg:lo.reference,color:uo.reference}},po=t=>{const{colorScheme:e,theme:n}=t,r=ji(`${e}.200`,.8)(n);return{[uo.variable]:`colors.${e}.500`,_dark:{[uo.variable]:r},color:uo.reference,boxShadow:`inset 0 0 0px 1px ${uo.reference}`}},fo={baseStyle:so,variants:{solid:co,subtle:ho,outline:po},defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:mo,definePartsStyle:go}=Mn(jr.keys),yo=go({container:{fontWeight:"medium",lineHeight:1.2,outline:0,borderRadius:"md",_focusVisible:{boxShadow:"outline"}},label:{lineHeight:1.2,overflow:"visible"},closeButton:{fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}}}),vo={sm:go({container:{minH:"5",minW:"5",fontSize:"xs",px:"2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:go({container:{minH:"6",minW:"6",fontSize:"sm",px:"2"}}),lg:go({container:{minH:"8",minW:"8",fontSize:"md",px:"3"}})},_o={subtle:go((t=>{var e;return{container:null==(e=fo.variants)?void 0:e.subtle(t)}})),solid:go((t=>{var e;return{container:null==(e=fo.variants)?void 0:e.solid(t)}})),outline:go((t=>{var e;return{container:null==(e=fo.variants)?void 0:e.outline(t)}}))},bo=mo({variants:_o,baseStyle:yo,sizes:vo,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:xo,defineMultiStyleConfig:wo}=Mn(Tr.keys),Eo=xo({field:{width:"100%",minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),So={lg:{fontSize:"lg",px:"4",h:"12",borderRadius:"md"},md:{fontSize:"md",px:"4",h:"10",borderRadius:"md"},sm:{fontSize:"sm",px:"3",h:"8",borderRadius:"sm"},xs:{fontSize:"xs",px:"2",h:"6",borderRadius:"sm"}},Co={lg:xo({field:So.lg,addon:So.lg}),md:xo({field:So.md,addon:So.md}),sm:xo({field:So.sm,addon:So.sm}),xs:xo({field:So.xs,addon:So.xs})};function To(t){const{focusBorderColor:e,errorBorderColor:n}=t;return{focusBorderColor:e||di("blue.500","blue.300")(t),errorBorderColor:n||di("red.500","red.300")(t)}}var Io,ko,Ao,Po,Do,Mo,Oo,Ro,No,Lo,Fo,zo=xo((t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:r}=To(t);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:di("gray.300","whiteAlpha.400")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:zi(e,r),boxShadow:`0 0 0 1px ${zi(e,r)}`},_focusVisible:{zIndex:1,borderColor:zi(e,n),boxShadow:`0 0 0 1px ${zi(e,n)}`}},addon:{border:"1px solid",borderColor:di("inherit","whiteAlpha.50")(t),bg:di("gray.100","whiteAlpha.300")(t)}}})),Bo=xo((t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:r}=To(t);return{field:{border:"2px solid",borderColor:"transparent",bg:di("gray.100","whiteAlpha.50")(t),_hover:{bg:di("gray.200","whiteAlpha.100")(t)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:zi(e,r)},_focusVisible:{bg:"transparent",borderColor:zi(e,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:di("gray.100","whiteAlpha.50")(t)}}})),jo=xo((t=>{const{theme:e}=t,{focusBorderColor:n,errorBorderColor:r}=To(t);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:zi(e,r),boxShadow:`0px 1px 0px 0px ${zi(e,r)}`},_focusVisible:{borderColor:zi(e,n),boxShadow:`0px 1px 0px 0px ${zi(e,n)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}})),Uo=wo({baseStyle:Eo,sizes:Co,variants:{outline:zo,filled:Bo,flushed:jo,unstyled:xo({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}})},defaultProps:{size:"md",variant:"outline"}}),Vo={...null==(Io=Uo.baseStyle)?void 0:Io.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},qo={outline:t=>{var e,n;return null!=(n=null==(e=Uo.variants)?void 0:e.outline(t).field)?n:{}},flushed:t=>{var e,n;return null!=(n=null==(e=Uo.variants)?void 0:e.flushed(t).field)?n:{}},filled:t=>{var e,n;return null!=(n=null==(e=Uo.variants)?void 0:e.filled(t).field)?n:{}},unstyled:null!=(Ao=null==(ko=Uo.variants)?void 0:ko.unstyled.field)?Ao:{}},Go={baseStyle:Vo,sizes:{xs:null!=(Do=null==(Po=Uo.sizes)?void 0:Po.xs.field)?Do:{},sm:null!=(Oo=null==(Mo=Uo.sizes)?void 0:Mo.sm.field)?Oo:{},md:null!=(No=null==(Ro=Uo.sizes)?void 0:Ro.md.field)?No:{},lg:null!=(Fo=null==(Lo=Uo.sizes)?void 0:Lo.lg.field)?Fo:{}},variants:qo,defaultProps:{size:"md",variant:"outline"}},Yo=Yr("tooltip-bg"),$o=Yr("tooltip-fg"),Wo=Yr("popper-arrow-bg"),Ho={baseStyle:{bg:Yo.reference,color:$o.reference,[Yo.variable]:"colors.gray.700",[$o.variable]:"colors.whiteAlpha.900",_dark:{[Yo.variable]:"colors.gray.300",[$o.variable]:"colors.gray.900"},[Wo.variable]:Yo.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"}},{defineMultiStyleConfig:Xo,definePartsStyle:Zo}=Mn(Mr.keys),Ko=t=>{const{colorScheme:e,theme:n,isIndeterminate:r,hasStripe:i}=t,o=di(Ui(),Ui("1rem","rgba(0,0,0,0.1)"))(t),a=di(`${e}.500`,`${e}.200`)(t),s=`linear-gradient(\n    to right,\n    transparent 0%,\n    ${zi(n,a)} 50%,\n    transparent 100%\n  )`;return{...!r&&i&&o,...r?{bgImage:s}:{bgColor:a}}},Qo={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},Jo=t=>({bg:di("gray.100","whiteAlpha.300")(t)}),ta=t=>({transitionProperty:"common",transitionDuration:"slow",...Ko(t)}),ea=Zo((t=>({label:Qo,filledTrack:ta(t),track:Jo(t)}))),na=Xo({sizes:{xs:Zo({track:{h:"1"}}),sm:Zo({track:{h:"2"}}),md:Zo({track:{h:"3"}}),lg:Zo({track:{h:"4"}})},baseStyle:ea,defaultProps:{size:"md",colorScheme:"blue"}}),ra=t=>"function"===typeof t;function ia(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return ra(t)?t(...n):t}var oa,aa,sa,la,ua,ca,ha,da,pa,{definePartsStyle:fa,defineMultiStyleConfig:ma}=Mn(xr.keys),ga=Xe("checkbox-size"),ya=t=>{const{colorScheme:e}=t;return{w:ga.reference,h:ga.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:di(`${e}.500`,`${e}.200`)(t),borderColor:di(`${e}.500`,`${e}.200`)(t),color:di("white","gray.900")(t),_hover:{bg:di(`${e}.600`,`${e}.300`)(t),borderColor:di(`${e}.600`,`${e}.300`)(t)},_disabled:{borderColor:di("gray.200","transparent")(t),bg:di("gray.200","whiteAlpha.300")(t),color:di("gray.500","whiteAlpha.500")(t)}},_indeterminate:{bg:di(`${e}.500`,`${e}.200`)(t),borderColor:di(`${e}.500`,`${e}.200`)(t),color:di("white","gray.900")(t)},_disabled:{bg:di("gray.100","whiteAlpha.100")(t),borderColor:di("gray.100","transparent")(t)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:di("red.500","red.300")(t)}}},va={_disabled:{cursor:"not-allowed"}},_a={userSelect:"none",_disabled:{opacity:.4}},ba={transitionProperty:"transform",transitionDuration:"normal"},xa=ma({baseStyle:fa((t=>({icon:ba,container:va,control:ia(ya,t),label:_a}))),sizes:{sm:fa({control:{[ga.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:fa({control:{[ga.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:fa({control:{[ga.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:wa,definePartsStyle:Ea}=Mn(Or.keys),Sa=t=>{var e;const n=null==(e=ia(xa.baseStyle,t))?void 0:e.control;return{...n,borderRadius:"full",_checked:{...null==n?void 0:n._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},Ca=Ea((t=>{var e,n,r,i;return{label:null==(n=(e=xa).baseStyle)?void 0:n.call(e,t).label,container:null==(i=(r=xa).baseStyle)?void 0:i.call(r,t).container,control:Sa(t)}})),Ta=wa({baseStyle:Ca,sizes:{md:Ea({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:Ea({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:Ea({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Ia,definePartsStyle:ka}=Mn(Rr.keys),Aa=Xe("select-bg"),Pa={paddingInlineEnd:"8"},Da=Ia({baseStyle:ka({field:{...null==(oa=Uo.baseStyle)?void 0:oa.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:Aa.reference,[Aa.variable]:"colors.white",_dark:{[Aa.variable]:"colors.gray.700"},"> option, > optgroup":{bg:Aa.reference}},icon:{width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}}}),sizes:{lg:{...null==(aa=Uo.sizes)?void 0:aa.lg,field:{...null==(sa=Uo.sizes)?void 0:sa.lg.field,...Pa}},md:{...null==(la=Uo.sizes)?void 0:la.md,field:{...null==(ua=Uo.sizes)?void 0:ua.md.field,...Pa}},sm:{...null==(ca=Uo.sizes)?void 0:ca.sm,field:{...null==(ha=Uo.sizes)?void 0:ha.sm.field,...Pa}},xs:{...null==(da=Uo.sizes)?void 0:da.xs,field:{...null==(pa=Uo.sizes)?void 0:pa.xs.field,...Pa},icon:{insetEnd:"1"}}},variants:Uo.variants,defaultProps:Uo.defaultProps}),Ma=Xe("skeleton-start-color"),Oa=Xe("skeleton-end-color"),Ra={baseStyle:{[Ma.variable]:"colors.gray.100",[Oa.variable]:"colors.gray.400",_dark:{[Ma.variable]:"colors.gray.800",[Oa.variable]:"colors.gray.600"},background:Ma.reference,borderColor:Oa.reference,opacity:.7,borderRadius:"sm"}},Na=Xe("skip-link-bg"),La={baseStyle:{borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[Na.variable]:"colors.white",_dark:{[Na.variable]:"colors.gray.700"},bg:Na.reference}}},{defineMultiStyleConfig:Fa,definePartsStyle:za}=Mn(Nr.keys),Ba=Xe("slider-thumb-size"),ja=Xe("slider-track-size"),Ua=Xe("slider-bg"),Va=t=>{const{orientation:e}=t;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...pi({orientation:e,vertical:{h:"100%"},horizontal:{w:"100%"}})}},qa=t=>({...pi({orientation:t.orientation,horizontal:{h:ja.reference},vertical:{w:ja.reference}}),overflow:"hidden",borderRadius:"sm",[Ua.variable]:"colors.gray.200",_dark:{[Ua.variable]:"colors.whiteAlpha.200"},_disabled:{[Ua.variable]:"colors.gray.300",_dark:{[Ua.variable]:"colors.whiteAlpha.300"}},bg:Ua.reference}),Ga=t=>{const{orientation:e}=t;return{...pi({orientation:e,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),w:Ba.reference,h:Ba.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}},Ya=t=>{const{colorScheme:e}=t;return{width:"inherit",height:"inherit",[Ua.variable]:`colors.${e}.500`,_dark:{[Ua.variable]:`colors.${e}.200`},bg:Ua.reference}},$a=Fa({baseStyle:za((t=>({container:Va(t),track:qa(t),thumb:Ga(t),filledTrack:Ya(t)}))),sizes:{lg:za({container:{[Ba.variable]:"sizes.4",[ja.variable]:"sizes.1"}}),md:za({container:{[Ba.variable]:"sizes.3.5",[ja.variable]:"sizes.1"}}),sm:za({container:{[Ba.variable]:"sizes.2.5",[ja.variable]:"sizes.0.5"}})},defaultProps:{size:"md",colorScheme:"blue"}}),Wa=Yr("spinner-size"),Ha={baseStyle:{width:[Wa.reference],height:[Wa.reference]},sizes:{xs:{[Wa.variable]:"sizes.3"},sm:{[Wa.variable]:"sizes.4"},md:{[Wa.variable]:"sizes.6"},lg:{[Wa.variable]:"sizes.8"},xl:{[Wa.variable]:"sizes.12"}},defaultProps:{size:"md"}},{defineMultiStyleConfig:Xa,definePartsStyle:Za}=Mn(Lr.keys),Ka=Xa({baseStyle:Za({container:{},label:{fontWeight:"medium"},helpText:{opacity:.8,marginBottom:"2"},number:{verticalAlign:"baseline",fontWeight:"semibold"},icon:{marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"}}),sizes:{md:Za({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},defaultProps:{size:"md"}}),Qa=Xe("kbd-bg"),Ja={baseStyle:{[Qa.variable]:"colors.gray.100",_dark:{[Qa.variable]:"colors.whiteAlpha.100"},bg:Qa.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"}},ts={baseStyle:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}}},{defineMultiStyleConfig:es,definePartsStyle:ns}=Mn(Ir.keys),rs=es({baseStyle:ns({icon:{marginEnd:"2",display:"inline",verticalAlign:"text-bottom"}})}),{defineMultiStyleConfig:is,definePartsStyle:os}=Mn(kr.keys),as=Xe("menu-bg"),ss=Xe("menu-shadow"),ls=is({baseStyle:os({button:{transitionProperty:"common",transitionDuration:"normal"},list:{[as.variable]:"#fff",[ss.variable]:"shadows.sm",_dark:{[as.variable]:"colors.gray.700",[ss.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:as.reference,boxShadow:ss.reference},item:{py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[as.variable]:"colors.gray.100",_dark:{[as.variable]:"colors.whiteAlpha.100"}},_active:{[as.variable]:"colors.gray.200",_dark:{[as.variable]:"colors.whiteAlpha.200"}},_expanded:{[as.variable]:"colors.gray.100",_dark:{[as.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:as.reference},groupTitle:{mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},command:{opacity:.6},divider:{border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6}})}),{defineMultiStyleConfig:us,definePartsStyle:cs}=Mn(Ar.keys),hs={bg:"blackAlpha.600",zIndex:"modal"},ds=t=>{const{isCentered:e,scrollBehavior:n}=t;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:e?"center":"flex-start",overflow:"inside"===n?"hidden":"auto",overscrollBehaviorY:"none"}},ps=t=>{const{scrollBehavior:e}=t;return{borderRadius:"md",bg:di("white","gray.700")(t),color:"inherit",my:"16",zIndex:"modal",maxH:"inside"===e?"calc(100% - 7.5rem)":void 0,boxShadow:di("lg","dark-lg")(t)}},fs={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},ms={position:"absolute",top:"2",insetEnd:"3"},gs=t=>{const{scrollBehavior:e}=t;return{px:"6",py:"2",flex:"1",overflow:"inside"===e?"auto":void 0}},ys={px:"6",py:"4"};function vs(t){return cs("full"===t?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:t}})}var _s=us({baseStyle:cs((t=>({overlay:hs,dialogContainer:ia(ds,t),dialog:ia(ps,t),header:fs,closeButton:ms,body:ia(gs,t),footer:ys}))),sizes:{xs:vs("xs"),sm:vs("sm"),md:vs("md"),lg:vs("lg"),xl:vs("xl"),"2xl":vs("2xl"),"3xl":vs("3xl"),"4xl":vs("4xl"),"5xl":vs("5xl"),"6xl":vs("6xl"),full:vs("full")},defaultProps:{size:"md"}}),{defineMultiStyleConfig:bs,definePartsStyle:xs}=Mn(Pr.keys),ws=Yr("number-input-stepper-width"),Es=Yr("number-input-input-padding"),Ss=ti(ws).add("0.5rem").toString(),Cs=Yr("number-input-bg"),Ts=Yr("number-input-color"),Is=Yr("number-input-border-color"),ks={[ws.variable]:"sizes.6",[Es.variable]:Ss},As=t=>{var e,n;return null!=(n=null==(e=ia(Uo.baseStyle,t))?void 0:e.field)?n:{}},Ps={width:ws.reference},Ds={borderStart:"1px solid",borderStartColor:Is.reference,color:Ts.reference,bg:Cs.reference,[Ts.variable]:"colors.chakra-body-text",[Is.variable]:"colors.chakra-border-color",_dark:{[Ts.variable]:"colors.whiteAlpha.800",[Is.variable]:"colors.whiteAlpha.300"},_active:{[Cs.variable]:"colors.gray.200",_dark:{[Cs.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},Ms=xs((t=>{var e;return{root:ks,field:null!=(e=ia(As,t))?e:{},stepperGroup:Ps,stepper:Ds}}));function Os(t){var e,n,r;const i=null==(e=Uo.sizes)?void 0:e[t],o={lg:"md",md:"md",sm:"sm",xs:"sm"},a=null!=(r=null==(n=i.field)?void 0:n.fontSize)?r:"md",s=dr.fontSizes[a];return xs({field:{...i.field,paddingInlineEnd:Es.reference,verticalAlign:"top"},stepper:{fontSize:ti(s).multiply(.75).toString(),_first:{borderTopEndRadius:o[t]},_last:{borderBottomEndRadius:o[t],mt:"-1px",borderTopWidth:1}}})}var Rs,Ns,Ls,Fs=bs({baseStyle:Ms,sizes:{xs:Os("xs"),sm:Os("sm"),md:Os("md"),lg:Os("lg")},variants:Uo.variants,defaultProps:Uo.defaultProps}),zs={...null==(Rs=Uo.baseStyle)?void 0:Rs.field,textAlign:"center"},Bs={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},js={outline:t=>{var e,n,r;return null!=(r=null==(n=ia(null==(e=Uo.variants)?void 0:e.outline,t))?void 0:n.field)?r:{}},flushed:t=>{var e,n,r;return null!=(r=null==(n=ia(null==(e=Uo.variants)?void 0:e.flushed,t))?void 0:n.field)?r:{}},filled:t=>{var e,n,r;return null!=(r=null==(n=ia(null==(e=Uo.variants)?void 0:e.filled,t))?void 0:n.field)?r:{}},unstyled:null!=(Ls=null==(Ns=Uo.variants)?void 0:Ns.unstyled.field)?Ls:{}},Us={baseStyle:zs,sizes:Bs,variants:js,defaultProps:Uo.defaultProps},{defineMultiStyleConfig:Vs,definePartsStyle:qs}=Mn(Dr.keys),Gs=Yr("popper-bg"),Ys=Yr("popper-arrow-bg"),$s=Yr("popper-arrow-shadow-color"),Ws=Vs({baseStyle:qs({popper:{zIndex:10},content:{[Gs.variable]:"colors.white",bg:Gs.reference,[Ys.variable]:Gs.reference,[$s.variable]:"colors.gray.200",_dark:{[Gs.variable]:"colors.gray.700",[$s.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},header:{px:3,py:2,borderBottomWidth:"1px"},body:{px:3,py:2},footer:{px:3,py:2,borderTopWidth:"1px"},closeButton:{position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2}})}),{definePartsStyle:Hs,defineMultiStyleConfig:Xs}=Mn(wr.keys),Zs=Xe("drawer-bg"),Ks=Xe("drawer-box-shadow");function Qs(t){return Hs("full"===t?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:t}})}var Js={bg:"blackAlpha.600",zIndex:"overlay"},tl={display:"flex",zIndex:"modal",justifyContent:"center"},el=t=>{const{isFullHeight:e}=t;return{...e&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[Zs.variable]:"colors.white",[Ks.variable]:"shadows.lg",_dark:{[Zs.variable]:"colors.gray.700",[Ks.variable]:"shadows.dark-lg"},bg:Zs.reference,boxShadow:Ks.reference}},nl={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},rl={position:"absolute",top:"2",insetEnd:"3"},il={px:"6",py:"2",flex:"1",overflow:"auto"},ol={px:"6",py:"4"},al=Xs({baseStyle:Hs((t=>({overlay:Js,dialogContainer:tl,dialog:ia(el,t),header:nl,closeButton:rl,body:il,footer:ol}))),sizes:{xs:Qs("xs"),sm:Qs("md"),md:Qs("lg"),lg:Qs("2xl"),xl:Qs("4xl"),full:Qs("full")},defaultProps:{size:"xs"}}),{definePartsStyle:sl,defineMultiStyleConfig:ll}=Mn(Er.keys),ul=ll({baseStyle:sl({preview:{borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},input:{borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},textarea:{borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}}})}),{definePartsStyle:cl,defineMultiStyleConfig:hl}=Mn(Sr.keys),dl=Xe("form-control-color"),pl=hl({baseStyle:cl({container:{width:"100%",position:"relative"},requiredIndicator:{marginStart:"1",[dl.variable]:"colors.red.500",_dark:{[dl.variable]:"colors.red.300"},color:dl.reference},helperText:{mt:"2",[dl.variable]:"colors.gray.600",_dark:{[dl.variable]:"colors.whiteAlpha.600"},color:dl.reference,lineHeight:"normal",fontSize:"sm"}})}),{definePartsStyle:fl,defineMultiStyleConfig:ml}=Mn(Cr.keys),gl=Xe("form-error-color"),yl=ml({baseStyle:fl({text:{[gl.variable]:"colors.red.500",_dark:{[gl.variable]:"colors.red.300"},color:gl.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},icon:{marginEnd:"0.5em",[gl.variable]:"colors.red.500",_dark:{[gl.variable]:"colors.red.300"},color:gl.reference}})}),vl={baseStyle:{fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}}},_l={baseStyle:{fontFamily:"heading",fontWeight:"bold"},sizes:{"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},defaultProps:{size:"xl"}},{defineMultiStyleConfig:bl,definePartsStyle:xl}=Mn(br.keys),wl=bl({baseStyle:xl({link:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}}})}),El=t=>{const{colorScheme:e,theme:n}=t;if("gray"===e)return{color:di("inherit","whiteAlpha.900")(t),_hover:{bg:di("gray.100","whiteAlpha.200")(t)},_active:{bg:di("gray.200","whiteAlpha.300")(t)}};const r=ji(`${e}.200`,.12)(n),i=ji(`${e}.200`,.24)(n);return{color:di(`${e}.600`,`${e}.200`)(t),bg:"transparent",_hover:{bg:di(`${e}.50`,r)(t)},_active:{bg:di(`${e}.100`,i)(t)}}},Sl=t=>{const{colorScheme:e}=t,n=di("gray.200","whiteAlpha.300")(t);return{border:"1px solid",borderColor:"gray"===e?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...ia(El,t)}},Cl={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},Tl=t=>{var e;const{colorScheme:n}=t;if("gray"===n){const e=di("gray.100","whiteAlpha.200")(t);return{bg:e,_hover:{bg:di("gray.200","whiteAlpha.300")(t),_disabled:{bg:e}},_active:{bg:di("gray.300","whiteAlpha.400")(t)}}}const{bg:r=`${n}.500`,color:i="white",hoverBg:o=`${n}.600`,activeBg:a=`${n}.700`}=null!=(e=Cl[n])?e:{},s=di(r,`${n}.200`)(t);return{bg:s,color:di(i,"gray.800")(t),_hover:{bg:di(o,`${n}.300`)(t),_disabled:{bg:s}},_active:{bg:di(a,`${n}.400`)(t)}}},Il=t=>{const{colorScheme:e}=t;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:di(`${e}.500`,`${e}.200`)(t),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:di(`${e}.700`,`${e}.500`)(t)}}},kl={baseStyle:{lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},variants:{ghost:El,outline:Sl,solid:Tl,link:Il,unstyled:{bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"}},sizes:{lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:Al,defineMultiStyleConfig:Pl}=Mn(Ur.keys),Dl=Xe("card-bg"),Ml=Xe("card-padding"),Ol=Xe("card-shadow"),Rl=Xe("card-radius"),Nl=Xe("card-border-width","0"),Ll=Xe("card-border-color"),Fl=Al({container:{[Dl.variable]:"colors.chakra-body-bg",backgroundColor:Dl.reference,boxShadow:Ol.reference,borderRadius:Rl.reference,color:"chakra-body-text",borderWidth:Nl.reference,borderColor:Ll.reference},body:{padding:Ml.reference,flex:"1 1 0%"},header:{padding:Ml.reference},footer:{padding:Ml.reference}}),zl={sm:Al({container:{[Rl.variable]:"radii.base",[Ml.variable]:"space.3"}}),md:Al({container:{[Rl.variable]:"radii.md",[Ml.variable]:"space.5"}}),lg:Al({container:{[Rl.variable]:"radii.xl",[Ml.variable]:"space.7"}})},Bl=Pl({baseStyle:Fl,variants:{elevated:Al({container:{[Ol.variable]:"shadows.base",_dark:{[Dl.variable]:"colors.gray.700"}}}),outline:Al({container:{[Nl.variable]:"1px",[Ll.variable]:"colors.chakra-border-color"}}),filled:Al({container:{[Dl.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[Ml.variable]:0},header:{[Ml.variable]:0},footer:{[Ml.variable]:0}}},sizes:zl,defaultProps:{variant:"elevated",size:"md"}}),jl=Yr("close-button-size"),Ul=Yr("close-button-bg"),Vl={baseStyle:{w:[jl.reference],h:[jl.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[Ul.variable]:"colors.blackAlpha.100",_dark:{[Ul.variable]:"colors.whiteAlpha.100"}},_active:{[Ul.variable]:"colors.blackAlpha.200",_dark:{[Ul.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:Ul.reference},sizes:{lg:{[jl.variable]:"sizes.10",fontSize:"md"},md:{[jl.variable]:"sizes.8",fontSize:"xs"},sm:{[jl.variable]:"sizes.6",fontSize:"2xs"}},defaultProps:{size:"md"}},{variants:ql,defaultProps:Gl}=fo,Yl={baseStyle:{fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm"},variants:ql,defaultProps:Gl},$l={baseStyle:{w:"100%",mx:"auto",maxW:"prose",px:"4"}},Wl={baseStyle:{opacity:.6,borderColor:"inherit"},variants:{solid:{borderStyle:"solid"},dashed:{borderStyle:"dashed"}},defaultProps:{variant:"solid"}},{definePartsStyle:Hl,defineMultiStyleConfig:Xl}=Mn(yr.keys),Zl=Xl({baseStyle:Hl({container:{borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},button:{transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},panel:{pt:"2",px:"4",pb:"5"},icon:{fontSize:"1.25em"}})}),{definePartsStyle:Kl,defineMultiStyleConfig:Ql}=Mn(vr.keys),Jl=Xe("alert-fg"),tu=Xe("alert-bg"),eu=Kl({container:{bg:tu.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:Jl.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:Jl.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function nu(t){const{theme:e,colorScheme:n}=t;return{light:`colors.${n}.100`,dark:ji(`${n}.200`,.16)(e)}}var ru=Kl((t=>{const{colorScheme:e}=t,n=nu(t);return{container:{[Jl.variable]:`colors.${e}.500`,[tu.variable]:n.light,_dark:{[Jl.variable]:`colors.${e}.200`,[tu.variable]:n.dark}}}})),iu=Kl((t=>{const{colorScheme:e}=t,n=nu(t);return{container:{[Jl.variable]:`colors.${e}.500`,[tu.variable]:n.light,_dark:{[Jl.variable]:`colors.${e}.200`,[tu.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:Jl.reference}}})),ou=Kl((t=>{const{colorScheme:e}=t,n=nu(t);return{container:{[Jl.variable]:`colors.${e}.500`,[tu.variable]:n.light,_dark:{[Jl.variable]:`colors.${e}.200`,[tu.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:Jl.reference}}})),au=Kl((t=>{const{colorScheme:e}=t;return{container:{[Jl.variable]:"colors.white",[tu.variable]:`colors.${e}.500`,_dark:{[Jl.variable]:"colors.gray.900",[tu.variable]:`colors.${e}.200`},color:Jl.reference}}})),su=Ql({baseStyle:eu,variants:{subtle:ru,"left-accent":iu,"top-accent":ou,solid:au},defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:lu,defineMultiStyleConfig:uu}=Mn(_r.keys),cu=Xe("avatar-border-color"),hu=Xe("avatar-bg"),du={borderRadius:"full",border:"0.2em solid",[cu.variable]:"white",_dark:{[cu.variable]:"colors.gray.800"},borderColor:cu.reference},pu={[hu.variable]:"colors.gray.200",_dark:{[hu.variable]:"colors.whiteAlpha.400"},bgColor:hu.reference},fu=Xe("avatar-background"),mu=t=>{const{name:e,theme:n}=t,r=e?qi({string:e}):"colors.gray.400",i=(t=>e=>"dark"===Bi(t)(e))(r)(n);let o="white";return i||(o="gray.800"),{bg:fu.reference,"&:not([data-loaded])":{[fu.variable]:r},color:o,[cu.variable]:"colors.white",_dark:{[cu.variable]:"colors.gray.800"},borderColor:cu.reference,verticalAlign:"top"}};function gu(t){const e="100%"!==t?fr[t]:void 0;return lu({container:{width:t,height:t,fontSize:`calc(${null!=e?e:t} / 2.5)`},excessLabel:{width:t,height:t},label:{fontSize:`calc(${null!=e?e:t} / 2.5)`,lineHeight:"100%"!==t?null!=e?e:t:void 0}})}var yu={Accordion:Zl,Alert:su,Avatar:uu({baseStyle:lu((t=>({badge:ia(du,t),excessLabel:ia(pu,t),container:ia(mu,t)}))),sizes:{"2xs":gu(4),xs:gu(6),sm:gu(8),md:gu(12),lg:gu(16),xl:gu(24),"2xl":gu(32),full:gu("100%")},defaultProps:{size:"md"}}),Badge:fo,Breadcrumb:wl,Button:kl,Checkbox:xa,CloseButton:Vl,Code:Yl,Container:$l,Divider:Wl,Drawer:al,Editable:ul,Form:pl,FormError:yl,FormLabel:vl,Heading:_l,Input:Uo,Kbd:Ja,Link:ts,List:rs,Menu:ls,Modal:_s,NumberInput:Fs,PinInput:Us,Popover:Ws,Progress:na,Radio:Ta,Select:Da,Skeleton:Ra,SkipLink:La,Slider:$a,Spinner:Ha,Stat:Ka,Switch:hi,Table:bi,Tabs:ao,Tag:bo,Textarea:Go,Tooltip:Ho,Card:Bl},vu={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},_u={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color",wordWrap:"break-word"}}},bu={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},xu={semanticTokens:vu,direction:"ltr",...mr,components:yu,styles:_u,config:bu},wu={semanticTokens:vu,direction:"ltr",components:{},...mr,styles:_u,config:bu},Eu=(t,e)=>t.find((t=>t.id===e));function Su(t,e){const n=Cu(t,e);return{position:n,index:n?t[n].findIndex((t=>t.id===e)):-1}}function Cu(t,e){for(const[n,r]of Object.entries(t))if(Eu(r,e))return n}function Tu(t){return{position:"fixed",zIndex:5500,pointerEvents:"none",display:"flex",flexDirection:"column",margin:"top"===t||"bottom"===t?"0 auto":void 0,top:t.includes("top")?"env(safe-area-inset-top, 0px)":void 0,bottom:t.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,right:t.includes("left")?void 0:"env(safe-area-inset-right, 0px)",left:t.includes("right")?void 0:"env(safe-area-inset-left, 0px)"}}function Iu(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=(0,t.useRef)(e);return(0,t.useEffect)((()=>{r.current=e})),(0,t.useCallback)((function(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return null==(t=r.current)?void 0:t.call(r,...n)}),n)}function ku(e,n){const r=(0,t.useRef)(!1),i=(0,t.useRef)(!1);(0,t.useEffect)((()=>{if(r.current&&i.current)return e();i.current=!0}),n),(0,t.useEffect)((()=>(r.current=!0,()=>{r.current=!1})),[])}const Au=(0,t.createContext)(null);function Pu(){return null===(e=(0,t.useContext)(Au))||e.isPresent;var e}const Du=(0,t.createContext)({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Mu=(0,t.createContext)({}),Ou="undefined"!==typeof document,Ru=Ou?t.useLayoutEffect:t.useEffect,Nu=(0,t.createContext)({strict:!1});function Lu(t){return"object"===typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}function Fu(t){return"string"===typeof t||Array.isArray(t)}function zu(t){return"object"===typeof t&&"function"===typeof t.start}const Bu=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ju=["initial",...Bu];function Uu(t){return zu(t.animate)||ju.some((e=>Fu(t[e])))}function Vu(t){return Boolean(Uu(t)||t.variants)}function qu(e){const{initial:n,animate:r}=function(t,e){if(Uu(t)){const{initial:e,animate:n}=t;return{initial:!1===e||Fu(e)?e:void 0,animate:Fu(n)?n:void 0}}return!1!==t.inherit?e:{}}(e,(0,t.useContext)(Mu));return(0,t.useMemo)((()=>({initial:n,animate:r})),[Gu(n),Gu(r)])}function Gu(t){return Array.isArray(t)?t.join(" "):t}const Yu={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},$u={};for(const n in Yu)$u[n]={isEnabled:t=>Yu[n].some((e=>!!t[e]))};function Wu(e){const n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}const Hu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Xu=1;const Zu=(0,t.createContext)({}),Ku=(0,t.createContext)({}),Qu=Symbol.for("motionComponentSymbol");function Ju(e){let{preloadedFeatures:n,createVisualElement:r,useRender:i,useVisualState:o,Component:a}=e;n&&function(t){for(const e in t)$u[e]={...$u[e],...t[e]}}(n);const s=(0,t.forwardRef)((function(e,s){let l;const u={...(0,t.useContext)(Du),...e,layoutId:tc(e)},{isStatic:c}=u,h=qu(e),d=c?void 0:Wu((()=>{if(Hu.hasEverUpdated)return Xu++})),p=o(e,c);if(!c&&Ou){h.visualElement=function(e,n,r,i){const{visualElement:o}=(0,t.useContext)(Mu),a=(0,t.useContext)(Nu),s=(0,t.useContext)(Au),l=(0,t.useContext)(Du).reducedMotion,u=(0,t.useRef)();i=i||a.renderer,!u.current&&i&&(u.current=i(e,{visualState:n,parent:o,props:r,presenceContext:s,blockInitialAnimation:!!s&&!1===s.initial,reducedMotionConfig:l}));const c=u.current;return(0,t.useInsertionEffect)((()=>{c&&c.update(r,s)})),Ru((()=>{c&&c.render()})),(0,t.useEffect)((()=>{c&&c.updateFeatures()})),(window.HandoffAppearAnimations?Ru:t.useEffect)((()=>{c&&c.animationState&&c.animationState.animateChanges()})),c}(a,p,u,r);const e=(0,t.useContext)(Ku),i=(0,t.useContext)(Nu).strict;h.visualElement&&(l=h.visualElement.loadFeatures(u,i,n,d,e))}return t.createElement(Mu.Provider,{value:h},l&&h.visualElement?t.createElement(l,{visualElement:h.visualElement,...u}):null,i(a,e,d,function(e,n,r){return(0,t.useCallback)((t=>{t&&e.mount&&e.mount(t),n&&(t?n.mount(t):n.unmount()),r&&("function"===typeof r?r(t):Lu(r)&&(r.current=t))}),[n])}(p,h.visualElement,s),p,c,h.visualElement))}));return s[Qu]=a,s}function tc(e){let{layoutId:n}=e;const r=(0,t.useContext)(Zu).id;return r&&void 0!==n?r+"-"+n:n}function ec(t){function e(e){return Ju(t(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return e;const n=new Map;return new Proxy(e,{get:(t,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const nc=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rc(t){return"string"===typeof t&&!t.includes("-")&&!!(nc.indexOf(t)>-1||/[A-Z]/.test(t))}const ic={};const oc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ac=new Set(oc);function sc(t,e){let{layout:n,layoutId:r}=e;return ac.has(t)||t.startsWith("origin")||(n||void 0!==r)&&(!!ic[t]||"opacity"===t)}const lc=t=>Boolean(t&&t.getVelocity),uc={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cc=oc.length;const hc=t=>e=>"string"===typeof e&&e.startsWith(t),dc=hc("--"),pc=hc("var(--"),fc=(t,e)=>e&&"number"===typeof t?e.transform(t):t,mc=(t,e,n)=>Math.min(Math.max(n,t),e),gc={test:t=>"number"===typeof t,parse:parseFloat,transform:t=>t},yc={...gc,transform:t=>mc(0,1,t)},vc={...gc,default:1},_c=t=>Math.round(1e5*t)/1e5,bc=/(-)?([\d]*\.?[\d])+/g,xc=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,wc=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ec(t){return"string"===typeof t}const Sc=t=>({test:e=>Ec(e)&&e.endsWith(t)&&1===e.split(" ").length,parse:parseFloat,transform:e=>`${e}${t}`}),Cc=Sc("deg"),Tc=Sc("%"),Ic=Sc("px"),kc=Sc("vh"),Ac=Sc("vw"),Pc={...Tc,parse:t=>Tc.parse(t)/100,transform:t=>Tc.transform(100*t)},Dc={...gc,transform:Math.round},Mc={borderWidth:Ic,borderTopWidth:Ic,borderRightWidth:Ic,borderBottomWidth:Ic,borderLeftWidth:Ic,borderRadius:Ic,radius:Ic,borderTopLeftRadius:Ic,borderTopRightRadius:Ic,borderBottomRightRadius:Ic,borderBottomLeftRadius:Ic,width:Ic,maxWidth:Ic,height:Ic,maxHeight:Ic,size:Ic,top:Ic,right:Ic,bottom:Ic,left:Ic,padding:Ic,paddingTop:Ic,paddingRight:Ic,paddingBottom:Ic,paddingLeft:Ic,margin:Ic,marginTop:Ic,marginRight:Ic,marginBottom:Ic,marginLeft:Ic,rotate:Cc,rotateX:Cc,rotateY:Cc,rotateZ:Cc,scale:vc,scaleX:vc,scaleY:vc,scaleZ:vc,skew:Cc,skewX:Cc,skewY:Cc,distance:Ic,translateX:Ic,translateY:Ic,translateZ:Ic,x:Ic,y:Ic,z:Ic,perspective:Ic,transformPerspective:Ic,opacity:yc,originX:Pc,originY:Pc,originZ:Ic,zIndex:Dc,fillOpacity:yc,strokeOpacity:yc,numOctaves:Dc};function Oc(t,e,n,r){const{style:i,vars:o,transform:a,transformOrigin:s}=t;let l=!1,u=!1,c=!0;for(const h in e){const t=e[h];if(dc(h)){o[h]=t;continue}const n=Mc[h],r=fc(t,n);if(ac.has(h)){if(l=!0,a[h]=r,!c)continue;t!==(n.default||0)&&(c=!1)}else h.startsWith("origin")?(u=!0,s[h]=r):i[h]=r}if(e.transform||(l||r?i.transform=function(t,e,n,r){let{enableHardwareAcceleration:i=!0,allowTransformNone:o=!0}=e,a="";for(let s=0;s<cc;s++){const e=oc[s];void 0!==t[e]&&(a+=`${uc[e]||e}(${t[e]}) `)}return i&&!t.z&&(a+="translateZ(0)"),a=a.trim(),r?a=r(t,n?"":a):o&&n&&(a="none"),a}(t.transform,n,c,r):i.transform&&(i.transform="none")),u){const{originX:t="50%",originY:e="50%",originZ:n=0}=s;i.transformOrigin=`${t} ${e} ${n}`}}const Rc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Nc(t,e,n){for(const r in e)lc(e[r])||sc(r,n)||(t[r]=e[r])}function Lc(e,n,r){const i={};return Nc(i,e.style||{},e),Object.assign(i,function(e,n,r){let{transformTemplate:i}=e;return(0,t.useMemo)((()=>{const t=Rc();return Oc(t,n,{enableHardwareAcceleration:!r},i),Object.assign({},t.vars,t.style)}),[n])}(e,n,r)),e.transformValues?e.transformValues(i):i}function Fc(t,e,n){const r={},i=Lc(t,e,n);return t.drag&&!1!==t.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),void 0===t.tabIndex&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const zc=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function Bc(t){return t.startsWith("while")||t.startsWith("drag")&&"draggable"!==t||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||zc.has(t)}let jc=t=>!Bc(t);try{(Uc=require("@emotion/is-prop-valid").default)&&(jc=t=>t.startsWith("on")?!Bc(t):Uc(t))}catch(Io){}var Uc;function Vc(t,e,n){return"string"===typeof t?t:Ic.transform(e+n*t)}const qc={offset:"stroke-dashoffset",array:"stroke-dasharray"},Gc={offset:"strokeDashoffset",array:"strokeDasharray"};function Yc(t,e,n,r,i){let{attrX:o,attrY:a,originX:s,originY:l,pathLength:u,pathSpacing:c=1,pathOffset:h=0,...d}=e;if(Oc(t,d,n,i),r)return void(t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox));t.attrs=t.style,t.style={};const{attrs:p,style:f,dimensions:m}=t;p.transform&&(m&&(f.transform=p.transform),delete p.transform),m&&(void 0!==s||void 0!==l||f.transform)&&(f.transformOrigin=function(t,e,n){return`${Vc(e,t.x,t.width)} ${Vc(n,t.y,t.height)}`}(m,void 0!==s?s:.5,void 0!==l?l:.5)),void 0!==o&&(p.x=o),void 0!==a&&(p.y=a),void 0!==u&&function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];t.pathLength=1;const o=i?qc:Gc;t[o.offset]=Ic.transform(-r);const a=Ic.transform(e),s=Ic.transform(n);t[o.array]=`${a} ${s}`}(p,u,c,h,!1)}const $c=()=>({...Rc(),attrs:{}}),Wc=t=>"string"===typeof t&&"svg"===t.toLowerCase();function Hc(e,n,r,i){const o=(0,t.useMemo)((()=>{const t=$c();return Yc(t,n,{enableHardwareAcceleration:!1},Wc(i),e.transformTemplate),{...t.attrs,style:{...t.style}}}),[n]);if(e.style){const t={};Nc(t,e.style,e),o.style={...t,...o.style}}return o}function Xc(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(n,r,i,o,a,s)=>{let{latestValues:l}=a;const u=(rc(n)?Hc:Fc)(r,l,s,n),c=function(t,e,n){const r={};for(const i in t)"values"===i&&"object"===typeof t.values||(jc(i)||!0===n&&Bc(i)||!e&&!Bc(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}(r,"string"===typeof n,e),h={...c,...u,ref:o},{children:d}=r,p=(0,t.useMemo)((()=>lc(d)?d.get():d),[d]);return i&&(h["data-projection-id"]=i),(0,t.createElement)(n,{...h,children:p})}}const Zc=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function Kc(t,e,n,r){let{style:i,vars:o}=e;Object.assign(t.style,i,r&&r.getProjectionStyles(n));for(const a in o)t.style.setProperty(a,o[a])}const Qc=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Jc(t,e,n,r){Kc(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Qc.has(i)?i:Zc(i),e.attrs[i])}function th(t,e){const{style:n}=t,r={};for(const i in n)(lc(n[i])||e.style&&lc(e.style[i])||sc(i,t))&&(r[i]=n[i]);return r}function eh(t,e){const n=th(t,e);for(const r in t)if(lc(t[r])||lc(e[r])){n["x"===r||"y"===r?"attr"+r.toUpperCase():r]=t[r]}return n}function nh(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof e&&(e=e(void 0!==n?n:t.custom,r,i)),"string"===typeof e&&(e=t.variants&&t.variants[e]),"function"===typeof e&&(e=e(void 0!==n?n:t.custom,r,i)),e}const rh=t=>Array.isArray(t),ih=t=>Boolean(t&&"object"===typeof t&&t.mix&&t.toValue),oh=t=>rh(t)?t[t.length-1]||0:t;function ah(t){const e=lc(t)?t.get():t;return ih(e)?e.toValue():e}const sh=e=>(n,r)=>{const i=(0,t.useContext)(Mu),o=(0,t.useContext)(Au),a=()=>function(t,e,n,r){let{scrapeMotionValuesFromProps:i,createRenderState:o,onMount:a}=t;const s={latestValues:lh(e,n,r,i),renderState:o()};return a&&(s.mount=t=>a(e,t,s)),s}(e,n,i,o);return r?a():Wu(a)};function lh(t,e,n,r){const i={},o=r(t,{});for(const d in o)i[d]=ah(o[d]);let{initial:a,animate:s}=t;const l=Uu(t),u=Vu(t);e&&u&&!l&&!1!==t.inherit&&(void 0===a&&(a=e.initial),void 0===s&&(s=e.animate));let c=!!n&&!1===n.initial;c=c||!1===a;const h=c?s:a;if(h&&"boolean"!==typeof h&&!zu(h)){(Array.isArray(h)?h:[h]).forEach((e=>{const n=nh(t,e);if(!n)return;const{transitionEnd:r,transition:o,...a}=n;for(const t in a){let e=a[t];if(Array.isArray(e)){e=e[c?e.length-1:0]}null!==e&&(i[t]=e)}for(const t in r)i[t]=r[t]}))}return i}const uh={useVisualState:sh({scrapeMotionValuesFromProps:eh,createRenderState:$c,onMount:(t,e,n)=>{let{renderState:r,latestValues:i}=n;try{r.dimensions="function"===typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(o){r.dimensions={x:0,y:0,width:0,height:0}}Yc(r,i,{enableHardwareAcceleration:!1},Wc(e.tagName),t.transformTemplate),Jc(e,r)}})},ch={useVisualState:sh({scrapeMotionValuesFromProps:th,createRenderState:Rc})};function hh(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const dh=t=>"mouse"===t.pointerType?"number"!==typeof t.button||t.button<=0:!1!==t.isPrimary;function ph(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const fh=t=>e=>dh(e)&&t(e,ph(e));function mh(t,e,n,r){return hh(t,e,fh(n),r)}const gh=(t,e)=>n=>e(t(n)),yh=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(gh)};function vh(t){let e=null;return()=>{const n=()=>{e=null};return null===e&&(e=t,n)}}const _h=vh("dragHorizontal"),bh=vh("dragVertical");function xh(t){let e=!1;if("y"===t)e=bh();else if("x"===t)e=_h();else{const t=_h(),n=bh();t&&n?e=()=>{t(),n()}:(t&&t(),n&&n())}return e}function wh(){const t=xh(!0);return!t||(t(),!1)}class Eh{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Sh(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End");return mh(t.current,n,((n,i)=>{if("touch"===n.type||wh())return;const o=t.getProps();t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",e),o[r]&&o[r](n,i)}),{passive:!t.getProps()[r]})}const Ch=(t,e)=>!!e&&(t===e||Ch(t,e.parentElement)),Th=t=>t;function Ih(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,ph(n))}const kh=new WeakMap,Ah=new WeakMap,Ph=t=>{const e=kh.get(t.target);e&&e(t)},Dh=t=>{t.forEach(Ph)};function Mh(t,e,n){const r=function(t){let{root:e,...n}=t;const r=e||document;Ah.has(r)||Ah.set(r,{});const i=Ah.get(r),o=JSON.stringify(n);return i[o]||(i[o]=new IntersectionObserver(Dh,{root:e,...n})),i[o]}(e);return kh.set(t,n),r.observe(t),()=>{kh.delete(t),r.unobserve(t)}}const Oh={some:0,all:1};const Rh={inView:{Feature:class extends Eh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:r="some",once:i}=t,o={root:e?e.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:Oh[r]};return Mh(this.node.current,o,(t=>{const{isIntersecting:e}=t;if(this.isInView===e)return;if(this.isInView=e,i&&!e&&this.hasEnteredView)return;e&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",e);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),o=e?n:r;o&&o(t)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:t,prevProps:e}=this.node,n=["amount","margin","root"].some(function(t){let{viewport:e={}}=t,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=>e[t]!==n[t]}(t,e));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Eh{constructor(){super(...arguments),this.removeStartListeners=Th,this.removeEndListeners=Th,this.removeAccessibleListeners=Th,this.startPointerPress=(t,e)=>{if(this.removeEndListeners(),this.isPressing)return;const n=this.node.getProps(),r=mh(window,"pointerup",((t,e)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:r}=this.node.getProps();Ch(this.node.current,t.target)?n&&n(t,e):r&&r(t,e)}),{passive:!(n.onTap||n.onPointerUp)}),i=mh(window,"pointercancel",((t,e)=>this.cancelPress(t,e)),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=yh(r,i),this.startPress(t,e)},this.startAccessiblePress=()=>{const t=hh(this.node.current,"keydown",(t=>{if("Enter"!==t.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=hh(this.node.current,"keyup",(t=>{"Enter"===t.key&&this.checkPressEnd()&&Ih("up",this.node.getProps().onTap)})),Ih("down",((t,e)=>{this.startPress(t,e)}))})),e=hh(this.node.current,"blur",(()=>{this.isPressing&&Ih("cancel",((t,e)=>this.cancelPress(t,e)))}));this.removeAccessibleListeners=yh(t,e)}}startPress(t,e){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&n(t,e)}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!wh()}cancelPress(t,e){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&n(t,e)}mount(){const t=this.node.getProps(),e=mh(this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=hh(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=yh(e,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends Eh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch(e){t=!0}t&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=yh(hh(this.node.current,"focus",(()=>this.onFocus())),hh(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends Eh{mount(){this.unmount=yh(Sh(this.node,!0),Sh(this.node,!1))}unmount(){}}}};function Nh(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Lh=t=>/^\-?\d*\.?\d+$/.test(t),Fh=t=>/^0[^.\s]+$/.test(t),zh={delta:0,timestamp:0},Bh=1/60*1e3,jh="undefined"!==typeof performance?()=>performance.now():()=>Date.now(),Uh="undefined"!==typeof window?t=>window.requestAnimationFrame(t):t=>setTimeout((()=>t(jh())),Bh);let Vh=!0,qh=!1,Gh=!1;const Yh=["read","update","preRender","render","postRender"],$h=Yh.reduce(((t,e)=>(t[e]=function(t){let e=[],n=[],r=0,i=!1,o=!1;const a=new WeakSet,s={schedule:function(t){const o=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,s=o?e:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.add(t),-1===s.indexOf(t)&&(s.push(t),o&&i&&(r=e.length)),t},cancel:t=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1),a.delete(t)},process:l=>{if(i)o=!0;else{if(i=!0,[e,n]=[n,e],n.length=0,r=e.length,r)for(let n=0;n<r;n++){const r=e[n];r(l),a.has(r)&&(s.schedule(r),t())}i=!1,o&&(o=!1,s.process(l))}}};return s}((()=>qh=!0)),t)),{}),Wh=Yh.reduce(((t,e)=>{const n=$h[e];return t[e]=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return qh||Qh(),n.schedule(t,e,r)},t}),{}),Hh=Yh.reduce(((t,e)=>(t[e]=$h[e].cancel,t)),{}),Xh=Yh.reduce(((t,e)=>(t[e]=()=>$h[e].process(zh),t)),{}),Zh=t=>$h[t].process(zh),Kh=t=>{qh=!1,zh.delta=Vh?Bh:Math.max(Math.min(t-zh.timestamp,40),1),zh.timestamp=t,Gh=!0,Yh.forEach(Zh),Gh=!1,qh&&(Vh=!1,Uh(Kh))},Qh=()=>{qh=!0,Vh=!0,Gh||Uh(Kh)};function Jh(t,e){-1===t.indexOf(e)&&t.push(e)}function td(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class ed{constructor(){this.subscriptions=[]}add(t){return Jh(this.subscriptions,t),()=>td(this.subscriptions,t)}notify(t,e,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](t,e,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function nd(t,e){return e?t*(1e3/e):0}class rd{constructor(t){var e=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;this.version="10.0.2",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.prev=e.current,e.current=t;const{delta:r,timestamp:i}=zh;e.lastUpdated!==i&&(e.timeDelta=r,e.lastUpdated=i,Wh.postRender(e.scheduleVelocityCheck)),e.prev!==e.current&&e.events.change&&e.events.change.notify(e.current),e.events.velocityChange&&e.events.velocityChange.notify(e.getVelocity()),n&&e.events.renderRequest&&e.events.renderRequest.notify(e.current)},this.scheduleVelocityCheck=()=>Wh.postRender(this.velocityCheck),this.velocityCheck=t=>{let{timestamp:e}=t;e!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=(r=this.current,!isNaN(parseFloat(r))),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new ed);const n=this.events[t].add(e);return"change"===t?()=>{n(),Wh.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)}setWithVelocity(t,e,n){this.set(e),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?nd(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise((e=>{this.hasAnimated=!0,this.animation=t(e)||null,this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){this.animation=null}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function id(t,e){return new rd(t,e)}const od=(t,e)=>n=>Boolean(Ec(n)&&wc.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),ad=(t,e,n)=>r=>{if(!Ec(r))return r;const[i,o,a,s]=r.match(bc);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(a),alpha:void 0!==s?parseFloat(s):1}},sd={...gc,transform:t=>Math.round((t=>mc(0,255,t))(t))},ld={test:od("rgb","red"),parse:ad("red","green","blue"),transform:t=>{let{red:e,green:n,blue:r,alpha:i=1}=t;return"rgba("+sd.transform(e)+", "+sd.transform(n)+", "+sd.transform(r)+", "+_c(yc.transform(i))+")"}};const ud={test:od("#"),parse:function(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:ld.transform},cd={test:od("hsl","hue"),parse:ad("hue","saturation","lightness"),transform:t=>{let{hue:e,saturation:n,lightness:r,alpha:i=1}=t;return"hsla("+Math.round(e)+", "+Tc.transform(_c(n))+", "+Tc.transform(_c(r))+", "+_c(yc.transform(i))+")"}},hd={test:t=>ld.test(t)||ud.test(t)||cd.test(t),parse:t=>ld.test(t)?ld.parse(t):cd.test(t)?cd.parse(t):ud.parse(t),transform:t=>Ec(t)?t:t.hasOwnProperty("red")?ld.transform(t):cd.transform(t)},dd="${c}",pd="${n}";function fd(t){"number"===typeof t&&(t=`${t}`);const e=[];let n=0,r=0;const i=t.match(xc);i&&(n=i.length,t=t.replace(xc,dd),e.push(...i.map(hd.parse)));const o=t.match(bc);return o&&(r=o.length,t=t.replace(bc,pd),e.push(...o.map(gc.parse))),{values:e,numColors:n,numNumbers:r,tokenised:t}}function md(t){return fd(t).values}function gd(t){const{values:e,numColors:n,tokenised:r}=fd(t),i=e.length;return t=>{let e=r;for(let r=0;r<i;r++)e=e.replace(r<n?dd:pd,r<n?hd.transform(t[r]):_c(t[r]));return e}}const yd=t=>"number"===typeof t?0:t;const vd={test:function(t){var e,n;return isNaN(t)&&Ec(t)&&((null===(e=t.match(bc))||void 0===e?void 0:e.length)||0)+((null===(n=t.match(xc))||void 0===n?void 0:n.length)||0)>0},parse:md,createTransformer:gd,getAnimatableNone:function(t){const e=md(t);return gd(t)(e.map(yd))}},_d=new Set(["brightness","contrast","saturate","opacity"]);function bd(t){const[e,n]=t.slice(0,-1).split("(");if("drop-shadow"===e)return t;const[r]=n.match(bc)||[];if(!r)return t;const i=n.replace(r,"");let o=_d.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const xd=/([a-z-]*)\(.*?\)/g,wd={...vd,getAnimatableNone:t=>{const e=t.match(xd);return e?e.map(bd).join(" "):t}},Ed={...Mc,color:hd,backgroundColor:hd,outlineColor:hd,fill:hd,stroke:hd,borderColor:hd,borderTopColor:hd,borderRightColor:hd,borderBottomColor:hd,borderLeftColor:hd,filter:wd,WebkitFilter:wd},Sd=t=>Ed[t];function Cd(t,e){let n=Sd(t);return n!==wd&&(n=vd),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Td=t=>e=>e.test(t),Id=[gc,Ic,Tc,Cc,Ac,kc,{test:t=>"auto"===t,parse:t=>t}],kd=t=>Id.find(Td(t)),Ad=[...Id,hd,vd],Pd=t=>Ad.find(Td(t));function Dd(t,e,n){const r=t.getProps();return nh(r,e,void 0!==n?n:r.custom,function(t){const e={};return t.values.forEach(((t,n)=>e[n]=t.get())),e}(t),function(t){const e={};return t.values.forEach(((t,n)=>e[n]=t.getVelocity())),e}(t))}function Md(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,id(n))}function Od(t,e){const n=Dd(t,e);let{transitionEnd:r={},transition:i={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...r};for(const a in o){Md(t,a,oh(o[a]))}}function Rd(t,e){if(!e)return;return(e[t]||e.default||e).from}function Nd(t){return Boolean(lc(t)&&t.add)}const Ld="data-"+Zc("framerAppearId");let Fd=Th,zd=Th;const Bd=t=>1e3*t,jd={current:!1},Ud=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Vd=t=>e=>1-t(1-e),qd=t=>t*t,Gd=Vd(qd),Yd=Ud(qd),$d=(t,e,n)=>-n*t+n*e+t;function Wd(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}const Hd=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},Xd=[ud,ld,cd],Zd=t=>Xd.find((e=>e.test(t)));function Kd(t){const e=Zd(t);zd(Boolean(e),`'${t}' is not an animatable color. Use the equivalent color code instead.`);let n=e.parse(t);return e===cd&&(n=function(t){let{hue:e,saturation:n,lightness:r,alpha:i}=t;e/=360,n/=100,r/=100;let o=0,a=0,s=0;if(n){const t=r<.5?r*(1+n):r+n-r*n,i=2*r-t;o=Wd(i,t,e+1/3),a=Wd(i,t,e),s=Wd(i,t,e-1/3)}else o=a=s=r;return{red:Math.round(255*o),green:Math.round(255*a),blue:Math.round(255*s),alpha:i}}(n)),n}const Qd=(t,e)=>{const n=Kd(t),r=Kd(e),i={...n};return t=>(i.red=Hd(n.red,r.red,t),i.green=Hd(n.green,r.green,t),i.blue=Hd(n.blue,r.blue,t),i.alpha=$d(n.alpha,r.alpha,t),ld.transform(i))};function Jd(t,e){return"number"===typeof t?n=>$d(t,e,n):hd.test(t)?Qd(t,e):np(t,e)}const tp=(t,e)=>{const n=[...t],r=n.length,i=t.map(((t,n)=>Jd(t,e[n])));return t=>{for(let e=0;e<r;e++)n[e]=i[e](t);return n}},ep=(t,e)=>{const n={...t,...e},r={};for(const i in n)void 0!==t[i]&&void 0!==e[i]&&(r[i]=Jd(t[i],e[i]));return t=>{for(const e in r)n[e]=r[e](t);return n}},np=(t,e)=>{const n=vd.createTransformer(e),r=fd(t),i=fd(e);return r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?yh(tp(r.values,i.values),n):(Fd(!0,`Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),n=>`${n>0?e:t}`)},rp=(t,e,n)=>{const r=e-t;return 0===r?1:(n-t)/r},ip=(t,e)=>n=>$d(t,e,n);function op(t,e,n){const r=[],i=n||function(t){return"number"===typeof t?ip:"string"===typeof t?hd.test(t)?Qd:np:Array.isArray(t)?tp:"object"===typeof t?ep:ip}(t[0]),o=t.length-1;for(let a=0;a<o;a++){let n=i(t[a],t[a+1]);if(e){const t=Array.isArray(e)?e[a]:e;n=yh(t,n)}r.push(n)}return r}function ap(t,e){let{clamp:n=!0,ease:r,mixer:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=t.length;zd(o===e.length,"Both input and output ranges must be the same length"),zd(!r||!Array.isArray(r)||r.length===o-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=op(e,r,i),s=a.length,l=e=>{let n=0;if(s>1)for(;n<t.length-2&&!(e<t[n+1]);n++);const r=rp(t[n],t[n+1],e);return a[n](r)};return n?e=>l(mc(t[0],t[o-1],e)):l}function sp(t){const e=[0];return function(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=rp(0,e,r);t.push($d(n,1,i))}}(e,t.length-1),e}const lp=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,up=1e-7,cp=12;function hp(t,e,n,r){if(t===e&&n===r)return Th;const i=e=>function(t,e,n,r,i){let o,a,s=0;do{a=e+(n-e)/2,o=lp(a,r,i)-t,o>0?n=a:e=a}while(Math.abs(o)>up&&++s<cp);return a}(e,0,1,t,n);return t=>0===t||1===t?t:lp(i(t),e,r)}const dp=t=>1-Math.sin(Math.acos(t)),pp=Vd(dp),fp=Ud(pp),mp=hp(.33,1.53,.69,.99),gp=Vd(mp),yp=Ud(gp),vp={linear:Th,easeIn:qd,easeInOut:Yd,easeOut:Gd,circIn:dp,circInOut:fp,circOut:pp,backIn:gp,backInOut:yp,backOut:mp,anticipate:t=>(t*=2)<1?.5*gp(t):.5*(2-Math.pow(2,-10*(t-1)))},_p=t=>{if(Array.isArray(t)){zd(4===t.length,"Cubic bezier arrays must contain four numerical values.");const[e,n,r,i]=t;return hp(e,n,r,i)}return"string"===typeof t?(zd(void 0!==vp[t],`Invalid easing type '${t}'`),vp[t]):t},bp=t=>Array.isArray(t)&&"number"!==typeof t[0];function xp(t){let{keyframes:e,ease:n=Yd,times:r,duration:i=300}=t;e=[...e];const o=bp(n)?n.map(_p):_p(n),a={done:!1,value:e[0]},s=function(t,e){return t.map((t=>t*e))}(r&&r.length===e.length?r:sp(e),i);function l(){return ap(s,e,{ease:Array.isArray(o)?o:(t=e,n=o,t.map((()=>n||Yd)).splice(0,t.length-1))});var t,n}let u=l();return{next:t=>(a.value=u(t),a.done=t>=i,a),flipTarget:()=>{e.reverse(),u=l()}}}const wp=.001,Ep=.01,Sp=10,Cp=.05,Tp=1;function Ip(t){let e,n,{duration:r=800,bounce:i=.25,velocity:o=0,mass:a=1}=t;Fd(r<=1e3*Sp,"Spring duration must be 10 seconds or less");let s=1-i;s=mc(Cp,Tp,s),r=mc(Ep,Sp,r/1e3),s<1?(e=t=>{const e=t*s,n=e*r,i=e-o,a=Ap(t,s),l=Math.exp(-n);return wp-i/a*l},n=t=>{const n=t*s*r,i=n*o+o,a=Math.pow(s,2)*Math.pow(t,2)*r,l=Math.exp(-n),u=Ap(Math.pow(t,2),s);return(-e(t)+wp>0?-1:1)*((i-a)*l)/u}):(e=t=>Math.exp(-t*r)*((t-o)*r+1)-wp,n=t=>Math.exp(-t*r)*(r*r*(o-t)));const l=function(t,e,n){let r=n;for(let i=1;i<kp;i++)r-=t(r)/e(r);return r}(e,n,5/r);if(r*=1e3,isNaN(l))return{stiffness:100,damping:10,duration:r};{const t=Math.pow(l,2)*a;return{stiffness:t,damping:2*s*Math.sqrt(a*t),duration:r}}}const kp=12;function Ap(t,e){return t*Math.sqrt(1-e*e)}const Pp=["duration","bounce"],Dp=["stiffness","damping","mass"];function Mp(t,e){return e.some((e=>void 0!==t[e]))}const Op=5;function Rp(t){let{keyframes:e,restDelta:n,restSpeed:r,...i}=t,o=e[0],a=e[e.length-1];const s={done:!1,value:o},{stiffness:l,damping:u,mass:c,velocity:h,duration:d,isResolvedFromDuration:p}=function(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Mp(t,Dp)&&Mp(t,Pp)){const n=Ip(t);e={...e,...n,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}(i);let f=Np,m=h?-h/1e3:0;const g=u/(2*Math.sqrt(l*c));function y(){const t=a-o,e=Math.sqrt(l/c)/1e3,i=Math.abs(t)<5;if(r||(r=i?.01:2),n||(n=i?.005:.5),g<1){const n=Ap(e,g);f=r=>{const i=Math.exp(-g*e*r);return a-i*((m+g*e*t)/n*Math.sin(n*r)+t*Math.cos(n*r))}}else if(1===g)f=n=>a-Math.exp(-e*n)*(t+(m+e*t)*n);else{const n=e*Math.sqrt(g*g-1);f=r=>{const i=Math.exp(-g*e*r),o=Math.min(n*r,300);return a-i*((m+g*e*t)*Math.sinh(o)+n*t*Math.cosh(o))/n}}}return y(),{next:t=>{const e=f(t);if(p)s.done=t>=d;else{let i=m;if(0!==t)if(g<1){const n=Math.max(0,t-Op);i=nd(e-f(n),t-n)}else i=0;const o=Math.abs(i)<=r,l=Math.abs(a-e)<=n;s.done=o&&l}return s.value=s.done?a:e,s},flipTarget:()=>{m=-m,[o,a]=[a,o],y()}}}Rp.needsInterpolation=(t,e)=>"string"===typeof t||"string"===typeof e;const Np=t=>0;const Lp={decay:function(t){let{keyframes:e=[0],velocity:n=0,power:r=.8,timeConstant:i=350,restDelta:o=.5,modifyTarget:a}=t;const s=e[0],l={done:!1,value:s};let u=r*n;const c=s+u,h=void 0===a?c:a(c);return h!==c&&(u=h-s),{next:t=>{const e=-u*Math.exp(-t/i);return l.done=!(e>o||e<-o),l.value=l.done?h:h+e,l},flipTarget:()=>{}}},keyframes:xp,tween:xp,spring:Rp};function Fp(t,e){return t-e-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)}const zp=t=>{const e=e=>{let{delta:n}=e;return t(n)};return{start:()=>Wh.update(e,!0),stop:()=>Hh.update(e)}};function Bp(t){let{duration:e,driver:n=zp,elapsed:r=0,repeat:i=0,repeatType:o="loop",repeatDelay:a=0,keyframes:s,autoplay:l=!0,onPlay:u,onStop:c,onComplete:h,onRepeat:d,onUpdate:p,type:f="keyframes",...m}=t;const g=r;let y,v,_=0,b=e,x=!1,w=!0;const E=Lp[s.length>2?"keyframes":f]||xp,S=s[0],C=s[s.length-1];let T={done:!1,value:S};const{needsInterpolation:I}=E;I&&I(S,C)&&(v=ap([0,100],[S,C],{clamp:!1}),s=[0,100]);const k=E({...m,duration:e,keyframes:s});function A(){_++,"reverse"===o?(w=_%2===0,r=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?e-(t-e)+n:Fp(e+-t,e,n)}(r,b,a,w)):(r=Fp(r,b,a),"mirror"===o&&k.flipTarget()),x=!1,d&&d()}function P(t){w||(t=-t),r+=t,x||(T=k.next(Math.max(0,r)),v&&(T.value=v(T.value)),x=w?T.done:r<=0),p&&p(T.value),x&&(0===_&&(b=void 0!==b?b:r),_<i?function(t,e,n,r){return r?t>=e+n:t<=-n}(r,b,a,w)&&A():(y&&y.stop(),h&&h()))}return l&&(u&&u(),y=n(P),y.start()),{stop:()=>{c&&c(),y&&y.stop()},set currentTime(t){r=g,P(t)},sample:function(t){if(r=g,arguments.length>1&&void 0!==arguments[1]&&arguments[1])return P(t),T;const n=e&&"number"===typeof e?Math.max(.5*e,50):50;let i=0;for(P(0);i<=t;){const e=t-i;P(Math.min(e,n)),i+=n}return T}}}const jp=t=>{let[e,n,r,i]=t;return`cubic-bezier(${e}, ${n}, ${r}, ${i})`},Up={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:jp([0,.65,.55,1]),circOut:jp([.55,0,1,.45]),backIn:jp([.31,.01,.66,-.59]),backOut:jp([.33,1.53,.69,.99])};function Vp(t){if(t)return Array.isArray(t)?jp(t):Up[t]}const qp={waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate")},Gp={},Yp={};for(const n in qp)Yp[n]=()=>(void 0===Gp[n]&&(Gp[n]=qp[n]()),Gp[n]);const $p=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Wp=10,Hp=(t,e)=>{return"spring"===e.type||"backgroundColor"===t||!(!(n=e.ease)||Array.isArray(n)||"string"===typeof n&&Up[n]);var n};function Xp(t,e,n){let{onUpdate:r,onComplete:i,...o}=n;if(!(Yp.waapi()&&$p.has(e)&&!o.repeatDelay&&"mirror"!==o.repeatType&&0!==o.damping))return!1;let{keyframes:a,duration:s=300,elapsed:l=0,ease:u}=o;if(Hp(e,o)){const t=Bp({...o,repeat:0,elapsed:0});let e={done:!1,value:a[0]};const n=[];let r=0;for(;!e.done&&r<2e4;)e=t.sample(r,!0),n.push(e.value),r+=Wp;a=n,s=r-Wp,u="linear"}const c=function(t,e,n){let{delay:r=0,duration:i,repeat:o=0,repeatType:a="loop",ease:s,times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const u={[e]:n};return l&&(u.offset=l),t.animate(u,{delay:r,duration:i,easing:Vp(s),fill:"both",iterations:o+1,direction:"reverse"===a?"alternate":"normal"})}(t.owner.current,e,a,{...o,delay:-l,duration:s,ease:u});return c.onfinish=()=>{t.set(function(t,e){let{repeat:n,repeatType:r="loop"}=e;return t[n&&"loop"!==r&&n%2===1?0:t.length-1]}(a,o)),Wh.update((()=>c.cancel())),i&&i()},{get currentTime(){return c.currentTime||0},set currentTime(t){c.currentTime=t},stop:()=>{const{currentTime:e}=c;if(e){const n=Bp({...o,autoplay:!1});t.setWithVelocity(n.sample(e-Wp).value,n.sample(e).value,Wp)}Wh.update((()=>c.cancel()))}}}function Zp(t,e){const n=performance.now(),r=i=>{let{timestamp:o}=i;const a=o-n;a>=e&&(Hh.read(r),t(a-e))};return Wh.read(r,!0),()=>Hh.read(r)}function Kp(t){let{keyframes:e,elapsed:n,onUpdate:r,onComplete:i}=t;const o=()=>{r&&r(e[e.length-1]),i&&i()};return n?{stop:Zp(o,-n)}:o()}const Qp={type:"spring",stiffness:500,damping:25,restSpeed:10},Jp={type:"keyframes",duration:.8},tf={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ef=(t,e)=>{let{keyframes:n}=e;return n.length>2?Jp:ac.has(t)?t.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:Qp:tf},nf=(t,e)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!vd.test(e)||e.startsWith("url(")));function rf(t){return 0===t||"string"===typeof t&&0===parseFloat(t)&&-1===t.indexOf(" ")}function of(t){return"number"===typeof t?0:Cd("",t)}function af(t,e){return t[e]||t.default||t}const sf=function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i=>{const o=af(r,t)||{},a=o.delay||r.delay||0;let{elapsed:s=0}=r;s-=Bd(a);const l=function(t,e,n,r){const i=nf(e,n);let o=void 0!==r.from?r.from:t.get();return"none"===o&&i&&"string"===typeof n?o=Cd(e,n):rf(o)&&"string"===typeof n?o=of(n):!Array.isArray(n)&&rf(n)&&"string"===typeof o&&(n=of(o)),Array.isArray(n)?(null===n[0]&&(n[0]=o),n):[o,n]}(e,t,n,o),u=l[0],c=l[l.length-1],h=nf(t,u),d=nf(t,c);Fd(h===d,`You are trying to animate ${t} from "${u}" to "${c}". ${u} is not an animatable value - to enable this animation set ${u} to a value animatable to ${c} via the \`style\` property.`);let p={keyframes:l,velocity:e.getVelocity(),...o,elapsed:s,onUpdate:t=>{e.set(t),o.onUpdate&&o.onUpdate(t)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(!h||!d||jd.current||!1===o.type)return Kp(p);if("inertia"===o.type)return function(t){let{keyframes:e,velocity:n=0,min:r,max:i,power:o=.8,timeConstant:a=750,bounceStiffness:s=500,bounceDamping:l=10,restDelta:u=1,modifyTarget:c,driver:h,onUpdate:d,onComplete:p,onStop:f}=t;const m=e[0];let g;function y(t){return void 0!==r&&t<r||void 0!==i&&t>i}function v(t){return void 0===r?i:void 0===i||Math.abs(r-t)<Math.abs(i-t)?r:i}function _(t){g&&g.stop(),g=Bp({keyframes:[0,1],velocity:0,...t,driver:h,onUpdate:e=>{d&&d(e),t.onUpdate&&t.onUpdate(e)},onComplete:p,onStop:f})}function b(t){_({type:"spring",stiffness:s,damping:l,restDelta:u,...t})}if(y(m))b({velocity:n,keyframes:[m,v(m)]});else{let t=o*n+m;"undefined"!==typeof c&&(t=c(t));const e=v(t),i=e===r?-1:1;let s,l;const h=t=>{s=l,l=t,n=nd(t-s,zh.delta),(1===i&&t>e||-1===i&&t<e)&&b({keyframes:[t,e],velocity:n})};_({type:"decay",keyframes:[m,0],velocity:n,timeConstant:a,power:o,restDelta:u,modifyTarget:c,onUpdate:y(t)?h:void 0})}return{stop:()=>g&&g.stop()}}(p);if(function(t){let{when:e,delay:n,delayChildren:r,staggerChildren:i,staggerDirection:o,repeat:a,repeatType:s,repeatDelay:l,from:u,elapsed:c,...h}=t;return!!Object.keys(h).length}(o)||(p={...p,...ef(t,p)}),p.duration&&(p.duration=Bd(p.duration)),p.repeatDelay&&(p.repeatDelay=Bd(p.repeatDelay)),e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const n=Xp(e,t,p);if(n)return n}return Bp(p)}};function lf(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Dd(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>uf(t,r,n):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:o=0,staggerChildren:a,staggerDirection:s}=i;return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5?arguments[5]:void 0;const a=[],s=(t.variantChildren.size-1)*r,l=1===i?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return s-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(t.variantChildren).sort(cf).forEach(((t,r)=>{t.notify("AnimationStart",e),a.push(lf(t,e,{...o,delay:n+l(r)}).then((()=>t.notify("AnimationComplete",e))))})),Promise.all(a)}(t,e,o+r,a,s,n)}:()=>Promise.resolve(),{when:s}=i;if(s){const[t,e]="beforeChildren"===s?[o,a]:[a,o];return t().then(e)}return Promise.all([o(),a(n.delay)])}function uf(t,e){let{delay:n=0,transitionOverride:r,type:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:o=t.getDefaultTransition(),transitionEnd:a,...s}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(o=r);const u=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const h in s){const e=t.getValue(h),r=s[h];if(!e||void 0===r||c&&hf(c,h))continue;const i={delay:n,elapsed:0,...o};if(window.HandoffAppearAnimations&&!e.hasAnimated){const n=t.getProps()[Ld];n&&(i.elapsed=window.HandoffAppearAnimations(n,h,e,Wh))}let a=e.start(sf(h,e,r,t.shouldReduceMotion&&ac.has(h)?{type:!1}:i));Nd(l)&&(l.add(h),a=a.then((()=>l.remove(h)))),u.push(a)}return Promise.all(u).then((()=>{a&&Od(t,a)}))}function cf(t,e){return t.sortNodePosition(e)}function hf(t,e){let{protectedKeys:n,needsAnimating:r}=t;const i=n.hasOwnProperty(e)&&!0!==r[e];return r[e]=!1,i}const df=[...Bu].reverse(),pf=Bu.length;function ff(t){return e=>Promise.all(e.map((e=>{let{animation:n,options:r}=e;return function(t,e){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t.notify("AnimationStart",e),Array.isArray(e)){const i=e.map((e=>lf(t,e,r)));n=Promise.all(i)}else if("string"===typeof e)n=lf(t,e,r);else{const i="function"===typeof e?Dd(t,e,r.custom):e;n=uf(t,i,r)}return n.then((()=>t.notify("AnimationComplete",e)))}(t,n,r)})))}function mf(t){let e=ff(t);const n={animate:yf(!0),whileInView:yf(),whileHover:yf(),whileTap:yf(),whileDrag:yf(),whileFocus:yf(),exit:yf()};let r=!0;const i=(e,n)=>{const r=Dd(t,n);if(r){const{transition:t,transitionEnd:n,...i}=r;e={...e,...i,...n}}return e};function o(o,a){const s=t.getProps(),l=t.getVariantContext(!0)||{},u=[],c=new Set;let h={},d=1/0;for(let e=0;e<pf;e++){const p=df[e],f=n[p],m=void 0!==s[p]?s[p]:l[p],g=Fu(m),y=p===a?f.isActive:null;!1===y&&(d=e);let v=m===l[p]&&m!==s[p]&&g;if(v&&r&&t.manuallyAnimateOnMount&&(v=!1),f.protectedKeys={...h},!f.isActive&&null===y||!m&&!f.prevProp||zu(m)||"boolean"===typeof m)continue;const _=gf(f.prevProp,m);let b=_||p===a&&f.isActive&&!v&&g||e>d&&g;const x=Array.isArray(m)?m:[m];let w=x.reduce(i,{});!1===y&&(w={});const{prevResolvedValues:E={}}=f,S={...E,...w},C=t=>{b=!0,c.delete(t),f.needsAnimating[t]=!0};for(const t in S){const e=w[t],n=E[t];h.hasOwnProperty(t)||(e!==n?rh(e)&&rh(n)?!Nh(e,n)||_?C(t):f.protectedKeys[t]=!0:void 0!==e?C(t):c.add(t):void 0!==e&&c.has(t)?C(t):f.protectedKeys[t]=!0)}f.prevProp=m,f.prevResolvedValues=w,f.isActive&&(h={...h,...w}),r&&t.blockInitialAnimation&&(b=!1),b&&!v&&u.push(...x.map((t=>({animation:t,options:{type:p,...o}}))))}if(c.size){const e={};c.forEach((n=>{const r=t.getBaseTarget(n);void 0!==r&&(e[n]=r)})),u.push({animation:e})}let p=Boolean(u.length);return r&&!1===s.initial&&!t.manuallyAnimateOnMount&&(p=!1),r=!1,p?e(u):Promise.resolve()}return{animateChanges:o,setActive:function(e,r,i){var a;if(n[e].isActive===r)return Promise.resolve();null===(a=t.variantChildren)||void 0===a||a.forEach((t=>{var n;return null===(n=t.animationState)||void 0===n?void 0:n.setActive(e,r)})),n[e].isActive=r;const s=o(i,e);for(const t in n)n[t].protectedKeys={};return s},setAnimateFunction:function(n){e=n(t)},getState:()=>n}}function gf(t,e){return"string"===typeof e?e!==t:!!Array.isArray(e)&&!Nh(e,t)}function yf(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let vf=0;const _f={animation:{Feature:class extends Eh{constructor(t){super(t),t.animationState||(t.animationState=mf(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),zu(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends Eh{constructor(){super(...arguments),this.id=vf++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e,custom:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t,{custom:null!==n&&void 0!==n?n:this.node.getProps().custom});e&&!t&&i.then((()=>e(this.id)))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}}},bf=(t,e)=>Math.abs(t-e);class xf{constructor(t,e){let{transformPagePoint:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const t=Sf(this.lastMoveEventInfo,this.history),e=null!==this.startEvent,n=function(t,e){const n=bf(t.x,e.x),r=bf(t.y,e.y);return Math.sqrt(n**2+r**2)}(t.offset,{x:0,y:0})>=3;if(!e&&!n)return;const{point:r}=t,{timestamp:i}=zh;this.history.push({...r,timestamp:i});const{onStart:o,onMove:a}=this.handlers;e||(o&&o(this.lastMoveEvent,t),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,t)},this.handlePointerMove=(t,e)=>{this.lastMoveEvent=t,this.lastMoveEventInfo=wf(e,this.transformPagePoint),Wh.update(this.updatePoint,!0)},this.handlePointerUp=(t,e)=>{if(this.end(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const{onEnd:n,onSessionEnd:r}=this.handlers,i=Sf("pointercancel"===t.type?this.lastMoveEventInfo:wf(e,this.transformPagePoint),this.history);this.startEvent&&n&&n(t,i),r&&r(t,i)},!dh(t))return;this.handlers=e,this.transformPagePoint=n;const r=wf(ph(t),this.transformPagePoint),{point:i}=r,{timestamp:o}=zh;this.history=[{...i,timestamp:o}];const{onSessionStart:a}=e;a&&a(t,Sf(r,this.history)),this.removeListeners=yh(mh(window,"pointermove",this.handlePointerMove),mh(window,"pointerup",this.handlePointerUp),mh(window,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Hh.update(this.updatePoint)}}function wf(t,e){return e?{point:e(t.point)}:t}function Ef(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Sf(t,e){let{point:n}=t;return{point:n,delta:Ef(n,Tf(e)),offset:Ef(n,Cf(e)),velocity:If(e,.1)}}function Cf(t){return t[0]}function Tf(t){return t[t.length-1]}function If(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Tf(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Bd(e)));)n--;if(!r)return{x:0,y:0};const o=(i.timestamp-r.timestamp)/1e3;if(0===o)return{x:0,y:0};const a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function kf(t){return t.max-t.min}function Af(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(t-e)<=n}function Pf(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;t.origin=r,t.originPoint=$d(e.min,e.max,t.origin),t.scale=kf(n)/kf(e),(Af(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=$d(n.min,n.max,t.origin)-t.originPoint,(Af(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Df(t,e,n,r){Pf(t.x,e.x,n.x,r?r.originX:void 0),Pf(t.y,e.y,n.y,r?r.originY:void 0)}function Mf(t,e,n){t.min=n.min+e.min,t.max=t.min+kf(e)}function Of(t,e,n){t.min=e.min-n.min,t.max=t.min+kf(e)}function Rf(t,e,n){Of(t.x,e.x,n.x),Of(t.y,e.y,n.y)}function Nf(t,e,n){return{min:void 0!==e?t.min+e:void 0,max:void 0!==n?t.max+n-(t.max-t.min):void 0}}function Lf(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}const Ff=.35;function zf(t,e,n){return{min:Bf(t,e),max:Bf(t,n)}}function Bf(t,e){return"number"===typeof t?t:t[e]||0}const jf=()=>({x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}),Uf=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Vf(t){return[t("x"),t("y")]}function qf(t){let{top:e,left:n,right:r,bottom:i}=t;return{x:{min:n,max:r},y:{min:e,max:i}}}function Gf(t){return void 0===t||1===t}function Yf(t){let{scale:e,scaleX:n,scaleY:r}=t;return!Gf(e)||!Gf(n)||!Gf(r)}function $f(t){return Yf(t)||Wf(t)||t.z||t.rotate||t.rotateX||t.rotateY}function Wf(t){return Hf(t.x)||Hf(t.y)}function Hf(t){return t&&"0%"!==t}function Xf(t,e,n){return n+e*(t-n)}function Zf(t,e,n,r,i){return void 0!==i&&(t=Xf(t,i,r)),Xf(t,n,r)+e}function Kf(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;t.min=Zf(t.min,e,n,r,i),t.max=Zf(t.max,e,n,r,i)}function Qf(t,e){let{x:n,y:r}=e;Kf(t.x,n.translate,n.scale,n.originPoint),Kf(t.y,r.translate,r.scale,r.originPoint)}function Jf(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function tm(t,e){t.min=t.min+e,t.max=t.max+e}function em(t,e,n){let[r,i,o]=n;const a=void 0!==e[o]?e[o]:.5,s=$d(t.min,t.max,a);Kf(t,e[r],e[i],s,e.scale)}const nm=["x","scaleX","originX"],rm=["y","scaleY","originY"];function im(t,e){em(t.x,e,nm),em(t.y,e,rm)}function om(t,e){return qf(function(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(t.getBoundingClientRect(),e))}const am=new WeakMap;class sm{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Uf(),this.visualElement=t}start(t){let{snapToCursor:e=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;this.panSession=new xf(t,{onSessionStart:t=>{this.stopAnimation(),e&&this.snapToCursor(ph(t,"page").point)},onStart:(t,e)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=xh(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vf((t=>{let e=this.getAxisMotionValue(t).get()||0;if(Tc.test(e)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[t];if(r){e=kf(r)*(parseFloat(e)/100)}}}this.originPoint[t]=e})),i&&i(t,e);const{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},onMove:(t,e)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:o}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:a}=e;if(r&&null===this.currentDirection)return this.currentDirection=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x");return n}(a),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",e.point,a),this.updateAxis("y",e.point,a),this.visualElement.render(),o&&o(t,e)},onSessionEnd:(t,e)=>this.stop(t,e)},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(t,e){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=e;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&i(t,e)}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:r}=this.getProps();if(!n||!lm(t,r,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=function(t,e,n){let{min:r,max:i}=e;return void 0!==r&&t<r?t=n?$d(r,t,n.min):Math.max(t,r):void 0!==i&&t>i&&(t=n?$d(i,t,n.max):Math.min(t,i)),t}(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),{layout:n}=this.visualElement.projection||{},r=this.constraints;t&&Lu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!n)&&function(t,e){let{top:n,left:r,bottom:i,right:o}=e;return{x:Nf(t.x,r,o),y:Nf(t.y,n,i)}}(n.layoutBox,t),this.elastic=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ff;return!1===t?t=0:!0===t&&(t=Ff),{x:zf(t,"left","right"),y:zf(t,"top","bottom")}}(e),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Vf((t=>{this.getAxisMotionValue(t)&&(this.constraints[t]=function(t,e){const n={};return void 0!==e.min&&(n.min=e.min-t.min),void 0!==e.max&&(n.max=e.max-t.min),n}(n.layoutBox[t],this.constraints[t]))}))}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Lu(t))return!1;const n=t.current;zd(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(t,e,n){const r=om(t,n),{scroll:i}=e;return i&&(tm(r.x,i.offset.x),tm(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let o=function(t,e){return{x:Lf(t.x,e.x),y:Lf(t.y,e.y)}}(r.layout.layoutBox,i);if(e){const t=e(function(t){let{x:e,y:n}=t;return{top:n.min,right:e.max,bottom:n.max,left:e.min}}(o));this.hasMutatedConstraints=!!t,t&&(o=qf(t))}return o}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),s=this.constraints||{},l=Vf((a=>{if(!lm(a,e,this.currentDirection))return;let l=s&&s[a]||{};o&&(l={min:0,max:0});const u=r?200:1e6,c=r?40:1e7,h={type:"inertia",velocity:n?t[a]:0,bounceStiffness:u,bounceDamping:c,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(a,h)}));return Promise.all(l).then(a)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return n.start(sf(t,n,0,e))}stopAnimation(){Vf((t=>this.getAxisMotionValue(t).stop()))}getAxisMotionValue(t){const e="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),r=n[e];return r||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Vf((e=>{const{drag:n}=this.getProps();if(!lm(e,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(e);if(r&&r.layout){const{min:n,max:o}=r.layout.layoutBox[e];i.set(t[e]-$d(n,o,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!Lu(e)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Vf((t=>{const e=this.getAxisMotionValue(t);if(e){const n=e.get();r[t]=function(t,e){let n=.5;const r=kf(t),i=kf(e);return i>r?n=rp(e.min,e.max-r,t.min):r>i&&(n=rp(t.min,t.max-i,e.min)),mc(0,1,n)}({min:n,max:n},this.constraints[t])}}));const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Vf((e=>{if(!lm(e,t,null))return;const n=this.getAxisMotionValue(e),{min:i,max:o}=this.constraints[e];n.set($d(i,o,r[e]))}))}addListeners(){if(!this.visualElement.current)return;am.set(this.visualElement,this);const t=mh(this.visualElement.current,"pointerdown",(t=>{const{drag:e,dragListener:n=!0}=this.getProps();e&&n&&this.start(t)})),e=()=>{const{dragConstraints:t}=this.getProps();Lu(t)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",e);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),e();const i=hh(window,"resize",(()=>this.scalePositionWithinConstraints())),o=n.addEventListener("didUpdate",(t=>{let{delta:e,hasLayoutChanged:n}=t;this.isDragging&&n&&(Vf((t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))})),this.visualElement.render())}));return()=>{i(),t(),r(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=Ff,dragMomentum:a=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function lm(t,e,n){return(!0===e||e===t)&&(null===n||n===t)}function um(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const cm={correct:(t,e)=>{if(!e.target)return t;if("string"===typeof t){if(!Ic.test(t))return t;t=parseFloat(t)}return`${um(t,e.target.x)}% ${um(t,e.target.y)}%`}},hm=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;const dm=4;function pm(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;zd(n<=dm,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`);const[r,i]=function(t){const e=hm.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);return o?o.trim():pc(i)?pm(i,e,n+1):i}const fm="_$css",mm={correct:(t,e)=>{let{treeScale:n,projectionDelta:r}=e;const i=t,o=t.includes("var("),a=[];o&&(t=t.replace(hm,(t=>(a.push(t),fm))));const s=vd.parse(t);if(s.length>5)return i;const l=vd.createTransformer(t),u="number"!==typeof s[0]?1:0,c=r.x.scale*n.x,h=r.y.scale*n.y;s[0+u]/=c,s[1+u]/=h;const d=$d(c,h,.5);"number"===typeof s[2+u]&&(s[2+u]/=d),"number"===typeof s[3+u]&&(s[3+u]/=d);let p=l(s);if(o){let t=0;p=p.replace(fm,(()=>{const e=a[t];return t++,e}))}return p}};class gm extends t.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=t;var o;o=vm,Object.assign(ic,o),i&&(e.group&&e.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",(()=>{this.safeToRemove()})),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Hu.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:r,isPresent:i}=this.props,o=n.projection;return o?(o.isPresent=i,r||t.layoutDependency!==e||void 0===e?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Wh.postRender((()=>{const t=o.getStack();t&&t.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),!t.currentAnimation&&t.isLead()&&this.safeToRemove())}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function ym(e){const[n,r]=function(){const e=(0,t.useContext)(Au);if(null===e)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,o=(0,t.useId)();return(0,t.useEffect)((()=>i(o)),[]),!n&&r?[!1,()=>r&&r(o)]:[!0]}(),i=(0,t.useContext)(Zu);return t.createElement(gm,{...e,layoutGroup:i,switchLayoutGroup:(0,t.useContext)(Ku),isPresent:n,safeToRemove:r})}const vm={borderRadius:{...cm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:cm,borderTopRightRadius:cm,borderBottomLeftRadius:cm,borderBottomRightRadius:cm,boxShadow:mm};const _m=["TopLeft","TopRight","BottomLeft","BottomRight"],bm=_m.length,xm=t=>"string"===typeof t?parseFloat(t):t,wm=t=>"number"===typeof t||Ic.test(t);function Em(t,e){return void 0!==t[e]?t[e]:t.borderRadius}const Sm=Tm(0,.5,pp),Cm=Tm(.5,.95,Th);function Tm(t,e,n){return r=>r<t?0:r>e?1:n(rp(t,e,r))}function Im(t,e){t.min=e.min,t.max=e.max}function km(t,e){Im(t.x,e.x),Im(t.y,e.y)}function Am(t,e,n,r,i){return t=Xf(t-=e,1/n,r),void 0!==i&&(t=Xf(t,1/i,r)),t}function Pm(t,e,n,r,i){let[o,a,s]=n;!function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:t;Tc.test(e)&&(e=parseFloat(e),e=$d(a.min,a.max,e/100)-a.min);if("number"!==typeof e)return;let s=$d(o.min,o.max,r);t===o&&(s-=e),t.min=Am(t.min,e,n,s,i),t.max=Am(t.max,e,n,s,i)}(t,e[o],e[a],e[s],e.scale,r,i)}const Dm=["x","scaleX","originX"],Mm=["y","scaleY","originY"];function Om(t,e,n,r){Pm(t.x,e,Dm,n?n.x:void 0,r?r.x:void 0),Pm(t.y,e,Mm,n?n.y:void 0,r?r.y:void 0)}function Rm(t){return 0===t.translate&&1===t.scale}function Nm(t){return Rm(t.x)&&Rm(t.y)}function Lm(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function Fm(t){return kf(t.x)/kf(t.y)}class zm{constructor(){this.members=[]}add(t){Jh(this.members,t),t.scheduleRender()}remove(t){if(td(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(t){const e=this.members.findIndex((e=>t===e));if(0===e)return!1;let n;for(let r=e;r>=0;r--){const t=this.members[r];if(!1!==t.isPresent){n=t;break}}return!!n&&(this.promote(n),!0)}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach((t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((t=>{t.instance&&t.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Bm(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y;if((i||o)&&(r=`translate3d(${i}px, ${o}px, 0) `),1===e.x&&1===e.y||(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:t,rotateX:e,rotateY:i}=n;t&&(r+=`rotate(${t}deg) `),e&&(r+=`rotateX(${e}deg) `),i&&(r+=`rotateY(${i}deg) `)}const a=t.x.scale*e.x,s=t.y.scale*e.y;return 1===a&&1===s||(r+=`scale(${a}, ${s})`),r||"none"}const jm=(t,e)=>t.depth-e.depth;class Um{constructor(){this.children=[],this.isDirty=!1}add(t){Jh(this.children,t),this.isDirty=!0}remove(t){td(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(jm),this.isDirty=!1,this.children.forEach(t)}}const Vm=["","X","Y","Z"],qm=1e3;let Gm=0;const Ym={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function $m(t){let{attachResizeListener:e,defaultParent:n,measureScroll:r,checkIsScrollRoot:i,resetTransform:o}=t;return class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null===n||void 0===n?void 0:n();this.id=Gm++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{var t;Ym.totalNodes=Ym.resolvedTargetDeltas=Ym.recalculatedProjection=0,this.nodes.forEach(Xm),this.nodes.forEach(eg),this.nodes.forEach(ng),this.nodes.forEach(Zm),t=Ym,window.MotionDebug&&window.MotionDebug.record(t)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.elementId=t,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0,t&&this.root.registerPotentialNode(t,this);for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new Um)}addEventListener(t,e){return this.eventHandlers.has(t)||this.eventHandlers.set(t,new ed),this.eventHandlers.get(t).add(e)}notifyListeners(t){const e=this.eventHandlers.get(t);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e&&e.notify(...r)}hasListeners(t){return this.eventHandlers.has(t)}registerPotentialNode(t,e){this.potentialNodes.set(t,e)}mount(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.instance)return;this.isSVG=t instanceof SVGElement&&"svg"!==t.tagName,this.instance=t;const{layoutId:r,layout:i,visualElement:o}=this.options;if(o&&!o.current&&o.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.elementId&&this.root.potentialNodes.delete(this.elementId),n&&(i||r)&&(this.isLayoutDirty=!0),e){let n;const r=()=>this.root.updateBlockedByResize=!1;e(t,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=Zp(r,250),Hu.hasAnimatedSinceResize&&(Hu.hasAnimatedSinceResize=!1,this.nodes.forEach(tg))}))}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&o&&(r||i)&&this.addEventListener("didUpdate",(t=>{let{delta:e,hasLayoutChanged:n,hasRelativeTargetChanged:r,layout:i}=t;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const a=this.options.transition||o.getDefaultTransition()||lg,{onLayoutAnimationStart:s,onLayoutAnimationComplete:l}=o.getProps(),u=!this.targetLayout||!Lm(this.targetLayout,i)||r,c=!n&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||c||n&&(u||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,c);const t={...af(a,"layout"),onPlay:s,onComplete:l};(o.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else n||0!==this.animationProgress||tg(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const t=this.getStack();t&&t.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Hh.preRender(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rg),this.animationId++)}getTransformTemplate(){const{visualElement:t}=this.options;return t&&t.getProps().transformTemplate}willUpdate(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const t=this.path[i];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}const{layoutId:e,layout:n}=this.options;if(void 0===e&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),t&&this.notifyListeners("willUpdate")}didUpdate(){if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Qm);this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(ug),this.potentialNodes.clear()),this.nodes.forEach(Jm),this.nodes.forEach(Wm),this.nodes.forEach(Hm),this.clearAllSnapshots(),Xh.update(),Xh.preRender(),Xh.render())}clearAllSnapshots(){this.nodes.forEach(Km),this.sharedNodes.forEach(ig)}scheduleUpdateProjection(){Wh.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){Wh.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const t=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Uf(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:e}=this.options;e&&e.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}updateScroll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",e=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===t&&(e=!1),e&&(this.scroll={animationId:this.root.animationId,phase:t,isRoot:i(this.instance),offset:r(this.instance)})}resetTransform(){if(!o)return;const t=this.isLayoutDirty||this.shouldResetTransform,e=this.projectionDelta&&!Nm(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;t&&(e||$f(this.latestValues)||i)&&(o(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this.measurePageBox();let n=this.removeElementScroll(e);var r;return t&&(n=this.removeTransform(n)),cg((r=n).x),cg(r.y),{animationId:this.root.animationId,measuredBox:e,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:t}=this.options;if(!t)return Uf();const e=t.measureViewportBox(),{scroll:n}=this.root;return n&&(tm(e.x,n.offset.x),tm(e.y,n.offset.y)),e}removeElementScroll(t){const e=Uf();km(e,t);for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:i,options:o}=r;if(r!==this.root&&i&&o.layoutScroll){if(i.isRoot){km(e,t);const{scroll:n}=this.root;n&&(tm(e.x,-n.offset.x),tm(e.y,-n.offset.y))}tm(e.x,i.offset.x),tm(e.y,i.offset.y)}}return e}applyTransform(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Uf();km(n,t);for(let r=0;r<this.path.length;r++){const t=this.path[r];!e&&t.options.layoutScroll&&t.scroll&&t!==t.root&&im(n,{x:-t.scroll.offset.x,y:-t.scroll.offset.y}),$f(t.latestValues)&&im(n,t.latestValues)}return $f(this.latestValues)&&im(n,this.latestValues),n}removeTransform(t){const e=Uf();km(e,t);for(let n=0;n<this.path.length;n++){const t=this.path[n];if(!t.instance)continue;if(!$f(t.latestValues))continue;Yf(t.latestValues)&&t.updateSnapshot();const r=Uf();km(r,t.measurePageBox()),Om(e,t.latestValues,t.snapshot?t.snapshot.layoutBox:void 0,r)}return $f(this.latestValues)&&Om(e,this.latestValues),e}setTargetDelta(t){this.targetDelta=t,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(t){this.options={...this.options,...t,crossfade:void 0===t.crossfade||t.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}resolveTargetDelta(){var t;const e=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=e.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=e.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=e.isSharedProjectionDirty);if(!((Boolean(this.resumingFrom)||this!==e)&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:n,layoutId:r}=this.options;if(this.layout&&(n||r)){if(!this.targetDelta&&!this.relativeTarget){const t=this.getClosestProjectingParent();t&&t.layout?(this.relativeParent=t,this.relativeTarget=Uf(),this.relativeTargetOrigin=Uf(),Rf(this.relativeTargetOrigin,this.layout.layoutBox,t.layout.layoutBox),km(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var i,o,a;if(this.target||(this.target=Uf(),this.targetWithTransforms=Uf()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(i=this.target,o=this.relativeTarget,a=this.relativeParent.target,Mf(i.x,o.x,a.x),Mf(i.y,o.y,a.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):km(this.target,this.layout.layoutBox),Qf(this.target,this.targetDelta)):km(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const t=this.getClosestProjectingParent();t&&Boolean(t.resumingFrom)===Boolean(this.resumingFrom)&&!t.options.layoutScroll&&t.target?(this.relativeParent=t,this.relativeTarget=Uf(),this.relativeTargetOrigin=Uf(),Rf(this.relativeTargetOrigin,this.target,t.target),km(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ym.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Yf(this.parent.latestValues)&&!Wf(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var t;const e=this.getLead(),n=Boolean(this.resumingFrom)||this!==e;let r=!0;if((this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),r)return;const{layout:i,layoutId:o}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!o)return;km(this.layoutCorrected,this.layout.layoutBox),function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=n.length;if(!i)return;let o,a;e.x=e.y=1;for(let s=0;s<i;s++){o=n[s],a=o.projectionDelta;const i=o.instance;i&&i.style&&"contents"===i.style.display||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&im(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,Qf(t,a)),r&&$f(o.latestValues)&&im(t,o.latestValues))}e.x=Jf(e.x),e.y=Jf(e.y)}(this.layoutCorrected,this.treeScale,this.path,n);const{target:a}=e;if(!a)return;this.projectionDelta||(this.projectionDelta=jf(),this.projectionDeltaWithTransform=jf());const s=this.treeScale.x,l=this.treeScale.y,u=this.projectionTransform;Df(this.projectionDelta,this.layoutCorrected,a,this.latestValues),this.projectionTransform=Bm(this.projectionDelta,this.treeScale),this.projectionTransform===u&&this.treeScale.x===s&&this.treeScale.y===l||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",a)),Ym.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),t){const t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},o=jf();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!e;const a=Uf(),s=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),u=!l||l.members.length<=1,c=Boolean(s&&!u&&!0===this.options.crossfade&&!this.path.some(sg));let h;this.animationProgress=0,this.mixTargetDelta=e=>{const n=e/1e3;og(o.x,t.x,n),og(o.y,t.y,n),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Rf(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(t,e,n,r){ag(t.x,e.x,n.x,r),ag(t.y,e.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,a,n),h&&Lm(this.relativeTarget,h)&&(this.isProjectionDirty=!1),h||(h=Uf()),km(h,this.relativeTarget)),s&&(this.animationValues=i,function(t,e,n,r,i,o){i?(t.opacity=$d(0,void 0!==n.opacity?n.opacity:1,Sm(r)),t.opacityExit=$d(void 0!==e.opacity?e.opacity:1,0,Cm(r))):o&&(t.opacity=$d(void 0!==e.opacity?e.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let a=0;a<bm;a++){const i=`border${_m[a]}Radius`;let o=Em(e,i),s=Em(n,i);void 0===o&&void 0===s||(o||(o=0),s||(s=0),0===o||0===s||wm(o)===wm(s)?(t[i]=Math.max($d(xm(o),xm(s),r),0),(Tc.test(s)||Tc.test(o))&&(t[i]+="%")):t[i]=s)}(e.rotate||n.rotate)&&(t.rotate=$d(e.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,c,u)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(t){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Hh.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Wh.update((()=>{Hu.hasAnimatedSinceResize=!0,this.currentAnimation=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=lc(t)?t:id(t);return r.start(sf("",r,e,n)),{stop:()=>r.stop(),isAnimating:()=>r.isAnimating()}}(0,qm,{...t,onUpdate:e=>{this.mixTargetDelta(e),t.onUpdate&&t.onUpdate(e)},onComplete:()=>{t.onComplete&&t.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const t=this.getStack();t&&t.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(qm),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const t=this.getLead();let{targetWithTransforms:e,target:n,layout:r,latestValues:i}=t;if(e&&n&&r){if(this!==t&&this.layout&&r&&hg(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||Uf();const e=kf(this.layout.layoutBox.x);n.x.min=t.target.x.min,n.x.max=n.x.min+e;const r=kf(this.layout.layoutBox.y);n.y.min=t.target.y.min,n.y.max=n.y.min+r}km(e,n),im(e,i),Df(this.projectionDeltaWithTransform,this.layoutCorrected,e,i)}}registerSharedNode(t,e){this.sharedNodes.has(t)||this.sharedNodes.set(t,new zm);this.sharedNodes.get(t).add(e);const n=e.options.initialPromotionConfig;e.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(e):void 0})}isLead(){const t=this.getStack();return!t||t.lead===this}getLead(){var t;const{layoutId:e}=this.options;return e&&(null===(t=this.getStack())||void 0===t?void 0:t.lead)||this}getPrevLead(){var t;const{layoutId:e}=this.options;return e?null===(t=this.getStack())||void 0===t?void 0:t.prevLead:void 0}getStack(){const{layoutId:t}=this.options;if(t)return this.root.sharedNodes.get(t)}promote(){let{needsReset:t,transition:e,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),t&&(this.projectionDelta=void 0,this.needsReset=!0),e&&this.setOptions({transition:e})}relegate(){const t=this.getStack();return!!t&&t.relegate(this)}resetRotation(){const{visualElement:t}=this.options;if(!t)return;let e=!1;const{latestValues:n}=t;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(e=!0),!e)return;const r={};for(let i=0;i<Vm.length;i++){const e="rotate"+Vm[i];n[e]&&(r[e]=n[e],t.setStaticValue(e,0))}t.render();for(const i in r)t.setStaticValue(i,r[i]);t.scheduleRender()}getProjectionStyles(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e,n;const r={};if(!this.instance||this.isSVG)return r;if(!this.isVisible)return{visibility:"hidden"};r.visibility="";const i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=ah(t.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;const o=this.getLead();if(!this.projectionDelta||!this.layout||!o.target){const e={};return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=ah(t.pointerEvents)||""),this.hasProjected&&!$f(this.latestValues)&&(e.transform=i?i({},""):"none",this.hasProjected=!1),e}const a=o.animationValues||o.latestValues;this.applyTransformsToTarget(),r.transform=Bm(this.projectionDeltaWithTransform,this.treeScale,a),i&&(r.transform=i(a,r.transform));const{x:s,y:l}=this.projectionDelta;r.transformOrigin=`${100*s.origin}% ${100*l.origin}% 0`,o.animationValues?r.opacity=o===this?null!==(n=null!==(e=a.opacity)&&void 0!==e?e:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit:r.opacity=o===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0;for(const u in ic){if(void 0===a[u])continue;const{correct:t,applyTo:e}=ic[u],n="none"===r.transform?a[u]:t(a[u],o);if(e){const t=e.length;for(let i=0;i<t;i++)r[e[i]]=n}else r[u]=n}return this.options.layoutId&&(r.pointerEvents=o===this?ah(t.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((t=>{var e;return null===(e=t.currentAnimation)||void 0===e?void 0:e.stop()})),this.root.nodes.forEach(Qm),this.root.sharedNodes.clear()}}}function Wm(t){t.updateLayout()}function Hm(t){var e;const n=(null===(e=t.resumeFrom)||void 0===e?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:r}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;"size"===i?Vf((t=>{const r=o?n.measuredBox[t]:n.layoutBox[t],i=kf(r);r.min=e[t].min,r.max=r.min+i})):hg(i,n.layoutBox,e)&&Vf((t=>{const r=o?n.measuredBox[t]:n.layoutBox[t],i=kf(e[t]);r.max=r.min+i}));const a=jf();Df(a,e,n.layoutBox);const s=jf();o?Df(s,t.applyTransform(r,!0),n.measuredBox):Df(s,e,n.layoutBox);const l=!Nm(a);let u=!1;if(!t.resumeFrom){const r=t.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:o}=r;if(i&&o){const a=Uf();Rf(a,n.layoutBox,i.layoutBox);const s=Uf();Rf(s,e,o.layoutBox),Lm(a,s)||(u=!0),r.options.layoutRoot&&(t.relativeTarget=s,t.relativeTargetOrigin=a,t.relativeParent=r)}}}t.notifyListeners("didUpdate",{layout:e,snapshot:n,delta:s,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:e}=t.options;e&&e()}t.options.transition=void 0}function Xm(t){Ym.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=Boolean(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Zm(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Km(t){t.clearSnapshot()}function Qm(t){t.clearMeasurements()}function Jm(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function tg(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0}function eg(t){t.resolveTargetDelta()}function ng(t){t.calcProjection()}function rg(t){t.resetRotation()}function ig(t){t.removeLeadSnapshot()}function og(t,e,n){t.translate=$d(e.translate,0,n),t.scale=$d(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function ag(t,e,n,r){t.min=$d(e.min,n.min,r),t.max=$d(e.max,n.max,r)}function sg(t){return t.animationValues&&void 0!==t.animationValues.opacityExit}const lg={duration:.45,ease:[.4,0,.1,1]};function ug(t,e){let n=t.root;for(let i=t.path.length-1;i>=0;i--)if(Boolean(t.path[i].instance)){n=t.path[i];break}const r=(n&&n!==t.root?n.instance:document).querySelector(`[data-projection-id="${e}"]`);r&&t.mount(r,!0)}function cg(t){t.min=Math.round(t.min),t.max=Math.round(t.max)}function hg(t,e,n){return"position"===t||"preserve-aspect"===t&&!Af(Fm(e),Fm(n),.2)}const dg=$m({attachResizeListener:(t,e)=>hh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),pg={current:void 0},fg=$m({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!pg.current){const t=new dg(0,{});t.mount(window),t.setOptions({layoutScroll:!0}),pg.current=t}return pg.current},resetTransform:(t,e)=>{t.style.transform=void 0!==e?e:"none"},checkIsScrollRoot:t=>Boolean("fixed"===window.getComputedStyle(t).position)}),mg={pan:{Feature:class extends Eh{constructor(){super(...arguments),this.removePointerDownListener=Th}onPointerDown(t){this.session=new xf(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:t,onStart:e,onMove:n,onEnd:(t,e)=>{delete this.session,r&&r(t,e)}}}mount(){this.removePointerDownListener=mh(this.node.current,"pointerdown",(t=>this.onPointerDown(t)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Eh{constructor(t){super(t),this.removeGroupControls=Th,this.removeListeners=Th,this.controls=new sm(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Th}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:fg,MeasureLayout:ym}},gg=new Set(["width","height","top","left","right","bottom","x","y"]),yg=t=>gg.has(t),vg=t=>Object.keys(t).some(yg),_g=t=>t===gc||t===Ic,bg=(t,e)=>parseFloat(t.split(", ")[e]),xg=(t,e)=>(n,r)=>{let{transform:i}=r;if("none"===i||!i)return 0;const o=i.match(/^matrix3d\((.+)\)$/);if(o)return bg(o[1],e);{const e=i.match(/^matrix\((.+)\)$/);return e?bg(e[1],t):0}},wg=new Set(["x","y","z"]),Eg=oc.filter((t=>!wg.has(t)));const Sg={width:(t,e)=>{let{x:n}=t,{paddingLeft:r="0",paddingRight:i="0"}=e;return n.max-n.min-parseFloat(r)-parseFloat(i)},height:(t,e)=>{let{y:n}=t,{paddingTop:r="0",paddingBottom:i="0"}=e;return n.max-n.min-parseFloat(r)-parseFloat(i)},top:(t,e)=>{let{top:n}=e;return parseFloat(n)},left:(t,e)=>{let{left:n}=e;return parseFloat(n)},bottom:(t,e)=>{let{y:n}=t,{top:r}=e;return parseFloat(r)+(n.max-n.min)},right:(t,e)=>{let{x:n}=t,{left:r}=e;return parseFloat(r)+(n.max-n.min)},x:xg(4,13),y:xg(5,14)},Cg=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,o=getComputedStyle(i),{display:a}=o,s={};"none"===a&&e.setStaticValue("display",t.display||"block"),n.forEach((t=>{s[t]=Sg[t](r,o)})),e.render();const l=e.measureViewportBox();return n.forEach((n=>{const r=e.getValue(n);r&&r.jump(s[n]),t[n]=Sg[n](l,o)})),t},Tg=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e={...e},r={...r};const i=Object.keys(e).filter(yg);let o=[],a=!1;const s=[];if(i.forEach((i=>{const l=t.getValue(i);if(!t.hasValue(i))return;let u=n[i],c=kd(u);const h=e[i];let d;if(rh(h)){const t=h.length,e=null===h[0]?1:0;u=h[e],c=kd(u);for(let n=e;n<t;n++)d?zd(kd(h[n])===d,"All keyframes must be of the same type"):(d=kd(h[n]),zd(d===c||_g(c)&&_g(d),"Keyframes must be of the same dimension as the current value"))}else d=kd(h);if(c!==d)if(_g(c)&&_g(d)){const t=l.get();"string"===typeof t&&l.set(parseFloat(t)),"string"===typeof h?e[i]=parseFloat(h):Array.isArray(h)&&d===Ic&&(e[i]=h.map(parseFloat))}else(null===c||void 0===c?void 0:c.transform)&&(null===d||void 0===d?void 0:d.transform)&&(0===u||0===h)?0===u?l.set(d.transform(u)):e[i]=c.transform(h):(a||(o=function(t){const e=[];return Eg.forEach((n=>{const r=t.getValue(n);void 0!==r&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),e.length&&t.render(),e}(t),a=!0),s.push(i),r[i]=void 0!==r[i]?r[i]:e[i],l.jump(h))})),s.length){const n=s.indexOf("height")>=0?window.pageYOffset:null,i=Cg(e,t,s);return o.length&&o.forEach((e=>{let[n,r]=e;t.getValue(n).set(r)})),t.render(),Ou&&null!==n&&window.scrollTo({top:n}),{target:i,transitionEnd:r}}return{target:e,transitionEnd:r}};const Ig=(t,e,n,r)=>{const i=function(t,e,n){let{...r}=e;const i=t.current;if(!(i instanceof Element))return{target:r,transitionEnd:n};n&&(n={...n}),t.values.forEach((t=>{const e=t.get();if(!pc(e))return;const n=pm(e,i);n&&t.set(n)}));for(const o in r){const t=r[o];if(!pc(t))continue;const e=pm(t,i);e&&(r[o]=e,n&&void 0===n[o]&&(n[o]=t))}return{target:r,transitionEnd:n}}(t,e,r);return function(t,e,n,r){return vg(e)?Tg(t,e,n,r):{target:e,transitionEnd:r}}(t,e=i.target,n,r=i.transitionEnd)},kg={current:null},Ag={current:!1};const Pg=Object.keys($u),Dg=Pg.length,Mg=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Og=ju.length;class Rg{constructor(t){let{parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:o}=t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Wh.render(this.render,!1,!0);const{latestValues:s,renderState:l}=o;this.latestValues=s,this.baseTarget={...s},this.initialValues=n.initial?{...s}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.isControllingVariants=Uu(n),this.isVariantNode=Vu(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:u,...c}=this.scrapeMotionValuesFromProps(n,{});for(const h in c){const t=c[h];void 0!==s[h]&&lc(t)&&(t.set(s[h],!1),Nd(u)&&u.add(h))}}scrapeMotionValuesFromProps(t,e){return{}}mount(t){this.current=t,this.projection&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((t,e)=>this.bindToMotionValue(e,t))),Ag.current||function(){if(Ag.current=!0,Ou)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>kg.current=t.matches;t.addListener(e),e()}else kg.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||kg.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Hh.update(this.notifyUpdate),Hh.render(this.render),this.valueSubscriptions.forEach((t=>t())),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,e){const n=ac.has(t),r=e.on("change",(e=>{this.latestValues[t]=e,this.props.onUpdate&&Wh.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)})),i=e.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,(()=>{r(),i()}))}sortNodePosition(t){return this.current&&this.sortInstanceNodePosition&&this.type===t.type?this.sortInstanceNodePosition(this.current,t.current):0}loadFeatures(t,e,n,r,i){let o,a,{children:s,...l}=t;for(let u=0;u<Dg;u++){const t=Pg[u],{isEnabled:e,Feature:n,ProjectionNode:r,MeasureLayout:i}=$u[t];r&&(o=r),e(l)&&(!this.features[t]&&n&&(this.features[t]=new n(this)),i&&(a=i))}if(!this.projection&&o){this.projection=new o(r,this.latestValues,this.parent&&this.parent.projection);const{layoutId:t,layout:e,drag:n,dragConstraints:a,layoutScroll:s,layoutRoot:u}=l;this.projection.setOptions({layoutId:t,layout:e,alwaysMeasureLayout:Boolean(n)||a&&Lu(a),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"===typeof e?e:"both",initialPromotionConfig:i,layoutScroll:s,layoutRoot:u})}return a}updateFeatures(){for(const t in this.features){const e=this.features[t];e.isMounted?e.update(this.props,this.prevProps):(e.mount(),e.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Uf()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}makeTargetAnimatable(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(t,this.props,e)}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<Mg.length;n++){const e=Mg[n];this.propEventSubscriptions[e]&&(this.propEventSubscriptions[e](),delete this.propEventSubscriptions[e]);const r=t["on"+e];r&&(this.propEventSubscriptions[e]=this.on(e,r))}this.prevMotionValues=function(t,e,n){const{willChange:r}=e;for(const i in e){const o=e[i],a=n[i];if(lc(o))t.addValue(i,o),Nd(r)&&r.add(i);else if(lc(a))t.addValue(i,id(o,{owner:t})),Nd(r)&&r.remove(i);else if(a!==o)if(t.hasValue(i)){const e=t.getValue(i);!e.hasAnimated&&e.set(o)}else{const e=t.getStaticValue(i);t.addValue(i,id(void 0!==e?e:o,{owner:t}))}}for(const i in n)void 0===e[i]&&t.removeValue(i);return e}(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const t=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(t.initial=this.props.initial),t}const t={};for(let e=0;e<Og;e++){const n=ju[e],r=this.props[n];(Fu(r)||!1===r)&&(t[n]=r)}return t}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){e!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,e)),this.values.set(t,e),this.latestValues[t]=e.get()}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return void 0===n&&void 0!==e&&(n=id(e,{owner:this}),this.addValue(t,n)),n}readValue(t){return void 0===this.latestValues[t]&&this.current?this.readValueFromInstance(this.current,t,this.options):this.latestValues[t]}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:n}=this.props,r="string"===typeof n||"object"===typeof n?null===(e=nh(this.props,n))||void 0===e?void 0:e[t]:void 0;if(n&&void 0!==r)return r;const i=this.getBaseTargetFromProps(this.props,t);return void 0===i||lc(i)?void 0!==this.initialValues[t]&&void 0===r?void 0:this.baseTarget[t]:i}on(t,e){return this.events[t]||(this.events[t]=new ed),this.events[t].add(e)}notify(t){if(this.events[t]){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.events[t].notify(...n)}}}class Ng extends Rg{sortInstanceNodePosition(t,e){return 2&t.compareDocumentPosition(e)?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,e){let{vars:n,style:r}=e;delete n[t],delete r[t]}makeTargetAnimatableFromInstance(t,e,n){let{transition:r,transitionEnd:i,...o}=t,{transformValues:a}=e,s=function(t,e,n){const r={};for(const i in t){const t=Rd(i,e);if(void 0!==t)r[i]=t;else{const t=n.getValue(i);t&&(r[i]=t.get())}}return r}(o,r||{},this);if(a&&(i&&(i=a(i)),o&&(o=a(o)),s&&(s=a(s))),n){!function(t,e,n){var r,i;const o=Object.keys(e).filter((e=>!t.hasValue(e))),a=o.length;if(a)for(let s=0;s<a;s++){const a=o[s],l=e[a];let u=null;Array.isArray(l)&&(u=l[0]),null===u&&(u=null!==(i=null!==(r=n[a])&&void 0!==r?r:t.readValue(a))&&void 0!==i?i:e[a]),void 0!==u&&null!==u&&("string"===typeof u&&(Lh(u)||Fh(u))?u=parseFloat(u):!Pd(u)&&vd.test(l)&&(u=Cd(a,l)),t.addValue(a,id(u,{owner:t})),void 0===n[a]&&(n[a]=u),null!==u&&t.setBaseTarget(a,u))}}(this,o,s);const t=Ig(this,o,s,i);i=t.transitionEnd,o=t.target}return{transition:r,transitionEnd:i,...o}}}class Lg extends Ng{readValueFromInstance(t,e){if(ac.has(e)){const t=Sd(e);return t&&t.default||0}{const r=(n=t,window.getComputedStyle(n)),i=(dc(e)?r.getPropertyValue(e):r[e])||0;return"string"===typeof i?i.trim():i}var n}measureInstanceViewportBox(t,e){let{transformPagePoint:n}=e;return om(t,n)}build(t,e,n,r){Oc(t,e,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,e){return th(t,e)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;lc(t)&&(this.childSubscription=t.on("change",(t=>{this.current&&(this.current.textContent=`${t}`)})))}renderInstance(t,e,n,r){Kc(t,e,n,r)}}class Fg extends Ng{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(ac.has(e)){const t=Sd(e);return t&&t.default||0}return e=Qc.has(e)?e:Zc(e),t.getAttribute(e)}measureInstanceViewportBox(){return Uf()}scrapeMotionValuesFromProps(t,e){return eh(t,e)}build(t,e,n,r){Yc(t,e,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,e,n,r){Jc(t,e,0,r)}mount(t){this.isSVGTag=Wc(t.tagName),super.mount(t)}}const zg=(t,e)=>rc(t)?new Fg(e,{enableHardwareAcceleration:!1}):new Lg(e,{enableHardwareAcceleration:!0}),Bg={..._f,...Rh,...mg,...{layout:{ProjectionNode:fg,MeasureLayout:ym}}},jg=ec(((t,e)=>function(t,e,n,r){let{forwardMotionProps:i=!1}=e;return{...rc(t)?uh:ch,preloadedFeatures:n,useRender:Xc(i),createVisualElement:r,Component:t}}(t,e,Bg,zg)));var Ug=new Set([...Cn,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),Vg=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function qg(t){return Vg.has(t)||!Ug.has(t)}var Gg=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;var Yg=ht((function(t){return Gg.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91})),$g=function(t){return"theme"!==t},Wg=function(t){return"string"===typeof t&&t.charCodeAt(0)>96?Yg:$g},Hg=function(t,e,n){var r;if(e){var i=e.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(e){return t.__emotion_forwardProp(e)&&i(e)}:i}return"function"!==typeof r&&n&&(r=t.__emotion_forwardProp),r},Xg=function(t){var e=t.cache,n=t.serialized,r=t.isStringTag;Pt(e,n,r);Et((function(){return Dt(e,n,r)}));return null};const Zg=function e(n,r){var i,o,a=n.__emotion_real===n,s=a&&n.__emotion_base||n;void 0!==r&&(i=r.label,o=r.target);var l=Hg(n,r,a),u=l||Wg(s),c=!u("as");return function(){var h=arguments,d=a&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==i&&d.push("label:"+i+";"),null==h[0]||void 0===h[0].raw)d.push.apply(d,h);else{0,d.push(h[0][0]);for(var p=h.length,f=1;f<p;f++)d.push(h[f],h[0][f])}var m=Tt((function(e,n,r){var i=c&&e.as||s,a="",h=[],p=e;if(null==e.theme){for(var f in p={},e)p[f]=e[f];p.theme=(0,t.useContext)(It)}"string"===typeof e.className?a=function(t,e,n){var r="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]+";"):r+=n+" "})),r}(n.registered,h,e.className):null!=e.className&&(a=e.className+" ");var m=xt(d.concat(h),n.registered,p);a+=n.key+"-"+m.name,void 0!==o&&(a+=" "+o);var g=c&&void 0===l?Wg(i):u,y={};for(var v in e)c&&"as"===v||g(v)&&(y[v]=e[v]);return y.className=a,y.ref=r,(0,t.createElement)(t.Fragment,null,(0,t.createElement)(Xg,{cache:n,serialized:m,isStringTag:"string"===typeof i}),(0,t.createElement)(i,y))}));return m.displayName=void 0!==i?i:"Styled("+("string"===typeof s?s:s.displayName||s.name||"Component")+")",m.defaultProps=n.defaultProps,m.__emotion_real=m,m.__emotion_base=s,m.__emotion_styles=d,m.__emotion_forwardProp=l,Object.defineProperty(m,"toString",{value:function(){return"."+o}}),m.withComponent=function(t,n){return e(t,st({},r,n,{shouldForwardProp:Hg(m,n,!0)})).apply(void 0,d)},m}};var Kg=Zg.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){Kg[t]=Kg(t)}));const Qg=Kg;var Jg,ty=null!=(Jg=Qg.default)?Jg:Qg,ey=t=>{let{baseStyle:e}=t;return t=>{const{theme:n,css:r,__css:i,sx:o,...a}=t,s=Fn(a,((t,e)=>In(e))),l=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");const e={...t};for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const o of r)if(null!=o)for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&(t in e&&delete e[t],e[t]=o[t]);return e}({},i,Bn(e,t),zn(s),o),u=Dn(l)(t.theme);return r?[u,r]:u}};function ny(e,n){const{baseStyle:r,...i}=null!=n?n:{};i.shouldForwardProp||(i.shouldForwardProp=qg);const o=ey({baseStyle:r}),a=ty(e,i)(o);return t.forwardRef((function(e,n){const{colorMode:r,forced:i}=qt();return t.createElement(a,{ref:n,"data-theme":i?r:void 0,...e})}))}var ry=function(){const t=new Map;return new Proxy(ny,{apply:(t,e,n)=>ny(...n),get:(e,n)=>(t.has(n)||t.set(n,ny(n)),t.get(n))})}(),iy={initial:t=>{const{position:e}=t,n=["top","bottom"].includes(e)?"y":"x";let r=["top-right","bottom-right"].includes(e)?1:-1;return"bottom"===e&&(r=1),{opacity:0,[n]:24*r}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},oy=(0,t.memo)((e=>{const{id:n,message:r,onCloseComplete:i,onRequestRemove:o,requestClose:a=!1,position:s="bottom",duration:l=5e3,containerStyle:u,motionVariants:c=iy,toastSpacing:h="0.5rem"}=e,[d,p]=(0,t.useState)(l),f=Pu();ku((()=>{f||null==i||i()}),[f]),ku((()=>{p(l)}),[l]);const m=()=>{f&&o()};(0,t.useEffect)((()=>{f&&a&&o()}),[f,a,o]),function(e,n){const r=Iu(e);(0,t.useEffect)((()=>{if(null==n)return;let t=null;return t=window.setTimeout((()=>{r()}),n),()=>{t&&window.clearTimeout(t)}}),[n,r])}(m,d);const g=(0,t.useMemo)((()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:h,...u})),[u,h]),y=(0,t.useMemo)((()=>function(t){let e="center";return t.includes("right")&&(e="flex-end"),t.includes("left")&&(e="flex-start"),{display:"flex",flexDirection:"column",alignItems:e}}(s)),[s]);return(0,Rt.jsx)(jg.li,{layout:!0,className:"chakra-toast",variants:c,initial:"initial",animate:"animate",exit:"exit",onHoverStart:()=>p(null),onHoverEnd:()=>p(l),custom:{position:s},style:y,children:(0,Rt.jsx)(ry.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:g,children:$t(r,{id:n,onClose:m})})})}));function ay(e){return(0,t.forwardRef)(e)}function sy(){return{...qt(),theme:function(){const e=(0,t.useContext)(It);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}()}}oy.displayName="ToastComponent";var ly=n(9138);function uy(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;const{styleConfig:i,...o}=n,{theme:a,colorMode:s}=sy(),l=e?Ln(a,`components.${e}`):void 0,u=i||l,c=Zt({theme:a,colorMode:s},null!=(r=null==u?void 0:u.defaultProps)?r:{},zn(function(t,e){const n={};return Object.keys(t).forEach((r=>{e.includes(r)||(n[r]=t[r])})),n}(o,["children"]))),h=(0,t.useRef)({});if(u){const t=function(t){return e=>{var n;const{variant:r,size:i,theme:o}=e,a=Rn(o);return Zt({},$t(null!=(n=t.baseStyle)?n:{},e),a(t,"sizes",i,e),a(t,"variants",r,e))}}(u),e=t(c);ly(h.current,e)||(h.current=e)}return h.current}function cy(t){return uy(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function hy(t){return uy(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}var dy={path:(0,Rt.jsxs)("g",{stroke:"currentColor",strokeWidth:"1.5",children:[(0,Rt.jsx)("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),(0,Rt.jsx)("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),(0,Rt.jsx)("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},py=ay(((t,e)=>{const{as:n,viewBox:r,color:i="currentColor",focusable:o=!1,children:a,className:s,__css:l,...u}=t,c={ref:e,focusable:o,className:Gt("chakra-icon",s),__css:{w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:i,...l,...cy("Icon",t)}},h=null!=r?r:dy.viewBox;if(n&&"string"!==typeof n)return(0,Rt.jsx)(ry.svg,{as:n,...c,...u});const d=null!=a?a:dy.path;return(0,Rt.jsx)(ry.svg,{verticalAlign:"middle",viewBox:h,...c,...u,children:d})}));py.displayName="Icon";function fy(t){return(0,Rt.jsx)(py,{viewBox:"0 0 24 24",...t,children:(0,Rt.jsx)("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}var my=function(){var t=Ot.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),gy=ay(((t,e)=>{const n=cy("Spinner",t),{label:r="Loading...",thickness:i="2px",speed:o="0.45s",emptyColor:a="transparent",className:s,...l}=Nn(t),u=Gt("chakra-spinner",s),c={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:i,borderBottomColor:a,borderLeftColor:a,animation:`${my} ${o} linear infinite`,...n};return(0,Rt.jsx)(ry.div,{ref:e,__css:c,className:u,...l,children:r&&(0,Rt.jsx)(ry.span,{srOnly:!0,children:r})})}));gy.displayName="Spinner";var[yy,vy]=zt({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[_y,by]=zt({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),xy={info:{icon:function(t){return(0,Rt.jsx)(py,{viewBox:"0 0 24 24",...t,children:(0,Rt.jsx)("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})},colorScheme:"blue"},warning:{icon:fy,colorScheme:"orange"},success:{icon:function(t){return(0,Rt.jsx)(py,{viewBox:"0 0 24 24",...t,children:(0,Rt.jsx)("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})},colorScheme:"green"},error:{icon:fy,colorScheme:"red"},loading:{icon:gy,colorScheme:"blue"}};var wy=ay((function(t,e){var n;const{status:r="info",addRole:i=!0,...o}=Nn(t),a=null!=(n=t.colorScheme)?n:function(t){return xy[t].colorScheme}(r),s=hy("Alert",{...t,colorScheme:a}),l={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...s.container};return(0,Rt.jsx)(yy,{value:{status:r},children:(0,Rt.jsx)(_y,{value:s,children:(0,Rt.jsx)(ry.div,{role:i?"alert":void 0,ref:e,...o,className:Gt("chakra-alert",t.className),__css:l})})})}));function Ey(t){const{status:e}=vy(),n=function(t){return xy[t].icon}(e),r=by(),i="loading"===e?r.spinner:r.icon;return(0,Rt.jsx)(ry.span,{display:"inherit",...t,className:Gt("chakra-alert__icon",t.className),__css:i,children:t.children||(0,Rt.jsx)(n,{h:"100%",w:"100%"})})}wy.displayName="Alert",Ey.displayName="AlertIcon";var Sy=ay((function(t,e){const n=by();return(0,Rt.jsx)(ry.div,{ref:e,...t,className:Gt("chakra-alert__title",t.className),__css:n.title})}));Sy.displayName="AlertTitle";var Cy=ay((function(t,e){const n={display:"inline",...by().description};return(0,Rt.jsx)(ry.div,{ref:e,...t,className:Gt("chakra-alert__desc",t.className),__css:n})}));function Ty(t){return(0,Rt.jsx)(py,{focusable:"false","aria-hidden":!0,...t,children:(0,Rt.jsx)("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}Cy.displayName="AlertDescription";var Iy=ay((function(t,e){const n=cy("CloseButton",t),{children:r,isDisabled:i,__css:o,...a}=Nn(t);return(0,Rt.jsx)(ry.button,{type:"button","aria-label":"Close",ref:e,disabled:i,__css:{outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,...n,...o},...a,children:r||(0,Rt.jsx)(Ty,{width:"1em",height:"1em"})})}));Iy.displayName="CloseButton";var ky=function(t){let e=t;const n=new Set,r=t=>{e=t(e),n.forEach((t=>t()))};return{getState:()=>e,subscribe:e=>(n.add(e),()=>{r((()=>t)),n.delete(e)}),removeToast:(t,e)=>{r((n=>({...n,[e]:n[e].filter((e=>e.id!=t))})))},notify:(t,e)=>{const n=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;Ay+=1;const i=null!=(n=e.id)?n:Ay,o=null!=(r=e.position)?r:"bottom";return{id:i,message:t,position:o,duration:e.duration,onCloseComplete:e.onCloseComplete,onRequestRemove:()=>ky.removeToast(String(i),o),status:e.status,requestClose:!1,containerStyle:e.containerStyle}}(t,e),{position:i,id:o}=n;return r((t=>{var e,r;const o=i.includes("top")?[n,...null!=(e=t[i])?e:[]]:[...null!=(r=t[i])?r:[],n];return{...t,[i]:o}})),o},update:(t,e)=>{t&&r((n=>{const r={...n},{position:i,index:o}=Su(r,t);return i&&-1!==o&&(r[i][o]={...r[i][o],...e,message:Dy(e)}),r}))},closeAll:function(){let{positions:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r((e=>(null!=t?t:["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce(((t,n)=>(t[n]=e[n].map((t=>({...t,requestClose:!0}))),t)),{...e})))},close:t=>{r((e=>{const n=Cu(e,t);return n?{...e,[n]:e[n].map((e=>e.id==t?{...e,requestClose:!0}:e))}:e}))},isActive:t=>Boolean(Su(ky.getState(),t).position)}}({top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]});var Ay=0;var Py=t=>{const{status:e,variant:n="solid",id:r,title:i,isClosable:o,onClose:a,description:s,icon:l}=t,u=r?{root:`toast-${r}`,title:`toast-${r}-title`,description:`toast-${r}-description`}:void 0;return(0,Rt.jsxs)(wy,{addRole:!1,status:e,variant:n,id:null==u?void 0:u.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",children:[(0,Rt.jsx)(Ey,{children:l}),(0,Rt.jsxs)(ry.div,{flex:"1",maxWidth:"100%",children:[i&&(0,Rt.jsx)(Sy,{id:null==u?void 0:u.title,children:i}),s&&(0,Rt.jsx)(Cy,{id:null==u?void 0:u.description,display:"block",children:s})]}),o&&(0,Rt.jsx)(Iy,{size:"sm",onClick:a,position:"absolute",insetEnd:1,top:1})]})};function Dy(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{render:e,toastComponent:n=Py}=t;return r=>"function"===typeof e?e({...r,...t}):(0,Rt.jsx)(n,{...r,...t})}function My(){const e=(0,t.useRef)(!1);return Ru((()=>(e.current=!0,()=>{e.current=!1})),[]),e}class Oy extends t.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const t=this.props.sizeRef.current;t.height=e.offsetHeight||0,t.width=e.offsetWidth||0,t.top=e.offsetTop,t.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Ry(e){let{children:n,isPresent:r}=e;const i=(0,t.useId)(),o=(0,t.useRef)(null),a=(0,t.useRef)({width:0,height:0,top:0,left:0});return(0,t.useInsertionEffect)((()=>{const{width:t,height:e,top:n,left:s}=a.current;if(r||!o.current||!t||!e)return;o.current.dataset.motionPopId=i;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${i}"] {\n            position: absolute !important;\n            width: ${t}px !important;\n            height: ${e}px !important;\n            top: ${n}px !important;\n            left: ${s}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}}),[r]),t.createElement(Oy,{isPresent:r,childRef:o,sizeRef:a},t.cloneElement(n,{ref:o}))}const Ny=e=>{let{children:n,initial:r,isPresent:i,onExitComplete:o,custom:a,presenceAffectsLayout:s,mode:l}=e;const u=Wu(Ly),c=(0,t.useId)(),h=(0,t.useMemo)((()=>({id:c,initial:r,isPresent:i,custom:a,onExitComplete:t=>{u.set(t,!0);for(const e of u.values())if(!e)return;o&&o()},register:t=>(u.set(t,!1),()=>u.delete(t))})),s?void 0:[i]);return(0,t.useMemo)((()=>{u.forEach(((t,e)=>u.set(e,!1)))}),[i]),t.useEffect((()=>{!i&&!u.size&&o&&o()}),[i]),"popLayout"===l&&(n=t.createElement(Ry,{isPresent:i},n)),t.createElement(Au.Provider,{value:h},n)};function Ly(){return new Map}const Fy=t=>t.key||"";const zy=e=>{let{children:n,custom:r,initial:i=!0,onExitComplete:o,exitBeforeEnter:a,presenceAffectsLayout:s=!0,mode:l="sync"}=e;zd(!a,"Replace exitBeforeEnter with mode='wait'");let[u]=function(){const e=My(),[n,r]=(0,t.useState)(0),i=(0,t.useCallback)((()=>{e.current&&r(n+1)}),[n]);return[(0,t.useCallback)((()=>Wh.postRender(i)),[i]),n]}();const c=(0,t.useContext)(Zu).forceRender;c&&(u=c);const h=My(),d=function(e){const n=[];return t.Children.forEach(e,(e=>{(0,t.isValidElement)(e)&&n.push(e)})),n}(n);let p=d;const f=new Set,m=(0,t.useRef)(p),g=(0,t.useRef)(new Map).current,y=(0,t.useRef)(!0);var v;if(Ru((()=>{y.current=!1,function(t,e){t.forEach((t=>{const n=Fy(t);e.set(n,t)}))}(d,g),m.current=p})),v=()=>{y.current=!0,g.clear(),f.clear()},(0,t.useEffect)((()=>()=>v()),[]),y.current)return t.createElement(t.Fragment,null,p.map((e=>t.createElement(Ny,{key:Fy(e),isPresent:!0,initial:!!i&&void 0,presenceAffectsLayout:s,mode:l},e))));p=[...p];const _=m.current.map(Fy),b=d.map(Fy),x=_.length;for(let t=0;t<x;t++){const e=_[t];-1===b.indexOf(e)&&f.add(e)}return"wait"===l&&f.size&&(p=[]),f.forEach((e=>{if(-1!==b.indexOf(e))return;const n=g.get(e);if(!n)return;const i=_.indexOf(e);p.splice(i,0,t.createElement(Ny,{key:Fy(n),isPresent:!1,onExitComplete:()=>{g.delete(e),f.delete(e);const t=m.current.findIndex((t=>t.key===e));if(m.current.splice(t,1),!f.size){if(m.current=d,!1===h.current)return;u(),o&&o()}},custom:r,presenceAffectsLayout:s,mode:l},n))})),p=p.map((e=>{const n=e.key;return f.has(n)?e:t.createElement(Ny,{key:Fy(e),isPresent:!0,presenceAffectsLayout:s,mode:l},e)})),t.createElement(t.Fragment,null,f.size?p:p.map((e=>(0,t.cloneElement)(e))))};var By=n(4164),[jy,Uy]=zt({strict:!1,name:"PortalContext"}),Vy="chakra-portal",qy=t=>(0,Rt.jsx)("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:t.zIndex,top:0,left:0,right:0},children:t.children}),Gy=e=>{const{appendToParentPortal:n,children:r}=e,[i,o]=(0,t.useState)(null),a=(0,t.useRef)(null),[,s]=(0,t.useState)({});(0,t.useEffect)((()=>s({})),[]);const l=Uy(),u=jt();Kn((()=>{if(!i)return;const t=i.ownerDocument,e=n&&null!=l?l:t.body;if(!e)return;a.current=t.createElement("div"),a.current.className=Vy,e.appendChild(a.current),s({});const r=a.current;return()=>{e.contains(r)&&e.removeChild(r)}}),[i]);const c=(null==u?void 0:u.zIndex)?(0,Rt.jsx)(qy,{zIndex:null==u?void 0:u.zIndex,children:r}):r;return a.current?(0,By.createPortal)((0,Rt.jsx)(jy,{value:a.current,children:c}),a.current):(0,Rt.jsx)("span",{ref:t=>{t&&o(t)}})},Yy=e=>{const{children:n,containerRef:r,appendToParentPortal:i}=e,o=r.current,a=null!=o?o:"undefined"!==typeof window?document.body:void 0,s=(0,t.useMemo)((()=>{const t=null==o?void 0:o.ownerDocument.createElement("div");return t&&(t.className=Vy),t}),[o]),[,l]=(0,t.useState)({});return Kn((()=>l({})),[]),Kn((()=>{if(s&&a)return a.appendChild(s),()=>{a.removeChild(s)}}),[s,a]),a&&s?(0,By.createPortal)((0,Rt.jsx)(jy,{value:i?s:null,children:n}),s):null};function $y(t){const e={appendToParentPortal:!0,...t},{containerRef:n,...r}=e;return n?(0,Rt.jsx)(Yy,{containerRef:n,...r}):(0,Rt.jsx)(Gy,{...r})}$y.className=Vy,$y.selector=".chakra-portal",$y.displayName="Portal";var Wy,[Hy,Xy]=zt({name:"ToastOptionsContext",strict:!1}),Zy=e=>{const n=(0,t.useSyncExternalStore)(ky.subscribe,ky.getState,ky.getState),{motionVariants:r,component:i=oy,portalProps:o}=e,a=Object.keys(n).map((t=>{const e=n[t];return(0,Rt.jsx)("ul",{role:"region","aria-live":"polite",id:`chakra-toast-manager-${t}`,style:Tu(t),children:(0,Rt.jsx)(zy,{initial:!1,children:e.map((t=>(0,Rt.jsx)(i,{motionVariants:r,...t},t.id)))})},t)}));return(0,Rt.jsx)($y,{...o,children:a})},Ky=t=>function(e){let{children:n,theme:r=t,toastOptions:i,...o}=e;return(0,Rt.jsxs)(rr,{theme:r,...o,children:[(0,Rt.jsx)(Hy,{value:null==i?void 0:i.defaultOptions,children:n}),(0,Rt.jsx)(Zy,{...i})]})},Qy=Ky(xu);Ky(wu);function Jy(){return Jy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jy.apply(this,arguments)}!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(Wy||(Wy={}));const tv="popstate";function ev(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function nv(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(n){}}}function rv(t,e){return{usr:t.state,key:t.key,idx:e}}function iv(t,e,n,r){return void 0===n&&(n=null),Jy({pathname:"string"===typeof t?t:t.pathname,search:"",hash:""},"string"===typeof e?av(e):e,{state:n,key:e&&e.key||r||Math.random().toString(36).substr(2,8)})}function ov(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function av(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function sv(t,e,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s=Wy.Pop,l=null,u=c();function c(){return(a.state||{idx:null}).idx}function h(){s=Wy.Pop;let t=c(),e=null==t?null:t-u;u=t,l&&l({action:s,location:p.location,delta:e})}function d(t){let e="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof t?t:ov(t);return ev(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}null==u&&(u=0,a.replaceState(Jy({},a.state,{idx:u}),""));let p={get action(){return s},get location(){return t(i,a)},listen(t){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(tv,h),l=t,()=>{i.removeEventListener(tv,h),l=null}},createHref:t=>e(i,t),createURL:d,encodeLocation(t){let e=d(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(t,e){s=Wy.Push;let r=iv(p.location,t,e);n&&n(r,t),u=c()+1;let h=rv(r,u),d=p.createHref(r);try{a.pushState(h,"",d)}catch(f){i.location.assign(d)}o&&l&&l({action:s,location:p.location,delta:1})},replace:function(t,e){s=Wy.Replace;let r=iv(p.location,t,e);n&&n(r,t),u=c();let i=rv(r,u),h=p.createHref(r);a.replaceState(i,"",h),o&&l&&l({action:s,location:p.location,delta:0})},go:t=>a.go(t)};return p}var lv;function uv(t,e,n){void 0===n&&(n="/");let r=Ev(("string"===typeof e?av(e):e).pathname||"/",n);if(null==r)return null;let i=cv(t);!function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every(((t,n)=>t===e[n]));return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}(i);let o=null;for(let a=0;null==o&&a<i.length;++a)o=bv(i[a],wv(r));return o}function cv(t,e,n,r){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(t,i,o)=>{let a={relativePath:void 0===o?t.path||"":o,caseSensitive:!0===t.caseSensitive,childrenIndex:i,route:t};a.relativePath.startsWith("/")&&(ev(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=kv([r,a.relativePath]),l=n.concat(a);t.children&&t.children.length>0&&(ev(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),cv(t.children,e,l,s)),(null!=t.path||t.index)&&e.push({path:s,score:_v(s,t.index),routesMeta:l})};return t.forEach(((t,e)=>{var n;if(""!==t.path&&null!=(n=t.path)&&n.includes("?"))for(let r of hv(t.path))i(t,e,r);else i(t,e)})),e}function hv(t){let e=t.split("/");if(0===e.length)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=hv(r.join("/")),s=[];return s.push(...a.map((t=>""===t?o:[o,t].join("/")))),i&&s.push(...a),s.map((e=>t.startsWith("/")&&""===e?"/":e))}!function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"}(lv||(lv={}));const dv=/^:\w+$/,pv=3,fv=2,mv=1,gv=10,yv=-2,vv=t=>"*"===t;function _v(t,e){let n=t.split("/"),r=n.length;return n.some(vv)&&(r+=yv),e&&(r+=fv),n.filter((t=>!vv(t))).reduce(((t,e)=>t+(dv.test(e)?pv:""===e?mv:gv)),r)}function bv(t,e){let{routesMeta:n}=t,r={},i="/",o=[];for(let a=0;a<n.length;++a){let t=n[a],s=a===n.length-1,l="/"===i?e:e.slice(i.length)||"/",u=xv({path:t.relativePath,caseSensitive:t.caseSensitive,end:s},l);if(!u)return null;Object.assign(r,u.params);let c=t.route;o.push({params:r,pathname:kv([i,u.pathname]),pathnameBase:Av(kv([i,u.pathnameBase])),route:c}),"/"!==u.pathnameBase&&(i=kv([i,u.pathnameBase]))}return o}function xv(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);Sv("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,((t,e)=>(r.push(e),"/([^\\/]+)")));t.endsWith("*")?(r.push("*"),i+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==t&&"/"!==t&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,e?void 0:"i");return[o,r]}(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1),l=r.reduce(((t,e,n)=>{if("*"===e){let t=s[n]||"";a=o.slice(0,o.length-t.length).replace(/(.)\/+$/,"$1")}return t[e]=function(t,e){try{return decodeURIComponent(t)}catch(n){return Sv(!1,'The value for the URL param "'+e+'" will not be decoded because the string "'+t+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),t}}(s[n]||"",e),t}),{});return{params:l,pathname:o,pathnameBase:a,pattern:t}}function wv(t){try{return decodeURI(t)}catch(e){return Sv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function Ev(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&"/"!==r?null:t.slice(n)||"/"}function Sv(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(n){}}}function Cv(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Tv(t){return t.filter(((t,e)=>0===e||t.route.path&&t.route.path.length>0))}function Iv(t,e,n,r){let i;void 0===r&&(r=!1),"string"===typeof t?i=av(t):(i=Jy({},t),ev(!i.pathname||!i.pathname.includes("?"),Cv("?","pathname","search",i)),ev(!i.pathname||!i.pathname.includes("#"),Cv("#","pathname","hash",i)),ev(!i.search||!i.search.includes("#"),Cv("#","search","hash",i)));let o,a=""===t||""===i.pathname,s=a?"/":i.pathname;if(r||null==s)o=n;else{let t=e.length-1;if(s.startsWith("..")){let e=s.split("/");for(;".."===e[0];)e.shift(),t-=1;i.pathname=e.join("/")}o=t>=0?e[t]:"/"}let l=function(t,e){void 0===e&&(e="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof t?av(t):t,o=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:o,search:Pv(r),hash:Dv(i)}}(i,o),u=s&&"/"!==s&&s.endsWith("/"),c=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!c||(l.pathname+="/"),l}const kv=t=>t.join("/").replace(/\/\/+/g,"/"),Av=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Pv=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",Dv=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";class Mv extends Error{}function Ov(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"boolean"===typeof t.internal&&"data"in t}const Rv=["post","put","patch","delete"],Nv=(new Set(Rv),["get",...Rv]);new Set(Nv),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");function Lv(){return Lv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lv.apply(this,arguments)}const Fv="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},{useState:zv,useEffect:Bv,useLayoutEffect:jv,useDebugValue:Uv}=e;function Vv(t){const e=t.getSnapshot,n=t.value;try{const t=e();return!Fv(n,t)}catch(r){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,(t=>{t.useSyncExternalStore})(e);const qv=t.createContext(null);const Gv=t.createContext(null);const Yv=t.createContext(null);const $v=t.createContext(null);const Wv=t.createContext({outlet:null,matches:[]});const Hv=t.createContext(null);function Xv(){return null!=t.useContext($v)}function Zv(){return Xv()||ev(!1),t.useContext($v).location}function Kv(){Xv()||ev(!1);let{basename:e,navigator:n}=t.useContext(Yv),{matches:r}=t.useContext(Wv),{pathname:i}=Zv(),o=JSON.stringify(Tv(r).map((t=>t.pathnameBase))),a=t.useRef(!1);t.useEffect((()=>{a.current=!0}));let s=t.useCallback((function(t,r){if(void 0===r&&(r={}),!a.current)return;if("number"===typeof t)return void n.go(t);let s=Iv(t,JSON.parse(o),i,"path"===r.relative);"/"!==e&&(s.pathname="/"===s.pathname?e:kv([e,s.pathname])),(r.replace?n.replace:n.push)(s,r.state,r)}),[e,n,o,i]);return s}function Qv(e,n){let{relative:r}=void 0===n?{}:n,{matches:i}=t.useContext(Wv),{pathname:o}=Zv(),a=JSON.stringify(Tv(i).map((t=>t.pathnameBase)));return t.useMemo((()=>Iv(e,JSON.parse(a),o,"path"===r)),[e,a,o,r])}function Jv(){let e=function(){var e;let n=t.useContext(Hv),r=o_(i_.UseRouteError),i=a_(i_.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=Ov(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:o},r):null,null)}class t_ extends t.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location?{error:t.error,location:t.location}:{error:t.error||e.error,location:e.location}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error?t.createElement(Wv.Provider,{value:this.props.routeContext},t.createElement(Hv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function e_(e){let{routeContext:n,match:r,children:i}=e,o=t.useContext(qv);return o&&o.static&&o.staticContext&&r.route.errorElement&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(Wv.Provider,{value:n},i)}function n_(e,n,r){if(void 0===n&&(n=[]),null==e){if(null==r||!r.errors)return null;e=r.matches}let i=e,o=null==r?void 0:r.errors;if(null!=o){let t=i.findIndex((t=>t.route.id&&(null==o?void 0:o[t.route.id])));t>=0||ev(!1),i=i.slice(0,Math.min(i.length,t+1))}return i.reduceRight(((e,a,s)=>{let l=a.route.id?null==o?void 0:o[a.route.id]:null,u=r?a.route.errorElement||t.createElement(Jv,null):null,c=n.concat(i.slice(0,s+1)),h=()=>t.createElement(e_,{match:a,routeContext:{outlet:e,matches:c}},l?u:void 0!==a.route.element?a.route.element:e);return r&&(a.route.errorElement||0===s)?t.createElement(t_,{location:r.location,component:u,error:l,children:h(),routeContext:{outlet:null,matches:c}}):h()}),null)}var r_,i_;function o_(e){let n=t.useContext(Gv);return n||ev(!1),n}function a_(e){let n=function(e){let n=t.useContext(Wv);return n||ev(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||ev(!1),r.route.id}!function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator"}(r_||(r_={})),function(t){t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator"}(i_||(i_={}));function s_(t){ev(!1)}function l_(e){let{basename:n="/",children:r=null,location:i,navigationType:o=Wy.Pop,navigator:a,static:s=!1}=e;Xv()&&ev(!1);let l=n.replace(/^\/*/,"/"),u=t.useMemo((()=>({basename:l,navigator:a,static:s})),[l,a,s]);"string"===typeof i&&(i=av(i));let{pathname:c="/",search:h="",hash:d="",state:p=null,key:f="default"}=i,m=t.useMemo((()=>{let t=Ev(c,l);return null==t?null:{pathname:t,search:h,hash:d,state:p,key:f}}),[l,c,h,d,p,f]);return null==m?null:t.createElement(Yv.Provider,{value:u},t.createElement($v.Provider,{children:r,value:{location:m,navigationType:o}}))}function u_(e){let{children:n,location:r}=e,i=t.useContext(qv);return function(e,n){Xv()||ev(!1);let{navigator:r}=t.useContext(Yv),i=t.useContext(Gv),{matches:o}=t.useContext(Wv),a=o[o.length-1],s=a?a.params:{},l=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let u,c=Zv();if(n){var h;let t="string"===typeof n?av(n):n;"/"===l||(null==(h=t.pathname)?void 0:h.startsWith(l))||ev(!1),u=t}else u=c;let d=u.pathname||"/",p=uv(e,{pathname:"/"===l?d:d.slice(l.length)||"/"}),f=n_(p&&p.map((t=>Object.assign({},t,{params:Object.assign({},s,t.params),pathname:kv([l,r.encodeLocation?r.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?l:kv([l,r.encodeLocation?r.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])}))),o,i||void 0);return n&&f?t.createElement($v.Provider,{value:{location:Lv({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Wy.Pop}},f):f}(i&&!n?i.router.routes:d_(n),r)}var c_;!function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"}(c_||(c_={}));new Promise((()=>{}));class h_ extends t.Component{constructor(t){super(t),this.state={error:null}}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,e){console.error("<Await> caught the following error during render",t,e)}render(){let{children:t,errorElement:e,resolve:n}=this.props,r=null,i=c_.pending;if(n instanceof Promise)if(this.state.error){c_.error;let t=this.state.error;Promise.reject().catch((()=>{})),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_error",{get:()=>t})}else n._tracked?(n,void 0!==r._error?c_.error:void 0!==r._data?c_.success:c_.pending):(c_.pending,Object.defineProperty(n,"_tracked",{get:()=>!0}),n.then((t=>Object.defineProperty(n,"_data",{get:()=>t})),(t=>Object.defineProperty(n,"_error",{get:()=>t}))));else c_.success,Promise.resolve(),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_data",{get:()=>n});if(i===c_.error&&r._error instanceof AbortedDeferredError)throw neverSettledPromise;if(i===c_.error&&!e)throw r._error;if(i===c_.error)return React.createElement(AwaitContext.Provider,{value:r,children:e});if(i===c_.success)return React.createElement(AwaitContext.Provider,{value:r,children:t});throw r}}function d_(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;if(e.type===t.Fragment)return void r.push.apply(r,d_(e.props.children,n));e.type!==s_&&ev(!1),e.props.index&&e.props.children&&ev(!1);let o=[...n,i],a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(a.children=d_(e.props.children,o)),r.push(a)})),r}const p_=(0,t.createContext)("");const f_=function(){const e=(0,t.useContext)(p_),n=Kv();return(0,Rt.jsxs)("div",{className:"main",children:[(0,Rt.jsxs)("div",{className:"content",children:[(0,Rt.jsx)("h1",{children:"Let's Plan your Road trip!"}),(0,Rt.jsx)("button",{onClick:()=>{n(e?"/main":"/signup")},children:" Create new account "}),(0,Rt.jsx)("br",{}),(0,Rt.jsx)("button",{onClick:()=>{n(e?"/main":"/signin")},children:" Log in "})]}),e?(0,Rt.jsx)("div",{children:"User logged in "}):(0,Rt.jsx)(Rt.Fragment,{})]})};var m_=n(77),g_=n.n(m_),y_=function(t){return function(t){return!!t&&"object"===typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===v_}(t)}(t)};var v_="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function __(t,e){return!1!==e.clone&&e.isMergeableObject(t)?x_((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function b_(t,e,n){return t.concat(e).map((function(t){return __(t,n)}))}function x_(t,e,n){(n=n||{}).arrayMerge=n.arrayMerge||b_,n.isMergeableObject=n.isMergeableObject||y_;var r=Array.isArray(e);return r===Array.isArray(t)?r?n.arrayMerge(t,e,n):function(t,e,n){var r={};return n.isMergeableObject(t)&&Object.keys(t).forEach((function(e){r[e]=__(t[e],n)})),Object.keys(e).forEach((function(i){n.isMergeableObject(e[i])&&t[i]?r[i]=x_(t[i],e[i],n):r[i]=__(e[i],n)})),r}(t,e,n):__(e,n)}x_.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return x_(t,n,e)}),{})};const w_=x_;const E_="object"==typeof global&&global&&global.Object===Object&&global;var S_="object"==typeof self&&self&&self.Object===Object&&self;const C_=E_||S_||Function("return this")();const T_=C_.Symbol;var I_=Object.prototype,k_=I_.hasOwnProperty,A_=I_.toString,P_=T_?T_.toStringTag:void 0;const D_=function(t){var e=k_.call(t,P_),n=t[P_];try{t[P_]=void 0;var r=!0}catch(o){}var i=A_.call(t);return r&&(e?t[P_]=n:delete t[P_]),i};var M_=Object.prototype.toString;const O_=function(t){return M_.call(t)};var R_="[object Null]",N_="[object Undefined]",L_=T_?T_.toStringTag:void 0;const F_=function(t){return null==t?void 0===t?N_:R_:L_&&L_ in Object(t)?D_(t):O_(t)};const z_=function(t,e){return function(n){return t(e(n))}};const B_=z_(Object.getPrototypeOf,Object);const j_=function(t){return null!=t&&"object"==typeof t};var U_="[object Object]",V_=Function.prototype,q_=Object.prototype,G_=V_.toString,Y_=q_.hasOwnProperty,$_=G_.call(Object);const W_=function(t){if(!j_(t)||F_(t)!=U_)return!1;var e=B_(t);if(null===e)return!0;var n=Y_.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&G_.call(n)==$_};const H_=function(){this.__data__=[],this.size=0};const X_=function(t,e){return t===e||t!==t&&e!==e};const Z_=function(t,e){for(var n=t.length;n--;)if(X_(t[n][0],e))return n;return-1};var K_=Array.prototype.splice;const Q_=function(t){var e=this.__data__,n=Z_(e,t);return!(n<0)&&(n==e.length-1?e.pop():K_.call(e,n,1),--this.size,!0)};const J_=function(t){var e=this.__data__,n=Z_(e,t);return n<0?void 0:e[n][1]};const tb=function(t){return Z_(this.__data__,t)>-1};const eb=function(t,e){var n=this.__data__,r=Z_(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function nb(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}nb.prototype.clear=H_,nb.prototype.delete=Q_,nb.prototype.get=J_,nb.prototype.has=tb,nb.prototype.set=eb;const rb=nb;const ib=function(){this.__data__=new rb,this.size=0};const ob=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};const ab=function(t){return this.__data__.get(t)};const sb=function(t){return this.__data__.has(t)};const lb=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var ub="[object AsyncFunction]",cb="[object Function]",hb="[object GeneratorFunction]",db="[object Proxy]";const pb=function(t){if(!lb(t))return!1;var e=F_(t);return e==cb||e==hb||e==ub||e==db};const fb=C_["__core-js_shared__"];var mb=function(){var t=/[^.]+$/.exec(fb&&fb.keys&&fb.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();const gb=function(t){return!!mb&&mb in t};var yb=Function.prototype.toString;const vb=function(t){if(null!=t){try{return yb.call(t)}catch(e){}try{return t+""}catch(e){}}return""};var _b=/^\[object .+?Constructor\]$/,bb=Function.prototype,xb=Object.prototype,wb=bb.toString,Eb=xb.hasOwnProperty,Sb=RegExp("^"+wb.call(Eb).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Cb=function(t){return!(!lb(t)||gb(t))&&(pb(t)?Sb:_b).test(vb(t))};const Tb=function(t,e){return null==t?void 0:t[e]};const Ib=function(t,e){var n=Tb(t,e);return Cb(n)?n:void 0};const kb=Ib(C_,"Map");const Ab=Ib(Object,"create");const Pb=function(){this.__data__=Ab?Ab(null):{},this.size=0};const Db=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var Mb="__lodash_hash_undefined__",Ob=Object.prototype.hasOwnProperty;const Rb=function(t){var e=this.__data__;if(Ab){var n=e[t];return n===Mb?void 0:n}return Ob.call(e,t)?e[t]:void 0};var Nb=Object.prototype.hasOwnProperty;const Lb=function(t){var e=this.__data__;return Ab?void 0!==e[t]:Nb.call(e,t)};var Fb="__lodash_hash_undefined__";const zb=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ab&&void 0===e?Fb:e,this};function Bb(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Bb.prototype.clear=Pb,Bb.prototype.delete=Db,Bb.prototype.get=Rb,Bb.prototype.has=Lb,Bb.prototype.set=zb;const jb=Bb;const Ub=function(){this.size=0,this.__data__={hash:new jb,map:new(kb||rb),string:new jb}};const Vb=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};const qb=function(t,e){var n=t.__data__;return Vb(e)?n["string"==typeof e?"string":"hash"]:n.map};const Gb=function(t){var e=qb(this,t).delete(t);return this.size-=e?1:0,e};const Yb=function(t){return qb(this,t).get(t)};const $b=function(t){return qb(this,t).has(t)};const Wb=function(t,e){var n=qb(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function Hb(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Hb.prototype.clear=Ub,Hb.prototype.delete=Gb,Hb.prototype.get=Yb,Hb.prototype.has=$b,Hb.prototype.set=Wb;const Xb=Hb;var Zb=200;const Kb=function(t,e){var n=this.__data__;if(n instanceof rb){var r=n.__data__;if(!kb||r.length<Zb-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Xb(r)}return n.set(t,e),this.size=n.size,this};function Qb(t){var e=this.__data__=new rb(t);this.size=e.size}Qb.prototype.clear=ib,Qb.prototype.delete=ob,Qb.prototype.get=ab,Qb.prototype.has=sb,Qb.prototype.set=Kb;const Jb=Qb;const tx=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t};const ex=function(){try{var t=Ib(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();const nx=function(t,e,n){"__proto__"==e&&ex?ex(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var rx=Object.prototype.hasOwnProperty;const ix=function(t,e,n){var r=t[e];rx.call(t,e)&&X_(r,n)&&(void 0!==n||e in t)||nx(t,e,n)};const ox=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=r?r(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),i?nx(n,s,l):ix(n,s,l)}return n};const ax=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var sx="[object Arguments]";const lx=function(t){return j_(t)&&F_(t)==sx};var ux=Object.prototype,cx=ux.hasOwnProperty,hx=ux.propertyIsEnumerable;const dx=lx(function(){return arguments}())?lx:function(t){return j_(t)&&cx.call(t,"callee")&&!hx.call(t,"callee")};const px=Array.isArray;const fx=function(){return!1};var mx="object"==typeof exports&&exports&&!exports.nodeType&&exports,gx=mx&&"object"==typeof module&&module&&!module.nodeType&&module,yx=gx&&gx.exports===mx?C_.Buffer:void 0;const vx=(yx?yx.isBuffer:void 0)||fx;var _x=9007199254740991,bx=/^(?:0|[1-9]\d*)$/;const xx=function(t,e){var n=typeof t;return!!(e=null==e?_x:e)&&("number"==n||"symbol"!=n&&bx.test(t))&&t>-1&&t%1==0&&t<e};var wx=9007199254740991;const Ex=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=wx};var Sx={};Sx["[object Float32Array]"]=Sx["[object Float64Array]"]=Sx["[object Int8Array]"]=Sx["[object Int16Array]"]=Sx["[object Int32Array]"]=Sx["[object Uint8Array]"]=Sx["[object Uint8ClampedArray]"]=Sx["[object Uint16Array]"]=Sx["[object Uint32Array]"]=!0,Sx["[object Arguments]"]=Sx["[object Array]"]=Sx["[object ArrayBuffer]"]=Sx["[object Boolean]"]=Sx["[object DataView]"]=Sx["[object Date]"]=Sx["[object Error]"]=Sx["[object Function]"]=Sx["[object Map]"]=Sx["[object Number]"]=Sx["[object Object]"]=Sx["[object RegExp]"]=Sx["[object Set]"]=Sx["[object String]"]=Sx["[object WeakMap]"]=!1;const Cx=function(t){return j_(t)&&Ex(t.length)&&!!Sx[F_(t)]};const Tx=function(t){return function(e){return t(e)}};var Ix="object"==typeof exports&&exports&&!exports.nodeType&&exports,kx=Ix&&"object"==typeof module&&module&&!module.nodeType&&module,Ax=kx&&kx.exports===Ix&&E_.process,Px=function(){try{var t=kx&&kx.require&&kx.require("util").types;return t||Ax&&Ax.binding&&Ax.binding("util")}catch(e){}}();const Dx=Px;var Mx=Dx&&Dx.isTypedArray;const Ox=Mx?Tx(Mx):Cx;var Rx=Object.prototype.hasOwnProperty;const Nx=function(t,e){var n=px(t),r=!n&&dx(t),i=!n&&!r&&vx(t),o=!n&&!r&&!i&&Ox(t),a=n||r||i||o,s=a?ax(t.length,String):[],l=s.length;for(var u in t)!e&&!Rx.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||xx(u,l))||s.push(u);return s};var Lx=Object.prototype;const Fx=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Lx)};const zx=z_(Object.keys,Object);var Bx=Object.prototype.hasOwnProperty;const jx=function(t){if(!Fx(t))return zx(t);var e=[];for(var n in Object(t))Bx.call(t,n)&&"constructor"!=n&&e.push(n);return e};const Ux=function(t){return null!=t&&Ex(t.length)&&!pb(t)};const Vx=function(t){return Ux(t)?Nx(t):jx(t)};const qx=function(t,e){return t&&ox(e,Vx(e),t)};const Gx=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e};var Yx=Object.prototype.hasOwnProperty;const $x=function(t){if(!lb(t))return Gx(t);var e=Fx(t),n=[];for(var r in t)("constructor"!=r||!e&&Yx.call(t,r))&&n.push(r);return n};const Wx=function(t){return Ux(t)?Nx(t,!0):$x(t)};const Hx=function(t,e){return t&&ox(e,Wx(e),t)};var Xx="object"==typeof exports&&exports&&!exports.nodeType&&exports,Zx=Xx&&"object"==typeof module&&module&&!module.nodeType&&module,Kx=Zx&&Zx.exports===Xx?C_.Buffer:void 0,Qx=Kx?Kx.allocUnsafe:void 0;const Jx=function(t,e){if(e)return t.slice();var n=t.length,r=Qx?Qx(n):new t.constructor(n);return t.copy(r),r};const tw=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e};const ew=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o};const nw=function(){return[]};var rw=Object.prototype.propertyIsEnumerable,iw=Object.getOwnPropertySymbols,ow=iw?function(t){return null==t?[]:(t=Object(t),ew(iw(t),(function(e){return rw.call(t,e)})))}:nw;const aw=ow;const sw=function(t,e){return ox(t,aw(t),e)};const lw=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t};var uw=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)lw(e,aw(t)),t=B_(t);return e}:nw;const cw=uw;const hw=function(t,e){return ox(t,cw(t),e)};const dw=function(t,e,n){var r=e(t);return px(t)?r:lw(r,n(t))};const pw=function(t){return dw(t,Vx,aw)};const fw=function(t){return dw(t,Wx,cw)};const mw=Ib(C_,"DataView");const gw=Ib(C_,"Promise");const yw=Ib(C_,"Set");const vw=Ib(C_,"WeakMap");var _w="[object Map]",bw="[object Promise]",xw="[object Set]",ww="[object WeakMap]",Ew="[object DataView]",Sw=vb(mw),Cw=vb(kb),Tw=vb(gw),Iw=vb(yw),kw=vb(vw),Aw=F_;(mw&&Aw(new mw(new ArrayBuffer(1)))!=Ew||kb&&Aw(new kb)!=_w||gw&&Aw(gw.resolve())!=bw||yw&&Aw(new yw)!=xw||vw&&Aw(new vw)!=ww)&&(Aw=function(t){var e=F_(t),n="[object Object]"==e?t.constructor:void 0,r=n?vb(n):"";if(r)switch(r){case Sw:return Ew;case Cw:return _w;case Tw:return bw;case Iw:return xw;case kw:return ww}return e});const Pw=Aw;var Dw=Object.prototype.hasOwnProperty;const Mw=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Dw.call(t,"index")&&(n.index=t.index,n.input=t.input),n};const Ow=C_.Uint8Array;const Rw=function(t){var e=new t.constructor(t.byteLength);return new Ow(e).set(new Ow(t)),e};const Nw=function(t,e){var n=e?Rw(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)};var Lw=/\w*$/;const Fw=function(t){var e=new t.constructor(t.source,Lw.exec(t));return e.lastIndex=t.lastIndex,e};var zw=T_?T_.prototype:void 0,Bw=zw?zw.valueOf:void 0;const jw=function(t){return Bw?Object(Bw.call(t)):{}};const Uw=function(t,e){var n=e?Rw(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var Vw="[object Boolean]",qw="[object Date]",Gw="[object Map]",Yw="[object Number]",$w="[object RegExp]",Ww="[object Set]",Hw="[object String]",Xw="[object Symbol]",Zw="[object ArrayBuffer]",Kw="[object DataView]",Qw="[object Float32Array]",Jw="[object Float64Array]",tE="[object Int8Array]",eE="[object Int16Array]",nE="[object Int32Array]",rE="[object Uint8Array]",iE="[object Uint8ClampedArray]",oE="[object Uint16Array]",aE="[object Uint32Array]";const sE=function(t,e,n){var r=t.constructor;switch(e){case Zw:return Rw(t);case Vw:case qw:return new r(+t);case Kw:return Nw(t,n);case Qw:case Jw:case tE:case eE:case nE:case rE:case iE:case oE:case aE:return Uw(t,n);case Gw:return new r;case Yw:case Hw:return new r(t);case $w:return Fw(t);case Ww:return new r;case Xw:return jw(t)}};var lE=Object.create,uE=function(){function t(){}return function(e){if(!lb(e))return{};if(lE)return lE(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const cE=uE;const hE=function(t){return"function"!=typeof t.constructor||Fx(t)?{}:cE(B_(t))};var dE="[object Map]";const pE=function(t){return j_(t)&&Pw(t)==dE};var fE=Dx&&Dx.isMap;const mE=fE?Tx(fE):pE;var gE="[object Set]";const yE=function(t){return j_(t)&&Pw(t)==gE};var vE=Dx&&Dx.isSet;const _E=vE?Tx(vE):yE;var bE=1,xE=2,wE=4,EE="[object Arguments]",SE="[object Function]",CE="[object GeneratorFunction]",TE="[object Object]",IE={};IE[EE]=IE["[object Array]"]=IE["[object ArrayBuffer]"]=IE["[object DataView]"]=IE["[object Boolean]"]=IE["[object Date]"]=IE["[object Float32Array]"]=IE["[object Float64Array]"]=IE["[object Int8Array]"]=IE["[object Int16Array]"]=IE["[object Int32Array]"]=IE["[object Map]"]=IE["[object Number]"]=IE[TE]=IE["[object RegExp]"]=IE["[object Set]"]=IE["[object String]"]=IE["[object Symbol]"]=IE["[object Uint8Array]"]=IE["[object Uint8ClampedArray]"]=IE["[object Uint16Array]"]=IE["[object Uint32Array]"]=!0,IE["[object Error]"]=IE[SE]=IE["[object WeakMap]"]=!1;const kE=function t(e,n,r,i,o,a){var s,l=n&bE,u=n&xE,c=n&wE;if(r&&(s=o?r(e,i,o,a):r(e)),void 0!==s)return s;if(!lb(e))return e;var h=px(e);if(h){if(s=Mw(e),!l)return tw(e,s)}else{var d=Pw(e),p=d==SE||d==CE;if(vx(e))return Jx(e,l);if(d==TE||d==EE||p&&!o){if(s=u||p?{}:hE(e),!l)return u?hw(e,Hx(s,e)):sw(e,qx(s,e))}else{if(!IE[d])return o?e:{};s=sE(e,d,l)}}a||(a=new Jb);var f=a.get(e);if(f)return f;a.set(e,s),_E(e)?e.forEach((function(i){s.add(t(i,n,r,i,e,a))})):mE(e)&&e.forEach((function(i,o){s.set(o,t(i,n,r,o,e,a))}));var m=h?void 0:(c?u?fw:pw:u?Wx:Vx)(e);return tx(m||e,(function(i,o){m&&(i=e[o=i]),ix(s,o,t(i,n,r,o,e,a))})),s};var AE=4;const PE=function(t){return kE(t,AE)};const DE=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i};var ME="[object Symbol]";const OE=function(t){return"symbol"==typeof t||j_(t)&&F_(t)==ME};var RE="Expected a function";function NE(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(RE);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(NE.Cache||Xb),n}NE.Cache=Xb;const LE=NE;var FE=500;const zE=function(t){var e=LE(t,(function(t){return n.size===FE&&n.clear(),t})),n=e.cache;return e};var BE=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jE=/\\(\\)?/g;const UE=zE((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(BE,(function(t,n,r,i){e.push(r?i.replace(jE,"$1"):n||t)})),e}));var VE=1/0;const qE=function(t){if("string"==typeof t||OE(t))return t;var e=t+"";return"0"==e&&1/t==-VE?"-0":e};var GE=1/0,YE=T_?T_.prototype:void 0,$E=YE?YE.toString:void 0;const WE=function t(e){if("string"==typeof e)return e;if(px(e))return DE(e,t)+"";if(OE(e))return $E?$E.call(e):"";var n=e+"";return"0"==n&&1/e==-GE?"-0":n};const HE=function(t){return null==t?"":WE(t)};const XE=function(t){return px(t)?DE(t,qE):OE(t)?[t]:tw(UE(HE(t)))};var ZE=!0;const KE=function(t,e){if(!ZE){if(t)return;var n="Warning: "+e;"undefined"!==typeof console&&console.warn(n);try{throw Error(n)}catch(BA){}}};var QE=1,JE=4;const tS=function(t){return kE(t,QE|JE)};function eS(){return eS=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eS.apply(this,arguments)}function nS(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function rS(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function iS(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var oS=function(t){return Array.isArray(t)&&0===t.length},aS=function(t){return"function"===typeof t},sS=function(t){return null!==t&&"object"===typeof t},lS=function(t){return String(Math.floor(Number(t)))===t},uS=function(t){return"[object String]"===Object.prototype.toString.call(t)},cS=function(e){return 0===t.Children.count(e)},hS=function(t){return sS(t)&&aS(t.then)};function dS(t,e,n,r){void 0===r&&(r=0);for(var i=XE(e);t&&r<i.length;)t=t[i[r++]];return void 0===t?n:t}function pS(t,e,n){for(var r=PE(t),i=r,o=0,a=XE(e);o<a.length-1;o++){var s=a[o],l=dS(t,a.slice(0,o+1));if(l&&(sS(l)||Array.isArray(l)))i=i[s]=PE(l);else{var u=a[o+1];i=i[s]=lS(u)&&Number(u)>=0?[]:{}}}return(0===o?t:i)[a[o]]===n?t:(void 0===n?delete i[a[o]]:i[a[o]]=n,0===o&&void 0===n&&delete r[a[o]],r)}function fS(t,e,n,r){void 0===n&&(n=new WeakMap),void 0===r&&(r={});for(var i=0,o=Object.keys(t);i<o.length;i++){var a=o[i],s=t[a];sS(s)?n.get(s)||(n.set(s,!0),r[a]=Array.isArray(s)?[]:{},fS(s,e,n,r[a])):r[a]=e}return r}var mS=(0,t.createContext)(void 0);mS.displayName="FormikContext";var gS=mS.Provider;mS.Consumer;function yS(){var e=(0,t.useContext)(mS);return e||KE(!1),e}function vS(t,e){switch(e.type){case"SET_VALUES":return eS({},t,{values:e.payload});case"SET_TOUCHED":return eS({},t,{touched:e.payload});case"SET_ERRORS":return g_()(t.errors,e.payload)?t:eS({},t,{errors:e.payload});case"SET_STATUS":return eS({},t,{status:e.payload});case"SET_ISSUBMITTING":return eS({},t,{isSubmitting:e.payload});case"SET_ISVALIDATING":return eS({},t,{isValidating:e.payload});case"SET_FIELD_VALUE":return eS({},t,{values:pS(t.values,e.payload.field,e.payload.value)});case"SET_FIELD_TOUCHED":return eS({},t,{touched:pS(t.touched,e.payload.field,e.payload.value)});case"SET_FIELD_ERROR":return eS({},t,{errors:pS(t.errors,e.payload.field,e.payload.value)});case"RESET_FORM":return eS({},t,e.payload);case"SET_FORMIK_STATE":return e.payload(t);case"SUBMIT_ATTEMPT":return eS({},t,{touched:fS(t.values,!0),isSubmitting:!0,submitCount:t.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return eS({},t,{isSubmitting:!1});default:return t}}var _S={},bS={};function xS(e){var n=e.validateOnChange,r=void 0===n||n,i=e.validateOnBlur,o=void 0===i||i,a=e.validateOnMount,s=void 0!==a&&a,l=e.isInitialValid,u=e.enableReinitialize,c=void 0!==u&&u,h=e.onSubmit,d=rS(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),p=eS({validateOnChange:r,validateOnBlur:o,validateOnMount:s,onSubmit:h},d),f=(0,t.useRef)(p.initialValues),m=(0,t.useRef)(p.initialErrors||_S),g=(0,t.useRef)(p.initialTouched||bS),y=(0,t.useRef)(p.initialStatus),v=(0,t.useRef)(!1),_=(0,t.useRef)({});(0,t.useEffect)((function(){return v.current=!0,function(){v.current=!1}}),[]);var b=(0,t.useReducer)(vS,{values:p.initialValues,errors:p.initialErrors||_S,touched:p.initialTouched||bS,status:p.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),x=b[0],w=b[1],E=(0,t.useCallback)((function(t,e){return new Promise((function(n,r){var i=p.validate(t,e);null==i?n(_S):hS(i)?i.then((function(t){n(t||_S)}),(function(t){r(t)})):n(i)}))}),[p.validate]),S=(0,t.useCallback)((function(t,e){var n=p.validationSchema,r=aS(n)?n(e):n,i=e&&r.validateAt?r.validateAt(e,t):function(t,e,n,r){void 0===n&&(n=!1);void 0===r&&(r={});var i=ES(t);return e[n?"validateSync":"validate"](i,{abortEarly:!1,context:r})}(t,r);return new Promise((function(t,e){i.then((function(){t(_S)}),(function(n){"ValidationError"===n.name?t(function(t){var e={};if(t.inner){if(0===t.inner.length)return pS(e,t.path,t.message);var n=t.inner,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var a=o;dS(e,a.path)||(e=pS(e,a.path,a.message))}}return e}(n)):e(n)}))}))}),[p.validationSchema]),C=(0,t.useCallback)((function(t,e){return new Promise((function(n){return n(_.current[t].validate(e))}))}),[]),T=(0,t.useCallback)((function(t){var e=Object.keys(_.current).filter((function(t){return aS(_.current[t].validate)})),n=e.length>0?e.map((function(e){return C(e,dS(t,e))})):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(n).then((function(t){return t.reduce((function(t,n,r){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===n||n&&(t=pS(t,e[r],n)),t}),{})}))}),[C]),I=(0,t.useCallback)((function(t){return Promise.all([T(t),p.validationSchema?S(t):{},p.validate?E(t):{}]).then((function(t){var e=t[0],n=t[1],r=t[2];return w_.all([e,n,r],{arrayMerge:SS})}))}),[p.validate,p.validationSchema,T,E,S]),k=TS((function(t){return void 0===t&&(t=x.values),w({type:"SET_ISVALIDATING",payload:!0}),I(t).then((function(t){return v.current&&(w({type:"SET_ISVALIDATING",payload:!1}),w({type:"SET_ERRORS",payload:t})),t}))}));(0,t.useEffect)((function(){s&&!0===v.current&&g_()(f.current,p.initialValues)&&k(f.current)}),[s,k]);var A=(0,t.useCallback)((function(t){var e=t&&t.values?t.values:f.current,n=t&&t.errors?t.errors:m.current?m.current:p.initialErrors||{},r=t&&t.touched?t.touched:g.current?g.current:p.initialTouched||{},i=t&&t.status?t.status:y.current?y.current:p.initialStatus;f.current=e,m.current=n,g.current=r,y.current=i;var o=function(){w({type:"RESET_FORM",payload:{isSubmitting:!!t&&!!t.isSubmitting,errors:n,touched:r,status:i,values:e,isValidating:!!t&&!!t.isValidating,submitCount:t&&t.submitCount&&"number"===typeof t.submitCount?t.submitCount:0}})};if(p.onReset){var a=p.onReset(x.values,H);hS(a)?a.then(o):o()}else o()}),[p.initialErrors,p.initialStatus,p.initialTouched]);(0,t.useEffect)((function(){!0!==v.current||g_()(f.current,p.initialValues)||(c&&(f.current=p.initialValues,A()),s&&k(f.current))}),[c,p.initialValues,A,s,k]),(0,t.useEffect)((function(){c&&!0===v.current&&!g_()(m.current,p.initialErrors)&&(m.current=p.initialErrors||_S,w({type:"SET_ERRORS",payload:p.initialErrors||_S}))}),[c,p.initialErrors]),(0,t.useEffect)((function(){c&&!0===v.current&&!g_()(g.current,p.initialTouched)&&(g.current=p.initialTouched||bS,w({type:"SET_TOUCHED",payload:p.initialTouched||bS}))}),[c,p.initialTouched]),(0,t.useEffect)((function(){c&&!0===v.current&&!g_()(y.current,p.initialStatus)&&(y.current=p.initialStatus,w({type:"SET_STATUS",payload:p.initialStatus}))}),[c,p.initialStatus,p.initialTouched]);var P=TS((function(t){if(_.current[t]&&aS(_.current[t].validate)){var e=dS(x.values,t),n=_.current[t].validate(e);return hS(n)?(w({type:"SET_ISVALIDATING",payload:!0}),n.then((function(t){return t})).then((function(e){w({type:"SET_FIELD_ERROR",payload:{field:t,value:e}}),w({type:"SET_ISVALIDATING",payload:!1})}))):(w({type:"SET_FIELD_ERROR",payload:{field:t,value:n}}),Promise.resolve(n))}return p.validationSchema?(w({type:"SET_ISVALIDATING",payload:!0}),S(x.values,t).then((function(t){return t})).then((function(e){w({type:"SET_FIELD_ERROR",payload:{field:t,value:e[t]}}),w({type:"SET_ISVALIDATING",payload:!1})}))):Promise.resolve()})),D=(0,t.useCallback)((function(t,e){var n=e.validate;_.current[t]={validate:n}}),[]),M=(0,t.useCallback)((function(t){delete _.current[t]}),[]),O=TS((function(t,e){return w({type:"SET_TOUCHED",payload:t}),(void 0===e?o:e)?k(x.values):Promise.resolve()})),R=(0,t.useCallback)((function(t){w({type:"SET_ERRORS",payload:t})}),[]),N=TS((function(t,e){var n=aS(t)?t(x.values):t;return w({type:"SET_VALUES",payload:n}),(void 0===e?r:e)?k(n):Promise.resolve()})),L=(0,t.useCallback)((function(t,e){w({type:"SET_FIELD_ERROR",payload:{field:t,value:e}})}),[]),F=TS((function(t,e,n){return w({type:"SET_FIELD_VALUE",payload:{field:t,value:e}}),(void 0===n?r:n)?k(pS(x.values,t,e)):Promise.resolve()})),z=(0,t.useCallback)((function(t,e){var n,r=e,i=t;if(!uS(t)){t.persist&&t.persist();var o=t.target?t.target:t.currentTarget,a=o.type,s=o.name,l=o.id,u=o.value,c=o.checked,h=(o.outerHTML,o.options),d=o.multiple;r=e||(s||l),i=/number|range/.test(a)?(n=parseFloat(u),isNaN(n)?"":n):/checkbox/.test(a)?function(t,e,n){if("boolean"===typeof t)return Boolean(e);var r=[],i=!1,o=-1;if(Array.isArray(t))r=t,i=(o=t.indexOf(n))>=0;else if(!n||"true"==n||"false"==n)return Boolean(e);if(e&&n&&!i)return r.concat(n);if(!i)return r;return r.slice(0,o).concat(r.slice(o+1))}(dS(x.values,r),c,u):h&&d?function(t){return Array.from(t).filter((function(t){return t.selected})).map((function(t){return t.value}))}(h):u}r&&F(r,i)}),[F,x.values]),B=TS((function(t){if(uS(t))return function(e){return z(e,t)};z(t)})),j=TS((function(t,e,n){return void 0===e&&(e=!0),w({type:"SET_FIELD_TOUCHED",payload:{field:t,value:e}}),(void 0===n?o:n)?k(x.values):Promise.resolve()})),U=(0,t.useCallback)((function(t,e){t.persist&&t.persist();var n=t.target,r=n.name,i=n.id,o=(n.outerHTML,e||(r||i));j(o,!0)}),[j]),V=TS((function(t){if(uS(t))return function(e){return U(e,t)};U(t)})),q=(0,t.useCallback)((function(t){aS(t)?w({type:"SET_FORMIK_STATE",payload:t}):w({type:"SET_FORMIK_STATE",payload:function(){return t}})}),[]),G=(0,t.useCallback)((function(t){w({type:"SET_STATUS",payload:t})}),[]),Y=(0,t.useCallback)((function(t){w({type:"SET_ISSUBMITTING",payload:t})}),[]),$=TS((function(){return w({type:"SUBMIT_ATTEMPT"}),k().then((function(t){var e=t instanceof Error;if(!e&&0===Object.keys(t).length){var n;try{if(void 0===(n=X()))return}catch(r){throw r}return Promise.resolve(n).then((function(t){return v.current&&w({type:"SUBMIT_SUCCESS"}),t})).catch((function(t){if(v.current)throw w({type:"SUBMIT_FAILURE"}),t}))}if(v.current&&(w({type:"SUBMIT_FAILURE"}),e))throw t}))})),W=TS((function(t){t&&t.preventDefault&&aS(t.preventDefault)&&t.preventDefault(),t&&t.stopPropagation&&aS(t.stopPropagation)&&t.stopPropagation(),$().catch((function(t){console.warn("Warning: An unhandled error was caught from submitForm()",t)}))})),H={resetForm:A,validateForm:k,validateField:P,setErrors:R,setFieldError:L,setFieldTouched:j,setFieldValue:F,setStatus:G,setSubmitting:Y,setTouched:O,setValues:N,setFormikState:q,submitForm:$},X=TS((function(){return h(x.values,H)})),Z=TS((function(t){t&&t.preventDefault&&aS(t.preventDefault)&&t.preventDefault(),t&&t.stopPropagation&&aS(t.stopPropagation)&&t.stopPropagation(),A()})),K=(0,t.useCallback)((function(t){return{value:dS(x.values,t),error:dS(x.errors,t),touched:!!dS(x.touched,t),initialValue:dS(f.current,t),initialTouched:!!dS(g.current,t),initialError:dS(m.current,t)}}),[x.errors,x.touched,x.values]),Q=(0,t.useCallback)((function(t){return{setValue:function(e,n){return F(t,e,n)},setTouched:function(e,n){return j(t,e,n)},setError:function(e){return L(t,e)}}}),[F,j,L]),J=(0,t.useCallback)((function(t){var e=sS(t),n=e?t.name:t,r=dS(x.values,n),i={name:n,value:r,onChange:B,onBlur:V};if(e){var o=t.type,a=t.value,s=t.as,l=t.multiple;"checkbox"===o?void 0===a?i.checked=!!r:(i.checked=!(!Array.isArray(r)||!~r.indexOf(a)),i.value=a):"radio"===o?(i.checked=r===a,i.value=a):"select"===s&&l&&(i.value=i.value||[],i.multiple=!0)}return i}),[V,B,x.values]),tt=(0,t.useMemo)((function(){return!g_()(f.current,x.values)}),[f.current,x.values]),et=(0,t.useMemo)((function(){return"undefined"!==typeof l?tt?x.errors&&0===Object.keys(x.errors).length:!1!==l&&aS(l)?l(p):l:x.errors&&0===Object.keys(x.errors).length}),[l,tt,x.errors,p]);return eS({},x,{initialValues:f.current,initialErrors:m.current,initialTouched:g.current,initialStatus:y.current,handleBlur:V,handleChange:B,handleReset:Z,handleSubmit:W,resetForm:A,setErrors:R,setFormikState:q,setFieldTouched:j,setFieldValue:F,setFieldError:L,setStatus:G,setSubmitting:Y,setTouched:O,setValues:N,submitForm:$,validateForm:k,validateField:P,isValid:et,dirty:tt,unregisterField:M,registerField:D,getFieldProps:J,getFieldMeta:K,getFieldHelpers:Q,validateOnBlur:o,validateOnChange:r,validateOnMount:s})}function wS(e){var n=xS(e),r=e.component,i=e.children,o=e.render,a=e.innerRef;return(0,t.useImperativeHandle)(a,(function(){return n})),(0,t.createElement)(gS,{value:n},r?(0,t.createElement)(r,n):o?o(n):i?aS(i)?i(n):cS(i)?null:t.Children.only(i):null)}function ES(t){var e=Array.isArray(t)?[]:{};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=String(n);!0===Array.isArray(t[r])?e[r]=t[r].map((function(t){return!0===Array.isArray(t)||W_(t)?ES(t):""!==t?t:void 0})):W_(t[r])?e[r]=ES(t[r]):e[r]=""!==t[r]?t[r]:void 0}return e}function SS(t,e,n){var r=t.slice();return e.forEach((function(e,i){if("undefined"===typeof r[i]){var o=!1!==n.clone&&n.isMergeableObject(e);r[i]=o?w_(Array.isArray(e)?[]:{},e,n):e}else n.isMergeableObject(e)?r[i]=w_(t[i],e,n):-1===t.indexOf(e)&&r.push(e)})),r}var CS="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?t.useLayoutEffect:t.useEffect;function TS(e){var n=(0,t.useRef)(e);return CS((function(){n.current=e})),(0,t.useCallback)((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return n.current.apply(void 0,e)}),[])}function IS(e){var n=e.validate,r=e.name,i=e.render,o=e.children,a=e.as,s=e.component,l=rS(e,["validate","name","render","children","as","component"]),u=rS(yS(),["validate","validationSchema"]);var c=u.registerField,h=u.unregisterField;(0,t.useEffect)((function(){return c(r,{validate:n}),function(){h(r)}}),[c,h,r,n]);var d=u.getFieldProps(eS({name:r},l)),p=u.getFieldMeta(r),f={field:d,form:u};if(i)return i(eS({},f,{meta:p}));if(aS(o))return o(eS({},f,{meta:p}));if(s){if("string"===typeof s){var m=l.innerRef,g=rS(l,["innerRef"]);return(0,t.createElement)(s,eS({ref:m},d,g),o)}return(0,t.createElement)(s,eS({field:d,form:u},l),o)}var y=a||"input";if("string"===typeof y){var v=l.innerRef,_=rS(l,["innerRef"]);return(0,t.createElement)(y,eS({ref:v},d,_),o)}return(0,t.createElement)(y,eS({},d,l),o)}var kS=(0,t.forwardRef)((function(e,n){var r=e.action,i=rS(e,["action"]),o=null!=r?r:"#",a=yS(),s=a.handleReset,l=a.handleSubmit;return(0,t.createElement)("form",Object.assign({onSubmit:l,ref:n,onReset:s,action:o},i))}));kS.displayName="Form";var AS=function(t,e,n){var r=OS(t),i=r[e];return r.splice(e,1),r.splice(n,0,i),r},PS=function(t,e,n){var r=OS(t),i=r[e];return r[e]=r[n],r[n]=i,r},DS=function(t,e,n){var r=OS(t);return r.splice(e,0,n),r},MS=function(t,e,n){var r=OS(t);return r[e]=n,r},OS=function(t){if(t){if(Array.isArray(t))return[].concat(t);var e=Object.keys(t).map((function(t){return parseInt(t)})).reduce((function(t,e){return e>t?e:t}),0);return Array.from(eS({},t,{length:e+1}))}return[]},RS=function(e){function n(t){var n;return(n=e.call(this,t)||this).updateArrayField=function(t,e,r){var i=n.props,o=i.name;(0,i.formik.setFormikState)((function(n){var i="function"===typeof r?r:t,a="function"===typeof e?e:t,s=pS(n.values,o,t(dS(n.values,o))),l=r?i(dS(n.errors,o)):void 0,u=e?a(dS(n.touched,o)):void 0;return oS(l)&&(l=void 0),oS(u)&&(u=void 0),eS({},n,{values:s,errors:r?pS(n.errors,o,l):n.errors,touched:e?pS(n.touched,o,u):n.touched})}))},n.push=function(t){return n.updateArrayField((function(e){return[].concat(OS(e),[tS(t)])}),!1,!1)},n.handlePush=function(t){return function(){return n.push(t)}},n.swap=function(t,e){return n.updateArrayField((function(n){return PS(n,t,e)}),!0,!0)},n.handleSwap=function(t,e){return function(){return n.swap(t,e)}},n.move=function(t,e){return n.updateArrayField((function(n){return AS(n,t,e)}),!0,!0)},n.handleMove=function(t,e){return function(){return n.move(t,e)}},n.insert=function(t,e){return n.updateArrayField((function(n){return DS(n,t,e)}),(function(e){return DS(e,t,null)}),(function(e){return DS(e,t,null)}))},n.handleInsert=function(t,e){return function(){return n.insert(t,e)}},n.replace=function(t,e){return n.updateArrayField((function(n){return MS(n,t,e)}),!1,!1)},n.handleReplace=function(t,e){return function(){return n.replace(t,e)}},n.unshift=function(t){var e=-1;return n.updateArrayField((function(n){var r=n?[t].concat(n):[t];return e<0&&(e=r.length),r}),(function(t){var n=t?[null].concat(t):[null];return e<0&&(e=n.length),n}),(function(t){var n=t?[null].concat(t):[null];return e<0&&(e=n.length),n})),e},n.handleUnshift=function(t){return function(){return n.unshift(t)}},n.handleRemove=function(t){return function(){return n.remove(t)}},n.handlePop=function(){return function(){return n.pop()}},n.remove=n.remove.bind(iS(n)),n.pop=n.pop.bind(iS(n)),n}nS(n,e);var r=n.prototype;return r.componentDidUpdate=function(t){this.props.validateOnChange&&this.props.formik.validateOnChange&&!g_()(dS(t.formik.values,t.name),dS(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},r.remove=function(t){var e;return this.updateArrayField((function(n){var r=n?OS(n):[];return e||(e=r[t]),aS(r.splice)&&r.splice(t,1),r}),!0,!0),e},r.pop=function(){var t;return this.updateArrayField((function(e){var n=e;return t||(t=n&&n.pop&&n.pop()),n}),!0,!0),t},r.render=function(){var e={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},n=this.props,r=n.component,i=n.render,o=n.children,a=n.name,s=eS({},e,{form:rS(n.formik,["validate","validationSchema"]),name:a});return r?(0,t.createElement)(r,s):i?i(s):o?"function"===typeof o?o(s):cS(o)?null:t.Children.only(o):null},n}(t.Component);RS.defaultProps={validateOnChange:!0};t.Component,t.Component;const NS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},LS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const e=t[i],o=i+1<t.length,a=o?t[i+1]:0,s=i+2<t.length,l=s?t[i+2]:0,u=e>>2,c=(3&e)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;s||(d=64,o||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(NS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{const o=t[n++],a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const e=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const a=i<t.length?n[t.charAt(i)]:64;++i;const s=i<t.length?n[t.charAt(i)]:64;if(++i,null==e||null==o||null==a||null==s)throw Error();const l=e<<2|o>>4;if(r.push(l),64!==a){const t=o<<4&240|a>>2;if(r.push(t),64!==s){const t=a<<6&192|s;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},FS=function(t){return function(t){const e=NS(t);return LS.encodeByteArray(e,!0)}(t).replace(/\./g,"")},zS=function(t){try{return LS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const BS=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,jS=()=>{try{return BS()||(()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",PUBLIC_URL:"/Trip-Planner",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&zS(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},US=t=>{var e,n;return null===(n=null===(e=jS())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},VS=t=>{const e=US(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qS=()=>{var t;return null===(t=jS())||void 0===t?void 0:t.config},GS=t=>{var e;return null===(e=jS())||void 0===e?void 0:e[`_${t}`]};class YS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function $S(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}class WS extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,WS.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,HS.prototype.create)}}class HS{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t){const e=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${t}`,r=this.errors[t],i=r?function(t,e){return t.replace(XS,((t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`}))}(r,e):"Error",o=`${this.serviceName}: ${i} (${n}).`;return new WS(n,o,e)}}const XS=/\{\$([^}]+)}/g;function ZS(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],o=e[i];if(KS(n)&&KS(o)){if(!ZS(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function KS(t){return null!==t&&"object"===typeof t}function QS(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function JS(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,r]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(r)}})),e}function tC(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class eC{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let r;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=function(t,e){if("object"!==typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"===typeof t[n])return!0;return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=nC),void 0===r.error&&(r.error=nC),void 0===r.complete&&(r.complete=nC);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(t){}})),this.observers.push(r),i}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function nC(){}function rC(t){return t&&t._delegate?t._delegate:t}class iC{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const oC="[DEFAULT]";class aC{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new YS;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),r=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:oC})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:r});n.resolve(t)}catch(e){}}}}clearInstance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oC;this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oC;return this.instances.has(t)}getOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oC;return this.instancesOptions.get(t)||{}}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&t(o,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(Io){}}getOrInitializeService(t){let{instanceIdentifier:e,options:n={}}=t,r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(Io){}return r||null}normalizeInstanceIdentifier(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oC;return this.component?this.component.multipleInstances?t:oC:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function sC(t){return t===oC?void 0:t}class lC{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new aC(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const uC=[];var cC;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(cC||(cC={}));const hC={debug:cC.DEBUG,verbose:cC.VERBOSE,info:cC.INFO,warn:cC.WARN,error:cC.ERROR,silent:cC.SILENT},dC=cC.INFO,pC={[cC.DEBUG]:"log",[cC.VERBOSE]:"log",[cC.INFO]:"info",[cC.WARN]:"warn",[cC.ERROR]:"error"},fC=function(t,e){if(e<t.logLevel)return;const n=(new Date).toISOString(),r=pC[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];console[r](`[${n}]  ${t.name}:`,...o)};class mC{constructor(t){this.name=t,this._logLevel=dC,this._logHandler=fC,this._userLogHandler=null,uC.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in cC))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?hC[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,cC.DEBUG,...e),this._logHandler(this,cC.DEBUG,...e)}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,cC.VERBOSE,...e),this._logHandler(this,cC.VERBOSE,...e)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,cC.INFO,...e),this._logHandler(this,cC.INFO,...e)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,cC.WARN,...e),this._logHandler(this,cC.WARN,...e)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,cC.ERROR,...e),this._logHandler(this,cC.ERROR,...e)}}const gC=(t,e)=>e.some((e=>t instanceof e));let yC,vC;const _C=new WeakMap,bC=new WeakMap,xC=new WeakMap,wC=new WeakMap,EC=new WeakMap;let SC={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return bC.get(t);if("objectStoreNames"===e)return t.objectStoreNames||xC.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return IC(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function CC(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(vC||(vC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(kC(this),n),IC(_C.get(this))}:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return IC(t.apply(kC(this),n))}:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=t.call(kC(this),e,...r);return xC.set(o,e.sort?e.sort():[e]),IC(o)}}function TC(t){return"function"===typeof t?CC(t):(t instanceof IDBTransaction&&function(t){if(bC.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{e(),r()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)}));bC.set(t,e)}(t),gC(t,yC||(yC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,SC):t)}function IC(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{e(IC(t.result)),r()},o=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)}));return e.then((e=>{e instanceof IDBCursor&&_C.set(e,t)})).catch((()=>{})),EC.set(e,t),e}(t);if(wC.has(t))return wC.get(t);const e=TC(t);return e!==t&&(wC.set(t,e),EC.set(e,t)),e}const kC=t=>EC.get(t);const AC=["get","getKey","getAll","getAllKeys","count"],PC=["put","add","delete","clear"],DC=new Map;function MC(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(DC.get(e))return DC.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=PC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!AC.includes(n))return;const o=async function(t){const e=this.transaction(t,i?"readwrite":"readonly");let o=e.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&e.done]))[0]};return DC.set(e,o),o}SC=(t=>({...t,get:(e,n,r)=>MC(e,n)||t.get(e,n,r),has:(e,n)=>!!MC(e,n)||t.has(e,n)}))(SC);class OC{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const RC="@firebase/app",NC="0.9.3",LC=new mC("@firebase/app"),FC="[DEFAULT]",zC={[RC]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},BC=new Map,jC=new Map;function UC(t,e){try{t.container.addComponent(e)}catch(n){LC.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function VC(t){const e=t.name;if(jC.has(e))return LC.debug(`There were multiple attempts to register component ${e}.`),!1;jC.set(e,t);for(const n of BC.values())UC(n,t);return!0}function qC(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const GC=new HS("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class YC{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new iC("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw GC.create("app-deleted",{appName:this._name})}}const $C="9.17.1";function WC(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;if("object"!==typeof e){e={name:e}}const r=Object.assign({name:FC,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!==typeof i||!i)throw GC.create("bad-app-name",{appName:String(i)});if(n||(n=qS()),!n)throw GC.create("no-options");const o=BC.get(i);if(o){if(ZS(n,o.options)&&ZS(r,o.config))return o;throw GC.create("duplicate-app",{appName:i})}const a=new lC(i);for(const l of jC.values())a.addComponent(l);const s=new YC(n,r,a);return BC.set(i,s),s}function HC(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:FC;const e=BC.get(t);if(!e&&t===FC)return WC();if(!e)throw GC.create("no-app",{appName:t});return e}function XC(t,e,n){var r;let i=null!==(r=zC[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const t=[`Unable to register library "${i}" with version "${e}":`];return o&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void LC.warn(t.join(" "))}VC(new iC(`${i}-version`,(()=>({library:i,version:e})),"VERSION"))}const ZC="firebase-heartbeat-database",KC=1,QC="firebase-heartbeat-store";let JC=null;function tT(){return JC||(JC=function(t,e){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(t,e),s=IC(a);return r&&a.addEventListener("upgradeneeded",(t=>{r(IC(a.result),t.oldVersion,t.newVersion,IC(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),s.then((t=>{o&&t.addEventListener("close",(()=>o())),i&&t.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),s}(ZC,KC,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(QC)}}).catch((t=>{throw GC.create("idb-open",{originalErrorMessage:t.message})}))),JC}async function eT(t,e){try{const n=(await tT()).transaction(QC,"readwrite"),r=n.objectStore(QC);return await r.put(e,nT(t)),n.done}catch(n){if(n instanceof WS)LC.warn(n.message);else{const t=GC.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});LC.warn(t.message)}}}function nT(t){return`${t.name}!${t.options.appId}`}const rT=1024;class iT{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new aT(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=oT();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=oT(),{heartbeatsToSend:e,unsentEntries:n}=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rT;const n=[];let r=t.slice();for(const i of t){const t=n.find((t=>t.agent===i.agent));if(t){if(t.dates.push(i.date),sT(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),sT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=FS(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function oT(){return(new Date).toISOString().substring(0,10)}class aT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(t){return!1}}()&&new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{return(await tT()).transaction(QC).objectStore(QC).get(nT(t))}catch(e){if(e instanceof WS)LC.warn(e.message);else{const t=GC.create("idb-get",{originalErrorMessage:null===e||void 0===e?void 0:e.message});LC.warn(t.message)}}}(this.app);return t||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return eT(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return eT(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function sT(t){return FS(JSON.stringify({version:2,heartbeats:t})).length}var lT;lT="",VC(new iC("platform-logger",(t=>new OC(t)),"PRIVATE")),VC(new iC("heartbeat",(t=>new iT(t)),"PRIVATE")),XC(RC,NC,lT),XC(RC,NC,"esm2017"),XC("fire-js","");XC("firebase","9.17.1","app");function uT(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}Object.create;Object.create;function cT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hT=cT,dT=new HS("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),pT=new mC("@firebase/auth");function fT(t){if(pT.logLevel<=cC.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];pT.error(`Auth (${$C}): ${t}`,...n)}}function mT(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw _T(t,...n)}function gT(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return _T(t,...n)}function yT(t,e,n){const r=Object.assign(Object.assign({},hT()),{[e]:n});return new HS("auth","Firebase",r).create(e,{appName:t.name})}function vT(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&mT(t,"argument-error"),yT(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _T(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if("string"!==typeof t){const e=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(e,...r)}return dT.create(t,...n)}function bT(t,e){if(!t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw _T(e,...r)}}function xT(t){const e="INTERNAL ASSERTION FAILED: "+t;throw fT(e),new Error(e)}function wT(t,e){t||xT(e)}const ET=new Map;function ST(t){wT(t instanceof Function,"Expected a class definition");let e=ET.get(t);return e?(wT(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ET.set(t,e),e)}function CT(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function TT(){return"http:"===IT()||"https:"===IT()}function IT(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function kT(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(TT()||function(){const t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class AT{constructor(t,e){this.shortDelay=t,this.longDelay=e,wT(e>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($S())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return kT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function PT(t,e){wT(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class DT{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void xT("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void xT("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void xT("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const MT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},OT=new AT(3e4,6e4);function RT(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function NT(t,e,n,r){return LT(t,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===e?o=r:i={body:JSON.stringify(r)});const a=QS(Object.assign({key:t.config.apiKey},o)).slice(1),s=await t._getAdditionalHeaders();return s["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),DT.fetch()(zT(t,t.config.apiHost,n,a),Object.assign({method:e,headers:s,referrerPolicy:"no-referrer"},i))}))}async function LT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},MT),e);try{const e=new BT(t),i=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw jT(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const e=i.ok?o.errorMessage:o.error.message,[n,a]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw jT(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw jT(t,"email-already-in-use",o);if("USER_DISABLED"===n)throw jT(t,"user-disabled",o);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw yT(t,s,a);mT(t,s)}}catch(i){if(i instanceof WS)throw i;mT(t,"network-request-failed")}}async function FT(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await NT(t,e,n,r,i);return"mfaPendingCredential"in o&&mT(t,"multi-factor-auth-required",{_serverResponse:o}),o}function zT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?PT(t.config,i):`${t.config.apiScheme}://${i}`}class BT{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(gT(this.auth,"network-request-failed"))),OT.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function jT(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=gT(t,e,r);return i.customData._tokenResponse=n,i}function UT(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function VT(t){return 1e3*Number(t)}function qT(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return fT("JWT malformed, contained fewer than 3 sections"),null;try{const t=zS(n);return t?JSON.parse(t):(fT("Failed to decode base64 JWT payload"),null)}catch(i){return fT("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function GT(t,e){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return e;try{return await e}catch(n){throw n instanceof WS&&function(t){let{code:e}=t;return"auth/user-disabled"===e||"auth/user-token-expired"===e}(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}class YT{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null===t||void 0===t?void 0:t.code)&&this.schedule(!0))}this.schedule()}}class $T{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=UT(this.lastLoginAt),this.creationTime=UT(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function WT(t){var e;const n=t.auth,r=await t.getIdToken(),i=await GT(t,async function(t,e){return NT(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:r}));bT(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const a=(null===(e=o.providerUserInfo)||void 0===e?void 0:e.length)?o.providerUserInfo.map((t=>{var{providerId:e}=t,n=uT(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const s=function(t,e){const n=t.filter((t=>!e.some((e=>e.providerId===t.providerId))));return[...n,...e]}(t.providerData,a),l=t.isAnonymous,u=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),c=!!l&&u,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new $T(o.createdAt,o.lastLoginAt),isAnonymous:c};Object.assign(t,h)}class HT{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){bT(t.idToken,"internal-error"),bT("undefined"!==typeof t.idToken,"internal-error"),bT("undefined"!==typeof t.refreshToken,"internal-error");const e="expiresIn"in t&&"undefined"!==typeof t.expiresIn?Number(t.expiresIn):function(t){const e=qT(t);return bT(e,"internal-error"),bT("undefined"!==typeof e.exp,"internal-error"),bT("undefined"!==typeof e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return bT(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(t,e){const n=await LT(t,{},(async()=>{const n=QS({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=zT(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",DT.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:r,expirationTime:i}=e,o=new HT;return n&&(bT("string"===typeof n,"internal-error",{appName:t}),o.refreshToken=n),r&&(bT("string"===typeof r,"internal-error",{appName:t}),o.accessToken=r),i&&(bT("number"===typeof i,"internal-error",{appName:t}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new HT,this.toJSON())}_performRefresh(){return xT("not implemented")}}function XT(t,e){bT("string"===typeof t||"undefined"===typeof t,"internal-error",{appName:e})}class ZT{constructor(t){var{uid:e,auth:n,stsTokenManager:r}=t,i=uT(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $T(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const e=await GT(this,this.stsTokenManager.getToken(this.auth,t));return bT(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=rC(t),r=await n.getIdToken(e),i=qT(r);bT(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:UT(VT(i.auth_time)),issuedAtTime:UT(VT(i.iat)),expirationTime:UT(VT(i.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=rC(t);await WT(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(bT(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new ZT(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){bT(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await WT(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await GT(this,async function(t,e){return NT(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,r,i,o,a,s,l,u;const c=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(r=e.email)&&void 0!==r?r:void 0,d=null!==(i=e.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=e.photoURL)&&void 0!==o?o:void 0,f=null!==(a=e.tenantId)&&void 0!==a?a:void 0,m=null!==(s=e._redirectEventId)&&void 0!==s?s:void 0,g=null!==(l=e.createdAt)&&void 0!==l?l:void 0,y=null!==(u=e.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:_,isAnonymous:b,providerData:x,stsTokenManager:w}=e;bT(v&&w,t,"internal-error");const E=HT.fromJSON(this.name,w);bT("string"===typeof v,t,"internal-error"),XT(c,t.name),XT(h,t.name),bT("boolean"===typeof _,t,"internal-error"),bT("boolean"===typeof b,t,"internal-error"),XT(d,t.name),XT(p,t.name),XT(f,t.name),XT(m,t.name),XT(g,t.name),XT(y,t.name);const S=new ZT({uid:v,auth:t,email:h,emailVerified:_,displayName:c,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:E,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(S.providerData=x.map((t=>Object.assign({},t)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new HT;r.updateFromServerResponse(e);const i=new ZT({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:n});return await WT(i),i}}class KT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}KT.type="NONE";const QT=KT;function JT(t,e,n){return`firebase:${t}:${e}:${n}`}class tI{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=JT(this.userKey,r.apiKey,i),this.fullPersistenceKey=JT("persistence",r.apiKey,i),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?ZT._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!e.length)return new tI(ST(QT),t,n);const r=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let i=r[0]||ST(QT);const o=JT(n,t.config.apiKey,t.name);let a=null;for(const l of e)try{const e=await l._get(o);if(e){const n=ZT._fromJSON(t,e);l!==i&&(a=n),i=l;break}}catch(Io){}const s=r.filter((t=>t._shouldAllowMigration));return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(e.map((async t=>{if(t!==i)try{await t._remove(o)}catch(Io){}}))),new tI(i,t,n)):new tI(i,t,n)}}function eI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sI(e))return"Blackberry";if(lI(e))return"Webos";if(rI(e))return"Safari";if((e.includes("chrome/")||iI(e))&&!e.includes("edge/"))return"Chrome";if(aI(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function nI(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$S();return/firefox\//i.test(t)}function rI(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:$S()).toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function iI(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$S();return/crios\//i.test(t)}function oI(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$S();return/iemobile/i.test(t)}function aI(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$S();return/android/i.test(t)}function sI(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$S();return/blackberry/i.test(t)}function lI(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$S();return/webos/i.test(t)}function uI(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$S();return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function cI(){return function(){const t=$S();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}function hI(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$S();return uI(t)||aI(t)||lI(t)||sI(t)||/windows phone/i.test(t)||oI(t)}function dI(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(t){case"Browser":e=eI($S());break;case"Worker":e=`${eI($S())}-${t}`;break;default:e=t}const r=n.length?n.join(","):"FirebaseCore-web";return`${e}/JsCore/${$C}/${r}`}class pI{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,r)=>{try{n(t(e))}catch(i){r(i)}}));n.onAbort=e,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(n){e.reverse();for(const t of e)try{t()}catch(XU){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class fI{constructor(t,e,n){this.app=t,this.heartbeatServiceProvider=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gI(this),this.idTokenSubscription=new gI(this),this.beforeStateQueue=new pI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dT,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ST(e)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await tI.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUser(t){var e;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(t);n&&n!==o||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(o)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return bT(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(n){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await WT(t)}catch(e){if("auth/network-request-failed"!==(null===e||void 0===e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?rC(t):null;return e&&bT(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return t&&bT(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(ST(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new HS("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&ST(t)||this._popupRedirectResolver;bT(e,this,"argument-error"),this.redirectPersistenceManager=await tI.create(this,[ST(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,r){if(this._deleted)return()=>{};const i="function"===typeof e?e:e.next.bind(e),o=this._isInitialized?Promise.resolve():this._initializationPromise;return bT(o,this,"internal-error"),o.then((()=>i(this.currentUser))),"function"===typeof e?t.addObserver(e,n,r):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return bT(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=dI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());return n&&(e["X-Firebase-Client"]=n),e}}function mI(t){return rC(t)}class gI{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new eC(t,e);return n.subscribe.bind(n)}((t=>this.observer=t))}get next(){return bT(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function yI(t,e,n){const r=mI(t);bT(r._canInitEmulator,r,"emulator-config-failed"),bT(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=vI(e),{host:a,port:s}=function(t){const e=vI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const t=i[1];return{host:t,port:_I(r.substr(t.length+1))}}{const[t,e]=r.split(":");return{host:t,port:_I(e)}}}(e),l=null===s?"":`:${s}`;r.config.emulator={url:`${o}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}function vI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _I(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class bI{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return xT("not implemented")}_getIdTokenResponse(t){return xT("not implemented")}_linkToIdToken(t,e){return xT("not implemented")}_getReauthenticationResolver(t){return xT("not implemented")}}async function xI(t,e){return NT(t,"POST","/v1/accounts:update",e)}class wI extends bI{constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new wI(t,e,"password")}static _fromEmailAndCode(t,e){return new wI(t,e,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t;if((null===e||void 0===e?void 0:e.email)&&(null===e||void 0===e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return async function(t,e){return FT(t,"POST","/v1/accounts:signInWithPassword",RT(t,e))}(t,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return FT(t,"POST","/v1/accounts:signInWithEmailLink",RT(t,e))}(t,{email:this._email,oobCode:this._password});default:mT(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return xI(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return FT(t,"POST","/v1/accounts:signInWithEmailLink",RT(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:mT(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function EI(t,e){return FT(t,"POST","/v1/accounts:signInWithIdp",RT(t,e))}class SI extends bI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new SI(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):mT("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t,{providerId:n,signInMethod:r}=e,i=uT(e,["providerId","signInMethod"]);if(!n||!r)return null;const o=new SI(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(t){return EI(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,EI(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,EI(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=QS(e)}return t}}const CI={USER_NOT_FOUND:"user-not-found"};class TI extends bI{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new TI({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new TI({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return FT(t,"POST","/v1/accounts:signInWithPhoneNumber",RT(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await FT(t,"POST","/v1/accounts:signInWithPhoneNumber",RT(t,e));if(n.temporaryProof)throw jT(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return FT(t,"POST","/v1/accounts:signInWithPhoneNumber",RT(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),CI)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:r}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:r}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"===typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:r,temporaryProof:i}=t;return n||e||r||i?new TI({verificationId:e,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class II{constructor(t){var e,n,r,i,o,a;const s=JS(tC(t)),l=null!==(e=s.apiKey)&&void 0!==e?e:null,u=null!==(n=s.oobCode)&&void 0!==n?n:null,c=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);bT(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=s.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(t){const e=function(t){const e=JS(tC(t)).link,n=e?JS(tC(e)).deep_link_id:null,r=JS(tC(t)).deep_link_id;return(r?JS(tC(r)).link:null)||r||n||e||t}(t);try{return new II(e)}catch(Io){return null}}}class kI{constructor(){this.providerId=kI.PROVIDER_ID}static credential(t,e){return wI._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=II.parseLink(e);return bT(n,"argument-error"),wI._fromEmailAndCode(t,n.code,n.tenantId)}}kI.PROVIDER_ID="password",kI.EMAIL_PASSWORD_SIGN_IN_METHOD="password",kI.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class AI{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class PI extends AI{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class DI extends PI{constructor(){super("facebook.com")}static credential(t){return SI._fromParams({providerId:DI.PROVIDER_ID,signInMethod:DI.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return DI.credentialFromTaggedObject(t)}static credentialFromError(t){return DI.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return DI.credential(e.oauthAccessToken)}catch(Io){return null}}}DI.FACEBOOK_SIGN_IN_METHOD="facebook.com",DI.PROVIDER_ID="facebook.com";class MI extends PI{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return SI._fromParams({providerId:MI.PROVIDER_ID,signInMethod:MI.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return MI.credentialFromTaggedObject(t)}static credentialFromError(t){return MI.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return MI.credential(n,r)}catch(Io){return null}}}MI.GOOGLE_SIGN_IN_METHOD="google.com",MI.PROVIDER_ID="google.com";class OI extends PI{constructor(){super("github.com")}static credential(t){return SI._fromParams({providerId:OI.PROVIDER_ID,signInMethod:OI.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return OI.credentialFromTaggedObject(t)}static credentialFromError(t){return OI.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return OI.credential(e.oauthAccessToken)}catch(Io){return null}}}OI.GITHUB_SIGN_IN_METHOD="github.com",OI.PROVIDER_ID="github.com";class RI extends PI{constructor(){super("twitter.com")}static credential(t,e){return SI._fromParams({providerId:RI.PROVIDER_ID,signInMethod:RI.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return RI.credentialFromTaggedObject(t)}static credentialFromError(t){return RI.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return RI.credential(n,r)}catch(Io){return null}}}async function NI(t,e){return FT(t,"POST","/v1/accounts:signUp",RT(t,e))}RI.TWITTER_SIGN_IN_METHOD="twitter.com",RI.PROVIDER_ID="twitter.com";class LI{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await ZT._fromIdTokenResponse(t,n,r),o=FI(n);return new LI({user:i,providerId:o,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const r=FI(n);return new LI({user:t,providerId:r,_tokenResponse:n,operationType:e})}}function FI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class zI extends WS{constructor(t,e,n,r){var i;super(e.code,e.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,zI.prototype),this.customData={appName:t.name,tenantId:null!==(i=t.tenantId)&&void 0!==i?i:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,r){return new zI(t,e,n,r)}}function BI(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw zI._fromErrorAndOperation(t,n,e,r);throw n}))}async function jI(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await GT(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return LI._forOperation(t,"link",r)}async function UI(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=t,i="reauthenticate";try{const o=await GT(t,BI(r,i,e,t),n);bT(o.idToken,r,"internal-error");const a=qT(o.idToken);bT(a,r,"internal-error");const{sub:s}=a;return bT(t.uid===s,r,"user-mismatch"),LI._forOperation(t,i,o)}catch(o){throw"auth/user-not-found"===(null===o||void 0===o?void 0:o.code)&&mT(r,"user-mismatch"),o}}async function VI(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await BI(t,r,e),o=await LI._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function qI(t,e){return VI(mI(t),e)}new WeakMap;const GI="__sak";class YI{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(GI,"1"),this.storage.removeItem(GI),Promise.resolve(!0)):Promise.resolve(!1)}catch(Io){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class $I extends YI{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=$S();return rI(t)||uI(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=hI(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),r=this.localCache[e];n!==r&&t(e,r,n)}}onStorageEvent(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(t.newValue!==r)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const r=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},i=this.storage.getItem(n);cI()&&i!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,10):r()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const r of Array.from(n))r(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}$I.type="LOCAL";const WI=$I;class HI extends YI{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}HI.type="SESSION";const XI=HI;class ZI{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new ZI(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:r,data:i}=e.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map((async t=>t(e.origin,i))),s=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}})))}(a);e.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function KI(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}ZI.receivers=[];class QI{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((a,s)=>{const l=KI("",20);r.port1.start();const u=setTimeout((()=>{s(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(t){const e=t;if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(e.data.response);break;default:clearTimeout(u),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:e},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function JI(){return window}function tk(){return"undefined"!==typeof JI().WorkerGlobalScope&&"function"===typeof JI().importScripts}const ek="firebaseLocalStorageDb",nk=1,rk="firebaseLocalStorage",ik="fbase_key";class ok{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function ak(t,e){return t.transaction([rk],e?"readwrite":"readonly").objectStore(rk)}function sk(){const t=indexedDB.open(ek,nk);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(rk,{keyPath:ik})}catch(r){n(r)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(rk)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(ek);return new ok(t).toPromise()}(),e(await sk()))}))}))}async function lk(t,e,n){const r=ak(t,!0).put({[ik]:e,value:n});return new ok(r).toPromise()}function uk(t,e){const n=ak(t,!0).delete(e);return new ok(n).toPromise()}class ck{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await sk()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(n){if(e++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ZI._getInstance(tk()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new QI(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(this.sender&&this.activeServiceWorker&&function(){var t;return(null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(Io){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await sk();return await lk(t,GI,"1"),await uk(t,GI),!0}catch(Io){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>lk(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=ak(t,!1).get(e),r=await new ok(n).toPromise();return void 0===r?null:r.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>uk(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=ak(t,!1).getAll();return new ok(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;for(const{fbase_key:r,value:i}of t)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),e.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),e.push(r));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const r of Array.from(n))r(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ck.type="LOCAL";const hk=ck;function dk(t){return new Promise(((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=t=>{const e=gT("internal-error");e.customData=t,n(e)},r.type="text/javascript",r.charset="UTF-8",function(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}))}function pk(t){return`__${t}${Math.floor(1e6*Math.random())}`}pk("rcb"),new AT(3e4,6e4);const fk="recaptcha";async function mk(t,e,n){var r;const i=await n.verify();try{let o;if(bT("string"===typeof i,t,"argument-error"),bT(n.type===fk,t,"argument-error"),o="string"===typeof e?{phoneNumber:e}:e,"session"in o){const e=o.session;if("phoneNumber"in o){bT("enroll"===e.type,t,"internal-error");const n=await function(t,e){return NT(t,"POST","/v2/accounts/mfaEnrollment:start",RT(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{bT("signin"===e.type,t,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;bT(n,t,"missing-multi-factor-info");const a=await function(t,e){return NT(t,"POST","/v2/accounts/mfaSignIn:start",RT(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return NT(t,"POST","/v1/accounts:sendVerificationCode",RT(t,e))}(t,{phoneNumber:o.phoneNumber,recaptchaToken:i});return e}}finally{n._reset()}}class gk{constructor(t){this.providerId=gk.PROVIDER_ID,this.auth=mI(t)}verifyPhoneNumber(t,e){return mk(this.auth,t,rC(e))}static credential(t,e){return TI._fromVerification(t,e)}static credentialFromResult(t){const e=t;return gk.credentialFromTaggedObject(e)}static credentialFromError(t){return gk.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?TI._fromTokenResponse(n,r):null}}function yk(t,e){return e?ST(e):(bT(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}gk.PROVIDER_ID="phone",gk.PHONE_SIGN_IN_METHOD="phone";class vk extends bI{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return EI(t,this._buildIdpRequest())}_linkToIdToken(t,e){return EI(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return EI(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function _k(t){return VI(t.auth,new vk(t),t.bypassAuthState)}function bk(t){const{auth:e,user:n}=t;return bT(n,e,"internal-error"),UI(n,new vk(t),t.bypassAuthState)}async function xk(t){const{auth:e,user:n}=t;return bT(n,e,"internal-error"),jI(n,new vk(t),t.bypassAuthState)}class wk{constructor(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=t,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=t;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:e,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return _k;case"linkViaPopup":case"linkViaRedirect":return xk;case"reauthViaPopup":case"reauthViaRedirect":return bk;default:mT(this.auth,"internal-error")}}resolve(t){wT(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){wT(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ek=new AT(2e3,1e4);class Sk extends wk{constructor(t,e,n,r,i){super(t,e,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Sk.currentPopupAction&&Sk.currentPopupAction.cancel(),Sk.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return bT(t,this.auth,"internal-error"),t}async onExecution(){wT(1===this.filter.length,"Popup operations only handle one event");const t=KI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(gT(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(gT(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sk.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(gT(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(t,Ek.get())};t()}}Sk.currentPopupAction=null;const Ck="pendingRedirect",Tk=new Map;class Ik extends wk{constructor(t,e){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let t=Tk.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=Pk(e),r=Ak(t);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}Tk.set(this.auth._key(),t)}return this.bypassAuthState||Tk.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function kk(t,e){Tk.set(t._key(),e)}function Ak(t){return ST(t._redirectPersistence)}function Pk(t){return JT(Ck,t.config.apiKey,t.name)}async function Dk(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=mI(t),i=yk(r,e),o=new Ik(r,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}class Mk{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rk(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!Rk(t)){const r=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(gT(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ok(t))}saveEventToCache(t){this.cachedEventUids.add(Ok(t)),this.lastProcessedEventTime=Date.now()}}function Ok(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function Rk(t){let{type:e,error:n}=t;return"unknown"===e&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const Nk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lk=/^https?/;async function Fk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t){return NT(t,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(t);for(const n of e)try{if(zk(n))return}catch(Io){}mT(t,"unauthorized-domain")}function zk(t){const e=CT(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return""===i.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Lk.test(n))return!1;if(Nk.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Bk=new AT(3e4,6e4);function jk(){const t=JI().___jsl;if(null===t||void 0===t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}let Uk=null;function Vk(t){return Uk=Uk||function(t){return new Promise(((e,n)=>{var r,i,o;function a(){jk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jk(),n(gT(t,"network-request-failed"))},timeout:Bk.get()})}if(null===(i=null===(r=JI().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)e(gapi.iframes.getContext());else{if(!(null===(o=JI().gapi)||void 0===o?void 0:o.load)){const e=pk("iframefcb");return JI()[e]=()=>{gapi.load?a():n(gT(t,"network-request-failed"))},dk(`https://apis.google.com/js/api.js?onload=${e}`).catch((t=>n(t)))}a()}})).catch((t=>{throw Uk=null,t}))}(t),Uk}const qk=new AT(5e3,15e3),Gk="__/auth/iframe",Yk="emulator/auth/iframe",$k={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hk(t){const e=t.config;bT(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?PT(e,Yk):`https://${t.config.authDomain}/${Gk}`,r={apiKey:e.apiKey,appName:t.name,v:$C},i=Wk.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${QS(r).slice(1)}`}const Xk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Zk=500,Kk=600,Qk="_blank",Jk="http://localhost";class tA{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function eA(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zk,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Kk;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=Object.assign(Object.assign({},Xk),{width:r.toString(),height:i.toString(),top:o,left:a}),u=$S().toLowerCase();n&&(s=iI(u)?Qk:n),nI(u)&&(e=e||Jk,l.scrollbars="yes");const c=Object.entries(l).reduce(((t,e)=>{let[n,r]=e;return`${t}${n}=${r},`}),"");if(function(){var t;return uI(arguments.length>0&&void 0!==arguments[0]?arguments[0]:$S())&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==s)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",s),new tA(null);const h=window.open(e||"",s,c);bT(h,t,"popup-blocked");try{h.focus()}catch(d){}return new tA(h)}const nA="__/auth/handler",rA="emulator/auth/handler";function iA(t,e,n,r,i,o){bT(t.config.authDomain,t,"auth-domain-config-required"),bT(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:$C,eventId:i};if(e instanceof AI){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(o||{}))a[t]=e}if(e instanceof PI){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(a.scopes=t.join(","))}t.tenantId&&(a.tid=t.tenantId);const s=a;for(const l of Object.keys(s))void 0===s[l]&&delete s[l];return`${function(t){let{config:e}=t;if(!e.emulator)return`https://${e.authDomain}/${nA}`;return PT(e,rA)}(t)}?${QS(s).slice(1)}`}const oA="webStorageSupport";const aA=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=XI,this._completeRedirectFn=Dk,this._overrideRedirectResult=kk}async _openPopup(t,e,n,r){var i;wT(null===(i=this.eventManagers[t._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return eA(t,iA(t,e,n,CT(),r),KI())}async _openRedirect(t,e,n,r){var i;return await this._originValidation(t),i=iA(t,e,n,CT(),r),JI().location.href=i,new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(wT(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await async function(t){const e=await Vk(t),n=JI().gapi;return bT(n,t,"internal-error"),e.open({where:document.body,url:Hk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$k,dontclear:!0},(e=>new Promise((async(n,r)=>{await e.restyle({setHideOnLeave:!1});const i=gT(t,"network-request-failed"),o=JI().setTimeout((()=>{r(i)}),qk.get());function a(){JI().clearTimeout(o),n(e)}e.ping(a).then(a,(()=>{r(i)}))}))))}(t),n=new Mk(t);return e.register("authEvent",(e=>{bT(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event");return{status:n.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(oA,{type:oA},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[oA];void 0!==i&&e(!!i),mT(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Fk(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return hI()||rI()||uI()}};var sA="@firebase/auth",lA="0.21.3";class uA{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(t)}}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{t((null===e||void 0===e?void 0:e.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){bT(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const cA=GS("authIdTokenMaxAge")||300;let hA=null;const dA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>cA)return;const i=null===n||void 0===n?void 0:n.token;hA!==i&&(hA=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};var pA;pA="Browser",VC(new iC("auth",((t,e)=>{let{options:n}=e;const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),{apiKey:o,authDomain:a}=r.options;return((t,e)=>{bT(o&&!o.includes(":"),"invalid-api-key",{appName:t.name}),bT(!(null===a||void 0===a?void 0:a.includes(":")),"argument-error",{appName:t.name});const r={apiKey:o,authDomain:a,clientPlatform:pA,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dI(pA)},i=new fI(t,e,r);return function(t,e){const n=(null===e||void 0===e?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ST);(null===e||void 0===e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,null===e||void 0===e?void 0:e.popupRedirectResolver)}(i,n),i})(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),VC(new iC("auth-internal",(t=>(t=>new uA(t))(mI(t.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),XC(sA,lA,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(pA)),XC(sA,lA,"esm2017");var fA,mA="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},gA={},yA=yA||{},vA=mA||self;function _A(){}function bA(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function xA(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var wA="closure_uid_"+(1e9*Math.random()>>>0),EA=0;function SA(t,e,n){return t.call.apply(t.bind,arguments)}function CA(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function TA(t,e,n){return(TA=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?SA:CA).apply(null,arguments)}function IA(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function kA(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function AA(){this.s=this.s,this.o=this.o}AA.prototype.s=!1,AA.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,wA)&&t[wA]||(t[wA]=++EA)}(this)},AA.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const PA=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function DA(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function MA(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(bA(e)){const n=t.length||0,r=e.length||0;t.length=n+r;for(let i=0;i<r;i++)t[n+i]=e[i]}else t.push(e)}}function OA(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}OA.prototype.h=function(){this.defaultPrevented=!0};var RA=function(){if(!vA.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{vA.addEventListener("test",_A,e),vA.removeEventListener("test",_A,e)}catch(BU){}return t}();function NA(t){return/^[\s\xa0]*$/.test(t)}var LA=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function FA(t,e){return t<e?-1:t>e?1:0}function zA(){var t=vA.navigator;return t&&(t=t.userAgent)?t:""}function BA(t){return-1!=zA().indexOf(t)}function jA(t){return jA[" "](t),t}jA[" "]=_A;var UA,VA=BA("Opera"),qA=BA("Trident")||BA("MSIE"),GA=BA("Edge"),YA=GA||qA,$A=BA("Gecko")&&!(-1!=zA().toLowerCase().indexOf("webkit")&&!BA("Edge"))&&!(BA("Trident")||BA("MSIE"))&&!BA("Edge"),WA=-1!=zA().toLowerCase().indexOf("webkit")&&!BA("Edge");function HA(){var t=vA.document;return t?t.documentMode:void 0}t:{var XA="",ZA=function(){var t=zA();return $A?/rv:([^\);]+)(\)|;)/.exec(t):GA?/Edge\/([\d\.]+)/.exec(t):qA?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):WA?/WebKit\/(\S+)/.exec(t):VA?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(ZA&&(XA=ZA?ZA[1]:""),qA){var KA=HA();if(null!=KA&&KA>parseFloat(XA)){UA=String(KA);break t}}UA=XA}var QA,JA={};function tP(){return function(t){var e=JA;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){let t=0;const e=LA(String(UA)).split("."),n=LA("9").split("."),r=Math.max(e.length,n.length);for(let a=0;0==t&&a<r;a++){var i=e[a]||"",o=n[a]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;t=FA(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||FA(0==i[2].length,0==o[2].length)||FA(i[2],o[2]),i=i[3],o=o[3]}while(0==t)}return 0<=t}))}if(vA.document&&qA){var eP=HA();QA=eP||(parseInt(UA,10)||void 0)}else QA=void 0;var nP=QA;function rP(t,e){if(OA.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if($A){t:{try{jA(e.nodeName);var i=!0;break t}catch(zU){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:iP[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&rP.X.h.call(this)}}kA(rP,OA);var iP={2:"touch",3:"pen",4:"mouse"};rP.prototype.h=function(){rP.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var oP="closure_listenable_"+(1e6*Math.random()|0),aP=0;function sP(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++aP,this.ba=this.ea=!1}function lP(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function uP(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function cP(t){const e={};for(const n in t)e[n]=t[n];return e}const hP="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dP(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let e=0;e<hP.length;e++)n=hP[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function pP(t){this.src=t,this.g={},this.h=0}function fP(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=PA(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(lP(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function mP(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ba&&o.listener==e&&o.capture==!!n&&o.ha==r)return i}return-1}pP.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var a=mP(t,e,r,i);return-1<a?(e=t[a],n||(e.ea=!1)):((e=new sP(e,this.src,o,!!r,i)).ea=n,t.push(e)),e};var gP="closure_lm_"+(1e6*Math.random()|0),yP={};function vP(t,e,n,r,i){if(r&&r.once)return bP(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)vP(t,e[o],n,r,i);return null}return n=IP(n),t&&t[oP]?t.N(e,n,xA(r)?!!r.capture:!!r,i):_P(t,e,n,!1,r,i)}function _P(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=xA(i)?!!i.capture:!!i,s=CP(t);if(s||(t[gP]=s=new pP(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}const e=SP;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)RA||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(EP(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function bP(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)bP(t,e[o],n,r,i);return null}return n=IP(n),t&&t[oP]?t.O(e,n,xA(r)?!!r.capture:!!r,i):_P(t,e,n,!0,r,i)}function xP(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)xP(t,e[o],n,r,i);else r=xA(r)?!!r.capture:!!r,n=IP(n),t&&t[oP]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=mP(o=t.g[e],n,r,i))&&(lP(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=CP(t))&&(e=t.g[e.toString()],t=-1,e&&(t=mP(e,n,r,i)),(n=-1<t?e[t]:null)&&wP(n))}function wP(t){if("number"!==typeof t&&t&&!t.ba){var e=t.src;if(e&&e[oP])fP(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(EP(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=CP(e))?(fP(n,t),0==n.h&&(n.src=null,e[gP]=null)):lP(t)}}}function EP(t){return t in yP?yP[t]:yP[t]="on"+t}function SP(t,e){if(t.ba)t=!0;else{e=new rP(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&wP(t),t=n.call(r,e)}return t}function CP(t){return(t=t[gP])instanceof pP?t:null}var TP="__closure_events_fn_"+(1e9*Math.random()>>>0);function IP(t){return"function"===typeof t?t:(t[TP]||(t[TP]=function(e){return t.handleEvent(e)}),t[TP])}function kP(){AA.call(this),this.i=new pP(this),this.P=this,this.I=null}function AP(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"===typeof e)e=new OA(e,t);else if(e instanceof OA)e.target=e.target||t;else{var i=e;dP(e=new OA(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];i=PP(a,r,!0,e)&&i}if(i=PP(a=e.g=t,r,!0,e)&&i,i=PP(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=PP(a=e.g=n[o],r,!1,e)&&i}function PP(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ba&&a.capture==n){var s=a.listener,l=a.ha||a.src;a.ea&&fP(t.i,a),i=!1!==s.call(l,r)&&i}}return i&&!r.defaultPrevented}kA(kP,AA),kP.prototype[oP]=!0,kP.prototype.removeEventListener=function(t,e,n,r){xP(this,t,e,n,r)},kP.prototype.M=function(){if(kP.X.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)lP(n[r]);delete e.g[t],e.h--}}this.I=null},kP.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},kP.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var DP=vA.JSON.stringify;function MP(){var t=BP;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var OP,RP=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new NP),(t=>t.reset()));class NP{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function LP(t){vA.setTimeout((()=>{throw t}),0)}function FP(t,e){OP||function(){var t=vA.Promise.resolve(void 0);OP=function(){t.then(jP)}}(),zP||(OP(),zP=!0),BP.add(t,e)}var zP=!1,BP=new class{constructor(){this.h=this.g=null}add(t,e){const n=RP.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function jP(){for(var t;t=MP();){try{t.h.call(t.g)}catch(BU){LP(BU)}var e=RP;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}zP=!1}function UP(t,e){kP.call(this),this.h=t||1,this.g=e||vA,this.j=TA(this.lb,this),this.l=Date.now()}function VP(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}function qP(t,e,n){if("function"===typeof t)n&&(t=TA(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=TA(t.handleEvent,t)}return 2147483647<Number(e)?-1:vA.setTimeout(t,e||0)}function GP(t){t.g=qP((()=>{t.g=null,t.i&&(t.i=!1,GP(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}kA(UP,kP),(fA=UP.prototype).ca=!1,fA.R=null,fA.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),AP(this,"tick"),this.ca&&(VP(this),this.start()))}},fA.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fA.M=function(){UP.X.M.call(this),VP(this),delete this.g};class YP extends AA{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:GP(this)}M(){super.M(),this.g&&(vA.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $P(t){AA.call(this),this.h=t,this.g={}}kA($P,AA);var WP=[];function HP(t,e,n,r){Array.isArray(n)||(n&&(WP[0]=n.toString()),n=WP);for(var i=0;i<n.length;i++){var o=vP(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function XP(t){uP(t.g,(function(t,e){this.g.hasOwnProperty(e)&&wP(t)}),t),t.g={}}function ZP(){this.g=!0}function KP(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return DP(n)}catch(DU){return e}}(t,n)+(r?" "+r:"")}))}$P.prototype.M=function(){$P.X.M.call(this),XP(this)},$P.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ZP.prototype.Aa=function(){this.g=!1},ZP.prototype.info=function(){};var QP={},JP=null;function tD(){return JP=JP||new kP}function eD(t){OA.call(this,QP.Pa,t)}function nD(t){const e=tD();AP(e,new eD(e))}function rD(t,e){OA.call(this,QP.STAT_EVENT,t),this.stat=e}function iD(t){const e=tD();AP(e,new rD(e,t))}function oD(t,e){OA.call(this,QP.Qa,t),this.size=e}function aD(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return vA.setTimeout((function(){t()}),e)}QP.Pa="serverreachability",kA(eD,OA),QP.STAT_EVENT="statevent",kA(rD,OA),QP.Qa="timingevent",kA(oD,OA);var sD={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},lD={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function uD(){}function cD(t){return t.h||(t.h=t.i())}function hD(){}uD.prototype.h=null;var dD,pD={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function fD(){OA.call(this,"d")}function mD(){OA.call(this,"c")}function gD(){}function yD(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new $P(this),this.O=_D,t=YA?125:void 0,this.T=new UP(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new vD}function vD(){this.i=null,this.g="",this.h=!1}kA(fD,OA),kA(mD,OA),kA(gD,uD),gD.prototype.g=function(){return new XMLHttpRequest},gD.prototype.i=function(){return{}},dD=new gD;var _D=45e3,bD={},xD={};function wD(t,e,n){t.K=1,t.v=UD(LD(e)),t.s=n,t.P=!0,ED(t,null)}function ED(t,e){t.F=Date.now(),ID(t),t.A=LD(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),tM(n.i,"t",r),t.C=0,n=t.l.H,t.h=new vD,t.g=JM(t.l,n?e:null,!t.s),0<t.N&&(t.L=new YP(TA(t.La,t,t.g),t.N)),HP(t.S,t.g,"readystatechange",t.ib),e=t.H?cP(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),nD(),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var a="",s=o.split("&"),l=0;l<s.length;l++){var u=s[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");a=2<=h.length&&"type"==h[1]?a+(c+"=")+u+"&":a+(c+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.j,t.u,t.A,t.m,t.U,t.s)}function SD(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Da)}function CD(t,e,n){let r,i=!0;for(;!t.I&&t.C<n.length;){if(r=TD(t,n),r==xD){4==e&&(t.o=4,iD(14),i=!1),KP(t.j,t.m,null,"[Incomplete Response]");break}if(r==bD){t.o=4,iD(15),KP(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}KP(t.j,t.m,r,null),MD(t,r)}SD(t)&&r!=xD&&r!=bD&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,iD(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.$&&(t.$=!0,(e=t.l).g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),YM(e),e.K=!0,iD(11))):(KP(t.j,t.m,n,"[Invalid Chunked Response]"),DD(t),PD(t))}function TD(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?xD:(n=Number(e.substring(n,r)),isNaN(n)?bD:(r+=1)+n>e.length?xD:(e=e.substr(r,n),t.C=r+n,e))}function ID(t){t.V=Date.now()+t.O,kD(t,t.O)}function kD(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=aD(TA(t.gb,t),e)}function AD(t){t.B&&(vA.clearTimeout(t.B),t.B=null)}function PD(t){0==t.l.G||t.I||HM(t.l,t)}function DD(t){AD(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,VP(t.T),XP(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function MD(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||aM(n.h,t)))if(!t.J&&aM(n.h,t)&&3==n.G){try{var r=n.Fa.g.parse(e)}catch(HU){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;WM(n),FM(n)}GM(n),iD(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=aD(TA(n.cb,n),6e3));if(1>=oM(n.h)&&n.ja){try{n.ja()}catch(HU){}n.ja=void 0}}else ZM(n,11)}else if((t.J||n.g==t)&&WM(n),!NA(e))for(i=n.Fa.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.I=u[1],n.ka=u[2];const e=u[3];null!=e&&(n.ma=e,n.j.info("VER="+n.ma));const i=u[4];null!=i&&(n.Ca=i,n.j.info("SVER="+n.Ca));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var o=r.h;o.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(sM(o,o.h),o.h=null))}if(r.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.za=t,jD(r.F,r.D,t))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms"));var a=t;if((r=n).sa=QM(r,r.H?r.ka:null,r.V),a.J){lM(r.h,a);var s=a,l=r.J;l&&s.setTimeout(l),s.B&&(AD(s),ID(s)),r.g=a}else qM(r);0<n.i.length&&BM(n)}else"stop"!=u[0]&&"close"!=u[0]||ZM(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?ZM(n,7):LM(n):"noop"!=u[0]&&n.l&&n.l.wa(u),n.A=0)}nD()}catch(HU){}}function OD(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(bA(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.oa&&"function"==typeof t.oa)return t.oa();if(!t.W||"function"!=typeof t.W){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(bA(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function(t){if(t.W&&"function"==typeof t.W)return t.W();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(bA(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(fA=yD.prototype).setTimeout=function(t){this.O=t},fA.ib=function(t){t=t.target;const e=this.L;e&&3==PM(t)?e.l():this.La(t)},fA.La=function(t){try{if(t==this.g)t:{const c=PM(this.g);var e=this.g.Ea();this.g.aa();if(!(3>c)&&(3!=c||YA||this.g&&(this.h.h||this.g.fa()||DM(this.g)))){this.I||4!=c||7==e||nD(),AD(this);var n=this.g.aa();this.Y=n;e:if(SD(this)){var r=DM(this.g);t="";var i=r.length,o=4==PM(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){DD(this),PD(this);var a="";break e}this.h.i=new vA.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.fa();if(this.i=200==n,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.U,c,n),this.i){if(this.Z&&!this.J){e:{if(this.g){var s,l=this.g;if((s=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!NA(s)){var u=s;break e}}u=null}if(!(n=u)){this.i=!1,this.o=3,iD(12),DD(this),PD(this);break t}KP(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,MD(this,n)}this.P?(CD(this,c,a),YA&&this.i&&3==c&&(HP(this.S,this.T,"tick",this.hb),this.T.start())):(KP(this.j,this.m,a,null),MD(this,a)),4==c&&DD(this),this.i&&!this.I&&(4==c?HM(this.l,this):(this.i=!1,ID(this)))}else 400==n&&0<a.indexOf("Unknown SID")?(this.o=3,iD(12)):(this.o=0,iD(13)),DD(this),PD(this)}}}catch(Ii){}},fA.hb=function(){if(this.g){var t=PM(this.g),e=this.g.fa();this.C<e.length&&(AD(this),CD(this,t,e),this.i&&4!=t&&ID(this))}},fA.cancel=function(){this.I=!0,DD(this)},fA.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(nD(),iD(17)),DD(this),this.o=2,PD(this)):kD(this,this.V-t)};var RD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ND(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ND){this.h=void 0!==e?e:t.h,FD(this,t.j),this.s=t.s,this.g=t.g,zD(this,t.m),this.l=t.l,e=t.i;var n=new ZD;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),BD(this,n),this.o=t.o}else t&&(n=String(t).match(RD))?(this.h=!!e,FD(this,n[1]||"",!0),this.s=VD(n[2]||""),this.g=VD(n[3]||"",!0),zD(this,n[4]),this.l=VD(n[5]||"",!0),BD(this,n[6]||"",!0),this.o=VD(n[7]||"")):(this.h=!!e,this.i=new ZD(null,this.h))}function LD(t){return new ND(t)}function FD(t,e,n){t.j=n?VD(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function zD(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function BD(t,e,n){e instanceof ZD?(t.i=e,function(t,e){e&&!t.j&&(KD(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(QD(this,e),tM(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=qD(e,HD)),t.i=new ZD(e,t.h))}function jD(t,e,n){t.i.set(e,n)}function UD(t){return jD(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function VD(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qD(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,GD),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function GD(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ND.prototype.toString=function(){var t=[],e=this.j;e&&t.push(qD(e,YD,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(qD(e,YD,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(qD(n,"/"==n.charAt(0)?WD:$D,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",qD(n,XD)),t.join("")};var YD=/[#\/\?@]/g,$D=/[#\?:]/g,WD=/[#\?]/g,HD=/[#\?@]/g,XD=/#/g;function ZD(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function KD(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function QD(t,e){KD(t),e=eM(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function JD(t,e){return KD(t),e=eM(t,e),t.g.has(e)}function tM(t,e,n){QD(t,e),0<n.length&&(t.i=null,t.g.set(eM(t,e),DA(n)),t.h+=n.length)}function eM(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(fA=ZD.prototype).add=function(t,e){KD(this),this.i=null,t=eM(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},fA.forEach=function(t,e){KD(this),this.g.forEach((function(n,r){n.forEach((function(n){t.call(e,n,r,this)}),this)}),this)},fA.oa=function(){KD(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let t=0;t<i.length;t++)n.push(e[r])}return n},fA.W=function(t){KD(this);let e=[];if("string"===typeof t)JD(this,t)&&(e=e.concat(this.g.get(eM(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},fA.set=function(t,e){return KD(this),this.i=null,JD(this,t=eM(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},fA.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},fA.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const o=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var i=o;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),t.push(i)}}return this.i=t.join("&")};function nM(t){this.l=t||rM,vA.PerformanceNavigationTiming?t=0<(t=vA.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(vA.g&&vA.g.Ga&&vA.g.Ga()&&vA.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var rM=10;function iM(t){return!!t.h||!!t.g&&t.g.size>=t.j}function oM(t){return t.h?1:t.g?t.g.size:0}function aM(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function sM(t,e){t.g?t.g.add(e):t.h=e}function lM(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function uM(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return DA(t.i)}function cM(){}function hM(){this.g=new cM}function dM(t,e,n){const r=n||"";try{OD(t,(function(t,n){let i=t;xA(t)&&(i=DP(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function pM(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(zU){}}function fM(t){this.l=t.ac||null,this.j=t.jb||!1}function mM(t,e){kP.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=gM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nM.prototype.cancel=function(){if(this.i=uM(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},cM.prototype.stringify=function(t){return vA.JSON.stringify(t,void 0)},cM.prototype.parse=function(t){return vA.JSON.parse(t,void 0)},kA(fM,uD),fM.prototype.g=function(){return new mM(this.l,this.j)},fM.prototype.i=function(t){return function(){return t}}({}),kA(mM,kP);var gM=0;function yM(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}function vM(t){t.readyState=4,t.l=null,t.j=null,t.A=null,_M(t)}function _M(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(fA=mM.prototype).open=function(t,e){if(this.readyState!=gM)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,_M(this)},fA.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||vA).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},fA.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,vM(this)),this.readyState=gM},fA.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,_M(this)),this.g&&(this.readyState=3,_M(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof vA.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yM(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))},fA.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?vM(this):_M(this),3==this.readyState&&yM(this)}},fA.Va=function(t){this.g&&(this.response=this.responseText=t,vM(this))},fA.Ua=function(t){this.g&&(this.response=t,vM(this))},fA.ga=function(){this.g&&vM(this)},fA.setRequestHeader=function(t,e){this.v.append(t,e)},fA.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},fA.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(mM.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var bM=vA.JSON.parse;function xM(t){kP.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=wM,this.K=this.L=!1}kA(xM,kP);var wM="",EM=/^https?$/i,SM=["POST","PUT"];function CM(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,TM(t),kM(t)}function TM(t){t.D||(t.D=!0,AP(t,"complete"),AP(t,"error"))}function IM(t){if(t.h&&"undefined"!=typeof yA&&(!t.C[1]||4!=PM(t)||2!=t.aa()))if(t.v&&4==PM(t))qP(t.Ha,0,t);else if(AP(t,"readystatechange"),4==PM(t)){t.h=!1;try{const s=t.aa();t:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=0===s){var i=String(t.H).match(RD)[1]||null;if(!i&&vA.self&&vA.self.location){var o=vA.self.location.protocol;i=o.substr(0,o.length-1)}r=!EM.test(i?i.toLowerCase():"")}n=r}if(n)AP(t,"complete"),AP(t,"success");else{t.m=6;try{var a=2<PM(t)?t.g.statusText:""}catch(LU){a=""}t.j=a+" ["+t.aa()+"]",TM(t)}}finally{kM(t)}}}function kM(t,e){if(t.g){AM(t);const r=t.g,i=t.C[0]?_A:null;t.g=null,t.C=null,e||AP(t,"ready");try{r.onreadystatechange=i}catch(n){}}}function AM(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(vA.clearTimeout(t.A),t.A=null)}function PM(t){return t.g?t.g.readyState:0}function DM(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case wM:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(mO){return null}}function MM(t){let e="";return uP(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function OM(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=MM(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):jD(t,e,n))}function RM(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function NM(t){this.Ca=0,this.i=[],this.j=new ZP,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=RM("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=RM("baseRetryDelayMs",5e3,t),this.bb=RM("retryDelaySeedMs",1e4,t),this.$a=RM("forwardChannelMaxRetries",2,t),this.ta=RM("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new nM(t&&t.concurrentRequestLimit),this.Fa=new hM,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function LM(t){if(zM(t),3==t.G){var e=t.U++,n=LD(t.F);jD(n,"SID",t.I),jD(n,"RID",e),jD(n,"TYPE","terminate"),UM(t,n),(e=new yD(t,t.j,e,void 0)).K=2,e.v=UD(LD(n)),n=!1,vA.navigator&&vA.navigator.sendBeacon&&(n=vA.navigator.sendBeacon(e.v.toString(),"")),!n&&vA.Image&&((new Image).src=e.v,n=!0),n||(e.g=JM(e.l,null),e.g.da(e.v)),e.F=Date.now(),ID(e)}KM(t)}function FM(t){t.g&&(YM(t),t.g.cancel(),t.g=null)}function zM(t){FM(t),t.u&&(vA.clearTimeout(t.u),t.u=null),WM(t),t.h.cancel(),t.m&&("number"===typeof t.m&&vA.clearTimeout(t.m),t.m=null)}function BM(t){iM(t.h)||t.m||(t.m=!0,FP(t.Ja,t),t.C=0)}function jM(t,e){var n;n=e?e.m:t.U++;const r=LD(t.F);jD(r,"SID",t.I),jD(r,"RID",n),jD(r,"AID",t.T),UM(t,r),t.o&&t.s&&OM(r,t.o,t.s),n=new yD(t,t.j,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=VM(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),sM(t.h,n),wD(n,r,e)}function UM(t,e){t.ia&&uP(t.ia,(function(t,n){jD(e,n,t)})),t.l&&OD({},(function(t,n){jD(e,n,t)}))}function VM(t,e,n){n=Math.min(t.i.length,n);var r=t.l?TA(t.l.Ra,t.l,t):null;t:{var i=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let a=!0;for(let s=0;s<n;s++){let n=i[s].h;const l=i[s].g;if(n-=e,0>n)e=Math.max(0,i[s].h-100),a=!1;else try{dM(l,t,"req"+n+"_")}catch(o){r&&r(l)}}if(a){r=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,r}function qM(t){t.g||t.u||(t.Z=1,FP(t.Ia,t),t.A=0)}function GM(t){return!(t.g||t.u||3<=t.A)&&(t.Z++,t.u=aD(TA(t.Ia,t),XM(t,t.A)),t.A++,!0)}function YM(t){null!=t.B&&(vA.clearTimeout(t.B),t.B=null)}function $M(t){t.g=new yD(t,t.j,"rpc",t.Z),null===t.o&&(t.g.H=t.s),t.g.N=0;var e=LD(t.sa);jD(e,"RID","rpc"),jD(e,"SID",t.I),jD(e,"CI",t.L?"0":"1"),jD(e,"AID",t.T),jD(e,"TYPE","xmlhttp"),UM(t,e),t.o&&t.s&&OM(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=UD(LD(e)),n.s=null,n.P=!0,ED(n,t)}function WM(t){null!=t.v&&(vA.clearTimeout(t.v),t.v=null)}function HM(t,e){var n=null;if(t.g==e){WM(t),YM(t),t.g=null;var r=2}else{if(!aM(t.h,e))return;n=e.D,lM(t.h,e),r=1}if(0!=t.G)if(t.pa=e.Y,e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;AP(r=tD(),new oD(r,n)),BM(t)}else qM(t);else if(3==(i=e.o)||0==i&&0<t.pa||!(1==r&&function(t,e){return!(oM(t.h)>=t.h.j-(t.m?1:0))&&(t.m?(t.i=e.D.concat(t.i),!0):!(1==t.G||2==t.G||t.C>=(t.Za?0:t.$a))&&(t.m=aD(TA(t.Ja,t,e),XM(t,t.C)),t.C++,!0))}(t,e)||2==r&&GM(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:ZM(t,5);break;case 4:ZM(t,10);break;case 3:ZM(t,6);break;default:ZM(t,2)}}function XM(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function ZM(t,e){if(t.j.info("Error code "+e),2==e){var n=null;t.l&&(n=null);var r=TA(t.kb,t);n||(n=new ND("//www.google.com/images/cleardot.gif"),vA.location&&"http"==vA.location.protocol||FD(n,"https"),UD(n)),function(t,e){const n=new ZP;if(vA.Image){const r=new Image;r.onload=IA(pM,n,r,"TestLoadImage: loaded",!0,e),r.onerror=IA(pM,n,r,"TestLoadImage: error",!1,e),r.onabort=IA(pM,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=IA(pM,n,r,"TestLoadImage: timeout",!1,e),vA.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else iD(2);t.G=0,t.l&&t.l.va(e),KM(t),zM(t)}function KM(t){if(t.G=0,t.la=[],t.l){const e=uM(t.h);0==e.length&&0==t.i.length||(MA(t.la,e),MA(t.la,t.i),t.h.i.length=0,DA(t.i),t.i.length=0),t.l.ua()}}function QM(t,e,n){var r=n instanceof ND?LD(n):new ND(n,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),zD(r,r.m);else{var i=vA.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new ND(null,void 0);r&&FD(o,r),e&&(o.g=e),i&&zD(o,i),n&&(o.l=n),r=o}return n=t.D,e=t.za,n&&e&&jD(r,n,e),jD(r,"VER",t.ma),UM(t,r),r}function JM(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Da&&!t.ra?new xM(new fM({jb:!0})):new xM(t.ra)).Ka(t.H),e}function tO(){}function eO(){if(qA&&!(10<=Number(nP)))throw Error("Environmental error: no available transport.")}function nO(t,e){kP.call(this),this.g=new NM(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!NA(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!NA(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new oO(this)}function rO(t){fD.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function iO(){mD.call(this),this.status=1}function oO(t){this.g=t}(fA=xM.prototype).Ka=function(t){this.L=t},fA.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():dD.g(),this.C=this.u?cD(this.u):cD(dD),this.g.onreadystatechange=TA(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(zU){return void CM(this,zU)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const t of r.keys())n.set(t,r.get(t))}r=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),i=vA.FormData&&t instanceof vA.FormData,!(0<=PA(SM,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{AM(this),0<this.B&&((this.K=function(t){return qA&&tP()&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=TA(this.qa,this)):this.A=qP(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(zU){CM(this,zU)}},fA.qa=function(){"undefined"!=typeof yA&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,AP(this,"timeout"),this.abort(8))},fA.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,AP(this,"complete"),AP(this,"abort"),kM(this))},fA.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kM(this,!0)),xM.X.M.call(this)},fA.Ha=function(){this.s||(this.F||this.v||this.l?IM(this):this.fb())},fA.fb=function(){IM(this)},fA.aa=function(){try{return 2<PM(this)?this.g.status:-1}catch(FU){return-1}},fA.fa=function(){try{return this.g?this.g.responseText:""}catch(FU){return""}},fA.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),bM(e)}},fA.Ea=function(){return this.m},fA.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(fA=NM.prototype).ma=8,fA.G=1,fA.Ja=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new yD(this,this.j,t,void 0);let o=this.s;if(this.S&&(o?(o=cP(o),dP(o,this.S)):o=this.S),null!==this.o||this.N||(i.H=o,o=null),this.O)t:{for(var e=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.g&&"string"===typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=VM(this,i,e),jD(n=LD(this.F),"RID",t),jD(n,"CVER",22),this.D&&jD(n,"X-HTTP-Session-Id",this.D),UM(this,n),o&&(this.N?e="headers="+encodeURIComponent(String(MM(o)))+"&"+e:this.o&&OM(n,this.o,o)),sM(this.h,i),this.Ya&&jD(n,"TYPE","init"),this.O?(jD(n,"$req",e),jD(n,"SID","null"),i.Z=!0,wD(i,n,null)):wD(i,n,e),this.G=2}}else 3==this.G&&(t?jM(this,t):0==this.i.length||iM(this.h)||jM(this))},fA.Ia=function(){if(this.u=null,$M(this),this.$&&!(this.K||null==this.g||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=aD(TA(this.eb,this),t)}},fA.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,iD(10),FM(this),$M(this))},fA.cb=function(){null!=this.v&&(this.v=null,FM(this),GM(this),iD(19))},fA.kb=function(t){t?(this.j.info("Successfully pinged google.com"),iD(2)):(this.j.info("Failed to ping google.com"),iD(1))},(fA=tO.prototype).xa=function(){},fA.wa=function(){},fA.va=function(){},fA.ua=function(){},fA.Ra=function(){},eO.prototype.g=function(t,e){return new nO(t,e)},kA(nO,kP),nO.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;iD(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=QM(t,null,t.V),BM(t)},nO.prototype.close=function(){LM(this.g)},nO.prototype.u=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=DP(t),t=n);e.i.push(new class{constructor(t,e){this.h=t,this.g=e}}(e.ab++,t)),3==e.G&&BM(e)},nO.prototype.M=function(){this.g.l=null,delete this.j,LM(this.g),delete this.g,nO.X.M.call(this)},kA(rO,fD),kA(iO,mD),kA(oO,tO),oO.prototype.xa=function(){AP(this.g,"a")},oO.prototype.wa=function(t){AP(this.g,new rO(t))},oO.prototype.va=function(t){AP(this.g,new iO)},oO.prototype.ua=function(){AP(this.g,"b")},eO.prototype.createWebChannel=eO.prototype.g,nO.prototype.send=nO.prototype.u,nO.prototype.open=nO.prototype.m,nO.prototype.close=nO.prototype.close,sD.NO_ERROR=0,sD.TIMEOUT=8,sD.HTTP_ERROR=6,lD.COMPLETE="complete",hD.EventType=pD,pD.OPEN="a",pD.CLOSE="b",pD.ERROR="c",pD.MESSAGE="d",kP.prototype.listen=kP.prototype.N,xM.prototype.listenOnce=xM.prototype.O,xM.prototype.getLastError=xM.prototype.Oa,xM.prototype.getLastErrorCode=xM.prototype.Ea,xM.prototype.getStatus=xM.prototype.aa,xM.prototype.getResponseJson=xM.prototype.Sa,xM.prototype.getResponseText=xM.prototype.fa,xM.prototype.send=xM.prototype.da,xM.prototype.setWithCredentials=xM.prototype.Ka;var aO=gA.createWebChannelTransport=function(){return new eO},sO=gA.getStatEventTarget=function(){return tD()},lO=gA.ErrorCode=sD,uO=gA.EventType=lD,cO=gA.Event=QP,hO=gA.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},dO=gA.FetchXmlHttpFactory=fM,pO=gA.WebChannel=hD,fO=gA.XhrIo=xM;const mO="@firebase/firestore";class gO{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}gO.UNAUTHENTICATED=new gO(null),gO.GOOGLE_CREDENTIALS=new gO("google-credentials-uid"),gO.FIRST_PARTY=new gO("first-party-uid"),gO.MOCK_USER=new gO("mock-user");let yO="9.17.1";const vO=new mC("@firebase/firestore");function _O(){return vO.logLevel}function bO(t){if(vO.logLevel<=cC.DEBUG){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const i=n.map(EO);vO.debug(`Firestore (${yO}): ${t}`,...i)}}function xO(t){if(vO.logLevel<=cC.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const i=n.map(EO);vO.error(`Firestore (${yO}): ${t}`,...i)}}function wO(t){if(vO.logLevel<=cC.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const i=n.map(EO);vO.warn(`Firestore (${yO}): ${t}`,...i)}}function EO(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function SO(){const t=`FIRESTORE (${yO}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw xO(t),new Error(t)}function CO(t,e){t||SO()}function TO(t,e){return t}const IO={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class kO extends WS{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class AO{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class PO{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class DO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(gO.UNAUTHENTICATED)))}shutdown(){}}class MO{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class OO{constructor(t){this.t=t,this.currentUser=gO.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new AO;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new AO,t.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await r(this.currentUser)}))},a=t=>{bO("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((t=>a(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?a(t):(bO("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new AO)}}),0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(bO("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(CO("string"==typeof e.accessToken),new PO(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return CO(null===t||"string"==typeof t),new gO(t)}}class RO{constructor(t,e,n,r){this.h=t,this.l=e,this.m=n,this.g=r,this.type="FirstParty",this.user=gO.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(CO(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.p.set("Authorization",t),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class NO{constructor(t,e,n,r){this.h=t,this.l=e,this.m=n,this.g=r}getToken(){return Promise.resolve(new RO(this.h,this.l,this.m,this.g))}start(t,e){t.enqueueRetryable((()=>e(gO.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class LO{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FO{constructor(t){this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(t,e){const n=t=>{null!=t.error&&bO("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.A;return this.A=t.token,bO("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const r=t=>{bO("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.T.onInit((t=>r(t))),setTimeout((()=>{if(!this.appCheck){const t=this.T.getImmediate({optional:!0});t?r(t):bO("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(CO("string"==typeof t.token),this.A=t.token,new LO(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function zO(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class BO{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const r=zO(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length))}return n}}function jO(t,e){return t<e?-1:t>e?1:0}function UO(t,e,n){return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}class VO{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new kO(IO.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new kO(IO.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new kO(IO.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new kO(IO.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return VO.fromMillis(Date.now())}static fromDate(t){return VO.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new VO(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?jO(this.nanoseconds,t.nanoseconds):jO(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qO{constructor(t){this.timestamp=t}static fromTimestamp(t){return new qO(t)}static min(){return new qO(new VO(0,0))}static max(){return new qO(new VO(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class GO{constructor(t,e,n){void 0===e?e=0:e>t.length&&SO(),void 0===n?n=t.length-e:n>t.length-e&&SO(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===GO.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof GO?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),i=e.get(r);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class YO extends GO{construct(t,e,n){return new YO(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const t=[];for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new kO(IO.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((t=>t.length>0)))}return new YO(t)}static emptyPath(){return new YO([])}}const $O=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class WO extends GO{construct(t,e,n){return new WO(t,e,n)}static isValidIdentifier(t){return $O.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),WO.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new WO(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new kO(IO.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let o=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new kO(IO.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new kO(IO.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(o=!o,r++):"."!==e||o?(n+=e,r++):(i(),r++)}if(i(),o)throw new kO(IO.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new WO(e)}static emptyPath(){return new WO([])}}class HO{constructor(t){this.path=t}static fromPath(t){return new HO(YO.fromString(t))}static fromName(t){return new HO(YO.fromString(t).popFirst(5))}static empty(){return new HO(YO.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===YO.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return YO.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new HO(new YO(t.slice()))}}class XO{constructor(t,e,n,r){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=r}}XO.UNKNOWN_ID=-1;function ZO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=qO.fromTimestamp(1e9===r?new VO(n+1,0):new VO(n,r));return new QO(i,HO.empty(),e)}function KO(t){return new QO(t.readTime,t.key,-1)}class QO{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new QO(qO.min(),HO.empty(),-1)}static max(){return new QO(qO.max(),HO.empty(),-1)}}function JO(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=HO.comparator(t.documentKey,e.documentKey),0!==n?n:jO(t.largestBatchId,e.largestBatchId))}const tR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function nR(t){if(t.code!==IO.FAILED_PRECONDITION||t.message!==tR)throw t;bO("LocalStore","Unexpectedly lost primary lease")}class rR{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&SO(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new rR(((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof rR?e:rR.resolve(e)}catch(t){return rR.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):rR.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):rR.reject(e)}static resolve(t){return new rR(((e,n)=>{e(t)}))}static reject(t){return new rR(((e,n)=>{n(t)}))}static waitFor(t){return new rR(((e,n)=>{let r=0,i=0,o=!1;t.forEach((t=>{++r,t.next((()=>{++i,o&&i===r&&e()}),(t=>n(t)))})),o=!0,i===r&&e()}))}static or(t){let e=rR.resolve(!1);for(const n of t)e=e.next((t=>t?rR.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,r)=>{n.push(e.call(this,t,r))})),this.waitFor(n)}static mapArray(t,e){return new rR(((n,r)=>{const i=t.length,o=new Array(i);let a=0;for(let s=0;s<i;s++){const l=s;e(t[l]).next((t=>{o[l]=t,++a,a===i&&n(o)}),(t=>r(t)))}}))}static doWhile(t,e){return new rR(((n,r)=>{const i=()=>{!0===t()?e().next((()=>{i()}),r):n()};i()}))}}function iR(t){return"IndexedDbTransactionError"===t.name}class oR{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ut(t),this.ct=t=>e.writeSequenceNumber(t))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}oR.at=-1;class aR{constructor(t,e,n,r,i,o,a,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s}}class sR{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new sR("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof sR&&t.projectId===this.projectId&&t.database===this.database}}function lR(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function uR(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hR(t){return null==t}function dR(t){return 0===t&&1/t==-1/0}function pR(t){return"number"==typeof t&&Number.isInteger(t)&&!dR(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}class fR{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new fR(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new fR(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return jO(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}fR.EMPTY_BYTE_STRING=new fR("");const mR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gR(t){if(CO(!!t),"string"==typeof t){let e=0;const n=mR.exec(t);if(CO(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yR(t.seconds),nanos:yR(t.nanos)}}function yR(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function vR(t){return"string"==typeof t?fR.fromBase64String(t):fR.fromUint8Array(t)}function _R(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function bR(t){const e=t.mapValue.fields.__previous_value__;return _R(e)?bR(e):e}function xR(t){const e=gR(t.mapValue.fields.__local_write_time__.timestampValue);return new VO(e.seconds,e.nanos)}const wR={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ER(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_R(t)?4:FR(t)?9007199254740991:10:SO()}function SR(t,e){if(t===e)return!0;const n=ER(t);if(n!==ER(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xR(t).isEqual(xR(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=gR(t.timestampValue),r=gR(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return vR(t.bytesValue).isEqual(vR(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return yR(t.geoPointValue.latitude)===yR(e.geoPointValue.latitude)&&yR(t.geoPointValue.longitude)===yR(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return yR(t.integerValue)===yR(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=yR(t.doubleValue),r=yR(e.doubleValue);return n===r?dR(n)===dR(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return UO(t.arrayValue.values||[],e.arrayValue.values||[],SR);case 10:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(lR(n)!==lR(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!SR(n[i],r[i])))return!1;return!0}(t,e);default:return SO()}}function CR(t,e){return void 0!==(t.values||[]).find((t=>SR(t,e)))}function TR(t,e){if(t===e)return 0;const n=ER(t),r=ER(e);if(n!==r)return jO(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return jO(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=yR(t.integerValue||t.doubleValue),r=yR(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return IR(t.timestampValue,e.timestampValue);case 4:return IR(xR(t),xR(e));case 5:return jO(t.stringValue,e.stringValue);case 6:return function(t,e){const n=vR(t),r=vR(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let i=0;i<n.length&&i<r.length;i++){const t=jO(n[i],r[i]);if(0!==t)return t}return jO(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=jO(yR(t.latitude),yR(e.latitude));return 0!==n?n:jO(yR(t.longitude),yR(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const t=TR(n[i],r[i]);if(t)return t}return jO(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===wR.mapValue&&e===wR.mapValue)return 0;if(t===wR.mapValue)return 1;if(e===wR.mapValue)return-1;const n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let a=0;a<r.length&&a<o.length;++a){const t=jO(r[a],o[a]);if(0!==t)return t;const e=TR(n[r[a]],i[o[a]]);if(0!==e)return e}return jO(r.length,o.length)}(t.mapValue,e.mapValue);default:throw SO()}}function IR(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return jO(t,e);const n=gR(t),r=gR(e),i=jO(n.seconds,r.seconds);return 0!==i?i:jO(n.nanos,r.nanos)}function kR(t){return AR(t)}function AR(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=gR(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?vR(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,HO.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=AR(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+=`${i}:${AR(t.fields[i])}`;return n+"}"}(t.mapValue):SO();var e,n}function PR(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function DR(t){return!!t&&"integerValue"in t}function MR(t){return!!t&&"arrayValue"in t}function OR(t){return!!t&&"nullValue"in t}function RR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function NR(t){return!!t&&"mapValue"in t}function LR(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return uR(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=LR(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=LR(t.arrayValue.values[n]);return e}return Object.assign({},t)}function FR(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class zR{constructor(t,e){this.position=t,this.inclusive=e}}function BR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],a=t.position[i];if(r=o.field.isKeyField()?HO.comparator(HO.fromName(a.referenceValue),n.key):TR(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function jR(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!SR(t.position[n],e.position[n]))return!1;return!0}class UR{}class VR extends UR{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new ZR(t,e,n):"array-contains"===e?new tN(t,n):"in"===e?new eN(t,n):"not-in"===e?new nN(t,n):"array-contains-any"===e?new rN(t,n):new VR(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new KR(t,n):new QR(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(TR(e,this.value)):null!==e&&ER(this.value)===ER(e)&&this.matchesComparison(TR(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return SO()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class qR extends UR{constructor(t,e){super(),this.filters=t,this.op=e,this.ht=null}static create(t,e){return new qR(t,e)}matches(t){return GR(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.lt((t=>t.isInequality()));return null!==t?t.field:null}lt(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function GR(t){return"and"===t.op}function YR(t){return $R(t)&&GR(t)}function $R(t){for(const e of t.filters)if(e instanceof qR)return!1;return!0}function WR(t){if(t instanceof VR)return t.field.canonicalString()+t.op.toString()+kR(t.value);if(YR(t))return t.filters.map((t=>WR(t))).join(",");{const e=t.filters.map((t=>WR(t))).join(",");return`${t.op}(${e})`}}function HR(t,e){return t instanceof VR?function(t,e){return e instanceof VR&&t.op===e.op&&t.field.isEqual(e.field)&&SR(t.value,e.value)}(t,e):t instanceof qR?function(t,e){return e instanceof qR&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,r)=>t&&HR(n,e.filters[r])),!0)}(t,e):void SO()}function XR(t){return t instanceof VR?function(t){return`${t.field.canonicalString()} ${t.op} ${kR(t.value)}`}(t):t instanceof qR?function(t){return t.op.toString()+" {"+t.getFilters().map(XR).join(" ,")+"}"}(t):"Filter"}class ZR extends VR{constructor(t,e,n){super(t,e,n),this.key=HO.fromName(n.referenceValue)}matches(t){const e=HO.comparator(t.key,this.key);return this.matchesComparison(e)}}class KR extends VR{constructor(t,e){super(t,"in",e),this.keys=JR("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class QR extends VR{constructor(t,e){super(t,"not-in",e),this.keys=JR("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function JR(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>HO.fromName(t.referenceValue)))}class tN extends VR{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return MR(e)&&CR(e.arrayValue,this.value)}}class eN extends VR{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&CR(this.value.arrayValue,e)}}class nN extends VR{constructor(t,e){super(t,"not-in",e)}matches(t){if(CR(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!CR(this.value.arrayValue,e)}}class rN extends VR{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!MR(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>CR(this.value.arrayValue,t)))}}class iN{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=t,this.dir=e}}function oN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class aN{constructor(t,e){this.comparator=t,this.root=e||lN.EMPTY}insert(t,e){return new aN(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,lN.BLACK,null,null))}remove(t){return new aN(this.comparator,this.root.remove(t,this.comparator).copy(null,null,lN.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new sN(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new sN(this.root,t,this.comparator,!1)}getReverseIterator(){return new sN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new sN(this.root,t,this.comparator,!0)}}class sN{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,e&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class lN{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:lN.RED,this.left=null!=r?r:lN.EMPTY,this.right=null!=i?i:lN.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new lN(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return lN.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return lN.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,lN.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,lN.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw SO();if(this.right.isRed())throw SO();const t=this.left.check();if(t!==this.right.check())throw SO();return t+(this.isRed()?0:1)}}lN.EMPTY=null,lN.RED=!0,lN.BLACK=!1,lN.EMPTY=new class{constructor(){this.size=0}get key(){throw SO()}get value(){throw SO()}get color(){throw SO()}get left(){throw SO()}get right(){throw SO()}copy(t,e,n,r,i){return this}insert(t,e,n){return new lN(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class uN{constructor(t){this.comparator=t,this.data=new aN(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new cN(this.data.getIterator())}getIteratorFrom(t){return new cN(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof uN))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new uN(this.comparator);return e.data=t,e}}class cN{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class hN{constructor(t){this.fields=t,t.sort(WO.comparator)}static empty(){return new hN([])}unionWith(t){let e=new uN(WO.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new hN(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return UO(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class dN{constructor(t){this.value=t}static empty(){return new dN({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!NR(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=LR(e)}setAll(t){let e=WO.emptyPath(),n={},r=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=LR(t):r.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());NR(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return SR(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];NR(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){uR(e,((e,n)=>t[e]=n));for(const r of n)delete t[r]}clone(){return new dN(LR(this.value))}}function pN(t){const e=[];return uR(t.fields,((t,n)=>{const r=new WO([t]);if(NR(n)){const t=pN(n.mapValue).fields;if(0===t.length)e.push(r);else for(const n of t)e.push(r.child(n))}else e.push(r)})),new hN(e)}class fN{constructor(t,e,n,r,i,o,a){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(t){return new fN(t,0,qO.min(),qO.min(),qO.min(),dN.empty(),0)}static newFoundDocument(t,e,n,r){return new fN(t,1,e,qO.min(),n,r,0)}static newNoDocument(t,e){return new fN(t,2,e,qO.min(),qO.min(),dN.empty(),0)}static newUnknownDocument(t,e){return new fN(t,3,e,qO.min(),qO.min(),dN.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(qO.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=dN.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=dN.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qO.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof fN&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new fN(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mN{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.ft=null}}function gN(t){return new mN(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function yN(t){const e=TO(t);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>WR(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),hR(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>kR(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>kR(t))).join(",")),e.ft=t}return e.ft}function vN(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!HR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jR(t.startAt,e.startAt)&&jR(t.endAt,e.endAt)}function _N(t){return HO.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class bN{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.dt=null,this._t=null,this.startAt,this.endAt}}function xN(t,e,n,r,i,o,a,s){return new bN(t,e,n,r,i,o,a,s)}function wN(t){return new bN(t)}function EN(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function SN(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function CN(t){for(const e of t.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function TN(t){return null!==t.collectionGroup}function IN(t){const e=TO(t);if(null===e.dt){e.dt=[];const t=CN(e),n=SN(e);if(null!==t&&null===n)t.isKeyField()||e.dt.push(new iN(t)),e.dt.push(new iN(WO.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.dt.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new iN(WO.keyField(),t))}}}return e.dt}function kN(t){const e=TO(t);if(!e._t)if("F"===e.limitType)e._t=gN(e.path,e.collectionGroup,IN(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const i of IN(e)){const e="desc"===i.dir?"asc":"desc";t.push(new iN(i.field,e))}const n=e.endAt?new zR(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new zR(e.startAt.position,e.startAt.inclusive):null;e._t=gN(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}return e._t}function AN(t,e){e.getFirstInequalityField(),CN(t);const n=t.filters.concat([e]);return new bN(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function PN(t,e,n){return new bN(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function DN(t,e){return vN(kN(t),kN(e))&&t.limitType===e.limitType}function MN(t){return`${yN(kN(t))}|lt:${t.limitType}`}function ON(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>XR(t))).join(", ")}]`),hR(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>kR(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>kR(t))).join(",")),`Target(${e})`}(kN(t))}; limitType=${t.limitType})`}function RN(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):HO.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of IN(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const r=BR(t,e,n);return t.inclusive?r<=0:r<0}(t.startAt,IN(t),e))&&!(t.endAt&&!function(t,e,n){const r=BR(t,e,n);return t.inclusive?r>=0:r>0}(t.endAt,IN(t),e))}(t,e)}function NN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function LN(t){return(e,n)=>{let r=!1;for(const i of IN(t)){const t=FN(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function FN(t,e,n){const r=t.field.isKeyField()?HO.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?TR(r,i):SO()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return SO()}}function zN(t,e){if(t.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dR(e)?"-0":e}}function BN(t){return{integerValue:""+t}}function jN(t,e){return pR(e)?BN(e):zN(t,e)}class UN{constructor(){this._=void 0}}function VN(t,e,n){return t instanceof YN?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof $N?WN(t,e):t instanceof HN?XN(t,e):function(t,e){const n=GN(t,e),r=KN(n)+KN(t.gt);return DR(n)&&DR(t.gt)?BN(r):zN(t.yt,r)}(t,e)}function qN(t,e,n){return t instanceof $N?WN(t,e):t instanceof HN?XN(t,e):n}function GN(t,e){return t instanceof ZN?DR(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class YN extends UN{}class $N extends UN{constructor(t){super(),this.elements=t}}function WN(t,e){const n=QN(e);for(const r of t.elements)n.some((t=>SR(t,r)))||n.push(r);return{arrayValue:{values:n}}}class HN extends UN{constructor(t){super(),this.elements=t}}function XN(t,e){let n=QN(e);for(const r of t.elements)n=n.filter((t=>!SR(t,r)));return{arrayValue:{values:n}}}class ZN extends UN{constructor(t,e){super(),this.yt=t,this.gt=e}}function KN(t){return yR(t.integerValue||t.doubleValue)}function QN(t){return MR(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class JN{constructor(t,e){this.version=t,this.transformResults=e}}class tL{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new tL}static exists(t){return new tL(void 0,t)}static updateTime(t){return new tL(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function eL(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class nL{}function rL(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new pL(t.key,tL.none()):new lL(t.key,t.data,tL.none());{const n=t.data,r=dN.empty();let i=new uN(WO.comparator);for(let t of e.fields)if(!i.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?r.delete(t):r.set(t,e),i=i.add(t)}return new uL(t.key,r,new hN(i.toArray()),tL.none())}}function iL(t,e,n){t instanceof lL?function(t,e,n){const r=t.value.clone(),i=hL(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof uL?function(t,e,n){if(!eL(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=hL(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(cL(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function oL(t,e,n,r){return t instanceof lL?function(t,e,n,r){if(!eL(t.precondition,e))return n;const i=t.value.clone(),o=dL(t.fieldTransforms,r,e);return i.setAll(o),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}(t,e,n,r):t instanceof uL?function(t,e,n,r){if(!eL(t.precondition,e))return n;const i=dL(t.fieldTransforms,r,e),o=e.data;return o.setAll(cL(t)),o.setAll(i),e.convertToFoundDocument(e.version,o).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,r):function(t,e,n){return eL(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function aL(t,e){let n=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),i=GN(r.transform,t||null);null!=i&&(null===n&&(n=dN.empty()),n.set(r.field,i))}return n||null}function sL(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&UO(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof $N&&e instanceof $N||t instanceof HN&&e instanceof HN?UO(t.elements,e.elements,SR):t instanceof ZN&&e instanceof ZN?SR(t.gt,e.gt):t instanceof YN&&e instanceof YN}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class lL extends nL{constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class uL extends nL{constructor(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function cL(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function hL(t,e,n){const r=new Map;CO(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,qN(a,s,n[i]))}return r}function dL(t,e,n){const r=new Map;for(const i of t){const t=i.transform,o=n.data.field(i.field);r.set(i.field,VN(t,o,e))}return r}class pL extends nL{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fL extends nL{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class mL{constructor(t){this.count=t}}var gL,yL;function vL(t){switch(t){default:return SO();case IO.CANCELLED:case IO.UNKNOWN:case IO.DEADLINE_EXCEEDED:case IO.RESOURCE_EXHAUSTED:case IO.INTERNAL:case IO.UNAVAILABLE:case IO.UNAUTHENTICATED:return!1;case IO.INVALID_ARGUMENT:case IO.NOT_FOUND:case IO.ALREADY_EXISTS:case IO.PERMISSION_DENIED:case IO.FAILED_PRECONDITION:case IO.ABORTED:case IO.OUT_OF_RANGE:case IO.UNIMPLEMENTED:case IO.DATA_LOSS:return!0}}function _L(t){if(void 0===t)return xO("GRPC error has no .code"),IO.UNKNOWN;switch(t){case gL.OK:return IO.OK;case gL.CANCELLED:return IO.CANCELLED;case gL.UNKNOWN:return IO.UNKNOWN;case gL.DEADLINE_EXCEEDED:return IO.DEADLINE_EXCEEDED;case gL.RESOURCE_EXHAUSTED:return IO.RESOURCE_EXHAUSTED;case gL.INTERNAL:return IO.INTERNAL;case gL.UNAVAILABLE:return IO.UNAVAILABLE;case gL.UNAUTHENTICATED:return IO.UNAUTHENTICATED;case gL.INVALID_ARGUMENT:return IO.INVALID_ARGUMENT;case gL.NOT_FOUND:return IO.NOT_FOUND;case gL.ALREADY_EXISTS:return IO.ALREADY_EXISTS;case gL.PERMISSION_DENIED:return IO.PERMISSION_DENIED;case gL.FAILED_PRECONDITION:return IO.FAILED_PRECONDITION;case gL.ABORTED:return IO.ABORTED;case gL.OUT_OF_RANGE:return IO.OUT_OF_RANGE;case gL.UNIMPLEMENTED:return IO.UNIMPLEMENTED;case gL.DATA_LOSS:return IO.DATA_LOSS;default:return SO()}}(yL=gL||(gL={}))[yL.OK=0]="OK",yL[yL.CANCELLED=1]="CANCELLED",yL[yL.UNKNOWN=2]="UNKNOWN",yL[yL.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yL[yL.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yL[yL.NOT_FOUND=5]="NOT_FOUND",yL[yL.ALREADY_EXISTS=6]="ALREADY_EXISTS",yL[yL.PERMISSION_DENIED=7]="PERMISSION_DENIED",yL[yL.UNAUTHENTICATED=16]="UNAUTHENTICATED",yL[yL.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yL[yL.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yL[yL.ABORTED=10]="ABORTED",yL[yL.OUT_OF_RANGE=11]="OUT_OF_RANGE",yL[yL.UNIMPLEMENTED=12]="UNIMPLEMENTED",yL[yL.INTERNAL=13]="INTERNAL",yL[yL.UNAVAILABLE=14]="UNAVAILABLE",yL[yL.DATA_LOSS=15]="DATA_LOSS";class bL{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return this.inner[n]=[[t,e]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){uR(this.inner,((e,n)=>{for(const[r,i]of n)t(r,i)}))}isEmpty(){return cR(this.inner)}size(){return this.innerSize}}const xL=new aN(HO.comparator);function wL(){return xL}const EL=new aN(HO.comparator);function SL(){let t=EL;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const i of n)t=t.insert(i.key,i);return t}function CL(t){let e=EL;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function TL(){return kL()}function IL(){return kL()}function kL(){return new bL((t=>t.toString()),((t,e)=>t.isEqual(e)))}const AL=new aN(HO.comparator),PL=new uN(HO.comparator);function DL(){let t=PL;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const i of n)t=t.add(i);return t}const ML=new uN(jO);function OL(){return ML}class RL{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,NL.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new RL(qO.min(),r,OL(),wL(),DL())}}class NL{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new NL(n,e,DL(),DL(),DL())}}class LL{constructor(t,e,n,r){this.It=t,this.removedTargetIds=e,this.key=n,this.Tt=r}}class FL{constructor(t,e){this.targetId=t,this.Et=e}}class zL{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fR.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class BL{constructor(){this.At=0,this.Rt=VL(),this.bt=fR.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(t){t.approximateByteSize()>0&&(this.vt=!0,this.bt=t)}Ct(){let t=DL(),e=DL(),n=DL();return this.Rt.forEach(((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:SO()}})),new NL(this.bt,this.Pt,t,e,n)}xt(){this.vt=!1,this.Rt=VL()}Nt(t,e){this.vt=!0,this.Rt=this.Rt.insert(t,e)}kt(t){this.vt=!0,this.Rt=this.Rt.remove(t)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class jL{constructor(t){this.$t=t,this.Bt=new Map,this.Lt=wL(),this.qt=UL(),this.Ut=new uN(jO)}Kt(t){for(const e of t.It)t.Tt&&t.Tt.isFoundDocument()?this.Gt(e,t.Tt):this.Qt(e,t.key,t.Tt);for(const e of t.removedTargetIds)this.Qt(e,t.key,t.Tt)}jt(t){this.forEachTarget(t,(e=>{const n=this.Wt(e);switch(t.state){case 0:this.zt(e)&&n.Dt(t.resumeToken);break;case 1:n.Mt(),n.Vt||n.xt(),n.Dt(t.resumeToken);break;case 2:n.Mt(),n.Vt||this.removeTarget(e);break;case 3:this.zt(e)&&(n.Ft(),n.Dt(t.resumeToken));break;case 4:this.zt(e)&&(this.Ht(e),n.Dt(t.resumeToken));break;default:SO()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Bt.forEach(((t,n)=>{this.zt(n)&&e(n)}))}Jt(t){const e=t.targetId,n=t.Et.count,r=this.Yt(e);if(r){const t=r.target;if(_N(t))if(0===n){const n=new HO(t.path);this.Qt(e,n,fN.newNoDocument(n,qO.min()))}else CO(1===n);else this.Xt(e)!==n&&(this.Ht(e),this.Ut=this.Ut.add(e))}}Zt(t){const e=new Map;this.Bt.forEach(((n,r)=>{const i=this.Yt(r);if(i){if(n.current&&_N(i.target)){const e=new HO(i.target.path);null!==this.Lt.get(e)||this.te(r,e)||this.Qt(r,e,fN.newNoDocument(e,t))}n.St&&(e.set(r,n.Ct()),n.xt())}}));let n=DL();this.qt.forEach(((t,e)=>{let r=!0;e.forEachWhile((t=>{const e=this.Yt(t);return!e||2===e.purpose||(r=!1,!1)})),r&&(n=n.add(t))})),this.Lt.forEach(((e,n)=>n.setReadTime(t)));const r=new RL(t,e,this.Ut,this.Lt,n);return this.Lt=wL(),this.qt=UL(),this.Ut=new uN(jO),r}Gt(t,e){if(!this.zt(t))return;const n=this.te(t,e.key)?2:0;this.Wt(t).Nt(e.key,n),this.Lt=this.Lt.insert(e.key,e),this.qt=this.qt.insert(e.key,this.ee(e.key).add(t))}Qt(t,e,n){if(!this.zt(t))return;const r=this.Wt(t);this.te(t,e)?r.Nt(e,1):r.kt(e),this.qt=this.qt.insert(e,this.ee(e).delete(t)),n&&(this.Lt=this.Lt.insert(e,n))}removeTarget(t){this.Bt.delete(t)}Xt(t){const e=this.Wt(t).Ct();return this.$t.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ot(t){this.Wt(t).Ot()}Wt(t){let e=this.Bt.get(t);return e||(e=new BL,this.Bt.set(t,e)),e}ee(t){let e=this.qt.get(t);return e||(e=new uN(jO),this.qt=this.qt.insert(t,e)),e}zt(t){const e=null!==this.Yt(t);return e||bO("WatchChangeAggregator","Detected inactive target",t),e}Yt(t){const e=this.Bt.get(t);return e&&e.Vt?null:this.$t.ne(t)}Ht(t){this.Bt.set(t,new BL),this.$t.getRemoteKeysForTarget(t).forEach((e=>{this.Qt(t,e,null)}))}te(t,e){return this.$t.getRemoteKeysForTarget(t).has(e)}}function UL(){return new aN(HO.comparator)}function VL(){return new aN(HO.comparator)}const qL={asc:"ASCENDING",desc:"DESCENDING"},GL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YL={and:"AND",or:"OR"};class $L{constructor(t,e){this.databaseId=t,this.wt=e}}function WL(t,e){return t.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HL(t,e){return t.wt?e.toBase64():e.toUint8Array()}function XL(t,e){return WL(t,e.toTimestamp())}function ZL(t){return CO(!!t),qO.fromTimestamp(function(t){const e=gR(t);return new VO(e.seconds,e.nanos)}(t))}function KL(t,e){return function(t){return new YO(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function QL(t){const e=YO.fromString(t);return CO(vF(e)),e}function JL(t,e){return KL(t.databaseId,e.path)}function tF(t,e){const n=QL(e);if(n.get(1)!==t.databaseId.projectId)throw new kO(IO.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new kO(IO.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new HO(iF(n))}function eF(t,e){return KL(t.databaseId,e)}function nF(t){const e=QL(t);return 4===e.length?YO.emptyPath():iF(e)}function rF(t){return new YO(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iF(t){return CO(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function oF(t,e,n){return{name:JL(t,e),fields:n.value.mapValue.fields}}function aF(t,e){let n;if(e instanceof lL)n={update:oF(t,e.key,e.value)};else if(e instanceof pL)n={delete:JL(t,e.key)};else if(e instanceof uL)n={update:oF(t,e.key,e.data),updateMask:yF(e.fieldMask)};else{if(!(e instanceof fL))return SO();n={verify:JL(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof YN)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof $N)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof HN)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ZN)return{fieldPath:e.field.canonicalString(),increment:n.gt};throw SO()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:XL(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:SO()}(t,e.precondition)),n}function sF(t,e){return{documents:[eF(t,e.path)]}}function lF(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=eF(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=eF(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(t){if(0!==t.length)return gF(qR.create(t,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:fF(t.field),direction:hF(t.dir)}}(t)))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=function(t,e){return t.wt||hR(e)?e:{value:e}}(t,e.limit);var s;return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(s=e.startAt).inclusive,values:s.position}),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function uF(t){let e=nF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){CO(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let o=[];n.where&&(o=function(t){const e=cF(t);return e instanceof qR&&YR(e)?e.getFilters():[e]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map((t=>function(t){return new iN(mF(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let s=null;n.limit&&(s=function(t){let e;return e="object"==typeof t?t.value:t,hR(e)?null:e}(n.limit));let l=null;n.startAt&&(l=function(t){const e=!!t.before,n=t.values||[];return new zR(n,e)}(n.startAt));let u=null;return n.endAt&&(u=function(t){const e=!t.before,n=t.values||[];return new zR(n,e)}(n.endAt)),xN(e,i,a,o,s,"F",l,u)}function cF(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=mF(t.unaryFilter.field);return VR.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=mF(t.unaryFilter.field);return VR.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=mF(t.unaryFilter.field);return VR.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=mF(t.unaryFilter.field);return VR.create(i,"!=",{nullValue:"NULL_VALUE"});default:return SO()}}(t):void 0!==t.fieldFilter?function(t){return VR.create(mF(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return SO()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return qR.create(t.compositeFilter.filters.map((t=>cF(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return SO()}}(t.compositeFilter.op))}(t):SO()}function hF(t){return qL[t]}function dF(t){return GL[t]}function pF(t){return YL[t]}function fF(t){return{fieldPath:t.canonicalString()}}function mF(t){return WO.fromServerFormat(t.fieldPath)}function gF(t){return t instanceof VR?function(t){if("=="===t.op){if(RR(t.value))return{unaryFilter:{field:fF(t.field),op:"IS_NAN"}};if(OR(t.value))return{unaryFilter:{field:fF(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(RR(t.value))return{unaryFilter:{field:fF(t.field),op:"IS_NOT_NAN"}};if(OR(t.value))return{unaryFilter:{field:fF(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fF(t.field),op:dF(t.op),value:t.value}}}(t):t instanceof qR?function(t){const e=t.getFilters().map((t=>gF(t)));return 1===e.length?e[0]:{compositeFilter:{op:pF(t.op),filters:e}}}(t):SO()}function yF(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function vF(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}const _F=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],bF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xF=bF;class wF{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const e=this.mutations[r];e.key.isEqual(t.key)&&iL(e,t,n[r])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=oL(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=oL(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=IL();return this.mutations.forEach((r=>{const i=t.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=e.has(r.key)?null:a;const s=rL(o,a);null!==s&&n.set(r.key,s),o.isValidDocument()||o.convertToNoDocument(qO.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),DL())}isEqual(t){return this.batchId===t.batchId&&UO(this.mutations,t.mutations,((t,e)=>sL(t,e)))&&UO(this.baseMutations,t.baseMutations,((t,e)=>sL(t,e)))}}class EF{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){CO(t.mutations.length===n.length);let r=AL;const i=t.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new EF(t,e,n,r)}}class SF{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class CF{constructor(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:qO.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:qO.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:fR.EMPTY_BYTE_STRING;this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(t){return new CF(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new CF(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new CF(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class TF{constructor(t){this.ie=t}}function IF(t){const e=uF({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?PN(e,e.limit,"L"):e}class kF{constructor(){}ue(t,e){this.ce(t,e),e.ae()}ce(t,e){if("nullValue"in t)this.he(e,5);else if("booleanValue"in t)this.he(e,10),e.le(t.booleanValue?1:0);else if("integerValue"in t)this.he(e,15),e.le(yR(t.integerValue));else if("doubleValue"in t){const n=yR(t.doubleValue);isNaN(n)?this.he(e,13):(this.he(e,15),dR(n)?e.le(0):e.le(n))}else if("timestampValue"in t){const n=t.timestampValue;this.he(e,20),"string"==typeof n?e.fe(n):(e.fe(`${n.seconds||""}`),e.le(n.nanos||0))}else if("stringValue"in t)this.de(t.stringValue,e),this._e(e);else if("bytesValue"in t)this.he(e,30),e.we(vR(t.bytesValue)),this._e(e);else if("referenceValue"in t)this.me(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.he(e,45),e.le(n.latitude||0),e.le(n.longitude||0)}else"mapValue"in t?FR(t)?this.he(e,Number.MAX_SAFE_INTEGER):(this.ge(t.mapValue,e),this._e(e)):"arrayValue"in t?(this.ye(t.arrayValue,e),this._e(e)):SO()}de(t,e){this.he(e,25),this.pe(t,e)}pe(t,e){e.fe(t)}ge(t,e){const n=t.fields||{};this.he(e,55);for(const r of Object.keys(n))this.de(r,e),this.ce(n[r],e)}ye(t,e){const n=t.values||[];this.he(e,50);for(const r of n)this.ce(r,e)}me(t,e){this.he(e,37),HO.fromName(t).path.forEach((t=>{this.he(e,60),this.pe(t,e)}))}he(t,e){t.le(e)}_e(t){t.le(2)}}kF.Ie=new kF;class AF{constructor(){this.Je=new PF}addToCollectionParentIndex(t,e){return this.Je.add(e),rR.resolve()}getCollectionParents(t,e){return rR.resolve(this.Je.getEntries(e))}addFieldIndex(t,e){return rR.resolve()}deleteFieldIndex(t,e){return rR.resolve()}getDocumentsMatchingTarget(t,e){return rR.resolve(null)}getIndexType(t,e){return rR.resolve(0)}getFieldIndexes(t,e){return rR.resolve([])}getNextCollectionGroupToUpdate(t){return rR.resolve(null)}getMinOffset(t,e){return rR.resolve(QO.min())}getMinOffsetFromCollectionGroup(t,e){return rR.resolve(QO.min())}updateCollectionGroup(t,e,n){return rR.resolve()}updateIndexEntries(t,e){return rR.resolve()}}class PF{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new uN(YO.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new uN(YO.comparator)).toArray()}}new Uint8Array(0);class DF{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new DF(t,DF.DEFAULT_COLLECTION_PERCENTILE,DF.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}DF.DEFAULT_COLLECTION_PERCENTILE=10,DF.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,DF.DEFAULT=new DF(41943040,DF.DEFAULT_COLLECTION_PERCENTILE,DF.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),DF.DISABLED=new DF(-1,0,0);class MF{constructor(t){this.bn=t}next(){return this.bn+=2,this.bn}static Pn(){return new MF(0)}static vn(){return new MF(-1)}}class OF{constructor(){this.changes=new bL((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,fN.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?rR.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class RF{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class NF{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(n=r,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&oL(n.mutation,t,hN.empty(),VO.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,DL()).next((()=>e))))}getLocalViewOfDocuments(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:DL();const r=TL();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,n).next((t=>{let e=SL();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=TL();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,DL())))}populateOverlays(t,e,n){const r=[];return n.forEach((t=>{e.has(t)||r.push(t)})),this.documentOverlayCache.getOverlays(t,r).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,r){let i=wL();const o=kL(),a=kL();return e.forEach(((t,e)=>{const a=n.get(e.key);r.has(e.key)&&(void 0===a||a.mutation instanceof uL)?i=i.insert(e.key,e):void 0!==a?(o.set(e.key,a.mutation.getFieldMask()),oL(a.mutation,e,a.mutation.getFieldMask(),VO.now())):o.set(e.key,hN.empty())})),this.recalculateAndSaveOverlays(t,i).next((t=>(t.forEach(((t,e)=>o.set(t,e))),e.forEach(((t,e)=>{var n;return a.set(t,new RF(e,null!==(n=o.get(t))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(t,e){const n=kL();let r=new aN(((t,e)=>t-e)),i=DL();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const i of t)i.keys().forEach((t=>{const o=e.get(t);if(null===o)return;let a=n.get(t)||hN.empty();a=i.applyToLocalView(o,a),n.set(t,a);const s=(r.get(i.batchId)||DL()).add(t);r=r.insert(i.batchId,s)}))})).next((()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,u=IL();l.forEach((t=>{if(!i.has(t)){const r=rL(e.get(t),n.get(t));null!==r&&u.set(t,r),i=i.add(t)}})),o.push(this.documentOverlayCache.saveOverlays(t,s,u))}return rR.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n){return function(t){return HO.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):TN(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-i.size):rR.resolve(TL());let a=-1,s=i;return o.next((e=>rR.forEach(e,((e,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(e)?rR.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{s=s.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,i))).next((()=>this.computeViews(t,s,e,DL()))).next((t=>({batchId:a,changes:CL(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new HO(e)).next((t=>{let e=SL();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n){const r=e.collectionGroup;let i=SL();return this.indexManager.getCollectionParents(t,r).next((o=>rR.forEach(o,(o=>{const a=function(t,e){return new bN(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(r));return this.getDocumentsMatchingCollectionQuery(t,a,n).next((t=>{t.forEach(((t,e)=>{i=i.insert(t,e)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(t,e,n){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r)))).next((t=>{r.forEach(((e,n)=>{const r=n.getKey();null===t.get(r)&&(t=t.insert(r,fN.newInvalidDocument(r)))}));let n=SL();return t.forEach(((t,i)=>{const o=r.get(t);void 0!==o&&oL(o.mutation,i,hN.empty(),VO.now()),RN(e,i)&&(n=n.insert(t,i))})),n}))}}class LF{constructor(t){this.yt=t,this.Zn=new Map,this.ts=new Map}getBundleMetadata(t,e){return rR.resolve(this.Zn.get(e))}saveBundleMetadata(t,e){var n;return this.Zn.set(e.id,{id:(n=e).id,version:n.version,createTime:ZL(n.createTime)}),rR.resolve()}getNamedQuery(t,e){return rR.resolve(this.ts.get(e))}saveNamedQuery(t,e){return this.ts.set(e.name,function(t){return{name:t.name,query:IF(t.bundledQuery),readTime:ZL(t.readTime)}}(e)),rR.resolve()}}class FF{constructor(){this.overlays=new aN(HO.comparator),this.es=new Map}getOverlay(t,e){return rR.resolve(this.overlays.get(e))}getOverlays(t,e){const n=TL();return rR.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,r)=>{this.oe(t,e,r)})),rR.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.es.get(n);return void 0!==r&&(r.forEach((t=>this.overlays=this.overlays.remove(t))),this.es.delete(n)),rR.resolve()}getOverlaysForCollection(t,e,n){const r=TL(),i=e.length+1,o=new HO(e.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const t=a.getNext().value,o=t.getKey();if(!e.isPrefixOf(o.path))break;o.path.length===i&&t.largestBatchId>n&&r.set(t.getKey(),t)}return rR.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let i=new aN(((t,e)=>t-e));const o=this.overlays.getIterator();for(;o.hasNext();){const t=o.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=i.get(t.largestBatchId);null===e&&(e=TL(),i=i.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const a=TL(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((t,e)=>a.set(t,e))),!(a.size()>=r)););return rR.resolve(a)}oe(t,e,n){const r=this.overlays.get(n.key);if(null!==r){const t=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new SF(e,n));let i=this.es.get(e);void 0===i&&(i=DL(),this.es.set(e,i)),this.es.set(e,i.add(n.key))}}class zF{constructor(){this.ns=new uN(BF.ss),this.rs=new uN(BF.os)}isEmpty(){return this.ns.isEmpty()}addReference(t,e){const n=new BF(t,e);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}us(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.cs(new BF(t,e))}hs(t,e){t.forEach((t=>this.removeReference(t,e)))}ls(t){const e=new HO(new YO([])),n=new BF(e,t),r=new BF(e,t+1),i=[];return this.rs.forEachInRange([n,r],(t=>{this.cs(t),i.push(t.key)})),i}fs(){this.ns.forEach((t=>this.cs(t)))}cs(t){this.ns=this.ns.delete(t),this.rs=this.rs.delete(t)}ds(t){const e=new HO(new YO([])),n=new BF(e,t),r=new BF(e,t+1);let i=DL();return this.rs.forEachInRange([n,r],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new BF(t,0),n=this.ns.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class BF{constructor(t,e){this.key=t,this._s=e}static ss(t,e){return HO.comparator(t.key,e.key)||jO(t._s,e._s)}static os(t,e){return jO(t._s,e._s)||HO.comparator(t.key,e.key)}}class jF{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.ws=1,this.gs=new uN(BF.ss)}checkEmpty(t){return rR.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,r){const i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new wF(i,e,n,r);this.mutationQueue.push(o);for(const a of r)this.gs=this.gs.add(new BF(a.key,i)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return rR.resolve(o)}lookupMutationBatch(t,e){return rR.resolve(this.ys(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.ps(n),i=r<0?0:r;return rR.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return rR.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(t){return rR.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new BF(e,0),r=new BF(e,Number.POSITIVE_INFINITY),i=[];return this.gs.forEachInRange([n,r],(t=>{const e=this.ys(t._s);i.push(e)})),rR.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new uN(jO);return e.forEach((t=>{const e=new BF(t,0),r=new BF(t,Number.POSITIVE_INFINITY);this.gs.forEachInRange([e,r],(t=>{n=n.add(t._s)}))})),rR.resolve(this.Is(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;HO.isDocumentKey(i)||(i=i.child(""));const o=new BF(new HO(i),0);let a=new uN(jO);return this.gs.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t._s)),!0)}),o),rR.resolve(this.Is(a))}Is(t){const e=[];return t.forEach((t=>{const n=this.ys(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){CO(0===this.Ts(e.batchId,"removed")),this.mutationQueue.shift();let n=this.gs;return rR.forEach(e.mutations,(r=>{const i=new BF(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.gs=n}))}An(t){}containsKey(t,e){const n=new BF(e,0),r=this.gs.firstAfterOrEqual(n);return rR.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,rR.resolve()}Ts(t,e){return this.ps(t)}ps(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}ys(t){const e=this.ps(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class UF{constructor(t){this.Es=t,this.docs=new aN(HO.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),i=r?r.size:0,o=this.Es(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return rR.resolve(n?n.document.mutableCopy():fN.newInvalidDocument(e))}getEntries(t,e){let n=wL();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():fN.newInvalidDocument(t))})),rR.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let i=wL();const o=e.path,a=new HO(o.child("")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:t,value:{document:a}}=s.getNext();if(!o.isPrefixOf(t.path))break;t.path.length>o.length+1||JO(KO(a),n)<=0||(r.has(a.key)||RN(e,a))&&(i=i.insert(a.key,a.mutableCopy()))}return rR.resolve(i)}getAllFromCollectionGroup(t,e,n,r){SO()}As(t,e){return rR.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new VF(this)}getSize(t){return rR.resolve(this.size)}}class VF extends OF{constructor(t){super(),this.Yn=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?e.push(this.Yn.addEntry(t,r)):this.Yn.removeEntry(n)})),rR.waitFor(e)}getFromCache(t,e){return this.Yn.getEntry(t,e)}getAllFromCache(t,e){return this.Yn.getEntries(t,e)}}class qF{constructor(t){this.persistence=t,this.Rs=new bL((t=>yN(t)),vN),this.lastRemoteSnapshotVersion=qO.min(),this.highestTargetId=0,this.bs=0,this.Ps=new zF,this.targetCount=0,this.vs=MF.Pn()}forEachTarget(t,e){return this.Rs.forEach(((t,n)=>e(n))),rR.resolve()}getLastRemoteSnapshotVersion(t){return rR.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return rR.resolve(this.bs)}allocateTargetId(t){return this.highestTargetId=this.vs.next(),rR.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.bs&&(this.bs=e),rR.resolve()}Dn(t){this.Rs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.vs=new MF(e),this.highestTargetId=e),t.sequenceNumber>this.bs&&(this.bs=t.sequenceNumber)}addTargetData(t,e){return this.Dn(e),this.targetCount+=1,rR.resolve()}updateTargetData(t,e){return this.Dn(e),rR.resolve()}removeTargetData(t,e){return this.Rs.delete(e.target),this.Ps.ls(e.targetId),this.targetCount-=1,rR.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.Rs.forEach(((o,a)=>{a.sequenceNumber<=e&&null===n.get(a.targetId)&&(this.Rs.delete(o),i.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)})),rR.waitFor(i).next((()=>r))}getTargetCount(t){return rR.resolve(this.targetCount)}getTargetData(t,e){const n=this.Rs.get(e)||null;return rR.resolve(n)}addMatchingKeys(t,e,n){return this.Ps.us(e,n),rR.resolve()}removeMatchingKeys(t,e,n){this.Ps.hs(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((e=>{i.push(r.markPotentiallyOrphaned(t,e))})),rR.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Ps.ls(e),rR.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Ps.ds(e);return rR.resolve(n)}containsKey(t,e){return rR.resolve(this.Ps.containsKey(e))}}class GF{constructor(t,e){this.Vs={},this.overlays={},this.Ss=new oR(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new qF(this),this.indexManager=new AF,this.remoteDocumentCache=function(t){return new UF(t)}((t=>this.referenceDelegate.xs(t))),this.yt=new TF(e),this.Ns=new LF(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new FF,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Vs[t.toKey()];return n||(n=new jF(e,this.referenceDelegate),this.Vs[t.toKey()]=n),n}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(t,e,n){bO("MemoryPersistence","Starting transaction:",t);const r=new YF(this.Ss.next());return this.referenceDelegate.ks(),n(r).next((t=>this.referenceDelegate.Os(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}Ms(t,e){return rR.or(Object.values(this.Vs).map((n=>()=>n.containsKey(t,e))))}}class YF extends eR{constructor(t){super(),this.currentSequenceNumber=t}}class $F{constructor(t){this.persistence=t,this.Fs=new zF,this.$s=null}static Bs(t){return new $F(t)}get Ls(){if(this.$s)return this.$s;throw SO()}addReference(t,e,n){return this.Fs.addReference(n,e),this.Ls.delete(n.toString()),rR.resolve()}removeReference(t,e,n){return this.Fs.removeReference(n,e),this.Ls.add(n.toString()),rR.resolve()}markPotentiallyOrphaned(t,e){return this.Ls.add(e.toString()),rR.resolve()}removeTarget(t,e){this.Fs.ls(e.targetId).forEach((t=>this.Ls.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Ls.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}ks(){this.$s=new Set}Os(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rR.forEach(this.Ls,(n=>{const r=HO.fromPath(n);return this.qs(t,r).next((t=>{t||e.removeEntry(r,qO.min())}))})).next((()=>(this.$s=null,e.apply(t))))}updateLimboDocument(t,e){return this.qs(t,e).next((t=>{t?this.Ls.delete(e.toString()):this.Ls.add(e.toString())}))}xs(t){return 0}qs(t,e){return rR.or([()=>rR.resolve(this.Fs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ms(t,e)])}}class WF{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.Si=n,this.Di=r}static Ci(t,e){let n=DL(),r=DL();for(const i of e.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new WF(t,e.fromCache,n,r)}}class HF{constructor(){this.xi=!1}initialize(t,e){this.Ni=t,this.indexManager=e,this.xi=!0}getDocumentsMatchingQuery(t,e,n,r){return this.ki(t,e).next((i=>i||this.Oi(t,e,r,n))).next((n=>n||this.Mi(t,e)))}ki(t,e){if(EN(e))return rR.resolve(null);let n=kN(e);return this.indexManager.getIndexType(t,n).next((r=>0===r?null:(null!==e.limit&&1===r&&(e=PN(e,null,"F"),n=kN(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((r=>{const i=DL(...r);return this.Ni.getDocuments(t,i).next((r=>this.indexManager.getMinOffset(t,n).next((n=>{const o=this.Fi(e,r);return this.$i(e,o,i,n.readTime)?this.ki(t,PN(e,null,"F")):this.Bi(t,o,e,n)}))))})))))}Oi(t,e,n,r){return EN(e)||r.isEqual(qO.min())?this.Mi(t,e):this.Ni.getDocuments(t,n).next((i=>{const o=this.Fi(e,i);return this.$i(e,o,n,r)?this.Mi(t,e):(_O()<=cC.DEBUG&&bO("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ON(e)),this.Bi(t,o,e,ZO(r,-1)))}))}Fi(t,e){let n=new uN(LN(t));return e.forEach(((e,r)=>{RN(t,r)&&(n=n.add(r))})),n}$i(t,e,n,r){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const i="F"===t.limitType?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Mi(t,e){return _O()<=cC.DEBUG&&bO("QueryEngine","Using full collection scan to execute query:",ON(e)),this.Ni.getDocumentsMatchingQuery(t,e,QO.min())}Bi(t,e,n,r){return this.Ni.getDocumentsMatchingQuery(t,n,r).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class XF{constructor(t,e,n,r){this.persistence=t,this.Li=e,this.yt=r,this.qi=new aN(jO),this.Ui=new bL((t=>yN(t)),vN),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(n)}Qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new NF(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.qi)))}}function ZF(t,e,n,r){return new XF(t,e,n,r)}async function KF(t,e){const n=TO(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let r;return n.mutationQueue.getAllMutationBatches(t).next((i=>(r=i,n.Qi(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const i=[],o=[];let a=DL();for(const t of r){i.push(t.batchId);for(const e of t.mutations)a=a.add(e.key)}for(const t of e){o.push(t.batchId);for(const e of t.mutations)a=a.add(e.key)}return n.localDocuments.getDocuments(t,a).next((t=>({ji:t,removedBatchIds:i,addedBatchIds:o})))}))}))}function QF(t){const e=TO(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Cs.getLastRemoteSnapshotVersion(t)))}function JF(t,e,n){let r=DL(),i=DL();return n.forEach((t=>r=r.add(t))),e.getEntries(t,r).next((t=>{let r=wL();return n.forEach(((n,o)=>{const a=t.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(qO.min())?(e.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o),r=r.insert(n,o)):bO("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),{Wi:r,zi:i}}))}function tz(t,e){const n=TO(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}function ez(t,e){const n=TO(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let r;return n.Cs.getTargetData(t,e).next((i=>i?(r=i,rR.resolve(r)):n.Cs.allocateTargetId(t).next((i=>(r=new CF(e,i,0,t.currentSequenceNumber),n.Cs.addTargetData(t,r).next((()=>r)))))))})).then((t=>{const r=n.qi.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qi=n.qi.insert(t.targetId,t),n.Ui.set(e,t.targetId)),t}))}async function nz(t,e,n){const r=TO(t),i=r.qi.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(t=>r.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!iR(t))throw t;bO("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}function rz(t,e,n){const r=TO(t);let i=qO.min(),o=DL();return r.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const r=TO(t),i=r.Ui.get(n);return void 0!==i?rR.resolve(r.qi.get(i)):r.Cs.getTargetData(e,n)}(r,t,kN(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(t,e.targetId).next((t=>{o=t}))})).next((()=>r.Li.getDocumentsMatchingQuery(t,e,n?i:qO.min(),n?o:DL()))).next((t=>(iz(r,NN(e),t),{documents:t,Hi:o})))))}function iz(t,e,n){let r=t.Ki.get(e)||qO.min();n.forEach(((t,e)=>{e.readTime.compareTo(r)>0&&(r=e.readTime)})),t.Ki.set(e,r)}class oz{constructor(){this.activeTargetIds=OL()}er(t){this.activeTargetIds=this.activeTargetIds.add(t)}nr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}tr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class az{constructor(){this.Lr=new oz,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.Lr.er(t),this.qr[t]||"not-current"}updateQueryState(t,e,n){this.qr[t]=e}removeLocalQueryTarget(t){this.Lr.nr(t)}isLocalQueryTarget(t){return this.Lr.activeTargetIds.has(t)}clearQueryState(t){delete this.qr[t]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(t){return this.Lr.activeTargetIds.has(t)}start(){return this.Lr=new oz,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class sz{Ur(t){}shutdown(){}}class lz{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(t){this.Wr.push(t)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){bO("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Wr)t(0)}jr(){bO("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Wr)t(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const uz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cz{constructor(t){this.Hr=t.Hr,this.Jr=t.Jr}Yr(t){this.Xr=t}Zr(t){this.eo=t}onMessage(t){this.no=t}close(){this.Jr()}send(t){this.Hr(t)}so(){this.Xr()}io(t){this.eo(t)}ro(t){this.no(t)}}class hz extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.oo=e+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(t,e,n,r,i){const o=this.ho(t,e);bO("RestConnection","Sending: ",o,n);const a={};return this.lo(a,r,i),this.fo(t,o,a,n).then((t=>(bO("RestConnection","Received: ",t),t)),(e=>{throw wO("RestConnection",`${t} failed with error: `,e,"url: ",o,"request:",n),e}))}_o(t,e,n,r,i,o){return this.ao(t,e,n,r,i)}lo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+yO,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}ho(t,e){const n=uz[t];return`${this.oo}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,n,r){return new Promise(((i,o)=>{const a=new fO;a.setWithCredentials(!0),a.listenOnce(uO.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case lO.NO_ERROR:const e=a.getResponseJson();bO("Connection","XHR received:",JSON.stringify(e)),i(e);break;case lO.TIMEOUT:bO("Connection",'RPC "'+t+'" timed out'),o(new kO(IO.DEADLINE_EXCEEDED,"Request time out"));break;case lO.HTTP_ERROR:const n=a.getStatus();if(bO("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(IO).indexOf(e)>=0?e:IO.UNKNOWN}(e.status);o(new kO(t,e.message))}else o(new kO(IO.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new kO(IO.UNAVAILABLE,"Connection failed."));break;default:SO()}}finally{bO("Connection",'RPC "'+t+'" completed.')}}));const s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))}wo(t,e,n){const r=[this.oo,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=aO(),o=sO(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new dO({})),this.lo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const s=r.join("");bO("Connection","Creating WebChannel: "+s,a);const l=i.createWebChannel(s,a);let u=!1,c=!1;const h=new cz({Hr:t=>{c?bO("Connection","Not sending because WebChannel is closed:",t):(u||(bO("Connection","Opening WebChannel transport."),l.open(),u=!0),bO("Connection","WebChannel sending:",t),l.send(t))},Jr:()=>l.close()}),d=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return d(l,pO.EventType.OPEN,(()=>{c||bO("Connection","WebChannel transport opened.")})),d(l,pO.EventType.CLOSE,(()=>{c||(c=!0,bO("Connection","WebChannel transport closed"),h.io())})),d(l,pO.EventType.ERROR,(t=>{c||(c=!0,wO("Connection","WebChannel transport errored:",t),h.io(new kO(IO.UNAVAILABLE,"The operation could not be completed")))})),d(l,pO.EventType.MESSAGE,(t=>{var e;if(!c){const n=t.data[0];CO(!!n);const r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){bO("Connection","WebChannel received error:",i);const t=i.status;let e=function(t){const e=gL[t];if(void 0!==e)return _L(e)}(t),n=i.message;void 0===e&&(e=IO.INTERNAL,n="Unknown error status: "+t+" with message "+i.message),c=!0,h.io(new kO(e,n)),l.close()}else bO("Connection","WebChannel received:",n),h.ro(n)}})),d(o,cO.STAT_EVENT,(t=>{t.stat===hO.PROXY?bO("Connection","Detected buffering proxy"):t.stat===hO.NOPROXY&&bO("Connection","Detected no buffering proxy")})),setTimeout((()=>{h.so()}),0),h}}function dz(){return"undefined"!=typeof document?document:null}function pz(t){return new $L(t,!0)}class fz{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Hs=t,this.timerId=e,this.mo=n,this.yo=r,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),n=Math.max(0,Date.now()-this.Eo),r=Math.max(0,e-n);r>0&&bO("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,(()=>(this.Eo=Date.now(),t()))),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class mz{constructor(t,e,n,r,i,o,a,s){this.Hs=t,this.vo=n,this.Vo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new fz(t,e)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(()=>this.$o())))}Bo(t){this.Lo(),this.stream.send(t)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(t,e){this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():e&&e.code===IO.RESOURCE_EXHAUSTED?(xO(e.toString()),xO("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):e&&e.code===IO.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Zr(e)}Uo(){}auth(){this.state=1;const t=this.Ko(this.So),e=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((t=>{let[n,r]=t;this.So===e&&this.Go(n,r)}),(e=>{t((()=>{const t=new kO(IO.UNKNOWN,"Fetching auth token failed: "+e.message);return this.Qo(t)}))}))}Go(t,e){const n=this.Ko(this.So);this.stream=this.jo(t,e),this.stream.Yr((()=>{n((()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,(()=>(this.ko()&&(this.state=3),Promise.resolve()))),this.listener.Yr())))})),this.stream.Zr((t=>{n((()=>this.Qo(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Oo(){this.state=5,this.xo.Ro((async()=>{this.state=0,this.start()}))}Qo(t){return bO("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Ko(t){return e=>{this.Hs.enqueueAndForget((()=>this.So===t?e():(bO("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class gz extends mz{constructor(t,e,n,r,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,o),this.yt=i}jo(t,e){return this.connection.wo("Listen",t,e)}onMessage(t){this.xo.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:SO()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.wt?(CO(void 0===e||"string"==typeof e),fR.fromBase64String(e||"")):(CO(void 0===e||e instanceof Uint8Array),fR.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,s=a&&function(t){const e=void 0===t.code?IO.UNKNOWN:_L(t.code);return new kO(e,t.message||"")}(a);n=new zL(r,i,o,s||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=tF(t,r.document.name),o=ZL(r.document.updateTime),a=r.document.createTime?ZL(r.document.createTime):qO.min(),s=new dN({mapValue:{fields:r.document.fields}}),l=fN.newFoundDocument(i,o,a,s),u=r.targetIds||[],c=r.removedTargetIds||[];n=new LL(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=tF(t,r.document),o=r.readTime?ZL(r.readTime):qO.min(),a=fN.newNoDocument(i,o),s=r.removedTargetIds||[];n=new LL([],s,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=tF(t,r.document),o=r.removedTargetIds||[];n=new LL([],o,i,null)}else{if(!("filter"in e))return SO();{e.filter;const t=e.filter;t.targetId;const r=t.count||0,i=new mL(r),o=t.targetId;n=new FL(o,i)}}return n}(this.yt,t),n=function(t){if(!("targetChange"in t))return qO.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?qO.min():e.readTime?ZL(e.readTime):qO.min()}(t);return this.listener.Wo(e,n)}zo(t){const e={};e.database=rF(this.yt),e.addTarget=function(t,e){let n;const r=e.target;return n=_N(r)?{documents:sF(t,r)}:{query:lF(t,r)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=HL(t,e.resumeToken):e.snapshotVersion.compareTo(qO.min())>0&&(n.readTime=WL(t,e.snapshotVersion.toTimestamp())),n}(this.yt,t);const n=function(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return SO()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,t);n&&(e.labels=n),this.Bo(e)}Ho(t){const e={};e.database=rF(this.yt),e.removeTarget=t,this.Bo(e)}}class yz extends mz{constructor(t,e,n,r,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,o),this.yt=i,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(t,e){return this.connection.wo("Write",t,e)}onMessage(t){if(CO(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Jo){this.xo.reset();const e=function(t,e){return t&&t.length>0?(CO(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?ZL(t.updateTime):ZL(e);return n.isEqual(qO.min())&&(n=ZL(e)),new JN(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=ZL(t.commitTime);return this.listener.Zo(n,e)}return CO(!t.writeResults||0===t.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const t={};t.database=rF(this.yt),this.Bo(t)}Xo(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>aF(this.yt,t)))};this.Bo(e)}}class vz extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.yt=r,this.nu=!1}su(){if(this.nu)throw new kO(IO.FAILED_PRECONDITION,"The client has already been terminated.")}ao(t,e,n){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,o]=r;return this.connection.ao(t,e,n,i,o)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===IO.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new kO(IO.UNKNOWN,t.toString())}))}_o(t,e,n,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,a]=i;return this.connection._o(t,e,n,o,a,r)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===IO.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new kO(IO.UNKNOWN,t.toString())}))}terminate(){this.nu=!0}}class _z{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve()))))}hu(t){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.lu(),this.iu=0,"Online"===t&&(this.ou=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}au(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(xO(e),this.ou=!1):bO("OnlineStateTracker",e)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class bz{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=i,this.mu.Ur((t=>{n.enqueueAndForget((async()=>{Az(this)&&(bO("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=TO(t);e._u.add(4),await wz(e),e.gu.set("Unknown"),e._u.delete(4),await xz(e)}(this))}))})),this.gu=new _z(n,r)}}async function xz(t){if(Az(t))for(const e of t.wu)await e(!0)}async function wz(t){for(const e of t.wu)await e(!1)}function Ez(t,e){const n=TO(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),kz(n)?Iz(n):Wz(n).ko()&&Cz(n,e))}function Sz(t,e){const n=TO(t),r=Wz(n);n.du.delete(e),r.ko()&&Tz(n,e),0===n.du.size&&(r.ko()?r.Fo():Az(n)&&n.gu.set("Unknown"))}function Cz(t,e){t.yu.Ot(e.targetId),Wz(t).zo(e)}function Tz(t,e){t.yu.Ot(e),Wz(t).Ho(e)}function Iz(t){t.yu=new jL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>t.du.get(e)||null}),Wz(t).start(),t.gu.uu()}function kz(t){return Az(t)&&!Wz(t).No()&&t.du.size>0}function Az(t){return 0===TO(t)._u.size}function Pz(t){t.yu=void 0}async function Dz(t){t.du.forEach(((e,n)=>{Cz(t,e)}))}async function Mz(t,e){Pz(t),kz(t)?(t.gu.hu(e),Iz(t)):t.gu.set("Unknown")}async function Oz(t,e,n){if(t.gu.set("Online"),e instanceof zL&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const r of e.targetIds)t.du.has(r)&&(await t.remoteSyncer.rejectListen(r,n),t.du.delete(r),t.yu.removeTarget(r))}(t,e)}catch(n){bO("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Rz(t,n)}else if(e instanceof LL?t.yu.Kt(e):e instanceof FL?t.yu.Jt(e):t.yu.jt(e),!n.isEqual(qO.min()))try{const e=await QF(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.yu.Zt(e);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.du.get(r);i&&t.du.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((e=>{const n=t.du.get(e);if(!n)return;t.du.set(e,n.withResumeToken(fR.EMPTY_BYTE_STRING,n.snapshotVersion)),Tz(t,e);const r=new CF(n.target,e,1,n.sequenceNumber);Cz(t,r)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){bO("RemoteStore","Failed to raise snapshot:",e),await Rz(t,e)}}async function Rz(t,e,n){if(!iR(e))throw e;t._u.add(1),await wz(t),t.gu.set("Offline"),n||(n=()=>QF(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{bO("RemoteStore","Retrying IndexedDB access"),await n(),t._u.delete(1),await xz(t)}))}function Nz(t,e){return e().catch((n=>Rz(t,n,e)))}async function Lz(t){const e=TO(t),n=Hz(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Fz(e);)try{const t=await tz(e.localStore,r);if(null===t){0===e.fu.length&&n.Fo();break}r=t.batchId,zz(e,t)}catch(t){await Rz(e,t)}Bz(e)&&jz(e)}function Fz(t){return Az(t)&&t.fu.length<10}function zz(t,e){t.fu.push(e);const n=Hz(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function Bz(t){return Az(t)&&!Hz(t).No()&&t.fu.length>0}function jz(t){Hz(t).start()}async function Uz(t){Hz(t).eu()}async function Vz(t){const e=Hz(t);for(const n of t.fu)e.Xo(n.mutations)}async function qz(t,e,n){const r=t.fu.shift(),i=EF.from(r,e,n);await Nz(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Lz(t)}async function Gz(t,e){e&&Hz(t).Yo&&await async function(t,e){if(vL(n=e.code)&&n!==IO.ABORTED){const n=t.fu.shift();Hz(t).Mo(),await Nz(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await Lz(t)}var n}(t,e),Bz(t)&&jz(t)}async function Yz(t,e){const n=TO(t);n.asyncQueue.verifyOperationInProgress(),bO("RemoteStore","RemoteStore received new credentials");const r=Az(n);n._u.add(3),await wz(n),r&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),await xz(n)}async function $z(t,e){const n=TO(t);e?(n._u.delete(2),await xz(n)):e||(n._u.add(2),await wz(n),n.gu.set("Unknown"))}function Wz(t){return t.pu||(t.pu=function(t,e,n){const r=TO(t);return r.su(),new gz(e,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(t.datastore,t.asyncQueue,{Yr:Dz.bind(null,t),Zr:Mz.bind(null,t),Wo:Oz.bind(null,t)}),t.wu.push((async e=>{e?(t.pu.Mo(),kz(t)?Iz(t):t.gu.set("Unknown")):(await t.pu.stop(),Pz(t))}))),t.pu}function Hz(t){return t.Iu||(t.Iu=function(t,e,n){const r=TO(t);return r.su(),new yz(e,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(t.datastore,t.asyncQueue,{Yr:Uz.bind(null,t),Zr:Gz.bind(null,t),tu:Vz.bind(null,t),Zo:qz.bind(null,t)}),t.wu.push((async e=>{e?(t.Iu.Mo(),await Lz(t)):(await t.Iu.stop(),t.fu.length>0&&(bO("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))}))),t.Iu}class Xz{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new AO,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,r,i){const o=Date.now()+n,a=new Xz(t,e,o,r,i);return a.start(n),a}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new kO(IO.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zz(t,e){if(xO("AsyncQueue",`${e}: ${t}`),iR(t))return new kO(IO.UNAVAILABLE,`${e}: ${t}`);throw t}class Kz{constructor(t){this.comparator=t?(e,n)=>t(e,n)||HO.comparator(e.key,n.key):(t,e)=>HO.comparator(t.key,e.key),this.keyedMap=SL(),this.sortedSet=new aN(this.comparator)}static emptySet(t){return new Kz(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Kz))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Kz;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class Qz{constructor(){this.Tu=new aN(HO.comparator)}track(t){const e=t.doc.key,n=this.Tu.get(e);n?0!==t.type&&3===n.type?this.Tu=this.Tu.insert(e,t):3===t.type&&1!==n.type?this.Tu=this.Tu.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Tu=this.Tu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Tu=this.Tu.remove(e):1===t.type&&2===n.type?this.Tu=this.Tu.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):SO():this.Tu=this.Tu.insert(e,t)}Eu(){const t=[];return this.Tu.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Jz{constructor(t,e,n,r,i,o,a,s,l){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(t,e,n,r,i){const o=[];return e.forEach((t=>{o.push({type:0,doc:t})})),new Jz(t,e,Kz.emptySet(e),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&DN(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}class tB{constructor(){this.Au=void 0,this.listeners=[]}}class eB{constructor(){this.queries=new bL((t=>MN(t)),DN),this.onlineState="Unknown",this.Ru=new Set}}async function nB(t,e){const n=TO(t),r=e.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new tB),i)try{o.Au=await n.onListen(r)}catch(t){const n=Zz(t,`Initialization of query '${ON(e.query)}' failed`);return void e.onError(n)}n.queries.set(r,o),o.listeners.push(e),e.bu(n.onlineState),o.Au&&e.Pu(o.Au)&&aB(n)}async function rB(t,e){const n=TO(t),r=e.query;let i=!1;const o=n.queries.get(r);if(o){const t=o.listeners.indexOf(e);t>=0&&(o.listeners.splice(t,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function iB(t,e){const n=TO(t);let r=!1;for(const i of e){const t=i.query,e=n.queries.get(t);if(e){for(const t of e.listeners)t.Pu(i)&&(r=!0);e.Au=i}}r&&aB(n)}function oB(t,e,n){const r=TO(t),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(e)}function aB(t){t.Ru.forEach((t=>{t.next()}))}class sB{constructor(t,e,n){this.query=t,this.vu=e,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=n||{}}Pu(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Jz(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Vu?this.Du(t)&&(this.vu.next(t),e=!0):this.Cu(t,this.onlineState)&&(this.xu(t),e=!0),this.Su=t,e}onError(t){this.vu.error(t)}bu(t){this.onlineState=t;let e=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,t)&&(this.xu(this.Su),e=!0),e}Cu(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.Nu||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Du(t){if(t.docChanges.length>0)return!0;const e=this.Su&&this.Su.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}xu(t){t=Jz.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Vu=!0,this.vu.next(t)}}class lB{constructor(t){this.key=t}}class uB{constructor(t){this.key=t}}class cB{constructor(t,e){this.query=t,this.qu=e,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=DL(),this.mutatedKeys=DL(),this.Gu=LN(t),this.Qu=new Kz(this.Gu)}get ju(){return this.qu}Wu(t,e){const n=e?e.zu:new Qz,r=e?e.Qu:this.Qu;let i=e?e.mutatedKeys:this.mutatedKeys,o=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((t,e)=>{const u=r.get(t),c=RN(this.query,e)?e:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let p=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),p=!0):this.Hu(u,c)||(n.track({type:2,doc:c}),p=!0,(s&&this.Gu(c,s)>0||l&&this.Gu(c,l)<0)&&(a=!0)):!u&&c?(n.track({type:0,doc:c}),p=!0):u&&!c&&(n.track({type:1,doc:u}),p=!0,(s||l)&&(a=!0)),p&&(c?(o=o.add(c),i=d?i.add(t):i.delete(t)):(o=o.delete(t),i=i.delete(t)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const t="F"===this.query.limitType?o.last():o.first();o=o.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{Qu:o,zu:n,$i:a,mutatedKeys:i}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const r=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const i=t.zu.Eu();i.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return SO()}};return n(t)-n(e)}(t.type,e.type)||this.Gu(t.doc,e.doc))),this.Ju(n);const o=e?this.Yu():[],a=0===this.Ku.size&&this.current?1:0,s=a!==this.Uu;return this.Uu=a,0!==i.length||s?{snapshot:new Jz(this.query,t.Qu,r,i,t.mutatedKeys,0===a,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Qz,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(t){return!this.qu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach((t=>this.qu=this.qu.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.qu=this.qu.delete(t))),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=DL(),this.Qu.forEach((t=>{this.Zu(t.key)&&(this.Ku=this.Ku.add(t.key))}));const e=[];return t.forEach((t=>{this.Ku.has(t)||e.push(new uB(t))})),this.Ku.forEach((n=>{t.has(n)||e.push(new lB(n))})),e}tc(t){this.qu=t.Hi,this.Ku=DL();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ec(){return Jz.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class hB{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class dB{constructor(t){this.key=t,this.nc=!1}}class pB{constructor(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new bL((t=>MN(t)),DN),this.rc=new Map,this.oc=new Set,this.uc=new aN(HO.comparator),this.cc=new Map,this.ac=new zF,this.hc={},this.lc=new Map,this.fc=MF.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}async function fB(t,e){const n=MB(t);let r,i;const o=n.ic.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.ec();else{const t=await ez(n.localStore,kN(e));n.isPrimaryClient&&Ez(n.remoteStore,t);const o=n.sharedClientState.addLocalQueryTarget(t.targetId);r=t.targetId,i=await mB(n,e,r,"current"===o,t.resumeToken)}return i}async function mB(t,e,n,r,i){t._c=(e,n,r)=>async function(t,e,n,r){let i=e.view.Wu(n);i.$i&&(i=await rz(t.localStore,e.query,!1).then((t=>{let{documents:n}=t;return e.view.Wu(n,i)})));const o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o);return TB(t,e.targetId,a.Xu),a.snapshot}(t,e,n,r);const o=await rz(t.localStore,e,!0),a=new cB(e,o.Hi),s=a.Wu(o.documents),l=NL.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),u=a.applyChanges(s,t.isPrimaryClient,l);TB(t,n,u.Xu);const c=new hB(e,n,a);return t.ic.set(e,c),t.rc.has(n)?t.rc.get(n).push(e):t.rc.set(n,[e]),u.snapshot}async function gB(t,e){const n=TO(t),r=n.ic.get(e),i=n.rc.get(r.targetId);if(i.length>1)return n.rc.set(r.targetId,i.filter((t=>!DN(t,e)))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await nz(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Sz(n.remoteStore,r.targetId),SB(n,r.targetId)})).catch(nR)):(SB(n,r.targetId),await nz(n.localStore,r.targetId,!0))}async function yB(t,e){const n=TO(t);try{const t=await function(t,e){const n=TO(t),r=e.snapshotVersion;let i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;const a=[];e.targetChanges.forEach(((o,s)=>{const l=i.get(s);if(!l)return;a.push(n.Cs.removeMatchingKeys(t,o.removedDocuments,s).next((()=>n.Cs.addMatchingKeys(t,o.addedDocuments,s))));let u=l.withSequenceNumber(t.currentSequenceNumber);e.targetMismatches.has(s)?u=u.withResumeToken(fR.EMPTY_BYTE_STRING,qO.min()).withLastLimboFreeSnapshotVersion(qO.min()):o.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(o.resumeToken,r)),i=i.insert(s,u),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,o)&&a.push(n.Cs.updateTargetData(t,u))}));let s=wL(),l=DL();if(e.documentUpdates.forEach((r=>{e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(JF(t,o,e.documentUpdates).next((t=>{s=t.Wi,l=t.zi}))),!r.isEqual(qO.min())){const e=n.Cs.getLastRemoteSnapshotVersion(t).next((e=>n.Cs.setTargetsMetadata(t,t.currentSequenceNumber,r)));a.push(e)}return rR.waitFor(a).next((()=>o.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,s,l))).next((()=>s))})).then((t=>(n.qi=i,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const r=n.cc.get(e);r&&(CO(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.nc=!0:t.modifiedDocuments.size>0?CO(r.nc):t.removedDocuments.size>0&&(CO(r.nc),r.nc=!1))})),await AB(n,t,e)}catch(t){await nR(t)}}function vB(t,e,n){const r=TO(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.ic.forEach(((n,r)=>{const i=r.view.bu(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=TO(t);n.onlineState=e;let r=!1;n.queries.forEach(((t,n)=>{for(const i of n.listeners)i.bu(e)&&(r=!0)})),r&&aB(n)}(r.eventManager,e),t.length&&r.sc.Wo(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _B(t,e,n){const r=TO(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.cc.get(e),o=i&&i.key;if(o){let t=new aN(HO.comparator);t=t.insert(o,fN.newNoDocument(o,qO.min()));const n=DL().add(o),i=new RL(qO.min(),new Map,new uN(jO),t,n);await yB(r,i),r.uc=r.uc.remove(o),r.cc.delete(e),kB(r)}else await nz(r.localStore,e,!1).then((()=>SB(r,e,n))).catch(nR)}async function bB(t,e){const n=TO(t),r=e.batch.batchId;try{const t=await function(t,e){const n=TO(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const r=e.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){const i=n.batch,o=i.keys();let a=rR.resolve();return o.forEach((t=>{a=a.next((()=>r.getEntry(e,t))).next((e=>{const o=n.docVersions.get(t);CO(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),r.addEntry(e)))}))})),a.next((()=>t.mutationQueue.removeMutationBatch(e,i)))}(n,t,e,i).next((()=>i.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=DL();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(n.localStore,e);EB(n,r,null),wB(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await AB(n,t)}catch(t){await nR(t)}}async function xB(t,e,n){const r=TO(t);try{const t=await function(t,e){const n=TO(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let r;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(CO(null!==e),r=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,r))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(r.localStore,e);EB(r,e,n),wB(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await AB(r,t)}catch(n){await nR(n)}}function wB(t,e){(t.lc.get(e)||[]).forEach((t=>{t.resolve()})),t.lc.delete(e)}function EB(t,e,n){const r=TO(t);let i=r.hc[r.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function SB(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.rc.get(e))t.ic.delete(r),n&&t.sc.wc(r,n);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach((e=>{t.ac.containsKey(e)||CB(t,e)}))}function CB(t,e){t.oc.delete(e.path.canonicalString());const n=t.uc.get(e);null!==n&&(Sz(t.remoteStore,n),t.uc=t.uc.remove(e),t.cc.delete(n),kB(t))}function TB(t,e,n){for(const r of n)r instanceof lB?(t.ac.addReference(r.key,e),IB(t,r)):r instanceof uB?(bO("SyncEngine","Document no longer in limbo: "+r.key),t.ac.removeReference(r.key,e),t.ac.containsKey(r.key)||CB(t,r.key)):SO()}function IB(t,e){const n=e.key,r=n.path.canonicalString();t.uc.get(n)||t.oc.has(r)||(bO("SyncEngine","New document in limbo: "+n),t.oc.add(r),kB(t))}function kB(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const n=new HO(YO.fromString(e)),r=t.fc.next();t.cc.set(r,new dB(n)),t.uc=t.uc.insert(n,r),Ez(t.remoteStore,new CF(kN(wN(n.path)),r,2,oR.at))}}async function AB(t,e,n){const r=TO(t),i=[],o=[],a=[];r.ic.isEmpty()||(r.ic.forEach(((t,s)=>{a.push(r._c(s,e,n).then((t=>{if((t||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){i.push(t);const e=WF.Ci(s.targetId,t);o.push(e)}})))})),await Promise.all(a),r.sc.Wo(i),await async function(t,e){const n=TO(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>rR.forEach(e,(e=>rR.forEach(e.Si,(r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>rR.forEach(e.Di,(r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!iR(t))throw t;bO("LocalStore","Failed to update sequence numbers: "+t)}for(const r of e){const t=r.targetId;if(!r.fromCache){const e=n.qi.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.qi=n.qi.insert(t,i)}}}(r.localStore,o))}async function PB(t,e){const n=TO(t);if(!n.currentUser.isEqual(e)){bO("SyncEngine","User change. New user:",e.toKey());const t=await KF(n.localStore,e);n.currentUser=e,function(t,e){t.lc.forEach((t=>{t.forEach((t=>{t.reject(new kO(IO.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.lc.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await AB(n,t.ji)}}function DB(t,e){const n=TO(t),r=n.cc.get(e);if(r&&r.nc)return DL().add(r.key);{let t=DL();const r=n.rc.get(e);if(!r)return t;for(const e of r){const r=n.ic.get(e);t=t.unionWith(r.view.ju)}return t}}function MB(t){const e=TO(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_B.bind(null,e),e.sc.Wo=iB.bind(null,e.eventManager),e.sc.wc=oB.bind(null,e.eventManager),e}function OB(t){const e=TO(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xB.bind(null,e),e}class RB{constructor(){this.synchronizeTabs=!1}async initialize(t){this.yt=pz(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),await this.persistence.start(),this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore)}Tc(t,e){return null}Ec(t,e){return null}Ic(t){return ZF(this.persistence,new HF,t.initialUser,this.yt)}yc(t){return new GF($F.Bs,this.yt)}gc(t){return new az}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class NB{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>vB(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=PB.bind(null,this.syncEngine),await $z(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new eB}createDatastore(t){const e=pz(t.databaseInfo.databaseId),n=(r=t.databaseInfo,new hz(r));var r;return function(t,e,n,r){return new vz(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=t=>vB(this.syncEngine,t,0),o=lz.C()?new lz:new sz,new bz(e,n,r,i,o);var e,n,r,i,o}createSyncEngine(t,e){return function(t,e,n,r,i,o,a){const s=new pB(t,e,n,r,i,o);return a&&(s.dc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=TO(t);bO("RemoteStore","RemoteStore shutting down."),e._u.add(5),await wz(e),e.mu.shutdown(),e.gu.set("Unknown")}(this.remoteStore)}}function LB(t,e,n){if(!n)throw new kO(IO.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FB(t){if(!HO.isDocumentKey(t))throw new kO(IO.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zB(t){if(HO.isDocumentKey(t))throw new kO(IO.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function BB(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":SO()}function jB(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new kO(IO.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=BB(t);throw new kO(IO.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}const UB=new Map;class VB{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new kO(IO.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new kO(IO.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(t,e,n,r){if(!0===e&&!0===r)throw new kO(IO.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class qB{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VB({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new kO(IO.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new kO(IO.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VB(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new DO;switch(t.type){case"gapi":const e=t.client;return new NO(e,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new kO(IO.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=UB.get(t);e&&(bO("ComponentProvider","Removing Datastore"),UB.delete(t),e.terminate())}(this),Promise.resolve()}}function GB(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(t=jB(t,qB))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&wO("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=gO.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[FS(JSON.stringify({alg:"none",type:"JWT"})),FS(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new kO(IO.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new gO(o)}t._authCredentials=new MO(new PO(e,n))}}class YB{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new WB(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new YB(this.firestore,t,this._key)}}class $B{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new $B(this.firestore,t,this._query)}}class WB extends $B{constructor(t,e,n){super(t,e,wN(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new YB(this.firestore,null,new HO(t))}withConverter(t){return new WB(this.firestore,t,this._path)}}function HB(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(t=rC(t),LB("collection","path",e),t instanceof qB){const n=YO.fromString(e,...r);return zB(n),new WB(t,null,n)}{if(!(t instanceof YB||t instanceof WB))throw new kO(IO.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(YO.fromString(e,...r));return zB(n),new WB(t.firestore,null,n)}}function XB(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(t=rC(t),1===arguments.length&&(e=BO.R()),LB("doc","path",e),t instanceof qB){const n=YO.fromString(e,...r);return FB(n),new YB(t,null,new HO(n))}{if(!(t instanceof YB||t instanceof WB))throw new kO(IO.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(YO.fromString(e,...r));return FB(n),new YB(t.firestore,t instanceof WB?t.converter:null,new HO(n))}}class ZB{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Rc(this.observer.next,t)}error(t){this.observer.error?this.Rc(this.observer.error,t):xO("Uncaught Error in snapshot listener:",t.toString())}bc(){this.muted=!0}Rc(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class KB{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=gO.UNAUTHENTICATED,this.clientId=BO.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{bO("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(bO("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new kO(IO.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new AO;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Zz(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function QB(t,e){t.asyncQueue.verifyOperationInProgress(),bO("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async t=>{r.isEqual(t)||(await KF(e.localStore,t),r=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t.offlineComponents=e}async function JB(t,e){t.asyncQueue.verifyOperationInProgress();const n=await tj(t);bO("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener((t=>Yz(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>Yz(e.remoteStore,n))),t.onlineComponents=e}async function tj(t){return t.offlineComponents||(bO("FirestoreClient","Using default OfflineComponentProvider"),await QB(t,new RB)),t.offlineComponents}async function ej(t){return t.onlineComponents||(bO("FirestoreClient","Using default OnlineComponentProvider"),await JB(t,new NB)),t.onlineComponents}function nj(t){return ej(t).then((t=>t.syncEngine))}async function rj(t){const e=await ej(t),n=e.eventManager;return n.onListen=fB.bind(null,e.syncEngine),n.onUnlisten=gB.bind(null,e.syncEngine),n}function ij(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new AO;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const o=new ZB({next:n=>{e.enqueueAndForget((()=>rB(t,a))),n.fromCache&&"server"===r.source?i.reject(new kO(IO.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),a=new sB(n,o,{includeMetadataChanges:!0,Nu:!0});return nB(t,a)}(await rj(t),t.asyncQueue,e,n,r))),r.promise}class oj{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new fz(this,"async_queue_retry"),this.Wc=()=>{const t=dz();t&&bO("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const t=dz();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.zc(),this.Hc(t)}enterRestrictedMode(t){if(!this.qc){this.qc=!0,this.Qc=t||!1;const e=dz();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Wc)}}enqueue(t){if(this.zc(),this.qc)return new Promise((()=>{}));const e=new AO;return this.Hc((()=>this.qc&&this.Qc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Lc.push(t),this.Jc())))}async Jc(){if(0!==this.Lc.length){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(fe){if(!iR(fe))throw fe;bO("AsyncQueue","Operation failed with retryable error: "+fe)}this.Lc.length>0&&this.xo.Ro((()=>this.Jc()))}}Hc(t){const e=this.Bc.then((()=>(this.Gc=!0,t().catch((t=>{this.Kc=t,this.Gc=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw xO("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.Gc=!1,t))))));return this.Bc=e,e}enqueueAfterDelay(t,e,n){this.zc(),this.jc.indexOf(t)>-1&&(e=0);const r=Xz.createAndSchedule(this,t,e,n,(t=>this.Yc(t)));return this.Uc.push(r),r}zc(){this.Kc&&SO()}verifyOperationInProgress(){}async Xc(){let t;do{t=this.Bc,await t}while(t!==this.Bc)}Zc(t){for(const e of this.Uc)if(e.timerId===t)return!0;return!1}ta(t){return this.Xc().then((()=>{this.Uc.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.Uc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Xc()}))}ea(t){this.jc.push(t)}Yc(t){const e=this.Uc.indexOf(t);this.Uc.splice(e,1)}}class aj extends qB{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new oj,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||uj(this),this._firestoreClient.terminate()}}function sj(t,e){const n="string"==typeof t?t:e||"(default)",r=qC("object"==typeof t?t:HC(),"firestore").getImmediate({identifier:n});if(!r._initialized){const t=VS("firestore");t&&GB(r,...t)}return r}function lj(t){return t._firestoreClient||uj(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function uj(t){var e;const n=t._freezeSettings(),r=function(t,e,n,r){return new aR(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new KB(t._authCredentials,t._appCheckCredentials,t._queue,r)}class cj{constructor(t){this._byteString=t}static fromBase64String(t){try{return new cj(fR.fromBase64String(t))}catch(t){throw new kO(IO.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new cj(fR.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class hj{constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let r=0;r<e.length;++r)if(0===e[r].length)throw new kO(IO.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new WO(e)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class dj{constructor(t){this._methodName=t}}class pj{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new kO(IO.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new kO(IO.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return jO(this._lat,t._lat)||jO(this._long,t._long)}}const fj=/^__.*__$/;class mj{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new uL(t,this.data,this.fieldMask,e,this.fieldTransforms):new lL(t,this.data,e,this.fieldTransforms)}}function gj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw SO()}}class yj{constructor(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.yt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.na(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(t){return new yj(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ia({path:n,oa:!1});return r.ua(t),r}ca(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ia({path:n,oa:!1});return r.na(),r}aa(t){return this.ia({path:void 0,oa:!0})}ha(t){return Aj(t,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}na(){if(this.path)for(let t=0;t<this.path.length;t++)this.ua(this.path.get(t))}ua(t){if(0===t.length)throw this.ha("Document fields must not be empty");if(gj(this.sa)&&fj.test(t))throw this.ha('Document fields cannot begin and end with "__"')}}class vj{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.yt=n||pz(t)}da(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new yj({sa:t,methodName:e,fa:n,path:WO.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function _j(t){const e=t._freezeSettings(),n=pz(t._databaseId);return new vj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bj(t,e,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=t.da(o.merge||o.mergeFields?2:0,e,n,i);Cj("Data must be an object, but it was:",a,r);const s=Ej(r,a);let l,u;if(o.merge)l=new hN(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){const t=[];for(const r of o.mergeFields){const i=Tj(e,r,n);if(!a.contains(i))throw new kO(IO.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Pj(t,i)||t.push(i)}l=new hN(t),u=a.fieldTransforms.filter((t=>l.covers(t.field)))}else l=null,u=a.fieldTransforms;return new mj(new dN(s),l,u)}function xj(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return wj(n,t.da(r?4:3,e))}function wj(t,e){if(Sj(t=rC(t)))return Cj("Unsupported field value:",e,t),Ej(t,e);if(t instanceof dj)return function(t,e){if(!gj(e.sa))throw e.ha(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.ha(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const i of t){let t=wj(i,e.aa(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=rC(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return jN(e.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=VO.fromDate(t);return{timestampValue:WL(e.yt,n)}}if(t instanceof VO){const n=new VO(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:WL(e.yt,n)}}if(t instanceof pj)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof cj)return{bytesValue:HL(e.yt,t._byteString)};if(t instanceof YB){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.ha(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:KL(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.ha(`Unsupported field value: ${BB(t)}`)}(t,e)}function Ej(t,e){const n={};return cR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uR(t,((t,r)=>{const i=wj(r,e.ra(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Sj(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof VO||t instanceof pj||t instanceof cj||t instanceof YB||t instanceof dj)}function Cj(t,e,n){if(!Sj(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=BB(n);throw"an object"===r?e.ha(t+" a custom object"):e.ha(t+" "+r)}}function Tj(t,e,n){if((e=rC(e))instanceof hj)return e._internalPath;if("string"==typeof e)return kj(t,e);throw Aj("Field path arguments must be of type string or ",t,!1,void 0,n)}const Ij=new RegExp("[~\\*/\\[\\]]");function kj(t,e,n){if(e.search(Ij)>=0)throw Aj(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hj(...e.split("."))._internalPath}catch(jU){throw Aj(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Aj(t,e,n,r,i){const o=r&&!r.isEmpty(),a=void 0!==i;let s=`Function ${e}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new kO(IO.INVALID_ARGUMENT,s+t+l)}function Pj(t,e){return t.some((t=>t.isEqual(e)))}class Dj{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new YB(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Mj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Oj("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Mj extends Dj{data(){return super.data()}}function Oj(t,e){return"string"==typeof e?kj(t,e):e instanceof hj?e._internalPath:e._delegate._internalPath}function Rj(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new kO(IO.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nj{}class Lj extends Nj{}function Fj(t,e){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];e instanceof Nj&&n.push(e),n=n.concat(i),function(t){const e=t.filter((t=>t instanceof jj)).length,n=t.filter((t=>t instanceof zj)).length;if(e>1||e>0&&n>0)throw new kO(IO.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class zj extends Lj{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new zj(t,e,n)}_apply(t){const e=this._parse(t);return qj(t._query,e),new $B(t.firestore,t.converter,AN(t._query,e))}_parse(t){const e=_j(t.firestore),n=function(t,e,n,r,i,o,a){let s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new kO(IO.INVALID_ARGUMENT,`Invalid Query. You can't perform '${o}' queries on documentId().`);if("in"===o||"not-in"===o){Vj(a,o);const e=[];for(const n of a)e.push(Uj(r,t,n));s={arrayValue:{values:e}}}else s=Uj(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Vj(a,o),s=xj(n,"where",a,"in"===o||"not-in"===o);return VR.create(i,o,s)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value);return n}}function Bj(t,e,n){const r=e,i=Oj("where",t);return zj._create(i,r,n)}class jj extends Nj{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new jj(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:qR.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const r=e.getFlattenedFilters();for(const i of r)qj(n,i),n=AN(n,i)}(t._query,e),new $B(t.firestore,t.converter,AN(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Uj(t,e,n){if("string"==typeof(n=rC(n))){if(""===n)throw new kO(IO.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TN(e)&&-1!==n.indexOf("/"))throw new kO(IO.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(YO.fromString(n));if(!HO.isDocumentKey(r))throw new kO(IO.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return PR(t,new HO(r))}if(n instanceof YB)return PR(t,n._key);throw new kO(IO.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${BB(n)}.`)}function Vj(t,e){if(!Array.isArray(t)||0===t.length)throw new kO(IO.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new kO(IO.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function qj(t,e){if(e.isInequality()){const n=CN(t),r=e.field;if(null!==n&&!n.isEqual(r))throw new kO(IO.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${r.toString()}'`);const i=SN(t);null!==i&&Gj(t,r,i)}const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new kO(IO.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new kO(IO.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Gj(t,e,n){if(!n.isEqual(e))throw new kO(IO.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Yj{convertValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ER(t)){case 0:return null;case 1:return t.booleanValue;case 2:return yR(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(vR(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw SO()}}convertObject(t,e){const n={};return uR(t.fields,((t,r)=>{n[t]=this.convertValue(r,e)})),n}convertGeoPoint(t){return new pj(yR(t.latitude),yR(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=bR(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(xR(t));default:return null}}convertTimestamp(t){const e=gR(t);return new VO(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=YO.fromString(t);CO(vF(n));const r=new sR(n.get(1),n.get(3)),i=new HO(n.popFirst(5));return r.isEqual(e)||xO(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}function $j(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Wj{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Hj extends Dj{constructor(t,e,n,r,i,o){super(t,e,n,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const e=new Xj(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Oj("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Xj extends Hj{data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(t)}}class Zj{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Wj(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Xj(this._firestore,this._userDataWriter,n.key,n,new Wj(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const t=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new kO(IO.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const r=new Xj(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Wj(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const r=new Xj(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Wj(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,o=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),o=n.indexOf(e.doc.key)),{type:Kj(e.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Kj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return SO()}}class Qj extends Yj{constructor(t){super(),this.firestore=t}convertBytes(t){return new cj(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new YB(this.firestore,null,e)}}function Jj(t){t=jB(t,$B);const e=jB(t.firestore,aj),n=lj(e),r=new Qj(e);return Rj(t._query),ij(n,t._query).then((n=>new Zj(e,r,t,n)))}function tU(t,e,n){t=jB(t,YB);const r=jB(t.firestore,aj),i=$j(t.converter,e,n);return nU(r,[bj(_j(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,tL.none())])}function eU(t,e){const n=jB(t.firestore,aj),r=XB(t),i=$j(t.converter,e);return nU(n,[bj(_j(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,tL.exists(!1))]).then((()=>r))}function nU(t,e){return function(t,e){const n=new AO;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const r=OB(t);try{const t=await function(t,e){const n=TO(t),r=VO.now(),i=e.reduce(((t,e)=>t.add(e.key)),DL());let o,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let s=wL(),l=DL();return n.Gi.getEntries(t,i).next((t=>{s=t,s.forEach(((t,e)=>{e.isValidDocument()||(l=l.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,s))).next((i=>{o=i;const a=[];for(const t of e){const e=aL(t,o.get(t.key).overlayedDocument);null!=e&&a.push(new uL(t.key,e,pN(e.value.mapValue),tL.exists(!0)))}return n.mutationQueue.addMutationBatch(t,r,a,e)})).next((e=>{a=e;const r=e.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(t,e.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:CL(o)})))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let r=t.hc[t.currentUser.toKey()];r||(r=new aN(jO)),r=r.insert(e,n),t.hc[t.currentUser.toKey()]=r}(r,t.batchId,n),await AB(r,t.changes),await Lz(r.remoteStore)}catch(t){const e=Zz(t,"Failed to persist write");n.reject(e)}}(await nj(t),e,n))),n.promise}(lj(t),e)}!function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(t){yO=t}($C),VC(new iC("firestore",((t,n)=>{let{instanceIdentifier:r,options:i}=n;const o=t.getProvider("app").getImmediate(),a=new aj(new OO(t.getProvider("auth-internal")),new FO(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new kO(IO.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sR(t.options.projectId,e)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),XC(mO,"3.8.3",t),XC(mO,"3.8.3","esm2017")}();const rU=WC({apiKey:"AIzaSyAIOK0qt0oFKznEBUNTq8AZXdLK7LxNFrg",authDomain:"authentification-app-f7718.firebaseapp.com",projectId:"authentification-app-f7718",storageBucket:"authentification-app-f7718.appspot.com",messagingSenderId:"17813858582",appId:"1:17813858582:web:fe6898ed444eef74644837",measurementId:"G-BG87YQ977F"}),iU=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:HC();const e=qC(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function(t,e){const n=qC(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(ZS(n.getOptions(),null!==e&&void 0!==e?e:{}))return t;mT(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:aA,persistence:[hk,WI,XI]}),r=GS("authTokenSyncURL");if(r){const t=dA(r);!function(t,e,n){rC(t).beforeAuthStateChanged(e,n)}(n,t,(()=>t(n.currentUser))),function(t,e,n,r){rC(t).onIdTokenChanged(e,n,r)}(n,(e=>t(e)))}const i=US("auth");return i&&yI(n,`http://${i}`),n}(rU),oU=sj(rU),aU=new MI,sU=async()=>{try{const t=await async function(t,e,n){const r=mI(t);vT(t,e,AI);const i=yk(r,n);return new Sk(r,"signInViaPopup",e,i).executeNotNull()}(iU,aU),e=t.user,n=Fj(HB(oU,"users"),Bj("uid","==",e.uid));0===(await Jj(n)).docs.length&&await eU(HB(oU,"users"),{uid:e.uid,name:e.displayName,authProvider:"google",email:e.email})}catch(t){let e;t instanceof Error&&(e=t.message),console.error(t),alert(e)}},lU=async(t,e)=>{try{const n=await async function(t,e,n){const r=mI(t),i=await NI(r,{returnSecureToken:!0,email:e,password:n}),o=await LI._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(o.user),o}(iU,t,e),r=n.user;await eU(HB(oU,"users"),{uid:r.uid,authProvider:"local",email:t}),localStorage.setItem("authenticated","true")}catch(n){let t;n instanceof Error&&(t=n.message),console.error(n),alert(t)}},uU=async(t,e)=>{try{await function(t,e,n){return qI(rC(t),kI.credential(e,n))}(iU,t,e),alert("You have logged in successfully "),localStorage.setItem("authenticated","true")}catch(n){let t;n instanceof Error&&(t=n.message),console.error(n),alert(t)}},cU=()=>{!function(t){rC(t).signOut()}(iU)};var hU=n(7248),dU=n(327);let pU=function(t){t()};const fU=()=>pU,mU=(0,t.createContext)(null);function gU(){return(0,t.useContext)(mU)}let yU=()=>{throw new Error("uSES not initialized!")};const vU=(t,e)=>t===e;function _U(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mU;const n=e===mU?gU:()=>(0,t.useContext)(e);return function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vU;const{store:i,subscription:o,getServerState:a}=n(),s=yU(o.addNestedSub,i.getState,a||i.getState,e,r);return(0,t.useDebugValue)(s),s}}const bU=_U();n(6900);const xU={notify(){},get:()=>[]};function wU(t,e){let n,r=xU;function i(){a.onStateChange&&a.onStateChange()}function o(){n||(n=e?e.addNestedSub(i):t.subscribe(i),r=function(){const t=fU();let e=null,n=null;return{clear(){e=null,n=null},notify(){t((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){let t=[],n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(t){let r=!0,i=n={callback:t,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}const a={addNestedSub:function(t){return o(),r.subscribe(t)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:o,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=xU)},getListeners:()=>r};return a}const EU=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;let SU=null;const CU=function(e){let{store:n,context:r,children:i,serverState:o}=e;const a=(0,t.useMemo)((()=>{const t=wU(n);return{store:n,subscription:t,getServerState:o?()=>o:void 0}}),[n,o]),s=(0,t.useMemo)((()=>n.getState()),[n]);EU((()=>{const{subscription:t}=a;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),s!==n.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}}),[a,s]);const l=r||mU;return t.createElement(l.Provider,{value:a},i)};function TU(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mU;const n=e===mU?gU:()=>(0,t.useContext)(e);return function(){const{store:t}=n();return t}}const IU=TU();function kU(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mU;const e=t===mU?IU:TU(t);return function(){return e().dispatch}}const AU=kU();var PU;function DU(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function MU(t){return!!t&&!!t[xV]}function OU(t){var e;return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===wV}(t)||Array.isArray(t)||!!t[bV]||!!(null===(e=t.constructor)||void 0===e?void 0:e[bV])||jU(t)||UU(t))}function RU(t,e,n){void 0===n&&(n=!1),0===NU(t)?(n?Object.keys:EV)(t).forEach((function(r){n&&"symbol"==typeof r||e(r,t[r],t)})):t.forEach((function(n,r){return e(r,n,t)}))}function NU(t){var e=t[xV];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:jU(t)?2:UU(t)?3:0}function LU(t,e){return 2===NU(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function FU(t,e){return 2===NU(t)?t.get(e):t[e]}function zU(t,e,n){var r=NU(t);2===r?t.set(e,n):3===r?t.add(n):t[e]=n}function BU(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function jU(t){return gV&&t instanceof Map}function UU(t){return yV&&t instanceof Set}function VU(t){return t.o||t.t}function qU(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=SV(t);delete e[xV];for(var n=EV(e),r=0;r<n.length;r++){var i=n[r],o=e[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function GU(t,e){return void 0===e&&(e=!1),$U(t)||MU(t)||!OU(t)||(NU(t)>1&&(t.set=t.add=t.clear=t.delete=YU),Object.freeze(t),e&&RU(t,(function(t,e){return GU(e,!0)}),!0)),t}function YU(){DU(2)}function $U(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function WU(t){var e=CV[t];return e||DU(18,t),e}function HU(t,e){CV[t]||(CV[t]=e)}function XU(){return fV}function ZU(t,e){e&&(WU("Patches"),t.u=[],t.s=[],t.v=e)}function KU(t){QU(t),t.p.forEach(tV),t.p=null}function QU(t){t===fV&&(fV=t.l)}function JU(t){return fV={p:[],l:fV,h:t,m:!0,_:0}}function tV(t){var e=t[xV];0===e.i||1===e.i?e.j():e.O=!0}function eV(t,e){e._=e.p.length;var n=e.p[0],r=void 0!==t&&t!==n;return e.h.g||WU("ES5").S(e,t,r),r?(n[xV].P&&(KU(e),DU(4)),OU(t)&&(t=nV(e,t),e.l||iV(e,t)),e.u&&WU("Patches").M(n[xV].t,t,e.u,e.s)):t=nV(e,n,[]),KU(e),e.u&&e.v(e.u,e.s),t!==_V?t:void 0}function nV(t,e,n){if($U(e))return e;var r=e[xV];if(!r)return RU(e,(function(i,o){return rV(t,r,e,i,o,n)}),!0),e;if(r.A!==t)return e;if(!r.P)return iV(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=qU(r.k):r.o,o=i,a=!1;3===r.i&&(o=new Set(i),i.clear(),a=!0),RU(o,(function(e,o){return rV(t,r,i,e,o,n,a)})),iV(t,i,!1),n&&t.u&&WU("Patches").N(r,n,t.u,t.s)}return r.o}function rV(t,e,n,r,i,o,a){if(MU(i)){var s=nV(t,i,o&&e&&3!==e.i&&!LU(e.R,r)?o.concat(r):void 0);if(zU(n,r,s),!MU(s))return;t.m=!1}else a&&n.add(i);if(OU(i)&&!$U(i)){if(!t.h.D&&t._<1)return;nV(t,i),e&&e.A.l||iV(t,i)}}function iV(t,e,n){void 0===n&&(n=!1),!t.l&&t.h.D&&t.m&&GU(e,n)}function oV(t,e){var n=t[xV];return(n?VU(n):t)[e]}function aV(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function sV(t){t.P||(t.P=!0,t.l&&sV(t.l))}function lV(t){t.o||(t.o=qU(t.t))}function uV(t,e,n){var r=jU(e)?WU("MapSet").F(e,n):UU(e)?WU("MapSet").T(e,n):t.g?function(t,e){var n=Array.isArray(t),r={i:n?1:0,A:e?e.A:XU(),P:!1,I:!1,R:{},l:e,t:t,k:null,o:null,j:null,C:!1},i=r,o=TV;n&&(i=[r],o=IV);var a=Proxy.revocable(i,o),s=a.revoke,l=a.proxy;return r.k=l,r.j=s,l}(e,n):WU("ES5").J(e,n);return(n?n.A:XU()).p.push(r),r}function cV(t){return MU(t)||DU(22,t),function t(e){if(!OU(e))return e;var n,r=e[xV],i=NU(e);if(r){if(!r.P&&(r.i<4||!WU("ES5").K(r)))return r.t;r.I=!0,n=hV(e,i),r.I=!1}else n=hV(e,i);return RU(n,(function(e,i){r&&FU(r.t,e)===i||zU(n,e,t(i))})),3===i?new Set(n):n}(t)}function hV(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return qU(t)}function dV(){function t(t,e){var n=i[t];return n?n.enumerable=e:i[t]=n={configurable:!0,enumerable:e,get:function(){var e=this[xV];return TV.get(e,t)},set:function(e){var n=this[xV];TV.set(n,t,e)}},n}function e(t){for(var e=t.length-1;e>=0;e--){var i=t[e][xV];if(!i.P)switch(i.i){case 5:r(i)&&sV(i);break;case 4:n(i)&&sV(i)}}}function n(t){for(var e=t.t,n=t.k,r=EV(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==xV){var a=e[o];if(void 0===a&&!LU(e,o))return!0;var s=n[o],l=s&&s[xV];if(l?l.t!==a:!BU(s,a))return!0}}var u=!!e[xV];return r.length!==EV(e).length+(u?0:1)}function r(t){var e=t.k;if(e.length!==t.t.length)return!0;var n=Object.getOwnPropertyDescriptor(e,e.length-1);if(n&&!n.get)return!0;for(var r=0;r<e.length;r++)if(!e.hasOwnProperty(r))return!0;return!1}var i={};HU("ES5",{J:function(e,n){var r=Array.isArray(e),i=function(e,n){if(e){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,t(i,!0));return r}var o=SV(n);delete o[xV];for(var a=EV(o),s=0;s<a.length;s++){var l=a[s];o[l]=t(l,e||!!o[l].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,e),o={i:r?5:4,A:n?n.A:XU(),P:!1,I:!1,R:{},l:n,t:e,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,xV,{value:o,writable:!0}),i},S:function(t,n,i){i?MU(n)&&n[xV].A===t&&e(t.p):(t.u&&function t(e){if(e&&"object"==typeof e){var n=e[xV];if(n){var i=n.t,o=n.k,a=n.R,s=n.i;if(4===s)RU(o,(function(e){e!==xV&&(void 0!==i[e]||LU(i,e)?a[e]||t(o[e]):(a[e]=!0,sV(n)))})),RU(i,(function(t){void 0!==o[t]||LU(o,t)||(a[t]=!1,sV(n))}));else if(5===s){if(r(n)&&(sV(n),a.length=!0),o.length<i.length)for(var l=o.length;l<i.length;l++)a[l]=!1;else for(var u=i.length;u<o.length;u++)a[u]=!0;for(var c=Math.min(o.length,i.length),h=0;h<c;h++)o.hasOwnProperty(h)||(a[h]=!0),void 0===a[h]&&t(o[h])}}}}(t.p[0]),e(t.p))},K:function(t){return 4===t.i?n(t):r(t)}})}(t=>{yU=t})(dU.useSyncExternalStoreWithSelector),(t=>{SU=t})(hU.useSyncExternalStore),PU=By.unstable_batchedUpdates,pU=PU;var pV,fV,mV="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),gV="undefined"!=typeof Map,yV="undefined"!=typeof Set,vV="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,_V=mV?Symbol.for("immer-nothing"):((pV={})["immer-nothing"]=!0,pV),bV=mV?Symbol.for("immer-draftable"):"__$immer_draftable",xV=mV?Symbol.for("immer-state"):"__$immer_state",wV=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),EV="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,SV=Object.getOwnPropertyDescriptors||function(t){var e={};return EV(t).forEach((function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)})),e},CV={},TV={get:function(t,e){if(e===xV)return t;var n=VU(t);if(!LU(n,e))return function(t,e,n){var r,i=aV(e,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(t.k):void 0}(t,n,e);var r=n[e];return t.I||!OU(r)?r:r===oV(t.t,e)?(lV(t),t.o[e]=uV(t.A.h,r,t)):r},has:function(t,e){return e in VU(t)},ownKeys:function(t){return Reflect.ownKeys(VU(t))},set:function(t,e,n){var r=aV(VU(t),e);if(null==r?void 0:r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=oV(VU(t),e),o=null==i?void 0:i[xV];if(o&&o.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(BU(n,i)&&(void 0!==n||LU(t.t,e)))return!0;lV(t),sV(t)}return t.o[e]===n&&(void 0!==n||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return void 0!==oV(t.t,e)||e in t.t?(t.R[e]=!1,lV(t),sV(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=VU(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:r.enumerable,value:n[e]}:r},defineProperty:function(){DU(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){DU(12)}},IV={};RU(TV,(function(t,e){IV[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),IV.deleteProperty=function(t,e){return IV.set.call(this,t,e,void 0)},IV.set=function(t,e,n){return TV.set.call(this,t[0],e,n,t[0])};var kV=function(){function t(t){var e=this;this.g=vV,this.D=!0,this.produce=function(t,n,r){if("function"==typeof t&&"function"!=typeof n){var i=n;n=t;var o=e;return function(t){var e=this;void 0===t&&(t=i);for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return o.produce(t,(function(t){var r;return(r=n).call.apply(r,[e,t].concat(a))}))}}var a;if("function"!=typeof n&&DU(6),void 0!==r&&"function"!=typeof r&&DU(7),OU(t)){var s=JU(e),l=uV(e,t,void 0),u=!0;try{a=n(l),u=!1}finally{u?KU(s):QU(s)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(t){return ZU(s,r),eV(t,s)}),(function(t){throw KU(s),t})):(ZU(s,r),eV(a,s))}if(!t||"object"!=typeof t){if(void 0===(a=n(t))&&(a=t),a===_V&&(a=void 0),e.D&&GU(a,!0),r){var c=[],h=[];WU("Patches").M(t,a,c,h),r(c,h)}return a}DU(21,t)},this.produceWithPatches=function(t,n){if("function"==typeof t)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return e.produceWithPatches(n,(function(e){return t.apply(void 0,[e].concat(i))}))};var r,i,o=e.produce(t,n,(function(t,e){r=t,i=e}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(t){return[t,r,i]})):[o,r,i]},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var e=t.prototype;return e.createDraft=function(t){OU(t)||DU(8),MU(t)&&(t=cV(t));var e=JU(this),n=uV(this,t,void 0);return n[xV].C=!0,QU(e),n},e.finishDraft=function(t,e){var n=(t&&t[xV]).A;return ZU(n,e),eV(void 0,n)},e.setAutoFreeze=function(t){this.D=t},e.setUseProxies=function(t){t&&!vV&&DU(20),this.g=t},e.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var r=e[n];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}n>-1&&(e=e.slice(n+1));var i=WU("Patches").$;return MU(t)?i(t,e):this.produce(t,(function(t){return i(t,e)}))},t}(),AV=new kV,PV=AV.produce;AV.produceWithPatches.bind(AV),AV.setAutoFreeze.bind(AV),AV.setUseProxies.bind(AV),AV.applyPatches.bind(AV),AV.createDraft.bind(AV),AV.finishDraft.bind(AV);const DV=PV;var MV="NOT_FOUND";var OV=function(t,e){return t===e};function RV(t,e){var n="object"===typeof e?e:{equalityCheck:e},r=n.equalityCheck,i=void 0===r?OV:r,o=n.maxSize,a=void 0===o?1:o,s=n.resultEqualityCheck,l=function(t){return function(e,n){if(null===e||null===n||e.length!==n.length)return!1;for(var r=e.length,i=0;i<r;i++)if(!t(e[i],n[i]))return!1;return!0}}(i),u=1===a?function(t){var e;return{get:function(n){return e&&t(e.key,n)?e.value:MV},put:function(t,n){e={key:t,value:n}},getEntries:function(){return e?[e]:[]},clear:function(){e=void 0}}}(l):function(t,e){var n=[];function r(t){var r=n.findIndex((function(n){return e(t,n.key)}));if(r>-1){var i=n[r];return r>0&&(n.splice(r,1),n.unshift(i)),i.value}return MV}return{get:r,put:function(e,i){r(e)===MV&&(n.unshift({key:e,value:i}),n.length>t&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(a,l);function c(){var e=u.get(arguments);if(e===MV){if(e=t.apply(null,arguments),s){var n=u.getEntries().find((function(t){return s(t.value,e)}));n&&(e=n.value)}u.put(arguments,e)}return e}return c.clearCache=function(){return u.clear()},c}function NV(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o,a=0,s={memoizeOptions:void 0},l=r.pop();if("object"===typeof l&&(s=l,l=r.pop()),"function"!==typeof l)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");var u=s.memoizeOptions,c=void 0===u?n:u,h=Array.isArray(c)?c:[c],d=function(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every((function(t){return"function"===typeof t}))){var n=e.map((function(t){return"function"===typeof t?"function "+(t.name||"unnamed")+"()":typeof t})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return e}(r),p=t.apply(void 0,[function(){return a++,l.apply(null,arguments)}].concat(h)),f=t((function(){for(var t=[],e=d.length,n=0;n<e;n++)t.push(d[n].apply(null,arguments));return o=p.apply(null,t)}));return Object.assign(f,{resultFunc:l,memoizedResultFunc:p,dependencies:d,lastResult:function(){return o},recomputations:function(){return a},resetRecomputations:function(){return a=0}}),f}}var LV=NV(RV);function FV(t){return FV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FV(t)}function zV(t){var e=function(t,e){if("object"!==FV(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==FV(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===FV(e)?e:String(e)}function BV(t,e,n){return(e=zV(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function UV(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?jV(Object(n),!0).forEach((function(e){BV(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jV(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function VV(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var qV="function"===typeof Symbol&&Symbol.observable||"@@observable",GV=function(){return Math.random().toString(36).substring(7).split("").join(".")},YV={INIT:"@@redux/INIT"+GV(),REPLACE:"@@redux/REPLACE"+GV(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+GV()}};function $V(t){if("object"!==typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function WV(t,e,n){var r;if("function"===typeof e&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(VV(0));if("function"===typeof e&&"undefined"===typeof n&&(n=e,e=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(VV(1));return n(WV)(t,e)}if("function"!==typeof t)throw new Error(VV(2));var i=t,o=e,a=[],s=a,l=!1;function u(){s===a&&(s=a.slice())}function c(){if(l)throw new Error(VV(3));return o}function h(t){if("function"!==typeof t)throw new Error(VV(4));if(l)throw new Error(VV(5));var e=!0;return u(),s.push(t),function(){if(e){if(l)throw new Error(VV(6));e=!1,u();var n=s.indexOf(t);s.splice(n,1),a=null}}}function d(t){if(!$V(t))throw new Error(VV(7));if("undefined"===typeof t.type)throw new Error(VV(8));if(l)throw new Error(VV(9));try{l=!0,o=i(o,t)}finally{l=!1}for(var e=a=s,n=0;n<e.length;n++){(0,e[n])()}return t}return d({type:YV.INIT}),(r={dispatch:d,subscribe:h,getState:c,replaceReducer:function(t){if("function"!==typeof t)throw new Error(VV(10));i=t,d({type:YV.REPLACE})}})[qV]=function(){var t,e=h;return(t={subscribe:function(t){if("object"!==typeof t||null===t)throw new Error(VV(11));function n(){t.next&&t.next(c())}return n(),{unsubscribe:e(n)}}})[qV]=function(){return this},t},r}function HV(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];0,"function"===typeof t[i]&&(n[i]=t[i])}var o,a=Object.keys(n);try{!function(t){Object.keys(t).forEach((function(e){var n=t[e];if("undefined"===typeof n(void 0,{type:YV.INIT}))throw new Error(VV(12));if("undefined"===typeof n(void 0,{type:YV.PROBE_UNKNOWN_ACTION()}))throw new Error(VV(13))}))}(n)}catch(s){o=s}return function(t,e){if(void 0===t&&(t={}),o)throw o;for(var r=!1,i={},s=0;s<a.length;s++){var l=a[s],u=n[l],c=t[l],h=u(c,e);if("undefined"===typeof h){e&&e.type;throw new Error(VV(14))}i[l]=h,r=r||h!==c}return(r=r||a.length!==Object.keys(t).length)?i:t}}function XV(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function ZV(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),r=function(){throw new Error(VV(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=e.map((function(t){return t(i)}));return r=XV.apply(void 0,o)(n.dispatch),UV(UV({},n),{},{dispatch:r})}}}function KV(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(i){return"function"===typeof i?i(n,r,t):e(i)}}}}var QV=KV();QV.withExtraArgument=KV;const JV=QV;var tq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),eq=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},nq=function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},rq=Object.defineProperty,iq=Object.defineProperties,oq=Object.getOwnPropertyDescriptors,aq=Object.getOwnPropertySymbols,sq=Object.prototype.hasOwnProperty,lq=Object.prototype.propertyIsEnumerable,uq=function(t,e,n){return e in t?rq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},cq=function(t,e){for(var n in e||(e={}))sq.call(e,n)&&uq(t,n,e[n]);if(aq)for(var r=0,i=aq(e);r<i.length;r++){n=i[r];lq.call(e,n)&&uq(t,n,e[n])}return t},hq=function(t,e){return iq(t,oq(e))},dq=function(t,e,n){return new Promise((function(r,i){var o=function(t){try{s(n.next(t))}catch(e){i(e)}},a=function(t){try{s(n.throw(t))}catch(e){i(e)}},s=function(t){return t.done?r(t.value):Promise.resolve(t.value).then(o,a)};s((n=n.apply(t,e)).next())}))},pq=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=LV.apply(void 0,t);return function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return n.apply(void 0,nq([MU(t)?cV(t):t],e))}},fq="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?XV:XV.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function mq(t){if("object"!==typeof t||null===t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return e===n}var gq=function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return tq(e,t),Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.prototype.concat.apply(this,e)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?new(e.bind.apply(e,nq([void 0],t[0].concat(this)))):new(e.bind.apply(e,nq([void 0],t.concat(this))))},e}(Array);function yq(t){return OU(t)?DV(t,(function(){})):t}function vq(){return function(t){return function(t){void 0===t&&(t={});var e=t.thunk,n=void 0===e||e,r=(t.immutableCheck,t.serializableCheck,new gq);n&&(!function(t){return"boolean"===typeof t}(n)?r.push(JV.withExtraArgument(n.extraArgument)):r.push(JV));0;return r}(t)}}var _q=!0;function bq(t,e){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(e){var i=e.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return cq(cq({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:n[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(e){return e.type===t},n}function xq(t){return["type","payload","error","meta"].indexOf(t)>-1}function wq(t){var e,n={},r=[],i={addCase:function(t,e){var r="string"===typeof t?t:t.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=e,i},addMatcher:function(t,e){return r.push({matcher:t,reducer:e}),i},addDefaultCase:function(t){return e=t,i}};return t(i),[n,r,e]}function Eq(t){var e=Sq((function(e,n){return t(n)}));return function(t){return e(t,void 0)}}function Sq(t){return function(e,n){function r(t){return mq(e=t)&&"string"===typeof e.type&&Object.keys(e).every(xq);var e}var i=function(e){r(n)?t(n.payload,e):t(n,e)};return MU(e)?(i(e),e):DV(e,i)}}function Cq(t,e){return e(t)}function Tq(t){return Array.isArray(t)||(t=Object.values(t)),t}function Iq(t,e,n){for(var r=[],i=[],o=0,a=t=Tq(t);o<a.length;o++){var s=a[o],l=Cq(s,e);l in n.entities?i.push({id:l,changes:s}):r.push(s)}return[r,i]}function kq(t){function e(e,n){var r=Cq(e,t);r in n.entities||(n.ids.push(r),n.entities[r]=e)}function n(t,n){for(var r=0,i=t=Tq(t);r<i.length;r++){e(i[r],n)}}function r(e,n){var r=Cq(e,t);r in n.entities||n.ids.push(r),n.entities[r]=e}function i(t,e){var n=!1;t.forEach((function(t){t in e.entities&&(delete e.entities[t],n=!0)})),n&&(e.ids=e.ids.filter((function(t){return t in e.entities})))}function o(e,n){var r={},i={};if(e.forEach((function(t){t.id in n.entities&&(i[t.id]={id:t.id,changes:cq(cq({},i[t.id]?i[t.id].changes:null),t.changes)})})),(e=Object.values(i)).length>0){var o=e.filter((function(e){return function(e,n,r){var i=r.entities[n.id],o=Object.assign({},i,n.changes),a=Cq(o,t),s=a!==n.id;return s&&(e[n.id]=a,delete r.entities[n.id]),r.entities[a]=o,s}(r,e,n)})).length>0;o&&(n.ids=Object.keys(n.entities))}}function a(e,r){var i=Iq(e,t,r),a=i[0];o(i[1],r),n(a,r)}return{removeAll:Eq((function(t){Object.assign(t,{ids:[],entities:{}})})),addOne:Sq(e),addMany:Sq(n),setOne:Sq(r),setMany:Sq((function(t,e){for(var n=0,i=t=Tq(t);n<i.length;n++){r(i[n],e)}})),setAll:Sq((function(t,e){t=Tq(t),e.ids=[],e.entities={},n(t,e)})),updateOne:Sq((function(t,e){return o([t],e)})),updateMany:Sq(o),upsertOne:Sq((function(t,e){return a([t],e)})),upsertMany:Sq(a),removeOne:Sq((function(t,e){return i([t],e)})),removeMany:Sq(i)}}var Aq=function(t){void 0===t&&(t=21);for(var e="",n=t;n--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e},Pq=["name","message","stack","code"],Dq=function(t,e){this.payload=t,this.meta=e},Mq=function(t,e){this.payload=t,this.meta=e},Oq=function(t){if("object"===typeof t&&null!==t){for(var e={},n=0,r=Pq;n<r.length;n++){var i=r[n];"string"===typeof t[i]&&(e[i]=t[i])}return e}return{message:String(t)}},Rq=function(){function t(t,e,n){var r=bq(t+"/fulfilled",(function(t,e,n,r){return{payload:t,meta:hq(cq({},r||{}),{arg:n,requestId:e,requestStatus:"fulfilled"})}})),i=bq(t+"/pending",(function(t,e,n){return{payload:void 0,meta:hq(cq({},n||{}),{arg:e,requestId:t,requestStatus:"pending"})}})),o=bq(t+"/rejected",(function(t,e,r,i,o){return{payload:i,error:(n&&n.serializeError||Oq)(t||"Rejected"),meta:hq(cq({},o||{}),{arg:r,requestId:e,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==t?void 0:t.name),condition:"ConditionError"===(null==t?void 0:t.name)})}})),a="undefined"!==typeof AbortController?AbortController:function(){function t(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return t.prototype.abort=function(){0},t}();return Object.assign((function(t){return function(s,l,u){var c,h=(null==n?void 0:n.idGenerator)?n.idGenerator(t):Aq(),d=new a;function p(t){c=t,d.abort()}var f=function(){return dq(this,null,(function(){var a,f,m,g,y,v;return eq(this,(function(_){switch(_.label){case 0:return _.trys.push([0,4,,5]),g=null==(a=null==n?void 0:n.condition)?void 0:a.call(n,t,{getState:l,extra:u}),null===(b=g)||"object"!==typeof b||"function"!==typeof b.then?[3,2]:[4,g];case 1:g=_.sent(),_.label=2;case 2:if(!1===g||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,y=new Promise((function(t,e){return d.signal.addEventListener("abort",(function(){return e({name:"AbortError",message:c||"Aborted"})}))})),s(i(h,t,null==(f=null==n?void 0:n.getPendingMeta)?void 0:f.call(n,{requestId:h,arg:t},{getState:l,extra:u}))),[4,Promise.race([y,Promise.resolve(e(t,{dispatch:s,getState:l,extra:u,requestId:h,signal:d.signal,abort:p,rejectWithValue:function(t,e){return new Dq(t,e)},fulfillWithValue:function(t,e){return new Mq(t,e)}})).then((function(e){if(e instanceof Dq)throw e;return e instanceof Mq?r(e.payload,h,t,e.meta):r(e,h,t)}))])];case 3:return m=_.sent(),[3,5];case 4:return v=_.sent(),m=v instanceof Dq?o(null,h,t,v.payload,v.meta):o(v,h,t),[3,5];case 5:return n&&!n.dispatchConditionRejection&&o.match(m)&&m.meta.condition||s(m),[2,m]}var b}))}))}();return Object.assign(f,{abort:p,requestId:h,arg:t,unwrap:function(){return f.then(Nq)}})}}),{pending:i,rejected:o,fulfilled:r,typePrefix:t})}return t.withTypes=function(){return t},t}();function Nq(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}Object.assign;var Lq="listenerMiddleware";bq(Lq+"/add"),bq(Lq+"/removeAll"),bq(Lq+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis);var Fq,zq=function(t){return function(e){setTimeout(e,t)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:zq(10);dV();const Bq=sj(WC({apiKey:"AIzaSyAIOK0qt0oFKznEBUNTq8AZXdLK7LxNFrg",authDomain:"authentification-app-f7718.firebaseapp.com",projectId:"authentification-app-f7718",storageBucket:"authentification-app-f7718.appspot.com",messagingSenderId:"17813858582",appId:"1:17813858582:web:fe6898ed444eef74644837",measurementId:"G-BG87YQ977F"})),jq=async t=>{await function(t){return nU(jB(t.firestore,aj),[new pL(t._key,tL.none())])}(XB(Bq,"trips",t))},Uq=Rq("trips/fetchTrips",(async t=>{try{const e=await(async t=>{const e=Fj(HB(Bq,"trips"),Bj("userId","==",t)),n=await Jj(e);let r=[];return n.forEach((t=>{r.push({id:t.id,title:t.data().title,numOfPlaces:t.data().numOfPlaces,lastEdited:t.data().lastEdited,places:t.data().places,userId:t.data().userId,route:t.data().route})})),r})(t);return e}catch(e){console.log(e)}})),Vq=Rq("trips/updateTrip",(async t=>{try{return await(async t=>{await tU(XB(Bq,"trips",t.id),{...t},{merge:!0})})(t),t}catch(e){console.log(e)}})),qq=Rq("trips/addTrip",(async t=>{try{return await(async t=>{await tU(XB(Bq,"trips",t.id),{title:t.title,lastEdited:t.lastEdited,numOfPlaces:t.numOfPlaces,places:t.places,userId:t.userId,route:t.route})})(t),t}catch(e){console.log(e)}})),Gq=Rq("trips/deleteTrip",(async t=>(await jq(t),t))),Yq=function(t){void 0===t&&(t={});var e=cq({sortComparer:!1,selectId:function(t){return t.id}},t),n=e.selectId,r=e.sortComparer,i={getInitialState:function(t){return void 0===t&&(t={}),Object.assign({ids:[],entities:{}},t)}},o={getSelectors:function(t){var e=function(t){return t.ids},n=function(t){return t.entities},r=pq(e,n,(function(t,e){return t.map((function(t){return e[t]}))})),i=function(t,e){return e},o=function(t,e){return t[e]},a=pq(e,(function(t){return t.length}));if(!t)return{selectIds:e,selectEntities:n,selectAll:r,selectTotal:a,selectById:pq(n,i,o)};var s=pq(t,n);return{selectIds:pq(t,e),selectEntities:s,selectAll:pq(t,r),selectTotal:pq(t,a),selectById:pq(s,i,o)}}},a=r?function(t,e){var n=kq(t);function r(e,n){var r=(e=Tq(e)).filter((function(e){return!(Cq(e,t)in n.entities)}));0!==r.length&&s(r,n)}function i(t,e){0!==(t=Tq(t)).length&&s(t,e)}function o(e,n){for(var r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=n.entities[a.id];if(s){r=!0,Object.assign(s,a.changes);var u=t(s);a.id!==u&&(delete n.entities[a.id],n.entities[u]=s)}}r&&l(n)}function a(e,n){var i=Iq(e,t,n),a=i[0];o(i[1],n),r(a,n)}function s(e,n){e.forEach((function(e){n.entities[t(e)]=e})),l(n)}function l(n){var r=Object.values(n.entities);r.sort(e);var i=r.map(t);(function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(t[n]!==e[n])return!1;return!0})(n.ids,i)||(n.ids=i)}return{removeOne:n.removeOne,removeMany:n.removeMany,removeAll:n.removeAll,addOne:Sq((function(t,e){return r([t],e)})),updateOne:Sq((function(t,e){return o([t],e)})),upsertOne:Sq((function(t,e){return a([t],e)})),setOne:Sq((function(t,e){return i([t],e)})),setMany:Sq(i),setAll:Sq((function(t,e){t=Tq(t),e.entities={},e.ids=[],r(t,e)})),addMany:Sq(r),updateMany:Sq(o),upsertMany:Sq(a)}}(n,r):kq(n);return cq(cq(cq({selectId:n,sortComparer:r},i),o),a)}({sortComparer:(t,e)=>e.lastEdited.localeCompare(t.lastEdited)}),$q=Yq.getInitialState({status:"idle",error:null}),Wq=function(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof t.initialState?t.initialState:yq(t.initialState),i=t.reducers||{},o=Object.keys(i),a={},s={},l={};function u(){var e="function"===typeof t.extraReducers?wq(t.extraReducers):[t.extraReducers],n=e[0],i=void 0===n?{}:n,o=e[1],a=void 0===o?[]:o,l=e[2],u=void 0===l?void 0:l,c=cq(cq({},i),s);return function(t,e,n,r){void 0===n&&(n=[]);var i,o="function"===typeof e?wq(e):[e,n,r],a=o[0],s=o[1],l=o[2];if(function(t){return"function"===typeof t}(t))i=function(){return yq(t())};else{var u=yq(t);i=function(){return u}}function c(t,e){void 0===t&&(t=i());var n=nq([a[e.type]],s.filter((function(t){return(0,t.matcher)(e)})).map((function(t){return t.reducer})));return 0===n.filter((function(t){return!!t})).length&&(n=[l]),n.reduce((function(t,n){if(n){var r;if(MU(t))return void 0===(r=n(t,e))?t:r;if(OU(t))return DV(t,(function(t){return n(t,e)}));if(void 0===(r=n(t,e))){if(null===t)return t;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return t}),t)}return c.getInitialState=i,c}(r,(function(t){for(var e in c)t.addCase(e,c[e]);for(var n=0,r=a;n<r.length;n++){var i=r[n];t.addMatcher(i.matcher,i.reducer)}u&&t.addDefaultCase(u)}))}return o.forEach((function(t){var n,r,o=i[t],u=function(t,e){return t+"/"+e}(e,t);"reducer"in o?(n=o.reducer,r=o.prepare):n=o,a[t]=n,s[u]=n,l[t]=r?bq(u,r):bq(u)})),{name:e,reducer:function(t,e){return n||(n=u()),n(t,e)},actions:l,caseReducers:a,getInitialState:function(){return n||(n=u()),n.getInitialState()}}}({name:"trips",initialState:$q,reducers:{reset:()=>$q},extraReducers(t){t.addCase(Uq.pending,((t,e)=>{t.status="loading"})).addCase(Uq.fulfilled,((t,e)=>{t.status="succeeded",Yq.removeAll(t),Yq.upsertMany(t,e.payload)})).addCase(Uq.rejected,((t,e)=>{t.status="failed",t.error=e.error.message})).addCase(qq.fulfilled,((t,e)=>{Yq.addOne(t,e.payload)})).addCase(qq.rejected,(()=>{console.log("error")})).addCase(Vq.fulfilled,((t,e)=>{const n=e.payload;t.entities[n.id]&&(t.entities[n.id]=n)})).addCase(Vq.rejected,(()=>{console.log("error")})).addCase(Gq.fulfilled,((t,e)=>{const n=e.payload;t.entities[n]&&Yq.removeOne(t,n)}))}}),{reset:Hq}=Wq.actions,Xq=Wq.reducer,{selectAll:Zq,selectById:Kq,selectIds:Qq}=Yq.getSelectors((t=>t.trips)),Jq=()=>{const t=Kv(),e=AU();return(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("h1",{children:"Happy to have you here, Create an account"}),(0,Rt.jsx)(wS,{initialValues:{email:"",password:""},onSubmit:async(n,r)=>{let{setSubmitting:i}=r;i(!0),await lU(n.email,n.password),i(!1),e(Hq()),t("/welcome")},children:(0,Rt.jsxs)(kS,{children:[(0,Rt.jsx)("label",{htmlFor:"email",children:"Email"}),(0,Rt.jsx)(IS,{id:"email",name:"email",placeholder:"john@acme.com",type:"email"}),(0,Rt.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Rt.jsx)(IS,{id:"password",name:"password",type:"password"}),(0,Rt.jsx)("button",{type:"submit",children:"Submit"})]})})]})},tG=()=>{const t=Kv(),e=AU();return(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("h1",{children:"Nice to see you again! Sign In"}),(0,Rt.jsx)("button",{onClick:async()=>{await sU(),e(Hq()),t("/main")},children:" Sign in with Google "}),(0,Rt.jsx)(wS,{initialValues:{email:"",password:""},onSubmit:async(n,r)=>{let{setSubmitting:i}=r;i(!0),await uU(n.email,n.password),i(!1),e(Hq()),t("/main")},children:(0,Rt.jsxs)(kS,{children:[(0,Rt.jsx)("label",{htmlFor:"email",children:"Email"}),(0,Rt.jsx)(IS,{id:"email",name:"email",placeholder:"john@acme.com",type:"email"}),(0,Rt.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Rt.jsx)(IS,{id:"password",name:"password",type:"password"}),(0,Rt.jsx)("button",{type:"submit",children:"Submit"})]})})]})},eG=()=>(0,Rt.jsx)("div",{children:(0,Rt.jsx)("p",{children:"Welcome to your Dashboard"})});var nG=n(596),rG=n.n(nG);const iG="12a08cf173ff47d3b9fe03f947629deb",oG=async t=>{let e=t.map((t=>t.join(","))).join("|");return(await fetch(`https://api.geoapify.com/v1/routing?waypoints=${e}&mode=drive&apiKey=12a08cf173ff47d3b9fe03f947629deb`,{method:"GET"})).json()};function aG(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function sG(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!hG(t[0])||!hG(t[1]))throw new Error("coordinates must contain numbers");return aG({type:"Point",coordinates:t},e,n)}function lG(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return aG({type:"Polygon",coordinates:t},e,n)}function uG(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return aG({type:"LineString",coordinates:t},e,n)}function cG(t,e,n){return void 0===n&&(n={}),aG({type:"MultiPoint",coordinates:t},e,n)}function hG(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function dG(t,e,n){if(null!==t)for(var r,i,o,a,s,l,u,c,h=0,d=0,p=t.type,f="FeatureCollection"===p,m="Feature"===p,g=f?t.features.length:1,y=0;y<g;y++){s=(c=!!(u=f?t.features[y].geometry:m?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<s;v++){var _=0,b=0;if(null!==(a=c?u.geometries[v]:u)){l=a.coordinates;var x=a.type;switch(h=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,d,y,_,b))return!1;d++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],d,y,_,b))return!1;d++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],d,y,_,b))return!1;d++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(b=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],d,y,_,b))return!1;d++}b++}_++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===dG(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function pG(t,e){var n,r,i,o,a,s,l,u,c,h,d=0,p="FeatureCollection"===t.type,f="Feature"===t.type,m=p?t.features.length:1;for(n=0;n<m;n++){for(s=p?t.features[n].geometry:f?t.geometry:t,u=p?t.features[n].properties:f?t.properties:{},c=p?t.features[n].bbox:f?t.bbox:void 0,h=p?t.features[n].id:f?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=l?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,d,u,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],d,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,d,u,c,h))return!1;d++}}function fG(t,e){pG(t,(function(t,n,r,i,o){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(aG(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var u=t.coordinates[l];if(!1===e(aG({type:a,coordinates:u},r),n,l))return!1}}))}function mG(t){var e=[1/0,1/0,-1/0,-1/0];return dG(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}mG.default=mG;const gG=mG;n(1725);n(4161);function yG(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r,i=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),o="Feature"===(r=e).type?r.geometry:r,a=o.type,s=e.bbox,l=o.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,s))return!1;"Polygon"===a&&(l=[l]);for(var u=!1,c=0;c<l.length&&!u;c++)if(vG(i,l[c][0],n.ignoreBoundary)){for(var h=!1,d=1;d<l[c].length&&!h;)vG(i,l[c][d],!n.ignoreBoundary)&&(h=!0),d++;h||(u=!0)}return u}function vG(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],l=e[o][0],u=e[o][1];if(t[1]*(a-l)+s*(l-t[0])+u*(t[0]-a)===0&&(a-t[0])*(l-t[0])<=0&&(s-t[1])*(u-t[1])<=0)return!n;s>t[1]!==u>t[1]&&t[0]<(l-a)*(t[1]-s)/(u-s)+a&&(r=!r)}return r}Object.prototype.hasOwnProperty;var _G=new ArrayBuffer(16);new Float64Array(_G),new Uint32Array(_G);n(1977);!function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t,n=e*t;return[n,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t),a={x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]};return a}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])}}();const bG=function(t){return function(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[n,r];return lG([[a,[i,r],[i,o],[n,o],a]],e.properties,{bbox:t,id:e.id})}(gG(t))};const xG=function(t,e){void 0===e&&(e={});var n=gG(t);return sG([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)};n(7089);n(9234);var wG=Math.PI/180,EG=180/Math.PI,SG=function(t,e){this.lon=t,this.lat=e,this.x=wG*t,this.y=wG*e};SG.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},SG.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new SG(e,t)};var CG=function(){this.coords=[],this.length=0};CG.prototype.move_to=function(t){this.length++,this.coords.push(t)};var TG=function(t){this.properties=t||{},this.geometries=[]};TG.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},TG.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var IG=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new SG(t.x,t.y),this.end=new SG(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};IG.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=EG*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[EG*Math.atan2(i,r),a]},IG.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,a=this.interpolate(o);n.push(a)}for(var s=!1,l=0,u=e&&e.offset?e.offset:10,c=180-u,h=-180+u,d=360-u,p=1;p<n.length;++p){var f=n[p-1][0],m=n[p][0],g=Math.abs(m-f);g>d&&(m>c&&f<h||f>c&&m<h)?s=!0:g>l&&(l=g)}var y=[];if(s&&l<u){var v=[];y.push(v);for(var _=0;_<n.length;++_){var b=parseFloat(n[_][0]);if(_>0&&Math.abs(b-n[_-1][0])>d){var x=parseFloat(n[_-1][0]),w=parseFloat(n[_-1][1]),E=parseFloat(n[_][0]),S=parseFloat(n[_][1]);if(x>-180&&x<h&&180===E&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<h){v.push([-180,n[_][1]]),_++,v.push([n[_][0],n[_][1]]);continue}if(x>c&&x<180&&-180===E&&_+1<n.length&&n[_-1][0]>c&&n[_-1][0]<180){v.push([180,n[_][1]]),_++,v.push([n[_][0],n[_][1]]);continue}if(x<h&&E>c){var C=x;x=E,E=C;var T=w;w=S,S=T}if(x>c&&E<h&&(E+=360),x<=180&&E>=180&&x<E){var I=(180-x)/(E-x),k=I*S+(1-I)*w;v.push([n[_-1][0]>c?180:-180,k]),(v=[]).push([n[_-1][0]>c?-180:180,k]),y.push(v)}else v=[],y.push(v);v.push([b,n[_][1]])}else v.push([n[_][0],n[_][1]])}}else{var A=[];y.push(A);for(var P=0;P<n.length;++P)A.push([n[P][0],n[P][1]])}for(var D=new TG(this.properties),M=0;M<y.length;++M){var O=new CG;D.geometries.push(O);for(var R=y[M],N=0;N<R.length;++N)O.move_to(R[N])}return D};n(3663);var kG=[],AG=[],PG=[],DG=[],MG=[],OG=[],RG=[],NG=[],LG=[],FG=[],zG=[],BG=[],jG=[],UG=[],VG=[],qG=[],GG=[],YG=[],$G=[],WG=[],HG=[],XG=[],ZG=[],KG=[];RG[85]=FG[85]=-1,NG[85]=zG[85]=0,LG[85]=BG[85]=1,$G[85]=XG[85]=1,WG[85]=ZG[85]=0,HG[85]=KG[85]=1,kG[85]=DG[85]=0,AG[85]=MG[85]=-1,PG[85]=VG[85]=0,qG[85]=jG[85]=0,GG[85]=UG[85]=1,OG[85]=YG[85]=1,XG[1]=XG[169]=0,ZG[1]=ZG[169]=-1,KG[1]=KG[169]=0,jG[1]=jG[169]=-1,UG[1]=UG[169]=0,VG[1]=VG[169]=0,FG[4]=FG[166]=0,zG[4]=zG[166]=-1,BG[4]=BG[166]=1,qG[4]=qG[166]=1,GG[4]=GG[166]=0,YG[4]=YG[166]=0,RG[16]=RG[154]=0,NG[16]=NG[154]=1,LG[16]=LG[154]=1,DG[16]=DG[154]=1,MG[16]=MG[154]=0,OG[16]=OG[154]=1,$G[64]=$G[106]=0,WG[64]=WG[106]=1,HG[64]=HG[106]=0,kG[64]=kG[106]=-1,AG[64]=AG[106]=0,PG[64]=PG[106]=1,$G[2]=$G[168]=0,WG[2]=WG[168]=-1,HG[2]=HG[168]=1,XG[2]=XG[168]=0,ZG[2]=ZG[168]=-1,KG[2]=KG[168]=0,jG[2]=jG[168]=-1,UG[2]=UG[168]=0,VG[2]=VG[168]=0,qG[2]=qG[168]=-1,GG[2]=GG[168]=0,YG[2]=YG[168]=1,RG[8]=RG[162]=0,NG[8]=NG[162]=-1,LG[8]=LG[162]=0,FG[8]=FG[162]=0,zG[8]=zG[162]=-1,BG[8]=BG[162]=1,jG[8]=jG[162]=1,UG[8]=UG[162]=0,VG[8]=VG[162]=1,qG[8]=qG[162]=1,GG[8]=GG[162]=0,YG[8]=YG[162]=0,RG[32]=RG[138]=0,NG[32]=NG[138]=1,LG[32]=LG[138]=1,FG[32]=FG[138]=0,zG[32]=zG[138]=1,BG[32]=BG[138]=0,kG[32]=kG[138]=1,AG[32]=AG[138]=0,PG[32]=PG[138]=0,DG[32]=DG[138]=1,MG[32]=MG[138]=0,OG[32]=OG[138]=1,XG[128]=XG[42]=0,ZG[128]=ZG[42]=1,KG[128]=KG[42]=1,$G[128]=$G[42]=0,WG[128]=WG[42]=1,HG[128]=HG[42]=0,kG[128]=kG[42]=-1,AG[128]=AG[42]=0,PG[128]=PG[42]=1,DG[128]=DG[42]=-1,MG[128]=MG[42]=0,OG[128]=OG[42]=0,FG[5]=FG[165]=-1,zG[5]=zG[165]=0,BG[5]=BG[165]=0,XG[5]=XG[165]=1,ZG[5]=ZG[165]=0,KG[5]=KG[165]=0,qG[20]=qG[150]=0,GG[20]=GG[150]=1,YG[20]=YG[150]=1,DG[20]=DG[150]=0,MG[20]=MG[150]=-1,OG[20]=OG[150]=1,RG[80]=RG[90]=-1,NG[80]=NG[90]=0,LG[80]=LG[90]=1,$G[80]=$G[90]=1,WG[80]=WG[90]=0,HG[80]=HG[90]=1,jG[65]=jG[105]=0,UG[65]=UG[105]=1,VG[65]=VG[105]=0,kG[65]=kG[105]=0,AG[65]=AG[105]=-1,PG[65]=PG[105]=0,RG[160]=RG[10]=-1,NG[160]=NG[10]=0,LG[160]=LG[10]=1,FG[160]=FG[10]=-1,zG[160]=zG[10]=0,BG[160]=BG[10]=0,XG[160]=XG[10]=1,ZG[160]=ZG[10]=0,KG[160]=KG[10]=0,$G[160]=$G[10]=1,WG[160]=WG[10]=0,HG[160]=HG[10]=1,qG[130]=qG[40]=0,GG[130]=GG[40]=1,YG[130]=YG[40]=1,jG[130]=jG[40]=0,UG[130]=UG[40]=1,VG[130]=VG[40]=0,kG[130]=kG[40]=0,AG[130]=AG[40]=-1,PG[130]=PG[40]=0,DG[130]=DG[40]=0,MG[130]=MG[40]=-1,OG[130]=OG[40]=1,FG[37]=FG[133]=0,zG[37]=zG[133]=1,BG[37]=BG[133]=1,XG[37]=XG[133]=0,ZG[37]=ZG[133]=1,KG[37]=KG[133]=0,kG[37]=kG[133]=-1,AG[37]=AG[133]=0,PG[37]=PG[133]=0,DG[37]=DG[133]=1,MG[37]=MG[133]=0,OG[37]=OG[133]=0,qG[148]=qG[22]=-1,GG[148]=GG[22]=0,YG[148]=YG[22]=0,XG[148]=XG[22]=0,ZG[148]=ZG[22]=-1,KG[148]=KG[22]=1,$G[148]=$G[22]=0,WG[148]=WG[22]=1,HG[148]=HG[22]=1,DG[148]=DG[22]=-1,MG[148]=MG[22]=0,OG[148]=OG[22]=1,RG[82]=RG[88]=0,NG[82]=NG[88]=-1,LG[82]=LG[88]=1,qG[82]=qG[88]=1,GG[82]=GG[88]=0,YG[82]=YG[88]=1,jG[82]=jG[88]=-1,UG[82]=UG[88]=0,VG[82]=VG[88]=1,$G[82]=$G[88]=0,WG[82]=WG[88]=-1,HG[82]=HG[88]=0,RG[73]=RG[97]=0,NG[73]=NG[97]=1,LG[73]=LG[97]=0,FG[73]=FG[97]=0,zG[73]=zG[97]=-1,BG[73]=BG[97]=0,jG[73]=jG[97]=1,UG[73]=UG[97]=0,VG[73]=VG[97]=0,kG[73]=kG[97]=1,AG[73]=AG[97]=0,PG[73]=PG[97]=1,RG[145]=RG[25]=0,NG[145]=NG[25]=-1,LG[145]=LG[25]=0,jG[145]=jG[25]=1,UG[145]=UG[25]=0,VG[145]=VG[25]=1,XG[145]=XG[25]=0,ZG[145]=ZG[25]=1,KG[145]=KG[25]=1,DG[145]=DG[25]=-1,MG[145]=MG[25]=0,OG[145]=OG[25]=0,FG[70]=FG[100]=0,zG[70]=zG[100]=1,BG[70]=BG[100]=0,qG[70]=qG[100]=-1,GG[70]=GG[100]=0,YG[70]=YG[100]=1,$G[70]=$G[100]=0,WG[70]=WG[100]=-1,HG[70]=HG[100]=1,kG[70]=kG[100]=1,AG[70]=AG[100]=0,PG[70]=PG[100]=0,FG[101]=FG[69]=0,zG[101]=zG[69]=1,BG[101]=BG[69]=0,kG[101]=kG[69]=1,AG[101]=AG[69]=0,PG[101]=PG[69]=0,XG[149]=XG[21]=0,ZG[149]=ZG[21]=1,KG[149]=KG[21]=1,DG[149]=DG[21]=-1,MG[149]=MG[21]=0,OG[149]=OG[21]=0,qG[86]=qG[84]=-1,GG[86]=GG[84]=0,YG[86]=YG[84]=1,$G[86]=$G[84]=0,WG[86]=WG[84]=-1,HG[86]=HG[84]=1,RG[89]=RG[81]=0,NG[89]=NG[81]=-1,LG[89]=LG[81]=0,jG[89]=jG[81]=1,UG[89]=UG[81]=0,VG[89]=VG[81]=1,RG[96]=RG[74]=0,NG[96]=NG[74]=1,LG[96]=LG[74]=0,FG[96]=FG[74]=-1,zG[96]=zG[74]=0,BG[96]=BG[74]=1,$G[96]=$G[74]=1,WG[96]=WG[74]=0,HG[96]=HG[74]=0,kG[96]=kG[74]=1,AG[96]=AG[74]=0,PG[96]=PG[74]=1,RG[24]=RG[146]=0,NG[24]=NG[146]=-1,LG[24]=LG[146]=1,qG[24]=qG[146]=1,GG[24]=GG[146]=0,YG[24]=YG[146]=1,jG[24]=jG[146]=0,UG[24]=UG[146]=1,VG[24]=VG[146]=1,DG[24]=DG[146]=0,MG[24]=MG[146]=-1,OG[24]=OG[146]=0,FG[6]=FG[164]=-1,zG[6]=zG[164]=0,BG[6]=BG[164]=1,qG[6]=qG[164]=-1,GG[6]=GG[164]=0,YG[6]=YG[164]=0,XG[6]=XG[164]=0,ZG[6]=ZG[164]=-1,KG[6]=KG[164]=1,$G[6]=$G[164]=1,WG[6]=WG[164]=0,HG[6]=HG[164]=0,jG[129]=jG[41]=0,UG[129]=UG[41]=1,VG[129]=VG[41]=1,XG[129]=XG[41]=0,ZG[129]=ZG[41]=1,KG[129]=KG[41]=0,kG[129]=kG[41]=-1,AG[129]=AG[41]=0,PG[129]=PG[41]=0,DG[129]=DG[41]=0,MG[129]=MG[41]=-1,OG[129]=OG[41]=0,qG[66]=qG[104]=0,GG[66]=GG[104]=1,YG[66]=YG[104]=0,jG[66]=jG[104]=-1,UG[66]=UG[104]=0,VG[66]=VG[104]=1,$G[66]=$G[104]=0,WG[66]=WG[104]=-1,HG[66]=HG[104]=0,kG[66]=kG[104]=0,AG[66]=AG[104]=-1,PG[66]=PG[104]=1,RG[144]=RG[26]=-1,NG[144]=NG[26]=0,LG[144]=LG[26]=0,XG[144]=XG[26]=1,ZG[144]=ZG[26]=0,KG[144]=KG[26]=1,$G[144]=$G[26]=0,WG[144]=WG[26]=1,HG[144]=HG[26]=1,DG[144]=DG[26]=-1,MG[144]=MG[26]=0,OG[144]=OG[26]=1,FG[36]=FG[134]=0,zG[36]=zG[134]=1,BG[36]=BG[134]=1,qG[36]=qG[134]=0,GG[36]=GG[134]=1,YG[36]=YG[134]=0,kG[36]=kG[134]=0,AG[36]=AG[134]=-1,PG[36]=PG[134]=1,DG[36]=DG[134]=1,MG[36]=MG[134]=0,OG[36]=OG[134]=0,RG[9]=RG[161]=-1,NG[9]=NG[161]=0,LG[9]=LG[161]=0,FG[9]=FG[161]=0,zG[9]=zG[161]=-1,BG[9]=BG[161]=0,jG[9]=jG[161]=1,UG[9]=UG[161]=0,VG[9]=VG[161]=0,XG[9]=XG[161]=1,ZG[9]=ZG[161]=0,KG[9]=KG[161]=1,RG[136]=0,NG[136]=1,LG[136]=1,FG[136]=0,zG[136]=1,BG[136]=0,qG[136]=-1,GG[136]=0,YG[136]=1,jG[136]=-1,UG[136]=0,VG[136]=0,XG[136]=0,ZG[136]=-1,KG[136]=0,$G[136]=0,WG[136]=-1,HG[136]=1,kG[136]=1,AG[136]=0,PG[136]=0,DG[136]=1,MG[136]=0,OG[136]=1,RG[34]=0,NG[34]=-1,LG[34]=0,FG[34]=0,zG[34]=-1,BG[34]=1,qG[34]=1,GG[34]=0,YG[34]=0,jG[34]=1,UG[34]=0,VG[34]=1,XG[34]=0,ZG[34]=1,KG[34]=1,$G[34]=0,WG[34]=1,HG[34]=0,kG[34]=-1,AG[34]=0,PG[34]=1,DG[34]=-1,MG[34]=0,OG[34]=0,RG[35]=0,NG[35]=1,LG[35]=1,FG[35]=0,zG[35]=-1,BG[35]=1,qG[35]=1,GG[35]=0,YG[35]=0,jG[35]=-1,UG[35]=0,VG[35]=0,XG[35]=0,ZG[35]=-1,KG[35]=0,$G[35]=0,WG[35]=1,HG[35]=0,kG[35]=-1,AG[35]=0,PG[35]=1,DG[35]=1,MG[35]=0,OG[35]=1,RG[153]=0,NG[153]=1,LG[153]=1,jG[153]=-1,UG[153]=0,VG[153]=0,XG[153]=0,ZG[153]=-1,KG[153]=0,DG[153]=1,MG[153]=0,OG[153]=1,FG[102]=0,zG[102]=-1,BG[102]=1,qG[102]=1,GG[102]=0,YG[102]=0,$G[102]=0,WG[102]=1,HG[102]=0,kG[102]=-1,AG[102]=0,PG[102]=1,RG[155]=0,NG[155]=-1,LG[155]=0,jG[155]=1,UG[155]=0,VG[155]=1,XG[155]=0,ZG[155]=1,KG[155]=1,DG[155]=-1,MG[155]=0,OG[155]=0,FG[103]=0,zG[103]=1,BG[103]=0,qG[103]=-1,GG[103]=0,YG[103]=1,$G[103]=0,WG[103]=-1,HG[103]=1,kG[103]=1,AG[103]=0,PG[103]=0,RG[152]=0,NG[152]=1,LG[152]=1,qG[152]=-1,GG[152]=0,YG[152]=1,jG[152]=-1,UG[152]=0,VG[152]=0,XG[152]=0,ZG[152]=-1,KG[152]=0,$G[152]=0,WG[152]=-1,HG[152]=1,DG[152]=1,MG[152]=0,OG[152]=1,RG[156]=0,NG[156]=-1,LG[156]=1,qG[156]=1,GG[156]=0,YG[156]=1,jG[156]=-1,UG[156]=0,VG[156]=0,XG[156]=0,ZG[156]=-1,KG[156]=0,$G[156]=0,WG[156]=1,HG[156]=1,DG[156]=-1,MG[156]=0,OG[156]=1,RG[137]=0,NG[137]=1,LG[137]=1,FG[137]=0,zG[137]=1,BG[137]=0,jG[137]=-1,UG[137]=0,VG[137]=0,XG[137]=0,ZG[137]=-1,KG[137]=0,kG[137]=1,AG[137]=0,PG[137]=0,DG[137]=1,MG[137]=0,OG[137]=1,RG[139]=0,NG[139]=1,LG[139]=1,FG[139]=0,zG[139]=-1,BG[139]=0,jG[139]=1,UG[139]=0,VG[139]=0,XG[139]=0,ZG[139]=1,KG[139]=0,kG[139]=-1,AG[139]=0,PG[139]=0,DG[139]=1,MG[139]=0,OG[139]=1,RG[98]=0,NG[98]=-1,LG[98]=0,FG[98]=0,zG[98]=-1,BG[98]=1,qG[98]=1,GG[98]=0,YG[98]=0,jG[98]=1,UG[98]=0,VG[98]=1,$G[98]=0,WG[98]=1,HG[98]=0,kG[98]=-1,AG[98]=0,PG[98]=1,RG[99]=0,NG[99]=1,LG[99]=0,FG[99]=0,zG[99]=-1,BG[99]=1,qG[99]=1,GG[99]=0,YG[99]=0,jG[99]=-1,UG[99]=0,VG[99]=1,$G[99]=0,WG[99]=-1,HG[99]=0,kG[99]=1,AG[99]=0,PG[99]=1,FG[38]=0,zG[38]=-1,BG[38]=1,qG[38]=1,GG[38]=0,YG[38]=0,XG[38]=0,ZG[38]=1,KG[38]=1,$G[38]=0,WG[38]=1,HG[38]=0,kG[38]=-1,AG[38]=0,PG[38]=1,DG[38]=-1,MG[38]=0,OG[38]=0,FG[39]=0,zG[39]=1,BG[39]=1,qG[39]=-1,GG[39]=0,YG[39]=0,XG[39]=0,ZG[39]=-1,KG[39]=1,$G[39]=0,WG[39]=1,HG[39]=0,kG[39]=-1,AG[39]=0,PG[39]=1,DG[39]=1,MG[39]=0,OG[39]=0;var QG=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},JG=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},tY=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},eY=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},nY=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},rY=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},iY=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},oY=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},aY=[],sY=[],lY=[],uY=[],cY=[],hY=[],dY=[],pY=[];uY[1]=cY[1]=18,uY[169]=cY[169]=18,lY[4]=sY[4]=12,lY[166]=sY[166]=12,aY[16]=pY[16]=4,aY[154]=pY[154]=4,hY[64]=dY[64]=22,hY[106]=dY[106]=22,lY[2]=hY[2]=17,uY[2]=cY[2]=18,lY[168]=hY[168]=17,uY[168]=cY[168]=18,aY[8]=uY[8]=9,sY[8]=lY[8]=12,aY[162]=uY[162]=9,sY[162]=lY[162]=12,aY[32]=pY[32]=4,sY[32]=dY[32]=1,aY[138]=pY[138]=4,sY[138]=dY[138]=1,cY[128]=pY[128]=21,hY[128]=dY[128]=22,cY[42]=pY[42]=21,hY[42]=dY[42]=22,sY[5]=cY[5]=14,sY[165]=cY[165]=14,lY[20]=pY[20]=6,lY[150]=pY[150]=6,aY[80]=hY[80]=11,aY[90]=hY[90]=11,uY[65]=dY[65]=3,uY[105]=dY[105]=3,aY[160]=hY[160]=11,sY[160]=cY[160]=14,aY[10]=hY[10]=11,sY[10]=cY[10]=14,lY[130]=pY[130]=6,uY[130]=dY[130]=3,lY[40]=pY[40]=6,uY[40]=dY[40]=3,sY[101]=dY[101]=1,sY[69]=dY[69]=1,cY[149]=pY[149]=21,cY[21]=pY[21]=21,lY[86]=hY[86]=17,lY[84]=hY[84]=17,aY[89]=uY[89]=9,aY[81]=uY[81]=9,aY[96]=dY[96]=0,sY[96]=hY[96]=15,aY[74]=dY[74]=0,sY[74]=hY[74]=15,aY[24]=lY[24]=8,uY[24]=pY[24]=7,aY[146]=lY[146]=8,uY[146]=pY[146]=7,sY[6]=hY[6]=15,lY[6]=cY[6]=16,sY[164]=hY[164]=15,lY[164]=cY[164]=16,uY[129]=pY[129]=7,cY[129]=dY[129]=20,uY[41]=pY[41]=7,cY[41]=dY[41]=20,lY[66]=dY[66]=2,uY[66]=hY[66]=19,lY[104]=dY[104]=2,uY[104]=hY[104]=19,aY[144]=cY[144]=10,hY[144]=pY[144]=23,aY[26]=cY[26]=10,hY[26]=pY[26]=23,sY[36]=pY[36]=5,lY[36]=dY[36]=2,sY[134]=pY[134]=5,lY[134]=dY[134]=2,aY[9]=cY[9]=10,sY[9]=uY[9]=13,aY[161]=cY[161]=10,sY[161]=uY[161]=13,sY[37]=pY[37]=5,cY[37]=dY[37]=20,sY[133]=pY[133]=5,cY[133]=dY[133]=20,lY[148]=cY[148]=16,hY[148]=pY[148]=23,lY[22]=cY[22]=16,hY[22]=pY[22]=23,aY[82]=lY[82]=8,uY[82]=hY[82]=19,aY[88]=lY[88]=8,uY[88]=hY[88]=19,aY[73]=dY[73]=0,sY[73]=uY[73]=13,aY[97]=dY[97]=0,sY[97]=uY[97]=13,aY[145]=uY[145]=9,cY[145]=pY[145]=21,aY[25]=uY[25]=9,cY[25]=pY[25]=21,sY[70]=dY[70]=1,lY[70]=hY[70]=17,sY[100]=dY[100]=1,lY[100]=hY[100]=17,aY[34]=uY[34]=9,sY[34]=lY[34]=12,cY[34]=pY[34]=21,hY[34]=dY[34]=22,aY[136]=pY[136]=4,sY[136]=dY[136]=1,lY[136]=hY[136]=17,uY[136]=cY[136]=18,aY[35]=pY[35]=4,sY[35]=lY[35]=12,uY[35]=cY[35]=18,hY[35]=dY[35]=22,aY[153]=pY[153]=4,uY[153]=cY[153]=18,sY[102]=lY[102]=12,hY[102]=dY[102]=22,aY[155]=uY[155]=9,cY[155]=pY[155]=23,sY[103]=dY[103]=1,lY[103]=hY[103]=17,aY[152]=pY[152]=4,lY[152]=hY[152]=17,uY[152]=cY[152]=18,aY[156]=lY[156]=8,uY[156]=cY[156]=18,hY[156]=pY[156]=23,aY[137]=pY[137]=4,sY[137]=dY[137]=1,uY[137]=cY[137]=18,aY[139]=pY[139]=4,sY[139]=uY[139]=13,cY[139]=dY[139]=20,aY[98]=uY[98]=9,sY[98]=lY[98]=12,hY[98]=dY[98]=22,aY[99]=dY[99]=0,sY[99]=lY[99]=12,uY[99]=hY[99]=19,sY[38]=lY[38]=12,cY[38]=pY[38]=21,hY[38]=dY[38]=22,sY[39]=pY[39]=5,lY[39]=cY[39]=16,hY[39]=dY[39]=22;var fY=[];fY[1]=fY[169]=QG,fY[4]=fY[166]=JG,fY[16]=fY[154]=tY,fY[64]=fY[106]=eY,fY[168]=fY[2]=nY,fY[162]=fY[8]=rY,fY[138]=fY[32]=iY,fY[42]=fY[128]=oY,fY[5]=fY[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},fY[20]=fY[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},fY[80]=fY[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},fY[65]=fY[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},fY[160]=fY[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},fY[130]=fY[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},fY[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},fY[101]=fY[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},fY[149]=fY[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},fY[86]=fY[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},fY[89]=fY[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},fY[96]=fY[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},fY[24]=fY[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},fY[6]=fY[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},fY[129]=fY[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},fY[66]=fY[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},fY[144]=fY[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},fY[36]=fY[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},fY[9]=fY[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},fY[37]=fY[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},fY[148]=fY[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},fY[82]=fY[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},fY[73]=fY[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},fY[145]=fY[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},fY[70]=fY[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},fY[34]=function(t){return[oY(t),rY(t)]},fY[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},fY[136]=function(t){return[iY(t),nY(t)]},fY[153]=function(t){return[tY(t),QG(t)]},fY[102]=function(t){return[JG(t),eY(t)]},fY[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},fY[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},fY[152]=function(t){return[tY(t),nY(t)]},fY[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},fY[137]=function(t){return[iY(t),QG(t)]},fY[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},fY[98]=function(t){return[rY(t),eY(t)]},fY[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},fY[38]=function(t){return[JG(t),oY(t)]},fY[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};function mY(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(r*(n[1]-e[1])-o*i)}function gY(t,e){return e.geometry.coordinates[0].every((function(e){return yG(sG(e),t)}))}var yY=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]===0&&i.coordinates[0]-t.coordinates[0]===0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=mY(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}();const vY=yY;var _Y=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return uG([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return mY(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}();const bY=_Y;var xY=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=mY(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},t.prototype.toMultiPoint=function(){return cG(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=lG([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=bG(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,r,i=t.getEnvelope();return e.forEach((function(e){var o=e.getEnvelope();if(r&&(n=r.getEnvelope()),!function(t,e){var n=t.geometry.coordinates[0].map((function(t){return t[0]})),r=t.geometry.coordinates[0].map((function(t){return t[1]})),i=e.geometry.coordinates[0].map((function(t){return t[0]})),o=e.geometry.coordinates[0].map((function(t){return t[1]}));return Math.max.apply(null,n)===Math.max.apply(null,i)&&Math.max.apply(null,r)===Math.max.apply(null,o)&&Math.min.apply(null,n)===Math.min.apply(null,i)&&Math.min.apply(null,r)===Math.min.apply(null,o)}(o,i)&&gY(o,i)){for(var a=t.map((function(t){return t.from.coordinates})),s=void 0,l=function(t){e.some((function(e){return n=t,r=e.from.coordinates,n[0]===r[0]&&n[1]===r[1];var n,r}))||(s=t)},u=0,c=a;u<c.length;u++){l(c[u])}s&&e.inside(sG(s))&&(r&&!gY(n,o)||(r=e))}})),r},t.prototype.inside=function(t){return yG(t,this.toPolygon())},t}();const wY=xY;!function(){function t(){this.edges=[],this.nodes={}}t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return fG(e,(function(t){!function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}(t,"LineString","Graph::fromGeoJson"),function(t,e,n,r){var i=n;dG(t,(function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)}),r)}(t,(function(t,e){if(t){var r=n.getNode(t),i=n.getNode(e);n.addEdge(r,i)}return e}))})),n},t.prototype.getNode=function(t){var e=vY.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new vY(t)),n},t.prototype.addEdge=function(t,e){var n=new bY(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;"undefined"===typeof t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var a=i[o],s=a.symetric,l=void 0,u=void 0;a.label===e&&(l=a),s.label===e&&(u=s),l&&u&&(u&&(r=u),l&&(r&&(r.next=l,r=void 0),n||(n=l)))}r&&(r.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new wY;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()}}();n(4042);n(5107);n(6530);function EY(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var SY={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||SY.heuristics.manhattan,o=r.closest||!1,a=new IY((function(t){return t.f})),s=e;for(e.h=i(e,n),a.push(e);a.size()>0;){var l=a.pop();if(l===n)return EY(l);l.closed=!0;for(var u=t.neighbors(l),c=0,h=u.length;c<h;++c){var d=u[c];if(!d.closed&&!d.isWall()){var p=l.g+d.getCost(l),f=d.visited;(!f||p<d.g)&&(d.visited=!0,d.parent=l,d.h=d.h||i(d,n),d.g=p,d.f=d.g+d.h,t.markDirty(d),o&&(d.h<s.h||d.h===s.h&&d.g<s.g)&&(s=d),f?a.rescoreElement(d):a.push(d))}}}return o?EY(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function CY(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new TY(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function TY(t,e,n){this.x=t,this.y=e,this.weight=n}function IY(t){this.content=[],this.scoreFunction=t}CY.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)SY.cleanNode(this.nodes[t])},CY.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)SY.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},CY.prototype.markDirty=function(t){this.dirtyNodes.push(t)},CY.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},CY.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],n=0,r=(e=o[a]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},TY.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},TY.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},TY.prototype.isWall=function(){return 0===this.weight},IY.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,a=o-1,s=null;if(a<e){var l=this.content[a];(i=this.scoreFunction(l))<r&&(s=a)}if(o<e){var u=this.content[o];this.scoreFunction(u)<(null===s?r:i)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}};function kY(){this._=null}function AY(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function PY(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function DY(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function MY(t){for(;t.L;)t=t.L;return t}kY.prototype={constructor:kY,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=MY(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(PY(this,n),n=(t=n).U),n.C=!1,r.C=!0,DY(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(DY(this,n),n=(t=n).U),n.C=!1,r.C=!0,PY(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?MY(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,PY(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,DY(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,PY(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,DY(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,PY(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,DY(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};const OY=kY;function RY(t,e,n,r){var i=[null,null],o=i$.push(i)-1;return i.left=t,i.right=e,n&&LY(i,t,e,n),r&&LY(i,e,t,r),n$[t.index].halfedges.push(o),n$[e.index].halfedges.push(o),i}function NY(t,e,n){var r=[e,n];return r.left=t,r}function LY(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function FY(t,e,n,r,i){var o,a=t[0],s=t[1],l=a[0],u=a[1],c=0,h=1,d=s[0]-l,p=s[1]-u;if(o=e-l,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<h&&(h=o)}else if(d>0){if(o>h)return;o>c&&(c=o)}if(o=r-l,d||!(o<0)){if(o/=d,d<0){if(o>h)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<h&&(h=o)}if(o=n-u,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=i-u,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[l+c*d,u+c*p]),h<1&&(t[1]=[l+h*d,u+h*p]),!0)}}}}}function zY(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,l=t[0],u=t.left,c=t.right,h=u[0],d=u[1],p=c[0],f=c[1],m=(h+p)/2,g=(d+f)/2;if(f===d){if(m<e||m>=r)return;if(h>p){if(l){if(l[1]>=i)return}else l=[m,n];o=[m,i]}else{if(l){if(l[1]<n)return}else l=[m,i];o=[m,n]}}else if(s=g-(a=(h-p)/(f-d))*m,a<-1||a>1)if(h>p){if(l){if(l[1]>=i)return}else l=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(l){if(l[1]<n)return}else l=[(i-s)/a,i];o=[(n-s)/a,n]}else if(d<f){if(l){if(l[0]>=r)return}else l=[e,a*e+s];o=[r,a*r+s]}else{if(l){if(l[0]<e)return}else l=[r,a*r+s];o=[e,a*e+s]}return t[0]=l,t[1]=o,!0}function BY(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function jY(t,e){return e[+(e.left!==t.site)]}function UY(t,e){return e[+(e.left===t.site)]}var VY,qY=[];function GY(){AY(this),this.x=this.y=this.arc=this.site=this.cy=null}function YY(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],l=r[0]-a,u=r[1]-s,c=o[0]-a,h=o[1]-s,d=2*(l*h-u*c);if(!(d>=-a$)){var p=l*l+u*u,f=c*c+h*h,m=(h*p-u*f)/d,g=(l*f-c*p)/d,y=qY.pop()||new GY;y.arc=t,y.site=i,y.x=m+a,y.y=(y.cy=g+s)+Math.sqrt(m*m+g*g),t.circle=y;for(var v=null,_=r$._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){v=_.P;break}_=_.L}else{if(!_.R){v=_;break}_=_.R}r$.insert(v,y),v||(VY=y)}}}}function $Y(t){var e=t.circle;e&&(e.P||(VY=e.N),r$.remove(e),qY.push(e),AY(e),t.circle=null)}var WY=[];function HY(){AY(this),this.edge=this.site=this.circle=null}function XY(t){var e=WY.pop()||new HY;return e.site=t,e}function ZY(t){$Y(t),e$.remove(t),WY.push(t),AY(t)}function KY(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];ZY(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<o$&&Math.abs(r-l.circle.cy)<o$;)o=l.P,s.unshift(l),ZY(l),l=o;s.unshift(l),$Y(l);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<o$&&Math.abs(r-u.circle.cy)<o$;)a=u.N,s.push(u),ZY(u),u=a;s.push(u),$Y(u);var c,h=s.length;for(c=1;c<h;++c)u=s[c],l=s[c-1],LY(u.edge,l.site,u.site,i);l=s[0],(u=s[h-1]).edge=RY(l.site,u.site,null,i),YY(l),YY(u)}function QY(t){for(var e,n,r,i,o=t[0],a=t[1],s=e$._;s;)if((r=JY(s,a)-o)>o$)s=s.L;else{if(!((i=o-t$(s,a))>o$)){r>-o$?(e=s.P,n=s):i>-o$?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){n$[t.index]={site:t,halfedges:[]}}(t);var l=XY(t);if(e$.insert(e,l),e||n){if(e===n)return $Y(e),n=XY(e.site),e$.insert(l,n),l.edge=n.edge=RY(e.site,l.site),YY(e),void YY(n);if(n){$Y(e),$Y(n);var u=e.site,c=u[0],h=u[1],d=t[0]-c,p=t[1]-h,f=n.site,m=f[0]-c,g=f[1]-h,y=2*(d*g-p*m),v=d*d+p*p,_=m*m+g*g,b=[(g*v-p*_)/y+c,(d*_-m*v)/y+h];LY(n.edge,u,f,b),l.edge=RY(u,t,null,b),n.edge=RY(t,f,null,b),YY(e),YY(n)}else l.edge=RY(e.site,l.site)}}function JY(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],l=n[1],u=l-e;if(!u)return s;var c=s-r,h=1/o-1/u,d=c/u;return h?(-d+Math.sqrt(d*d-2*h*(c*c/(-2*u)-l+u/2+i-o/2)))/h+r:(r+s)/2}function t$(t,e){var n=t.N;if(n)return JY(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var e$,n$,r$,i$,o$=1e-6,a$=1e-12;function s$(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function l$(t,e){return e[1]-t[1]||e[0]-t[0]}function u$(t,e){var n,r,i,o=t.sort(l$).pop();for(i$=[],n$=new Array(t.length),e$=new OY,r$=new OY;;)if(i=VY,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(QY(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;KY(i.arc)}if(function(){for(var t,e,n,r,i=0,o=n$.length;i<o;++i)if((t=n$[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=BY(t,i$[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],l=+e[1][0],u=+e[1][1];!function(t,e,n,r){for(var i,o=i$.length;o--;)zY(i=i$[o],t,e,n,r)&&FY(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>o$||Math.abs(i[0][1]-i[1][1])>o$)||delete i$[o]}(a,s,l,u),function(t,e,n,r){var i,o,a,s,l,u,c,h,d,p,f,m,g=n$.length,y=!0;for(i=0;i<g;++i)if(o=n$[i]){for(a=o.site,s=(l=o.halfedges).length;s--;)i$[l[s]]||l.splice(s,1);for(s=0,u=l.length;s<u;)f=(p=UY(o,i$[l[s]]))[0],m=p[1],h=(c=jY(o,i$[l[++s%u]]))[0],d=c[1],(Math.abs(f-h)>o$||Math.abs(m-d)>o$)&&(l.splice(s,0,i$.push(NY(a,p,Math.abs(f-t)<o$&&r-m>o$?[t,Math.abs(h-t)<o$?d:r]:Math.abs(m-r)<o$&&n-f>o$?[Math.abs(d-r)<o$?h:n,r]:Math.abs(f-n)<o$&&m-e>o$?[n,Math.abs(h-n)<o$?d:e]:Math.abs(m-e)<o$&&f-t>o$?[Math.abs(d-e)<o$?h:t,e]:null))-1),++u);u&&(y=!1)}if(y){var v,_,b,x=1/0;for(i=0,y=null;i<g;++i)(o=n$[i])&&(b=(v=(a=o.site)[0]-t)*v+(_=a[1]-e)*_)<x&&(x=b,y=o);if(y){var w=[t,e],E=[t,r],S=[n,r],C=[n,e];y.halfedges.push(i$.push(NY(a=y.site,w,E))-1,i$.push(NY(a,E,S))-1,i$.push(NY(a,S,C))-1,i$.push(NY(a,C,w))-1)}}for(i=0;i<g;++i)(o=n$[i])&&(o.halfedges.length||delete n$[i])}(a,s,l,u)}this.edges=i$,this.cells=n$,e$=r$=i$=n$=null}u$.prototype={constructor:u$,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return jY(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s=n.site,l=-1,u=e[i[o-1]],c=u.left===s?u.right:u.left;++l<o;)a=c,c=(u=e[i[l]]).left===s?u.right:u.left,a&&c&&r<a.index&&r<c.index&&s$(s,a,c)<0&&t.push([s.data,a.data,c.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var l=t-i.site[0],u=e-i.site[1],c=l*l+u*u;do{i=o.cells[r=a],a=null,i.halfedges.forEach((function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var l=t-s[0],u=e-s[1],h=l*l+u*u;h<c&&(c=h,a=s.index)}}))}while(null!==a);return o._found=r,null==n||c<=n*n?i.site:null}};n(9056);n(4035);function c$(){return new h$}function h$(){this.reset()}h$.prototype={constructor:h$,reset:function(){this.s=this.t=0},add:function(t){p$(d$,t,this.t),p$(this,d$.s,this.s),this.s?this.t+=d$.t:this.s=d$.t},valueOf:function(){return this.s}};var d$=new h$;function p$(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var f$=1e-6,m$=Math.PI,g$=m$/2,y$=m$/4,v$=2*m$,_$=m$/180,b$=Math.abs,x$=Math.atan,w$=Math.atan2,E$=Math.cos,S$=(Math.ceil,Math.exp),C$=(Math.floor,Math.log),T$=(Math.pow,Math.sin),I$=(Math.sign,Math.sqrt),k$=Math.tan;function A$(t){return t>1?g$:t<-1?-g$:Math.asin(t)}function P$(){}c$(),c$();function D$(t){var e=t[0],n=t[1],r=E$(n);return[r*E$(e),r*T$(e),T$(n)]}function M$(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function O$(t){var e=I$(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}c$();function R$(t,e){return[t>m$?t-v$:t<-m$?t+v$:t,e]}function N$(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function L$(t,e,n,r,i){var o,a,s=[],l=[];if(t.forEach((function(t){if(!(t.length-1<=0)){var e,n,r=t[0],a=t[e];if(function(t,e){return b$(t[0]-e[0])<f$&&b$(t[1]-e[1])<f$}(r,a)){for(i.lineStart(),0;o<e;++o)i.point(t[o][0],r[1]);i.lineEnd()}else s.push(new N$(r,t,null,!0)),l.push(n.o=new N$(r,null,n,!1)),s.push(new N$(a,t,null,!1)),l.push(n.o=new N$(a,null,n,!0))}})),s.length){for(l.sort(e),F$(s),F$(l),0,l.length;o<a;++o)l[o].e=!n;for(var u,c,h=s[0];;){for(var d=h,p=!0;d.v;)if(d.n===h)return;d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(0,u.length;o<a;++o)i.point(u[o][0],c[1]);else r(d.x,d.n.x,1,i);d.n}else{if(p)for(d.p.z,u.length-1;o>=0;--o)i.point(u[o][0],c[1]);else r(d.x,d.p.x,-1,i);d.p}d.o.z,!p}while(!d.v);i.lineEnd()}}}function F$(t){if(t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=t[r],n.p=i,n;i.n=t[0],n.p=i}}function z$(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}R$.invert=R$;var B$;1===(B$=z$).length&&(B$=function(t){return function(e,n){return z$(t(e),n)}}(B$));var j$=Array.prototype;j$.slice,j$.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var U$=c$();function V$(t,e){var n=e[0],r=e[1],i=[T$(n),-E$(n),0],o=0,a=0;U$.reset();for(var s=0,l=t.length;s<l;++s)if(t[s].length)for(var u,c,h=u[c-1],d=h[0],p=h[1]/2+y$,f=T$(p),m=E$(p),g=0;g<c;v,b,x,y){var y=u[g],v=y[0],_=y[1]/2+y$,b=T$(_),x=E$(_),w=v-d,E=w>=0?1:-1,S=E*w,C=S>m$,T=f*b;if(U$.add(w$(T*E*T$(S),m*x+T*E$(S))),C?w+E*v$:w,C^d>=n^v>=n){var I=M$(D$(h),D$(y));O$(I);var k=M$(i,I);O$(k);var A=(C^w>=0?-1:1)*A$(k[2]);(r>A||r===A&&(I[0]||I[1]))&&(C^w>=0?1:-1)}}return(o<-f$||o<f$&&U$<-f$)^1&a}c$();c$(),c$();c$();function q$(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function G$(t){return t.length>1}function Y$(t,e){return(t.x[0]<0?t[1]-g$-f$:g$-t[1])-(e.x[0]<0?e[1]-g$-f$:g$-e[1])}q$(4.5);function $$(t){return function(e){var n=new W$;for(var r in t)n[r]=t[r];return n.stream=e,n}}function W$(){}W$.prototype={constructor:W$,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};E$(30*_$);$$({point:function(t,e){this.stream.point(t*_$,e*_$)}});function H$(t){return function(e,n){var r=E$(e),i=E$(n),o=t(r*i);return[o*i*T$(e),o*T$(n)]}}function X$(t){return function(e,n){var r=I$(e*e+n*n),i=t(r),o=T$(i),a=E$(i);return[w$(e*o,r*a),A$(r&&n*o/r)]}}var Z$=H$((function(t){return I$(2/(1+t))}));Z$.invert=X$((function(t){return 2*A$(t/2)}));var K$=H$((function(t){return(t=function(t){return t>1?0:t<-1?m$:Math.acos(t)}(t))&&t/T$(t)}));function Q$(t,e){return[t,C$(k$((g$+e)/2))]}function J$(t,e){return[t,e]}function tW(t,e){var n=E$(e),r=E$(t)*n;return[n*T$(t)/r,T$(e)/r]}function eW(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function nW(t,e){return[E$(e)*T$(t),T$(e)]}function rW(t,e){var n=E$(e),r=1+E$(t)*n;return[n*T$(t)/r,T$(e)/r]}function iW(t,e){return[C$(k$((g$+e)/2)),-t]}K$.invert=X$((function(t){return t})),Q$.invert=function(t,e){return[t,2*x$(S$(e))-g$]},J$.invert=J$,tW.invert=X$(x$),eW.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(b$(n)>f$&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},nW.invert=X$(A$),rW.invert=X$((function(t){return 2*x$(t)})),iW.invert=function(t,e){return[-e,2*x$(S$(t))-g$]};const oW=async(t,e)=>{const n=e.features[0].properties.waypoints;console.log(e),t.addSource("route",{type:"geojson",data:e}),t.addLayer({id:"route-layer",type:"line",source:"route",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#6084eb","line-width":6,"line-opacity":.7},filter:["==","$type","LineString"]}),n.map(((e,n)=>{let r=document.createElement("div");r.className="marker",r.innerHTML=`<p>${String.fromCharCode(65+n)}</p>`,new(rG().Marker)(r,{anchor:"bottom"}).setLngLat(e.location).addTo(t)}));const r=xG(e).geometry.coordinates;t.flyTo({center:r,zoom:4})};const aW=function(e){const n=bU((t=>Kq(t,e.tripId)));let r,i;return(0,t.useEffect)((()=>{const t=iG,e=0,o=0,a=4;i=new(rG().Map)({container:r,style:`https://maps.geoapify.com/v1/styles/osm-carto/style.json?apiKey=${t}`,center:[e,o],zoom:a}),i.addControl(new(rG().NavigationControl)({showZoom:!0})),i.on("load",(()=>{n&&n.route&&oW(i,JSON.parse(n.route))}))})),(0,Rt.jsx)("div",{className:"container",children:(0,Rt.jsx)("div",{className:"map-container",ref:t=>r=t})})};const sW=n.p+"static/media/plus.e4be53b12c5342393a1051ffff85360a.svg",lW=t=>(0,Rt.jsxs)("button",{id:t.id,className:"btn",onClick:t.onClick,children:[(0,Rt.jsx)("img",{src:t.src,alt:""}),(0,Rt.jsx)("span",{children:t.text})]}),uW=t=>{const e=()=>{t.handler(!0)};return(0,Rt.jsxs)("div",{className:"empty-trips-container",id:"empty-trips-container",children:[(0,Rt.jsxs)("header",{children:[(0,Rt.jsx)("h2",{children:" Your trips "}),(0,Rt.jsx)(lW,{text:"New trip",id:"newTrip",src:sW,onClick:e})]}),(0,Rt.jsxs)("div",{className:"content",children:[(0,Rt.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAADyCAYAAACiXxvAAAAAAXNSR0IArs4c6QAAGB9JREFUeF7tnduR3bgRhskztVLtm0NwCM5gpQystd+8s+sQnMFoMnAILkl+25XWEWiUgTNwGC7JNYcuUINZHg7JbgANoBv450WXIYHG390fGuBtHPADBRIV+P7Hz69dE+/fPJ//xI8dBUY7psJSjQrMyT8NN7Nt43ALCGj00r5NAIAtf6my9iL5vWWAgCofUcYAAJRC+P2mApvJDwiYixYAwJzL6ht8mPyGIfDnH/734nw6v/BDmKbxu6Xa4zh98v8+nU93P7/75q6+N9IsAADS9Ovy7FYA4BL+fpzm/YtxmB4TP8Sp0zDeOTBYBQIAEOJtHPuogNUlgE/62IQnQ8DYHggAQHoUB+wpYGkTMHvir0Uah1sLVQEAgPxOUkD7ZcDiiW8MBABAUvjbO/nV9ZePbs0qeb0+x41Ark23Cffh7bOXsSqz9ipiGw89T+nSAAAIdaTh4+fk95tdSgPSybtMXLfJFgqB6rP+Xowo1BwAMJzQIaZfJL/iS3Vbs3YIBFTN+gZAAACEZJHRYzeTXyEEjpKXAwGJ5PeX9Zw8bhPPy7S8P2D+P3/7c2xMKKkGAIBYBxo57zD5FUGAk7xHEOCcv+Uy1+bVNN6634Xe2ONvHHJ7FVGXFRVAAAAwksixZnIS4zSdXoYGf6w9e+fNyTSePx62u5MwnDGu2/WJLzVuvxEaXBlUhgAAIB3JCts7SpDQ5HeJ6obo76Bzf/ezn0uq+d8Pt8yGXmk4hIBQ8ksn/trd/upFUEVQEQIAgMKEzWHSFgRCkj8qsOel8tdbZbkw2ITAToKwqoaFmCHjTfVBaFVS0rbl2ACAVE8bOn8ZlNyACw3kmBJ+fc5FYh/Mjt9ff5448nM2EDnthB4TAqhaNgIAoV41frxLaM4tqiHBGywJo+T1G2x7lQMXTLUSa6kJayP261qq+AtVAIDg6G3/BG5yJSmREOxs+xL6SBrbxslcCHArMyn7AAApJRtph51cEuONTFBW6R/ZtsSw9trgQMBXLH/84b8vTqfTvOE6rt5L4P5vGqdP5/P57td33ya9kwAAyOlxY20XTX6vTWCicm18//a5utjOtawah/Hufrq/jYGBOpGM5Uwz5nITK8uAAyBgdfb3umXXOUDLr9sO+OlegdCg9Nf713fQXbxSK/BWWc7al2VnYALUcD5nKZBq13k6v+RUBABAqtINnM+aVR+u6buk5949x0rYB/04u/UcOzWW/usQybUUWPfjlga/EI9TAwANJHDKENhJmjCzSvTBSpoEG1M0jDm3RBXwtcQ/hgAAEOO9hs7hzKoS16e5ENibwTnnW5j9feiwgCYUZ0ebhACAkMgWm+EklUTyh2yA7e0FkKAyNPt7PV5df/7POAy/LxE7e5UAAFBCfaV9cMpQ6VmV6nNrL4AzW3I2EbW5Yb7WP57IJyC93e66v/v71Xg1v8p8Cn2V+QYkAQBtUVHQnhqzakwycyoVaVCVcsP3f/nyt+E0f5vgd77PkOv6HG0uxrKCAABQytMF+vHPpHOevOMETq6koqqA9WxO2mqw/F+Hw1wNTFd/eP/PZ38PDRV3rqsKuBXB0q8AQKjaSo+/SBJGQtRMKgoA62UAdbzkPoVS97LMIn36W4nx+NARAMCSVvdBm44nIFAzqahlwDSO/x6H6V+Pqk/DT8PBZpnF9X+uiOJCwFcBAEAuTxRq99DhBxCgAJAzqSgAhEqX09ZQWzQcz4LAQ2wAABo8FmlDiKPXXVAbgLnW/84Olt0RmuR+3VeESdVOofzrDHM+BgCquSi9Y1Yi7b1Lj3ibTg4AsOxNlyX4NWQCXaprgqO1e14AAFDnujCDLCwBOMEYNuqAoxkbogGtmTqUrALG4RYAMOXSbWNzbAJKrKurJv5Cql6XBqT+AEAD2f8whNDLgNQmIOfpvCP1qParKN9ZNUABwN1whAqgSiTm6TTkRiBqJz4WAFS7eUbObzV2XPwe9BzJudUYANDjr6KWcBI1dBlAzTjcAS6/z7c8x32Cy/076KMbO52Gjo1ru7bjqH2A5gHgPxW9dMwygFK/ZqPN4SH2UGV6yGyZlPzjMH+bj3MLsx/f8gtFsUDoAQLdAWCZ8LGBMQdZRFCGJJ+GY1lJy1g3s9pZDTj0i0GUXjE2uDZbhgC1BGhqD8AnflLS70UZIwmoANX6e2qG8DBM/UDHxfgz6hkMgoy21PZ5FwDImvhrDzYYLOyE2Rg7Zx+hVOIv+wmNiRw3PdVOftc/5VvzFQA1wCxOaBECzG/srasBag+hRvIv++TGR6sA+NP1l49HjwibvRMweObJQYKGQBCn5/RpGL7uyh/9hGwkUm3F/J4aW237YsbEPYcCoEkAUIPiiiNyXEMQyKGrluQ6WhL0ugno3xFo6jJgjiBNBgEgsCmhluRfGueWLP7f4zh9CrnsmBwnlRrYyxn/4RAzAIhN/vVXbJwflh+2SPmazaNPAYEn4d3yzFopl6O7XX5o1DWyBJ8JAMQkf8oDIDH9tfRaqqjxL8ITyR+dq8VPVA8AahNnrVhK4q/bCk0EC4HvxnQ6n+6oz3uFjr3Faqh4NlboUD0AuJeaJBN/6YfQa8qaIbBMaq6doSBo9ZJahdws0qVqAHCDr8SGkyZbYiJjy34uBFx/r378/I/x68s5938a2guJ0djiOboBwLhBpUTye8dyIRCSWCWC5shurq2cSgyzfwlvyvahFgCcZCuZ/CEQqGHXXlhwdORAgAKApjHLpkjbrekFAGP25wRuDvdRyeD6rGXberwcW6krGJyNWC3jzeHvlttUCQDOrEUFbU6ncRLC9b+8B4Hadc9p7yEEGOt2aryY/XN6L2/bOgHAmP1rrTdZcNrwWa6rFNzw2IQAI/nnDcDrLx+PHrMGALhe0HecOgBQs80sITNwJeWOTfy1DTVBcJHIARpSAED5LxlpZdtSBwBOopWe/akEiHJZQAJGtb9z0jyWwPvgqZeGAACSHirbljoAkMlWOHFIe1L8VXgssaZSACgN5Nhx4LynClQBgHs4YcsZv7779o4KtpKzDWs5khpVBiBwVJVh/Z8aAHXPzw6AOXjcsn0avzt6OwlXhpKzTREAVNrT4Ortj9urhEr6I9RmHE8rkAUALumlEn49hNIBR1Uk3j5/yc//O/TlpKXHRYfG0yN6fJ4+RidL54gBwM/0wzTc5BTAvcnkfrq/dcuFnP34tslNyZ0SPvQhohpXNkrohz50K5AMADJBMo2/JAhSrqGHgMBCFZDJnWi2kgJJAKiV/BdaFdpE828O4jxLv+VLllaFxlIp1tCtQgWiAMAK5oKDLVkNpAyLs5+AKiBFYZwbqkAwALQlf41qIFRk9n6Ce1/b2+fBPom1B+dBAXawuWv3V+PVjcSlPCe7m7WX8ku1q30zjawCsAxAVhZUgAUA6htjpL0PH9o8n8931O69v0koBTb+neekXRUOICsoAKCCV/rtkgRAdPILfV03tvLQCgEKALizrt9krDHyQwBEJX+mGSwKBJlsSXEUdXchAJCiLs4NVeAQANTHBZeduRl3CnzKLNRYdzw1g65t+uXts5cx/eQ6BwDIpSzajVFgFwAhyV96441bDahdBhy98ERh1RITWDjHhgKbAAiZZUsn/1JWyk61AHAPSO3cMl3yaUcbIQorcyrwBAAh637/gcGcBlJtH0FA8zX11Pf0U7rg91CAo8ATAHBLfw3J7wf4ZElgpIx2+wF+DDVfGsoJFBzTpgIXAGDP/kYSrE2XYVRQQE6BCwCwZn8kv5z6aAkKVFbgEQCc2V/rplplDdE9FDCrwCMAOLO/pnW/WcVhOBRQpMAMAMz+ijwCU6BAQQXYAMDsX9Ar6AoKFFJgBgBV/mPtX8gb6AYKFFZg5JT/mP0LewXdQYFCCrAAoPmOukI6oRso0KQCo9X76Zv0BgYFBQorMFLrf5T/hT2C7qBAQQUAgIJioysooE2BkXpJJdb/2lwGe6CAnAKHewC4/CcnNFqCAhoVOAQA1v8aXQaboICcAvONQJtXAvDUn5zKaAkKKFXgyfsAnJ3Uu/uVjgVmQQEoEKgA+V2AwPZwOBSAAoYUAAAMOQumQgFpBQAAaUXRHhQwpAAAYMhZMBUKSCsAAEgrivaggCEFAABDzoKpUEBaAQBAWlG0BwUMKQAAGHIWTIUC0goAANKKoj0oYEgBAGDDWf6TXffjdON+PQ7T4ye8avh2Gsa7cZw+ub7fv3n+uoYN6LNNBQCAlV9fXX/5WDvhyVDDcxqkRDiApwAA8KCTm/XP4/kjTzYlRwEEShxh1wwAYO9pSCs+BQSseEqlnd0DgHopqkqvrYw6TaeX+Ly4BU/psxEAuP486XNLuEV4dVu4ZjjDbXB3/NPC7O/d564UfHj77GXH7sTQIxToGwCNzP7e71gKRGRA56d0CwDO7O9m1atpvK29vubY6uIYAOg8myOGDwAciKZtXU3do4BlQEQGdH5KtwCgkmlQeHmNulcBAOg8myOG3y0ArH4QxardEbGJUwooAADsiKyt/PdmAgAFsqKjLgAAAKCjcMdQ1woAAIoA4Nb47glEPIyERC2lAACgCABUeV8qKLj94LIjVym9xwEASgDAvdavKZRw1UGTN+JsAQC0AMDoXYlaN0vj0qG/swAAACAp6gGAJPmqnwwAAABJQQgAJMlX/WQAAABICkIAIEm+6icDAABAUhACAEnyVT8ZADACgFqJRl2arGVX9cxpxAAAAAA4DGUAoJFM3xkGAAAAAABt5/jh6AAAAAAAAAD6U0BbaavNHh8RWu3qL2LzjBgVACoAVAB5cstEqwAAAAAAmEjVPEYCAAAAAJAnt0y0CgAAAACAiVTNYyQAAAAAAHlyy0SrAAAAAACYSNU8RgIAAAAAkCe3TLTaLQBMeAdGQoHMCgAAmQVG81BAswIAgGbvwDYokFkBACCzwGgeCmhWoCsAmHnvvuaI2bJN4XcUrUlYy96uAEA92FLLCa30i+8E2PNkNwCw+N59a+GE7wRY89gw9AMAo+/dtxZSeEWYLY8BALb8pd5aAEC9iy4M7AYAr66/fFT/0U1bsfPUWmwGmvNgNwBwnsEmYN74xOyfV98crXcFgBkCP35+PUzDTQ4xe2zTbfy5cX94++xlj+O3PubuAGDdYbAfCkgqAABIqom2oIAxBQAAYw6DuVBAUgEAQFJNtAUFjCkAABhzGMyFApIKAACSaqItKGBMAQDgwWHuSUH31/Pp/GKaxu+8H3u6echf0nsc+zh9cn8/nU93P7/7Zr7ch5+2FOgWAD7h78fppqckTw7fcbgFFJJVVNNAVwDw7wNw6iPphWLwAQjv3zx/LdQimimoQBcAwItACkUUYFBIaLlumgYAbvuVC5TglvBgULBkNU5oEgCY8WuE0k6fAIEiZzw1pSkAIPEVxxpAoNI5zQAA5b7K+Nqacm6xYajHV00AQOplH/46+NU03k7D+a/TOPy066oKMxr1PoPUl3L6S6N+zO6eiPnv0o9Pj8Mt7i3QAQHTAHABex7PH2OlXCb8+kYXKtmGCgAgQZfZplnvhxulRC6jZrY3Ni56Os8sAFKS3yW+m+X37m7jLCdqvP2Gsqv0W3mdPe6uyWQYAATVmGMSAFQipJbtZPuVApYDvRpgcnqTmnFCvJKuHNNaPcYcAGICLXRm1Fj++wCkbEvdB0gN9Bj/XPSJ/YFUFwSdbwoAocFFlfpbSnH6qDXLOntr7wNwo4uj42FbqAa4UicdZwYAnPJ3PZPEXG4iA7dyYFL2hVY7SdHDOJmyl2yist6kfcYPMAGA0ORPKYOpErvG7v8yxjha1KxQtvLBXz1IupwIEGRBjQkAkGXvQpqk5Ge8MlxDclGQStEgS5Q9NCpRDeD+AVkPqQcAN2gkSl+yLyWzEAlEJXbuhSqpMxXjysdHma/p96oBwA0UieSfL2VRHxBVEniULlJ65A5Uahxk/0r8Qdqp+AC1AAgJDomSl9OfhvLfxZLFfYC9HMD+QF066AUANRs/6CaR/PPsT63/lc02VLUipUup8CT1pwzB/QOUQpu/VwkAco3rhyKYlFRC1d79X3uP1EhQm6jIijxJAgQxl38jzTV/mjoAsANAMMA5fWop/33EUTZb2QfARmFdhqgCABXUXirp4Cb7FYSNlLtb2gfA/oBUVIS3owYAnIAOHx7OgALudQbj3fjwjQOnB+4l+C0q1ACAXIMjkqFABgWWcOgRDCoAQJbgGRyPJqHAkQK9VA3VAYDSH4loTYGWqobqAMDsby38Ye+eAharhvoAYN7wg7CDAlYVWIJB2z0KVQGA2d9qSMPuJAUUfUKtLgAw+yfFEU62rYCvDGpWBdUAwNr8U3gDju2Q69P6xweO3CcOJN5inEPGSrFeDQBU+S99t18On6FN2wosweBGUh0OFSBQDQCtPsxiOyVgvVegatVQEAQAAGIeCgQoUKxqKASBagCgbv219jx7QAwVPZTSufZTjq4SdIJsfl2oUBJIOUS8aigwfrUAqB2YUkFRux3NAKBs89pZjoWLiiHmI6uZIQAA1M7QzP1TSVYruahN4KUsLW0Ih4zba5CzGgYAMidg7ea1AoDcBF4I1xIA/LBCQZALAt0CwJVmzhn343TjneLXof6z4fPadJw+WX5MtAUAOD9IVSqa/B4CgVwQ7AoAzvk+4aM+aa3oFk5uZdEEABLXwdr9zq6GEnXYipkuAOADICrpt1W7tVIVaAWAk5WyLXUT0JLfuRCQXgo0DwCusNwZ9eK4DESOsuPgJCrJpErrWLv3ymC/DPvw9tnLmLYt+p1js/RSoFkAsJ41iImsjXOkqSxkVpfNWPY713bJeGsSACGbK2JZYqAaEBur0oZa8DtnDJJVQHMA4AiYLX4BgWzSUg235HfOUkBq6dYUAKoGwW/XEm9rPt9NJUqLv2/N75ylgNQyQC0ASgSqK6WupvHW9/Xzu2/u3N/9teLz6fwi5hFRKeeU0MB6H5xkWY8xl99Laim1DOgSAD4AfMJzHBc6y0iVaBzbej6Gusqx1KaE30v6QiLGugJATAAsHRpyXVmK0CUDylpfXCiX9HtJDSUqzW4AIJmQ3MCTcFDJgLLUF7f0r+H3YjoKbDr3AQABodZO5ezUSgZfsaAy0hELwpX8XkpCifhqHgASIu05lAMBVAHy6cBJ/tp+lx/10xYlxtg8AHImIKcMlXBSiWCy1AcHALX9XkJPidhqGwAZSsDQpYCEk0oEk6U+yJ1/BX4vpWfqlQC1AKAGxpl9qTYknMSxI+dsJDEGS21w9G7J7xTsUsdqFgBUGRgz885tupdPvHk+/8n9ofYCAACukvRxvfkdANiJCSrphsAy8CKwAs+lZqUYGNGp0OcRvfkdAIgEQMisuzmrBEAAACgHIwoArfkdAMgMgMOSkgkBAMAeAKz4vVkApJJcQhhqPTmHNRMCEvaUSyO7PUnobMXvlJ0SS8tqm4AUAKjB9RQIdtNV3vKe/E6NlTs5HXmhGgCosvnR6J0ZmAIIdy1opRSUTyWbLfbgd/ZDZ8zq1DYAIuOUCwDXfO5NwMgh4LQIBXrye+o9AF9XuBV/KJqnmBYSCE8gEEhWaq2WMg6cG6ZAN34PjNE9FasCYE68689TmIt5R1N7CFut5LoRiGcxjpJQoBe/S8z+1SsAZwB7LyAiOkJng4gu5lNyQSzWnt7Pa97vQrO/CgDsrsEFojhmNgjtFuV/qGL5j2/a74LJrwYAOSGQczbIWb3kT5O2e2jR7znGVH0PYB2G0jNqztkg5yZm2+mZf3Qt+T3nWNQBwIeG35CLeS33OrxyCCgNqvwp0V8PVv3u7Hbe8q+sD3l7daiX1QKAOxB2GS64duLO/DlKNq4urR8Hv8t42DwAnAzchCz6emhB4Mi4ur1W4Pd0nzYBgOBLcYHJyb41c+EPqeu06S5uu4WgS7Dw+5NgaAYA7JJwIYGrCMZx+nQ6n+Y11/rTYO7/7sfpZhymFyFphNI/RK20Y+H3NP2aAUDOS4lBEgfOMkFt4+BNBVRsyBr1e1MAqA4Bo0HQAleqQsCw35sDQDUIGA6CFgAAv8d5sUkAOCli1oZxEg4D1vyxysmfB7+HadosALwMOUvDHDeahLkPR+8pAL/zYqN5ADxWA6fzi2EabniyHB+Vej+BhA1og1Zgrgbg90OhugDARTXg/hEBguXtmTlvzaTDGkeEKuBvK4ffnyrXFQCWw/ezg3vWwP+/v97vk939f4n7sUMDGsfHKwC/X2rXLQDiQwhnQoF2FPg/0nNQhqZmwUcAAAAASUVORK5CYII=",width:"300px",alt:"",id:"carImg"}),(0,Rt.jsx)("p",{children:"You do not have any trips in yout list."}),(0,Rt.jsx)(lW,{src:sW,text:"Create trip",id:"createTrip",onClick:e}),(0,Rt.jsx)("h2",{children:"Explore Trips"}),(0,Rt.jsx)("p",{className:"attribute",children:"Need inspiration? Explore trips created by others."})]})]})};const cW=n.p+"static/media/edit.0958eed8bbea18080cb7a6c549307f3c.svg";const hW=n.p+"static/media/delete.bef6e229a17e0c233e16e96d1cc32250.svg";function dW(){return dW=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dW.apply(this,arguments)}function pW(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}const fW=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function mW(e){let{basename:n,children:r,window:i}=e,o=t.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:i,v5Compat:!0})&&(a={}),sv((function(t,e){let{pathname:n="/",search:r="",hash:i=""}=av(t.location.hash.substr(1));return iv("",{pathname:n,search:r,hash:i},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){let n=t.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let e=t.location.href,n=e.indexOf("#");r=-1===n?e:e.slice(0,n)}return r+"#"+("string"===typeof e?e:ov(e))}),(function(t,e){nv("/"===t.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(e)+")")}),a)));let s=o.current,[l,u]=t.useState({action:s.action,location:s.location});return t.useLayoutEffect((()=>s.listen(u)),[s]),t.createElement(l_,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:s})}const gW="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,yW=t.forwardRef((function(e,n){let r,{onClick:i,relative:o,reloadDocument:a,replace:s,state:l,target:u,to:c,preventScrollReset:h}=e,d=pW(e,fW),p=!1;if(gW&&"string"===typeof c&&/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i.test(c)){r=c;let t=new URL(window.location.href),e=c.startsWith("//")?new URL(t.protocol+c):new URL(c);e.origin===t.origin?c=e.pathname+e.search+e.hash:p=!0}let f=function(e,n){let{relative:r}=void 0===n?{}:n;Xv()||ev(!1);let{basename:i,navigator:o}=t.useContext(Yv),{hash:a,pathname:s,search:l}=Qv(e,{relative:r}),u=s;return"/"!==i&&(u="/"===s?i:kv([i,s])),o.createHref({pathname:u,search:l,hash:a})}(c,{relative:o}),m=function(e,n){let{target:r,replace:i,state:o,preventScrollReset:a,relative:s}=void 0===n?{}:n,l=Kv(),u=Zv(),c=Qv(e,{relative:s});return t.useCallback((t=>{if(function(t,e){return 0===t.button&&(!e||"_self"===e)&&!function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)}(t,r)){t.preventDefault();let n=void 0!==i?i:ov(u)===ov(c);l(e,{replace:n,state:o,preventScrollReset:a,relative:s})}}),[u,l,c,i,o,r,e,a,s])}(c,{replace:s,state:l,target:u,preventScrollReset:h,relative:o});return t.createElement("a",dW({},d,{href:r||f,onClick:p||a?i:function(t){i&&i(t),t.defaultPrevented||m(t)},ref:n,target:u}))}));var vW,_W;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(vW||(vW={})),function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"}(_W||(_W={}));const bW=t=>{const e=bU((e=>Kq(e,t.tripId))),n=()=>{t.selectTrip(t.tripId),t.editHandler(!0)},r=()=>{t.selectTrip(t.tripId),t.deleteHandler(!0)};return e?(0,Rt.jsxs)("div",{id:"trip-container",style:t.style,children:[(0,Rt.jsxs)("div",{id:"places",children:[(0,Rt.jsx)("p",{children:e.numOfPlaces}),"places"]}),(0,Rt.jsxs)("div",{className:"trip-content",children:[(0,Rt.jsxs)("header",{children:[(0,Rt.jsx)("p",{children:e.title}),(0,Rt.jsxs)("span",{children:[(0,Rt.jsx)("button",{onClick:n,children:(0,Rt.jsx)("img",{src:cW})}),(0,Rt.jsx)("button",{onClick:r,children:(0,Rt.jsx)("img",{src:hW})})]})]}),(0,Rt.jsx)("p",{className:"open",children:(0,Rt.jsx)(yW,{to:`/main/${t.tripId}`,className:"link",children:"Open"})}),(0,Rt.jsx)("p",{className:"editted",children:(0,Rt.jsxs)("span",{children:["Edited: ",e.lastEdited]})})]})]}):(0,Rt.jsx)("div",{children:"Unknown trip"})};const xW=n.p+"static/media/plus-white.05b8826396f790f3b0701080bcad264b.svg";const wW=n.p+"static/media/x.b2af6f834a3cc3dc34cf2bfb1d3b5c07.svg",EW=e=>{const[n,r]=(0,t.useState)(""),i=AU(),o=e.selectedTrip,a=bU((t=>Kq(t,o))),s=()=>{e.handler(!1)};return(0,Rt.jsxs)("div",{className:"edit-trip-container",children:[(0,Rt.jsxs)("header",{children:[(0,Rt.jsx)("img",{src:xW,id:"plus-img"}),(0,Rt.jsx)("h1",{children:"Edit Trip"}),(0,Rt.jsx)("button",{onClick:s,children:(0,Rt.jsx)("img",{src:wW,id:"x-img"})})]}),(0,Rt.jsxs)("div",{className:"content",children:[(0,Rt.jsx)("p",{children:"Trip Name"}),(0,Rt.jsx)("input",{type:"text",placeholder:"E.g Weekend road trip",id:"tripTitle",name:"tripTitle",value:n,onChange:t=>r(t.target.value)})]}),(0,Rt.jsxs)("footer",{children:[(0,Rt.jsx)("button",{id:"cancel",onClick:s,children:"Cancel"}),(0,Rt.jsx)(lW,{id:"editTripLarge",text:"Save Trip",src:xW,onClick:()=>{a&&i(Vq({...a,title:n})),e.handler(!1)}})]})]})},SW=t=>{const e=AU(),n=t.selectedTrip,r=bU((t=>Kq(t,n))),i=()=>{t.handler(!1)};return(0,Rt.jsxs)("div",{className:"delete-trip-container",children:[(0,Rt.jsxs)("header",{children:[(0,Rt.jsx)("img",{src:xW,id:"plus-img"}),(0,Rt.jsx)("h1",{children:"Delete Trip"}),(0,Rt.jsx)("button",{onClick:i,children:(0,Rt.jsx)("img",{src:wW,id:"x-img"})})]}),(0,Rt.jsxs)("div",{className:"content",children:[(0,Rt.jsx)("p",{className:"text",children:"Do you want to remove this trip? This cannot be undone."}),(0,Rt.jsx)("p",{className:"title",children:null===r||void 0===r?void 0:r.title})]}),(0,Rt.jsxs)("footer",{children:[(0,Rt.jsx)("button",{id:"cancel",onClick:i,children:"Cancel"}),(0,Rt.jsx)(lW,{id:"deleteTripLarge",text:"Remove Trip",src:xW,onClick:()=>{e(Gq(n)),t.handler(!1)}})]})]})},CW=e=>{const n=bU(Zq),[r,i]=(0,t.useState)(!1),[o,a]=(0,t.useState)(!1),[s,l]=(0,t.useState)(""),u=n.slice().sort(((t,e)=>e.lastEdited.localeCompare(t.lastEdited))),c=u.map((t=>(0,Rt.jsx)(bW,{style:r||o?{opacity:"0.2"}:{},tripId:t.id,selectTrip:l,editHandler:i,deleteHandler:a},t.id)));return(0,Rt.jsxs)("div",{className:"trips-container",children:[(0,Rt.jsxs)("header",{style:r||o?{opacity:"0.2"}:{},children:[(0,Rt.jsxs)("h2",{children:[" Your trips (",n.length,")"]}),(0,Rt.jsx)(lW,{text:"New trip",id:"newTrip",src:sW,onClick:()=>{e.handler(!0)}})]}),c,r?(0,Rt.jsx)(EW,{handler:i,selectedTrip:s}):(0,Rt.jsx)(Rt.Fragment,{}),o?(0,Rt.jsx)(SW,{handler:a,selectedTrip:s}):(0,Rt.jsx)(Rt.Fragment,{})]})},TW=e=>{const[n,r]=(0,t.useState)(""),i=(bU(Zq),AU()),o=(0,t.useContext)(p_),a=()=>{e.handler(!1)};return(0,Rt.jsx)("div",{className:"outer-container",id:"outer-container",children:(0,Rt.jsxs)("div",{className:"create-trip-container",children:[(0,Rt.jsxs)("header",{children:[(0,Rt.jsx)("img",{src:xW,id:"plus-img"}),(0,Rt.jsx)("h1",{children:"Create Trip"}),(0,Rt.jsx)("button",{onClick:a,children:(0,Rt.jsx)("img",{src:wW,id:"x-img"})})]}),(0,Rt.jsxs)("div",{className:"content",children:[(0,Rt.jsx)("p",{children:"Trip Name"}),(0,Rt.jsx)("input",{type:"text",placeholder:"E.g Weekend road trip",id:"tripTitle",name:"tripTitle",value:n,onChange:t=>r(t.target.value)})]}),(0,Rt.jsxs)("footer",{children:[(0,Rt.jsx)("button",{id:"cancel",onClick:a,children:"Cancel"}),(0,Rt.jsx)(lW,{id:"createTripLarge",text:"Create Trip",src:xW,onClick:async()=>{const t={id:Aq(),title:n,numOfPlaces:0,lastEdited:(new Date).toISOString(),places:[],userId:o,route:null};i(qq(t)),e.handler(!1)}})]})]})})},IW=()=>{const e=Kv(),n=AU(),r=(0,t.useContext)(p_),[i,o]=(0,t.useState)(!1),a=bU(Zq),s=bU((t=>t.trips.status)),l=bU((t=>t.trips.error));(0,t.useEffect)((()=>{"idle"===s&&r&&n(Uq(r))}),[s,n,r]);let u;return"loading"===s?u=(0,Rt.jsx)("div",{children:"Loading"}):"succeeded"===s?u=0===a.length?(0,Rt.jsx)(uW,{handler:o}):(0,Rt.jsx)(CW,{handler:o}):"failed"===s&&(u=(0,Rt.jsx)("div",{children:l})),(0,Rt.jsxs)("div",{className:"main-container",children:[i?(0,Rt.jsx)(TW,{handler:o}):u,(0,Rt.jsx)(aW,{}),(0,Rt.jsx)("button",{onClick:async()=>{await cU(),e("/")},children:" Sign Out "})]})};function kW(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return t=>{e.forEach((e=>{!function(t,e){if(null!=t)if("function"!==typeof t)try{t.current=e}catch(n){throw new Error(`Cannot assign value '${e}' to ref '${t}'`)}else t(e)}(e,t)}))}}function AW(t){const e=t.target,{tagName:n,isContentEditable:r}=e;return"INPUT"!==n&&"TEXTAREA"!==n&&!0!==r}function PW(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{ref:n,isDisabled:r,isFocusable:i,clickOnEnter:o=!0,clickOnSpace:a=!0,onMouseDown:s,onMouseUp:l,onClick:u,onKeyDown:c,onKeyUp:h,tabIndex:d,onMouseOver:p,onMouseLeave:f,...m}=e,[g,y]=(0,t.useState)(!0),[v,_]=(0,t.useState)(!1),b=function(){const e=(0,t.useRef)(new Map),n=e.current,r=(0,t.useCallback)(((t,n,r,i)=>{e.current.set(r,{type:n,el:t,options:i}),t.addEventListener(n,r,i)}),[]),i=(0,t.useCallback)(((t,n,r,i)=>{t.removeEventListener(n,r,i),e.current.delete(r)}),[]);return(0,t.useEffect)((()=>()=>{n.forEach(((t,e)=>{i(t.el,t.type,e,t.options)}))}),[i,n]),{add:r,remove:i}}(),x=g?d:d||0,w=r&&!i,E=(0,t.useCallback)((t=>{if(r)return t.stopPropagation(),void t.preventDefault();t.currentTarget.focus(),null==u||u(t)}),[r,u]),S=(0,t.useCallback)((t=>{v&&AW(t)&&(t.preventDefault(),t.stopPropagation(),_(!1),b.remove(document,"keyup",S,!1))}),[v,b]),C=(0,t.useCallback)((t=>{if(null==c||c(t),r||t.defaultPrevented||t.metaKey)return;if(!AW(t.nativeEvent)||g)return;const e=o&&"Enter"===t.key;if(a&&" "===t.key&&(t.preventDefault(),_(!0)),e){t.preventDefault();t.currentTarget.click()}b.add(document,"keyup",S,!1)}),[r,g,c,o,a,b,S]),T=(0,t.useCallback)((t=>{if(null==h||h(t),r||t.defaultPrevented||t.metaKey)return;if(!AW(t.nativeEvent)||g)return;if(a&&" "===t.key){t.preventDefault(),_(!1);t.currentTarget.click()}}),[a,g,r,h]),I=(0,t.useCallback)((t=>{0===t.button&&(_(!1),b.remove(document,"mouseup",I,!1))}),[b]),k=(0,t.useCallback)((t=>{if(0!==t.button)return;if(r)return t.stopPropagation(),void t.preventDefault();g||_(!0);t.currentTarget.focus({preventScroll:!0}),b.add(document,"mouseup",I,!1),null==s||s(t)}),[r,g,s,b,I]),A=(0,t.useCallback)((t=>{0===t.button&&(g||_(!1),null==l||l(t))}),[l,g]),P=(0,t.useCallback)((t=>{r?t.preventDefault():null==p||p(t)}),[r,p]),D=(0,t.useCallback)((t=>{v&&(t.preventDefault(),_(!1)),null==f||f(t)}),[v,f]),M=kW(n,(t=>{t&&"BUTTON"!==t.tagName&&y(!1)}));return g?{...m,ref:M,type:"button","aria-disabled":w?void 0:r,disabled:w,onClick:E,onMouseDown:s,onMouseUp:l,onKeyUp:h,onKeyDown:c,onMouseOver:p,onMouseLeave:f}:{...m,ref:M,role:"button","data-active":Ht(v),"aria-disabled":r?"true":void 0,tabIndex:w?void 0:x,onClick:E,onMouseDown:k,onMouseUp:A,onKeyUp:T,onKeyDown:C,onMouseOver:P,onMouseLeave:D}}var DW=Object.defineProperty,MW=(t,e,n)=>(((t,e,n)=>{e in t?DW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!==typeof e?e+"":e,n),n);function OW(t){return t.sort(((t,e)=>{const n=t.compareDocumentPosition(e);if(n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(n&Node.DOCUMENT_POSITION_DISCONNECTED||n&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0}))}function RW(t,e,n){let r=t+1;return n&&r>=e&&(r=0),r}function NW(t,e,n){let r=t-1;return n&&r<0&&(r=e),r}var LW="undefined"!==typeof window?t.useLayoutEffect:t.useEffect,FW=t=>t,zW=class{constructor(){var t=this;MW(this,"descendants",new Map),MW(this,"register",(t=>{if(null!=t)return(t=>"object"==typeof t&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE)(t)?this.registerNode(t):e=>{this.registerNode(e,t)}})),MW(this,"unregister",(t=>{this.descendants.delete(t);const e=OW(Array.from(this.descendants.keys()));this.assignIndex(e)})),MW(this,"destroy",(()=>{this.descendants.clear()})),MW(this,"assignIndex",(t=>{this.descendants.forEach((e=>{const n=t.indexOf(e.node);e.index=n,e.node.dataset.index=e.index.toString()}))})),MW(this,"count",(()=>this.descendants.size)),MW(this,"enabledCount",(()=>this.enabledValues().length)),MW(this,"values",(()=>Array.from(this.descendants.values()).sort(((t,e)=>t.index-e.index)))),MW(this,"enabledValues",(()=>this.values().filter((t=>!t.disabled)))),MW(this,"item",(t=>{if(0!==this.count())return this.values()[t]})),MW(this,"enabledItem",(t=>{if(0!==this.enabledCount())return this.enabledValues()[t]})),MW(this,"first",(()=>this.item(0))),MW(this,"firstEnabled",(()=>this.enabledItem(0))),MW(this,"last",(()=>this.item(this.descendants.size-1))),MW(this,"lastEnabled",(()=>{const t=this.enabledValues().length-1;return this.enabledItem(t)})),MW(this,"indexOf",(t=>{var e,n;return t&&null!=(n=null==(e=this.descendants.get(t))?void 0:e.index)?n:-1})),MW(this,"enabledIndexOf",(t=>null==t?-1:this.enabledValues().findIndex((e=>e.node.isSameNode(t))))),MW(this,"next",(function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=RW(e,t.count(),n);return t.item(r)})),MW(this,"nextEnabled",(function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=t.item(e);if(!r)return;const i=RW(t.enabledIndexOf(r.node),t.enabledCount(),n);return t.enabledItem(i)})),MW(this,"prev",(function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=NW(e,t.count()-1,n);return t.item(r)})),MW(this,"prevEnabled",(function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=t.item(e);if(!r)return;const i=NW(t.enabledIndexOf(r.node),t.enabledCount()-1,n);return t.enabledItem(i)})),MW(this,"registerNode",((t,e)=>{if(!t||this.descendants.has(t))return;const n=OW(Array.from(this.descendants.keys()).concat(t));(null==e?void 0:e.disabled)&&(e.disabled=!!e.disabled);const r={node:t,index:-1,...e};this.descendants.set(t,r),this.assignIndex(n)}))}};var[BW,jW]=zt({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});var[UW,VW,qW,GW]=[FW(BW),()=>FW(jW()),()=>function(){const e=(0,t.useRef)(new zW);return LW((()=>()=>e.current.destroy())),e.current}(),e=>function(e){const n=jW(),[r,i]=(0,t.useState)(-1),o=(0,t.useRef)(null);LW((()=>()=>{o.current&&n.unregister(o.current)}),[]),LW((()=>{if(!o.current)return;const t=Number(o.current.dataset.index);r==t||Number.isNaN(t)||i(t)}));const a=FW(e?n.register(e):n.register);return{descendants:n,index:r,enabledIndex:n.enabledIndexOf(o.current),register:kW(a,o)}}(e)];function YW(e){var n;const{defaultIndex:r,onChange:i,index:o,isManual:a,isLazy:s,lazyBehavior:l="unmount",orientation:u="horizontal",direction:c="ltr",...h}=e,[d,p]=(0,t.useState)(null!=r?r:0),[f,m]=function(e){const{value:n,defaultValue:r,onChange:i,shouldUpdate:o=((t,e)=>t!==e)}=e,a=Iu(i),s=Iu(o),[l,u]=(0,t.useState)(r),c=void 0!==n,h=c?n:l,d=Iu((t=>{const e="function"===typeof t?t(h):t;s(h,e)&&(c||u(e),a(e))}),[c,a,h,s]);return[h,d]}({defaultValue:null!=r?r:0,value:o,onChange:i});(0,t.useEffect)((()=>{null!=o&&p(o)}),[o]);const g=qW(),y=(0,t.useId)();return{id:`tabs-${null!=(n=e.id)?n:y}`,selectedIndex:f,focusedIndex:d,setSelectedIndex:m,setFocusedIndex:p,isManual:a,isLazy:s,lazyBehavior:l,orientation:u,descendants:g,direction:c,htmlProps:h}}var[$W,WW]=zt({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});var[HW,XW]=zt({});function ZW(e){const n=WW(),{id:r,selectedIndex:i}=n,o=function(e){return t.Children.toArray(e).filter((e=>(0,t.isValidElement)(e)))}(e.children),a=o.map(((e,n)=>(0,t.createElement)(HW,{key:n,value:{isSelected:n===i,id:QW(r,n),tabId:KW(r,n),selectedIndex:i}},e)));return{...e,children:a}}function KW(t,e){return`${t}--tab-${e}`}function QW(t,e){return`${t}--tabpanel-${e}`}var[JW,tH]=zt({name:"TabsStylesContext",errorMessage:"useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Tabs />\" "}),eH=ay((function(e,n){const r=hy("Tabs",e),{children:i,className:o,...a}=Nn(e),{htmlProps:s,descendants:l,...u}=YW(a),c=(0,t.useMemo)((()=>u),[u]),{isFitted:h,...d}=s;return(0,Rt.jsx)(UW,{value:l,children:(0,Rt.jsx)($W,{value:c,children:(0,Rt.jsx)(JW,{value:r,children:(0,Rt.jsx)(ry.div,{className:Gt("chakra-tabs",o),ref:n,...d,__css:r.root,children:i})})})})}));eH.displayName="Tabs";var nH=ay((function(e,n){const r=function(e){const{focusedIndex:n,orientation:r,direction:i}=WW(),o=VW(),a=(0,t.useCallback)((t=>{const e=()=>{var t;const e=o.nextEnabled(n);e&&(null==(t=e.node)||t.focus())},a=()=>{var t;const e=o.prevEnabled(n);e&&(null==(t=e.node)||t.focus())},s="horizontal"===r,l="vertical"===r,u=t.key,c={["ltr"===i?"ArrowLeft":"ArrowRight"]:()=>s&&a(),["ltr"===i?"ArrowRight":"ArrowLeft"]:()=>s&&e(),ArrowDown:()=>l&&e(),ArrowUp:()=>l&&a(),Home:()=>{var t;const e=o.firstEnabled();e&&(null==(t=e.node)||t.focus())},End:()=>{var t;const e=o.lastEnabled();e&&(null==(t=e.node)||t.focus())}},h=c[u];h&&(t.preventDefault(),h(t))}),[o,n,r,i]);return{...e,role:"tablist","aria-orientation":r,onKeyDown:Xt(e.onKeyDown,a)}}({...e,ref:n}),i={display:"flex",...tH().tablist};return(0,Rt.jsx)(ry.div,{...r,className:Gt("chakra-tabs__tablist",e.className),__css:i})}));nH.displayName="TabList";var rH=ay((function(t,e){const n=tH(),r=function(t){const{isDisabled:e,isFocusable:n,...r}=t,{setSelectedIndex:i,isManual:o,id:a,setFocusedIndex:s,selectedIndex:l}=WW(),{index:u,register:c}=GW({disabled:e&&!n}),h=u===l;return{...PW({...r,ref:kW(c,t.ref),isDisabled:e,isFocusable:n,onClick:Xt(t.onClick,(()=>{i(u)}))}),id:KW(a,u),role:"tab",tabIndex:h?0:-1,type:"button","aria-selected":h,"aria-controls":QW(a,u),onFocus:e?void 0:Xt(t.onFocus,(()=>{s(u),!o&&(!e||!n)&&i(u)}))}}({...t,ref:e}),i={outline:"0",display:"flex",alignItems:"center",justifyContent:"center",...n.tab};return(0,Rt.jsx)(ry.button,{...r,className:Gt("chakra-tabs__tab",t.className),__css:i})}));rH.displayName="Tab";var iH=ay((function(t,e){const n=ZW(t),r=tH();return(0,Rt.jsx)(ry.div,{...n,width:"100%",ref:e,className:Gt("chakra-tabs__tab-panels",t.className),__css:r.tabpanels})}));iH.displayName="TabPanels";var oH=ay((function(e,n){const r=function(e){const{children:n,...r}=e,{isLazy:i,lazyBehavior:o}=WW(),{isSelected:a,id:s,tabId:l}=XW(),u=(0,t.useRef)(!1);a&&(u.current=!0);const c=function(t){const{wasSelected:e,enabled:n,isSelected:r,mode:i="unmount"}=t;return!n||!!r||!("keepMounted"!==i||!e)}({wasSelected:u.current,isSelected:a,enabled:i,mode:o});return{tabIndex:0,...r,children:c?n:null,role:"tabpanel","aria-labelledby":l,hidden:!a,id:s}}({...e,ref:n}),i=tH();return(0,Rt.jsx)(ry.div,{outline:"0",...r,className:Gt("chakra-tabs__tab-panel",e.className),__css:i.tabpanel})}));oH.displayName="TabPanel";const aH=n.p+"static/media/filled-x.e85566f193d9cd8a5cb1697ae8d06971.svg",sH=t=>(0,Rt.jsxs)("div",{id:"empty-container",children:[(0,Rt.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKgAAAC0CAYAAAAAX2dUAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAqKADAAQAAAABAAAAtAAAAADUnGdVAAAg4ElEQVR4Ae1dCZwUxbmv6pndmb04RNGgRAnemqcJYoImShI8UNnLR4Q9kmiMz180ap4JGvUJGo2A4oX3mccegMtjdhcUDxQ0PDEqPi+QhxKNXCrHrsseM7szXfnXsLvuzvb09FHd07NU/1im+6v6jvr666+qvrooEXgVTmsb5fMrkwihJ1FKTmCMHAHyQyihBYySCGWshRG6C7CP8LchxmJrGjuXv0Hqfh7Ds7ykBgZogA6AmASUVO4dSVj2xTDIMqD+m0l0wghpxn8rCFWfCFXlrAI+QPKSGtinAcsGOqWyY4yfKbNgmNNBKkuEQhlhm1iM3VZfO6eGkFmqCJqSRmZrwLSBTpz6Vf7wwJDbKKW/RdGFGKaGCterTL2yvjpntUaaBO1HGjBloMUVHRMVQp8ilI5xWkdov/J/D7fT5hkvVh3S5jQ/Sd+bGjBsoCUV4T/Aa85BMRSXi/K+2qUW1S/K+cxlvpKdBzSQ2kCnPuMrzS56Amb5q3TJyxjbRZk6ZWlN7hvpkkHyTY8G9A2UG2ewaAFE4z30tF7o2u9VWezchurc19MqiGTuqgZ0q+uSQNHjkCbtxsk1gi+pQKG+54vLWk92VUOSWVo1kNRA97U5ycVplS6BOTdS6vM3Fk5vPTghST4OUg1oGmhJZcdPuztEnis2RqVG+/z+JYiTasruOYGlQLY0MKANOrl895AcJe8DVKrftkXZYWTEoK4PVQd4VEFeg1gDA7xQDs270+vGyd8HvqxbSy6KHDeI340sGjTQz0CLylu/iyD8pRmhGUqyaTa7KyNklUJa1kA/A1Wofy4o9YNZpuwKIj2vuLzjZ66wkkzSogF/D9fSirbvw3ue2/Ms4hdDlZsxN2kjKuRm1MnZuB+Nqvkk3OeIoM9pKAq9ET8vi6In6XhLA70Gyoj/6gE9Jmuy7oEhzotFY1UNi3K3JJI4Yer67GMCY89C4P33iBQI8H70JyUVrSeFqvPfS+QlnzNfA3GbPL+seXhAyfki7uVslImp7P69ne03r6w74GsjZIrKwucoPvI4Dx0ZyZ8sDzz146Gq4GXJ0iU8czUQb29mK4FiO8YJbxhhTK0I1QSvNmqcXGUNtcEXYtHoeOCvtadCWjpx4qre2sAeLYntJQ10d4joVDtCqap6Sag6B5OMzV+NC/O/DKut52JCyAbz2PswUA2MGDpqgoDmglUJJJ5TGlDGjXs7C1XsRKsMYFj3NNTk1FrF53graka0sC5SiLar5XmfikLOsSODxPWmBpTDjz1+nNVeNZ8GF2Zts0QUrX5xED1+9R6rtNDh+rFVXInnXQ0ojCqn2RBvLvd+NvD7oUb3ts7FEKYlesA7ecqU7bn9CMqHjNcAVnCQY62Ugq/HoCRWbQU3GU5j40F7kVafLF0PjsV7fv/QIUfp5ZFpmacBBe2+sZbEpmzj0uq8HZZwdZAYVVfpJOsmMZJ1pG4GmZhxGlDQAz7CotR88wXhFxyzZbqUsDHCBZIE06oBBTHIIVYkoIw0WcFLhaN0KpbpYueSoanoy/TM0gA8KM2zIjK2sHFkTXxU6bJMV1VovpWySBzvaoB3kgJWxKOU2RqeTMZToVmHJUtLBUdzJZgqj0zPLA3wKj5sRWR40O85seyC+uh4K/JwHKtlscpP4jmvAfTiWbMVNvBWw4orrjvDCq4eDuhO0UvXS6Mqtdx+1aMr09KnAQUjMNutsgfuNVZxtfCKKtpPg4GeqpVmDKYKD3sZ4ytzOaUBPllks1Xi6GAVFZa3n24VPxFPIcrsRJipZ8V6WUzxkZld04CisvhmspYZ+qnydHFx0zDLBLoRi8vD19odT8f2OJZjqHbll/jOaABj8ewdW6QpPUopyKmbMHWL5WUcJWWRIizd4OuhbFzsCydGtmwIJFEFaACz1Lr+bp8OnfSt4MjXLpjafqhZWtjB5D+pQv4HePYW6zHyhlneMr/3NaCEqgq+gpjvCxD1lKyg78PiysiMiRM/TRmPLKps/0FpZfgVVOvzEIv12eWPmSsr7dKQ+N7TADrNhMCLzYWh/FGUeHyeKIxuCZaBrFJj6kbKlCb8ZZMshlWddDyYFmEFqbDOFZc7ythRjdXBT0SVQdLxhgbiBsrXliuKkrkeiLF/LK0OWpuV5Y33IKVIooF4uy+yZ+sajMLwuZiZej2XqYJLufU1EDfQFSuOimCcMKSf1bupMaIu9K50UjI7GujtOaPdaGlVph3mInAxf/Qz7Lq8VgQtScN7Gug10PrOxpdhpF96T0R9iajKuPdEC0Veg1EDvQbafRyhreXD6VAQiypV6eArebqjgW8MFPxihDzKF8O5w9o+F4j6amhxQA5v2lelZyn0M1DEEf8fteUrnpV2gGD0wQEgCRhUGuhnoLxklGXGS0d7ecfnGz6wtER5UL3BQV6YAQa6tLOhEVXnFq+XGzP6H1237pQur8sp5bOngQEGyjtLVCV32yPrMDYjHbFYRFbvDqvZC+QHGiik2tPZ8gQ6S55dPoHq/allC4fs8oICpQzOakDTQFfXjWzF5F9veihGYlGFzXNWLZK6VzSgaaBcOKZE5yPg1OEVQXvloGTxsqqcT3uf5c2g1kBSA+XzRNFZethjpVdZJ7nNYzJJcRzUQFID5TxjsehcRO3bHeRvijTaxYtlYN6UyjI+s66B8u25sSGXV7yoSrrInzNe47IApjSga6CcEiNdXvGii6T3NPVuB0XmlAbK26JUVe9LZ2lRtUexpGNmOmWQvNOjgZQGysVS28J8a+40xkXZk3K9UXoMJN1cDRloff1wvn/TnLQIy0eNorFb08JbMk27BgwZKJfyi8hX9/MJGq5LzNj8xkV5lvePcl1eyVCoBgwb6Nq60R3YCc/tduAeta3jDqEllsQySgOGDZSXKtS57Cl4UcsnwpnVDHjd3t28MIsq8w8SDcTXxZspS0l5+AKq0GVmcKzkxSjWZ5vCm49ZX3dCpxV8iWNMA/xsqayhQ49VVeUESpUxmBA8FJg4tyC+nTqGulkL3kULNtrYiiMv18dY54Zna4e51mE2baC82CWV4dXYIeRMYyqwlktlsbL66ly+IE5eAjXAj0Mfm/Wd0/2UnksU/BFyIv5M1aTceeAQjRdxUtbz0b0tK7vPtxIo5TekLBlo4bS2U3x+/5s4PMsS/jfste8Q0norVB34AVIx0iovERqYMj1yrN/HfgNP+Eu8tBEiaHbTCON9LSEx9dHQwpw1AunGSVk2sJKKSDUMtFy0QJxejKlnNFTn/M0J2vsbzeKy9lOpotyGvbfOcrrsMNQP4FlnLq0JhETxsmygU6Z2fDsrqGCRndiTNdAxCoWqg6WiCri/0imsCB/jJ2Q2PGax2zpAtfcmiaoz4FFftcvbVNujL7NldTmfM6Le2xcm4L6rSyXXCaCz/5KY+owPtdt1PkrfS4dxcsXD651K/cpq7Jr4SGHhzgI7L8OyB+VMJ5fvHpKj5GHLQ3qQHSF6cJnK7g/VBK/ueZa/5jRQfFF4LM2mtdxAzGE6mJuxf0ZV9ovG2pzXrHCx7EE5s/hR3CqZZYVxIg6qhWbS3nlrIlw+G9NAUVl4kpJN3/SUcXLRKT3c71NWIjx5ubGS9M9ly0A5qT3b1j6GzvbG/mQtPCEoHwoN2W0Bc79HQdjvCp9Cn4ciDvCoMrIQO3+4uCKMdW6zTNmcqcxahV+9+idRbJkzQyvNMIyxT8O7t8w3nF9m7NUA33Id0b4H0PDz9QI9eoNDuX5bUvGn/zZjpLYNlOuioSq4DMHbV63qRSXqjfE9Sq0S2E/xeGcILzA9s8ws6hyhyQozRirEQLmsLKZa8qJoe67DiNEii+Xdb9FKKzouxcuenYkK4EZaWnG9oUnwwgy0vjb3TQRqnzGrsFhM/SNw5IiRCcUVlnWcQajykAkU72Wl9MrSivB/pBJMmIFyRqyL3YAfw/slISi/AuGHVamElOnfaOC8so7D0SHi50plfQPN0DtK58c/Nh3xhRpo/eLgZhjdUzr8epPgbRlmyt/YC5A3RjRAAwr9K4YtDzSSOQPyZPkVuoDH05PJKtRAOZOuiMqXBhs5g74OM+X/L5lgEj5QA6Xl4athnBMHpmQwBHHSoJJ/T7ISCDfQ5XW521DZ6+/rhP2VYoTdnEwoCR+oAT5KhKD3XwamZD4EgwuXYKDhHK2SCDdQzqQj3DUHvZ52LYYchrSafbs5J8sh4YkaoFl84gfJSYQPlmccGns3wTyCxPI4YqAr6gp2Yv3SI4nMup9VeM9B6QmSlNc2uGR6+wRU7f9um5CHCaB8xxcHC3+dKKIjBsqZUBK7Cz8D2qI8FCW9Z+JrSPHsV2weVZ6CvkeSMZf01sSDiB0z0PjZ7Yw9nVh2lXVJ75moFJ1nfio0hjJ/pJNFYBLbhijM86j9HsPvPfh9GL8h/PF5v45f8KIHH3DYIRV9GWFOq3NXlJD7fIxcjpEDtIPR9mTs5Yaa/A+c4zj4KCvMd80+7TlVNhilSh+LUbZYr2YrnN56sOLzl+JVXob3ebJT0mAA4hrQfqKHftxweh6c+MWZ8JhlQ+M9NLQ9C/m4vRN8BiPNC6a2H5oV8H0GgxDuSNDU4qs1b/44svlhsytnS8oiRVSBh6V0jBN6j8XYWQ21wZWctvCCDxCYkfnwAOfAfX7aUD372QHpCYDS8rbxKvGdgZkvgYQkIY8q9pOELM2oTnZRFt28Z+tXG1avHjOgrSyEmU0i/mxlmkPG+UY0ol7EV0VYETFUG2g4u/KLlflkON+as9IKDT0cRaG8mo8bqOMelIcOSgKF27De+tFQVc5MPcFKyzv+TBTlJr08wtMQk2WUvIsd/FYQqobQdn5HOA+LBEsrIm/g4+arW4Vd+DobmrbsmCbqoyyuiMxUKJklTEAQQhiyeVP4k4O5Z3feQMEQs6nvi1HykF4bp6Ry74mUZKe9fYqq713C1PlN295YwOe6ilS8GVrdixL/aQYnVV7eB9gU2Xye2So9FV2sPZqLGolP+hF2YfnPFCz/We5YL76vpJHO6B16xhnPq/pP7YuTrnveAcAy3SeHj56wEd7hwnTJkRWgk4XyZmwraeu8SLRxchlD1bOv58YvUl68h/M4PVcM9Lm6/C9SCa8yaqk9lIqu1XT0Vsei6loC79DAe7BW6VjFw0l6P7KKq4WHGuy3zi2pmaVGVPZrVM1JRw+1ZNKD9ZTfFQPVE6QnDb22l9E+erXn2Su/qLoKfT7/O0UV7ae5KhNlwgyU69Xp6MlztTlojqj3C9TRicXFTcOc78Ubl5hFm/eclzV0xLXoUJ2BtqAjvXh0OlB70Dy8tAOxt9Bh/CGViDDSUQrxvYIqf1p9daA+VX676aUVbd9CaO4Iu3R68DFCc2fPvZO/mD55r8+n/AE6tW1X8feSn/PDlC/HyQKlmzbf2c2fP3w8lpudDbMtg60eoScTPpooXvZ0bO2yRC+f3bTiio6JClVW2aXD8dE2/CoUaRzFz2AVQS8VDTSJluODPj9VPkPpKvu9Z6p4QwILzrRs2ah2vj1LqDrnxlBV8Dt4m0UwwqRhJu4ZmEKqiyo6fixYlH7k8FKO7Aew8QBjWemWcXIx0Q7FwIyYC7SO3K8NNEGNbGl1sDFUfcd4orIrkjX4UeUEFEKXnDe19ZAEfGGPiMuOFUZMZW8Jo2WAEKOqMH5UkQaqofJZ6tKa4EPRaOep8Kj/0MiA1gAdGQj4F2ilCYEx5TAhdEAEH9onomgZoaO0RoXxQ202WnrQJFpftrBgfTgSPR1tuA1aWWCkZxWVd5RppdmFYTQ23y6NHnyVsq977t34bWpaJ4wfmlT50kB13hqP3+JYcj6PYKtWNswXuHPC1C3iZ7njxWjxswJjauoohRW6yXD27i0Q1vFmjBZIA02m6W740prcrTGiXsR78IlZ4UVHHRI86JJEuN1nBKnz7NLowVcUxdX9mg49+lhh/KQH7XmLKX4bqnNfR2tOc+Uhwk7XAl2Y10ghiulkNBeOMo1kA8FHfEL5SQ9q8GU0RVpuhZHuHJCd0jHYfEBs2ImxjgF8rAIo+aFVVEt4PiqMH2qtDmmgBt/C6rqRrZh5rrmfEDYfmGaQjKFscMcthjIayEQZ/dnkyR87Myqnzf98bbB5KLx/izRQE3qjNPoU4jZaIzKTTJAxknWHkUyG8lAyNHjgoSWG8trMNKWyYwxaO2faJNOLjrb4DmmgvepIfcMXAjLK1gzISelR+8bPB6RYBFDNqIFFYmgg+2YA1/F2sp/QGfExdKuCJuDBg26TBpqglJSPKn1FK09M9Z2gBbcEY2STJbzkSN8rqej4VfJk+yl8wjkm31xqn1IfCtCDNNA++jB0y8h7Wvl8lBytBbcCY0rnRit4ujhUubt4WscRunksJvI2LlZDLOBzFSyS0ERDbbVRGqimanSAvs7NmqmUjdSEWwA2bXl7I9q64nrykAH1+zAcDVM/aeqeoRZE0kOhwRHffhIZvqeXyUpaLKq+Kw3UpObULt/Xmig0fviqZpJZIF8LxRfymcVLlR8e7qQhgbwXSkpaRqTKayh935lMT4KuEycOhlu+ePMDaaCG3sQ3mXw+Pv9i4IWYnVhdMrZ2IBcBEKwSpXnZbxaXtY2zQ413CkuDhS/BOC+2QycpLmPr+IcqVqlJuQ2eBBb1aZ6chhn6rUJLycgqofT6EqP0O1Txv1FcGb5n8tS9B/VNSnXP907CcTJXY0uFj9Bw+Emq/JbTGYuXX2ij1rIwGYTI/OwI7VUiVOgZT2HS9loOy4/xGJET6uEdGpTjmmAw+zKcFrIYs7YWxVr2rOGTuAfwQ1VenHXBOMzyvxBNj19iDoLjiwgxMVwa6IAXYQSg0O9qZUNVJGweJKfPT/HD8onXYURih1EThEfnKRcfwcUwuouVYSO6cCjYJ2jEbEG2NvwFAT8Ez0cjT3wCC/I7fzHSuinyjzWckfSgJtVNGZvIl90lXhGVoMoTfi0DRUcNNEHiLHwQx8EYj+sHH1jcfsmiHxBeerFn/b5sg5rQLl8GC+P8aSIKqsftz9YGNWffJ+Y18xwjpNFM/kGTV2W95ZYGauKtKnk5WPmptRxae3TJBGnNrN27sbyvmThYgYx0srZwQ0/xpIH2aCLF78SJqzDUTP6glQ3LKkwfYKZFRwuGGfGO0dbil24YoiEv1dcPb+6RQxpojyZS/A47dMLVqN7HJGZD9b5r64YPn0+Ei3qOKmotYqyasVdRPLxEhxG1pq880kD7aiPJfclF4aOx/ugWrWRMCXtg3bpTDJ+up0VDD7asKudTzOr5m16ewZKGD7Hly8jufju3SANN8XYLC3cWkCy6pCfM0jc73Nrejkh4fl+YE/doQjztBF3v0WTPrK0b3W8OgjRQnbfEt8bxDSmoR1RJM/aJPSxveaFu6B4dEkKSvgzvQiCdNAkh5mEiOBnm4UTxpIEmaqT7mQ8B+oeNWIlA9U+1ssBgPtiy8cP7tdJEw/Z5lUHuRRn5u9bu1tJANawJIzhnBQNZ7yKkNEEjmW/X0aEyMs3JtmciX8REcSTM4O0soXP0UGKZ+bM00D5aKSqPHF9SGXkGXvNF/I3qk9R7y40EyvxNQ01gQy/QhRvERDGUyl5ygZXrLNCW39209QvNcNp+P9RZOK1tlJKlnI3Vj3wbm0nwmvinczFyQ6gmp18oRCe30CQI9iAIni2UqBeI4Qj3ZIc66L8MLwivIUPRtPbROA3kGMVHjoFXGYm1MAUwq3xsopCyRmBwjSh0HuKXBwLnaIw9j9ZgoQlSCbmuviowVzPRFeAspaTy+o8gs7DlJa6Irc+kK9YVG9uwKJdPUBlwZYSB8jFwmh8sQYvkLBjkRJgYdiB28UKbE9X65dhHdIGLXDVZlVZ0XIrT2B7XTMxAINpLC0LVgV8mE93TVTzOEJ/kU8jl8HoX4Evq3nzA3W8KTc6PmBotq6/NF74EI9lL0YN37N5aFRwx+lbXP1I9oSym8fZ8NNapWyO5+7YNFqSoMjxFYfS/UBePN4giPBsa7u1EJXM2dX4yu2fql3AmFgligvF10M1si+ieQUMz69lQdfACPYE85UELK8JHYvr4fLSxzk3RVdErk700Rr7Gh/0koV1zQjUFX9kj5gz23kjbIwWBvBtgpEOc4eAOVZWwOak4ecaDYp3Llai27vqmKk8lurh0VDUtaNu+jJGh0Jddu5YkDreJ4ySOEjZiuJ1S5QZxFN2lBCewBucCpJyMnXYPOrl895Cgkvc0vGapWRWhitgBT7sZeM3A50sUEM/Wv3i7B5FMHCbLdqkq2UyV2PtNW99an85jD/Ul1k5tj3TOyw0Gf4cPWnMRnzaWl6BsphFp0upB+Qlufn/WCghqbNE/Y/9E27AORvZKhLT9L1+3Y6SQgzVPSWXHbZQoN2Za+eBY/oa25xlG5E6bB+WHpfr88ZnoY/UE5R4P082WsxibhyNjXkNe2Ki8uAbaw513w4telXFelLJZRt9gWjwo39mC5mevwaDNsXqC8i8NIZ6rvBLi0ZM1XWkZ50UZew3H/ZxpVF+ue9D4Zqp5geUQMKlxwkW24/CCqxEYf8JoQfbXfNyL5gWCV6ItLnrPJUdUip77TDOEUw4NmiFmJG/wgNHzEB5Jvk00Yx+j8zJ+qTROI+okfD4qmkF3Gsqc5kyoEV+sr85ZbUYMVw0Uh7EWU4VeoSPg2x2RrtPdnimkI09GJLUpTffi5X/pZWF5X4KpMdNhMdcMlIeTFMoGzJjuUSoK8EFLuG3SirqCnT0w+WtMAy9WHdKGZtFtxnKnKRclS+pr89aZ5e6agQZpHtoe2EZF82LbYtHouSvrDtDe2lATRwL7auDjyObH4KM+7QvzzD3f17+T3WRFHlcMdN/OvvQqTQEhfDTGyhoX5W3XTJdAQxrg8wVU1VwHxBBhAZlQuz8dWhzcZIWUKwaq+Om16BhpRgxwOu6djbXx+KYV+SVOHw3U186pQVPJE7OuesRC06MdHgi1p7XLcQPdt5sv/bWWePiytkSbm/6slSZhVjQwC3Oq2QwrmE7hUFW9207t6LiBkvzsaYjRaR+4ythMzf0ondLWfkAXQ4gv8XCON4rKdkb3turO90wlp/MGSmi5phA4Qfjzj9ZXa6ZJoE0NRLkXhTdN74Xq/ZbGxoP22pHCUQPl+5hjLFVz6S5OiX7CzWW7dpSUabih6vz30BZN78ePAZemLWsftas7Rw0USzXOTCYghrzSsjIymTyDDa5GYzfx9ftpKxej14mYwuiogWKRWxIDZRv3rfNOm/oGPWO+ShIL/e5JR0H5JJ+lNYGQCN7OGiijJ2sJibbJai24hInVQKyldTaMxdVlK3xIk7LYtaJK4qyBUnKUlqDY5930kJcWHQnT1wDvoKAPcLN+LrGpiHcvXFqT95Yoqo4ZKD9yD8oZoSVoVBV+WKoWGwmDBpZGGp+AF3Vrm55wV1j9k0jFO2ag+b6c4ckExeE/W5OlSbhgDdT9PIbpi38UTFWTHNq89y6ry/lcM9Ei0DEDjdFoXjKZ1K4uW7GxZHQlXFsDDbXB5+BFX9ZOFQVlO8Nq+x2iqPXQccxAKVOye5gk/ipZsWgiTD47qwEsneEHQDgXvFfJLCcWMTpmoDElyanA0FKWGsiI5QnOmoy71OPrulSywBmubOOebWsfc4K2YwYa7Yo0JxNYJeqBydIk3DkNdHbGbkKIr100B2xGMENEUF5LLscM9IW6e7iBhrWY+vwKtk2Ul9saWF6Xu43PLhLJF23b1Q1VwWUiafal5ZiBEjJLRdB2Y19mvfeUnNh7L29c1cC+2UVMyLIaHpTHXE9HIwQOGigWeFCiHX9jykRX34pk1qsBHrxHNX9LL8DezWLM9XzbHgl9bEcNFC50rRZ7BPDHn1/WnDROqoUjYeI08PmGD/n6pY9tUcSZmp0qc3zbHWcNlJCXNJVAiS9LCU7TTJNAxzUQn+bIqOklwH0Fw+FiDzlxwnNfHvzeUQONn9aLDb8SmcYZU3qJFlzC3NEAZhstQRvS0pg5mgh7Y9HO292Q1FED5QXA1JZkE2dP4Vt8u1FIySOZBqxV0diW6O5lC4fsSkZVJNxxA40x+tdkAvuU+AGtaJLKKx0a6F6/tNoMb3jP3dGW1nlmcOzkddxA+cRkxMqe1xSSktOwU/CvNNMk0B0NxFRzbVHGZttdZ2SmYI4baFyYmHprMqGwjfVd8XOPkmWQcEc1EFqYuxYO5FkjTJBve9PWHQ8YySsqjysG2q0EbS9KyAFKlm/xuHFvZ4kqlKRjTgOYAW8oLorqfW6yE+HMcTSe2xUD5eJ0qeQqFDCiJRoaoRMOP/67f0WabI9qKchh2L4Z8OwFPTbwnl99GdnpyIQQPb6uGejy2uDHCGvozRcsK60IP4IhUtdk0lPM/pbGouw2vTJjhe68dJx+4qoxNG99/XYM365JqghKLyutuP6ZCVO3aO9EkhRRJtjVAPb/XwMvuVqLDu+5N4e/fkgrzWmYqwbKp2RhzQpGkHQmK1B64SGBkW+WXBQ5zunCS/r9NYClIUlOr1MfXF03srV/bneeXDVQXiQ+5StG1CnYVICfa6R5YZLJiTSbvIMdmWfG97TXzCWBojWApSG8Hbo+gW6YkOiDCTDXHl03UF6yhqrcv8dUdiGMtFOnpEGFklnBA0d/zE+hk9W+jqYEJjFVva8vOfQbFoaq0nckZFp7zXyoU/HRpRAi5WlpaAc1Yz39MzGV1H29fccat8MdfV/aYL6fMmV7btbQEdt7Tg2JdkXHOz2lTk+faTVQLhg2GPs+ob5GRJgO1RO0bxoPV1FGsPkD+0ildDNVWRM6X60EAb2++eQ9NIS1wApVN/INxYzqo6Q8/AA/7AK47+As93FG8ZzIl3YD5YWaMr3lQL8vewEOk53sRCElzbgGapeGG35BsE4+lT4Kp7Wd4s/yv0VUdtXSmuD8VPmdTPeEgXYXkKKteTmM9C8QapiThd5faaN9eVmoJudxI+UvqQivD0e6Jqb71JW0dJKSKIjVVwdxTE3nMYjH8RPmupLkk2CrGqCK8emNlP0u3cbJi+klD9pP7eeVdRyerdAZCqG/gJT5/RLlgyUNYAnOQ3ACV1hCThOSZw20Rx+8V+kbMrxUUeh0zH4+E8aadEudHhz5q6mBcFe085RlCwsS45yamb0C9LyB9lUUn/F02HEn/JAyeiqC+cfCWPmBtCMRTx2KJaQFKIyXmix9RU/bPSIebejKr1OpejOPP6dNEIuM/wUYXWUxxaKyWgAAAABJRU5ErkJggg=="}),(0,Rt.jsx)("p",{children:"No places yet"}),(0,Rt.jsx)(lW,{src:sW,text:"Add Place",id:"addPlaceBtn",onClick:()=>t.show(!0)})]});var lH=[{code:"AD",emoji:"\ud83c\udde6\ud83c\udde9",unicode:"U+1F1E6 U+1F1E9",name:"Andorra",title:"flag for Andorra",dialCode:"+376"},{code:"AE",emoji:"\ud83c\udde6\ud83c\uddea",unicode:"U+1F1E6 U+1F1EA",name:"United Arab Emirates",title:"flag for United Arab Emirates",dialCode:"+971"},{code:"AF",emoji:"\ud83c\udde6\ud83c\uddeb",unicode:"U+1F1E6 U+1F1EB",name:"Afghanistan",title:"flag for Afghanistan",dialCode:"+93"},{code:"AG",emoji:"\ud83c\udde6\ud83c\uddec",unicode:"U+1F1E6 U+1F1EC",name:"Antigua and Barbuda",title:"flag for Antigua and Barbuda",dialCode:"+1268"},{code:"AI",emoji:"\ud83c\udde6\ud83c\uddee",unicode:"U+1F1E6 U+1F1EE",name:"Anguilla",title:"flag for Anguilla",dialCode:"+1 264"},{code:"AL",emoji:"\ud83c\udde6\ud83c\uddf1",unicode:"U+1F1E6 U+1F1F1",name:"Albania",title:"flag for Albania",dialCode:"+355"},{code:"AM",emoji:"\ud83c\udde6\ud83c\uddf2",unicode:"U+1F1E6 U+1F1F2",name:"Armenia",title:"flag for Armenia",dialCode:"+374"},{code:"AO",emoji:"\ud83c\udde6\ud83c\uddf4",unicode:"U+1F1E6 U+1F1F4",name:"Angola",title:"flag for Angola",dialCode:"+244"},{code:"AQ",emoji:"\ud83c\udde6\ud83c\uddf6",unicode:"U+1F1E6 U+1F1F6",name:"Antarctica",title:"flag for Antarctica",dialCode:null},{code:"AR",emoji:"\ud83c\udde6\ud83c\uddf7",unicode:"U+1F1E6 U+1F1F7",name:"Argentina",title:"flag for Argentina",dialCode:"+54"},{code:"AS",emoji:"\ud83c\udde6\ud83c\uddf8",unicode:"U+1F1E6 U+1F1F8",name:"American Samoa",title:"flag for American Samoa",dialCode:"+1 684"},{code:"AT",emoji:"\ud83c\udde6\ud83c\uddf9",unicode:"U+1F1E6 U+1F1F9",name:"Austria",title:"flag for Austria",dialCode:"+43"},{code:"AU",emoji:"\ud83c\udde6\ud83c\uddfa",unicode:"U+1F1E6 U+1F1FA",name:"Australia",title:"flag for Australia",dialCode:"+61"},{code:"AW",emoji:"\ud83c\udde6\ud83c\uddfc",unicode:"U+1F1E6 U+1F1FC",name:"Aruba",title:"flag for Aruba",dialCode:"+297"},{code:"AX",emoji:"\ud83c\udde6\ud83c\uddfd",unicode:"U+1F1E6 U+1F1FD",name:"\xc5land Islands",title:"flag for \xc5land Islands",dialCode:""},{code:"AZ",emoji:"\ud83c\udde6\ud83c\uddff",unicode:"U+1F1E6 U+1F1FF",name:"Azerbaijan",title:"flag for Azerbaijan",dialCode:"+994"},{code:"BA",emoji:"\ud83c\udde7\ud83c\udde6",unicode:"U+1F1E7 U+1F1E6",name:"Bosnia and Herzegovina",title:"flag for Bosnia and Herzegovina",dialCode:"+387"},{code:"BB",emoji:"\ud83c\udde7\ud83c\udde7",unicode:"U+1F1E7 U+1F1E7",name:"Barbados",title:"flag for Barbados",dialCode:"+1 246"},{code:"BD",emoji:"\ud83c\udde7\ud83c\udde9",unicode:"U+1F1E7 U+1F1E9",name:"Bangladesh",title:"flag for Bangladesh",dialCode:"+880"},{code:"BE",emoji:"\ud83c\udde7\ud83c\uddea",unicode:"U+1F1E7 U+1F1EA",name:"Belgium",title:"flag for Belgium",dialCode:"+32"},{code:"BF",emoji:"\ud83c\udde7\ud83c\uddeb",unicode:"U+1F1E7 U+1F1EB",name:"Burkina Faso",title:"flag for Burkina Faso",dialCode:"+226"},{code:"BG",emoji:"\ud83c\udde7\ud83c\uddec",unicode:"U+1F1E7 U+1F1EC",name:"Bulgaria",title:"flag for Bulgaria",dialCode:"+359"},{code:"BH",emoji:"\ud83c\udde7\ud83c\udded",unicode:"U+1F1E7 U+1F1ED",name:"Bahrain",title:"flag for Bahrain",dialCode:"+973"},{code:"BI",emoji:"\ud83c\udde7\ud83c\uddee",unicode:"U+1F1E7 U+1F1EE",name:"Burundi",title:"flag for Burundi",dialCode:"+257"},{code:"BJ",emoji:"\ud83c\udde7\ud83c\uddef",unicode:"U+1F1E7 U+1F1EF",name:"Benin",title:"flag for Benin",dialCode:"+229"},{code:"BL",emoji:"\ud83c\udde7\ud83c\uddf1",unicode:"U+1F1E7 U+1F1F1",name:"Saint Barth\xe9lemy",title:"flag for Saint Barth\xe9lemy",dialCode:"+590"},{code:"BM",emoji:"\ud83c\udde7\ud83c\uddf2",unicode:"U+1F1E7 U+1F1F2",name:"Bermuda",title:"flag for Bermuda",dialCode:"+1 441"},{code:"BN",emoji:"\ud83c\udde7\ud83c\uddf3",unicode:"U+1F1E7 U+1F1F3",name:"Brunei Darussalam",title:"flag for Brunei Darussalam",dialCode:"+673"},{code:"BO",emoji:"\ud83c\udde7\ud83c\uddf4",unicode:"U+1F1E7 U+1F1F4",name:"Bolivia",title:"flag for Bolivia",dialCode:"+591"},{code:"BQ",emoji:"\ud83c\udde7\ud83c\uddf6",unicode:"U+1F1E7 U+1F1F6",name:"Bonaire, Sint Eustatius and Saba",title:"flag for Bonaire, Sint Eustatius and Saba"},{code:"BR",emoji:"\ud83c\udde7\ud83c\uddf7",unicode:"U+1F1E7 U+1F1F7",name:"Brazil",title:"flag for Brazil",dialCode:"+55"},{code:"BS",emoji:"\ud83c\udde7\ud83c\uddf8",unicode:"U+1F1E7 U+1F1F8",name:"Bahamas",title:"flag for Bahamas",dialCode:"+1 242"},{code:"BT",emoji:"\ud83c\udde7\ud83c\uddf9",unicode:"U+1F1E7 U+1F1F9",name:"Bhutan",title:"flag for Bhutan",dialCode:"+975"},{code:"BV",emoji:"\ud83c\udde7\ud83c\uddfb",unicode:"U+1F1E7 U+1F1FB",name:"Bouvet Island",title:"flag for Bouvet Island"},{code:"BW",emoji:"\ud83c\udde7\ud83c\uddfc",unicode:"U+1F1E7 U+1F1FC",name:"Botswana",title:"flag for Botswana",dialCode:"+267"},{code:"BY",emoji:"\ud83c\udde7\ud83c\uddfe",unicode:"U+1F1E7 U+1F1FE",name:"Belarus",title:"flag for Belarus",dialCode:"+375"},{code:"BZ",emoji:"\ud83c\udde7\ud83c\uddff",unicode:"U+1F1E7 U+1F1FF",name:"Belize",title:"flag for Belize",dialCode:"+501"},{code:"CA",emoji:"\ud83c\udde8\ud83c\udde6",unicode:"U+1F1E8 U+1F1E6",name:"Canada",title:"flag for Canada",dialCode:"+1"},{code:"CC",emoji:"\ud83c\udde8\ud83c\udde8",unicode:"U+1F1E8 U+1F1E8",name:"Cocos (Keeling) Islands",title:"flag for Cocos (Keeling) Islands",dialCode:"+61"},{code:"CD",emoji:"\ud83c\udde8\ud83c\udde9",unicode:"U+1F1E8 U+1F1E9",name:"Congo",title:"flag for Congo",dialCode:"+243"},{code:"CF",emoji:"\ud83c\udde8\ud83c\uddeb",unicode:"U+1F1E8 U+1F1EB",name:"Central African Republic",title:"flag for Central African Republic",dialCode:"+236"},{code:"CG",emoji:"\ud83c\udde8\ud83c\uddec",unicode:"U+1F1E8 U+1F1EC",name:"Congo",title:"flag for Congo",dialCode:"+242"},{code:"CH",emoji:"\ud83c\udde8\ud83c\udded",unicode:"U+1F1E8 U+1F1ED",name:"Switzerland",title:"flag for Switzerland",dialCode:"+41"},{code:"CI",emoji:"\ud83c\udde8\ud83c\uddee",unicode:"U+1F1E8 U+1F1EE",name:"C\xf4te D'Ivoire",title:"flag for C\xf4te D'Ivoire",dialCode:"+225"},{code:"CK",emoji:"\ud83c\udde8\ud83c\uddf0",unicode:"U+1F1E8 U+1F1F0",name:"Cook Islands",title:"flag for Cook Islands",dialCode:"+682"},{code:"CL",emoji:"\ud83c\udde8\ud83c\uddf1",unicode:"U+1F1E8 U+1F1F1",name:"Chile",title:"flag for Chile",dialCode:"+56"},{code:"CM",emoji:"\ud83c\udde8\ud83c\uddf2",unicode:"U+1F1E8 U+1F1F2",name:"Cameroon",title:"flag for Cameroon",dialCode:"+237"},{code:"CN",emoji:"\ud83c\udde8\ud83c\uddf3",unicode:"U+1F1E8 U+1F1F3",name:"China",title:"flag for China",dialCode:"+86"},{code:"CO",emoji:"\ud83c\udde8\ud83c\uddf4",unicode:"U+1F1E8 U+1F1F4",name:"Colombia",title:"flag for Colombia",dialCode:"+57"},{code:"CR",emoji:"\ud83c\udde8\ud83c\uddf7",unicode:"U+1F1E8 U+1F1F7",name:"Costa Rica",title:"flag for Costa Rica",dialCode:"+506"},{code:"CU",emoji:"\ud83c\udde8\ud83c\uddfa",unicode:"U+1F1E8 U+1F1FA",name:"Cuba",title:"flag for Cuba",dialCode:"+53"},{code:"CV",emoji:"\ud83c\udde8\ud83c\uddfb",unicode:"U+1F1E8 U+1F1FB",name:"Cape Verde",title:"flag for Cape Verde",dialCode:"+238"},{code:"CW",emoji:"\ud83c\udde8\ud83c\uddfc",unicode:"U+1F1E8 U+1F1FC",name:"Cura\xe7ao",title:"flag for Cura\xe7ao"},{code:"CX",emoji:"\ud83c\udde8\ud83c\uddfd",unicode:"U+1F1E8 U+1F1FD",name:"Christmas Island",title:"flag for Christmas Island",dialCode:"+61"},{code:"CY",emoji:"\ud83c\udde8\ud83c\uddfe",unicode:"U+1F1E8 U+1F1FE",name:"Cyprus",title:"flag for Cyprus",dialCode:"+537"},{code:"CZ",emoji:"\ud83c\udde8\ud83c\uddff",unicode:"U+1F1E8 U+1F1FF",name:"Czech Republic",title:"flag for Czech Republic",dialCode:"+420"},{code:"DE",emoji:"\ud83c\udde9\ud83c\uddea",unicode:"U+1F1E9 U+1F1EA",name:"Germany",title:"flag for Germany",dialCode:"+49"},{code:"DJ",emoji:"\ud83c\udde9\ud83c\uddef",unicode:"U+1F1E9 U+1F1EF",name:"Djibouti",title:"flag for Djibouti",dialCode:"+253"},{code:"DK",emoji:"\ud83c\udde9\ud83c\uddf0",unicode:"U+1F1E9 U+1F1F0",name:"Denmark",title:"flag for Denmark",dialCode:"+45"},{code:"DM",emoji:"\ud83c\udde9\ud83c\uddf2",unicode:"U+1F1E9 U+1F1F2",name:"Dominica",title:"flag for Dominica",dialCode:"+1 767"},{code:"DO",emoji:"\ud83c\udde9\ud83c\uddf4",unicode:"U+1F1E9 U+1F1F4",name:"Dominican Republic",title:"flag for Dominican Republic",dialCode:"+1 849"},{code:"DZ",emoji:"\ud83c\udde9\ud83c\uddff",unicode:"U+1F1E9 U+1F1FF",name:"Algeria",title:"flag for Algeria",dialCode:"+213"},{code:"EC",emoji:"\ud83c\uddea\ud83c\udde8",unicode:"U+1F1EA U+1F1E8",name:"Ecuador",title:"flag for Ecuador",dialCode:"+593"},{code:"EE",emoji:"\ud83c\uddea\ud83c\uddea",unicode:"U+1F1EA U+1F1EA",name:"Estonia",title:"flag for Estonia",dialCode:"+372"},{code:"EG",emoji:"\ud83c\uddea\ud83c\uddec",unicode:"U+1F1EA U+1F1EC",name:"Egypt",title:"flag for Egypt",dialCode:"+20"},{code:"EH",emoji:"\ud83c\uddea\ud83c\udded",unicode:"U+1F1EA U+1F1ED",name:"Western Sahara",title:"flag for Western Sahara"},{code:"ER",emoji:"\ud83c\uddea\ud83c\uddf7",unicode:"U+1F1EA U+1F1F7",name:"Eritrea",title:"flag for Eritrea",dialCode:"+291"},{code:"ES",emoji:"\ud83c\uddea\ud83c\uddf8",unicode:"U+1F1EA U+1F1F8",name:"Spain",title:"flag for Spain",dialCode:"+34"},{code:"ET",emoji:"\ud83c\uddea\ud83c\uddf9",unicode:"U+1F1EA U+1F1F9",name:"Ethiopia",title:"flag for Ethiopia",dialCode:"+251"},{code:"EU",emoji:"\ud83c\uddea\ud83c\uddfa",unicode:"U+1F1EA U+1F1FA",name:"European Union",title:"flag for European Union"},{code:"FI",emoji:"\ud83c\uddeb\ud83c\uddee",unicode:"U+1F1EB U+1F1EE",name:"Finland",title:"flag for Finland",dialCode:"+358"},{code:"FJ",emoji:"\ud83c\uddeb\ud83c\uddef",unicode:"U+1F1EB U+1F1EF",name:"Fiji",title:"flag for Fiji",dialCode:"+679"},{code:"FK",emoji:"\ud83c\uddeb\ud83c\uddf0",unicode:"U+1F1EB U+1F1F0",name:"Falkland Islands (Malvinas)",title:"flag for Falkland Islands (Malvinas)",dialCode:"+500"},{code:"FM",emoji:"\ud83c\uddeb\ud83c\uddf2",unicode:"U+1F1EB U+1F1F2",name:"Micronesia",title:"flag for Micronesia",dialCode:"+691"},{code:"FO",emoji:"\ud83c\uddeb\ud83c\uddf4",unicode:"U+1F1EB U+1F1F4",name:"Faroe Islands",title:"flag for Faroe Islands",dialCode:"+298"},{code:"FR",emoji:"\ud83c\uddeb\ud83c\uddf7",unicode:"U+1F1EB U+1F1F7",name:"France",title:"flag for France",dialCode:"+33"},{code:"GA",emoji:"\ud83c\uddec\ud83c\udde6",unicode:"U+1F1EC U+1F1E6",name:"Gabon",title:"flag for Gabon",dialCode:"+241"},{code:"GB",emoji:"\ud83c\uddec\ud83c\udde7",unicode:"U+1F1EC U+1F1E7",name:"United Kingdom",title:"flag for United Kingdom",dialCode:"+44"},{code:"GD",emoji:"\ud83c\uddec\ud83c\udde9",unicode:"U+1F1EC U+1F1E9",name:"Grenada",title:"flag for Grenada",dialCode:"+1 473"},{code:"GE",emoji:"\ud83c\uddec\ud83c\uddea",unicode:"U+1F1EC U+1F1EA",name:"Georgia",title:"flag for Georgia",dialCode:"+995"},{code:"GF",emoji:"\ud83c\uddec\ud83c\uddeb",unicode:"U+1F1EC U+1F1EB",name:"French Guiana",title:"flag for French Guiana",dialCode:"+594"},{code:"GG",emoji:"\ud83c\uddec\ud83c\uddec",unicode:"U+1F1EC U+1F1EC",name:"Guernsey",title:"flag for Guernsey",dialCode:"+44"},{code:"GH",emoji:"\ud83c\uddec\ud83c\udded",unicode:"U+1F1EC U+1F1ED",name:"Ghana",title:"flag for Ghana",dialCode:"+233"},{code:"GI",emoji:"\ud83c\uddec\ud83c\uddee",unicode:"U+1F1EC U+1F1EE",name:"Gibraltar",title:"flag for Gibraltar",dialCode:"+350"},{code:"GL",emoji:"\ud83c\uddec\ud83c\uddf1",unicode:"U+1F1EC U+1F1F1",name:"Greenland",title:"flag for Greenland",dialCode:"+299"},{code:"GM",emoji:"\ud83c\uddec\ud83c\uddf2",unicode:"U+1F1EC U+1F1F2",name:"Gambia",title:"flag for Gambia",dialCode:"+220"},{code:"GN",emoji:"\ud83c\uddec\ud83c\uddf3",unicode:"U+1F1EC U+1F1F3",name:"Guinea",title:"flag for Guinea",dialCode:"+224"},{code:"GP",emoji:"\ud83c\uddec\ud83c\uddf5",unicode:"U+1F1EC U+1F1F5",name:"Guadeloupe",title:"flag for Guadeloupe",dialCode:"+590"},{code:"GQ",emoji:"\ud83c\uddec\ud83c\uddf6",unicode:"U+1F1EC U+1F1F6",name:"Equatorial Guinea",title:"flag for Equatorial Guinea",dialCode:"+240"},{code:"GR",emoji:"\ud83c\uddec\ud83c\uddf7",unicode:"U+1F1EC U+1F1F7",name:"Greece",title:"flag for Greece",dialCode:"+30"},{code:"GS",emoji:"\ud83c\uddec\ud83c\uddf8",unicode:"U+1F1EC U+1F1F8",name:"South Georgia",title:"flag for South Georgia",dialCode:"+500"},{code:"GT",emoji:"\ud83c\uddec\ud83c\uddf9",unicode:"U+1F1EC U+1F1F9",name:"Guatemala",title:"flag for Guatemala",dialCode:"+502"},{code:"GU",emoji:"\ud83c\uddec\ud83c\uddfa",unicode:"U+1F1EC U+1F1FA",name:"Guam",title:"flag for Guam",dialCode:"+1 671"},{code:"GW",emoji:"\ud83c\uddec\ud83c\uddfc",unicode:"U+1F1EC U+1F1FC",name:"Guinea-Bissau",title:"flag for Guinea-Bissau",dialCode:"+245"},{code:"GY",emoji:"\ud83c\uddec\ud83c\uddfe",unicode:"U+1F1EC U+1F1FE",name:"Guyana",title:"flag for Guyana",dialCode:"+595"},{code:"HK",emoji:"\ud83c\udded\ud83c\uddf0",unicode:"U+1F1ED U+1F1F0",name:"Hong Kong",title:"flag for Hong Kong",dialCode:"+852"},{code:"HM",emoji:"\ud83c\udded\ud83c\uddf2",unicode:"U+1F1ED U+1F1F2",name:"Heard Island and Mcdonald Islands",title:"flag for Heard Island and Mcdonald Islands"},{code:"HN",emoji:"\ud83c\udded\ud83c\uddf3",unicode:"U+1F1ED U+1F1F3",name:"Honduras",title:"flag for Honduras",dialCode:"+504"},{code:"HR",emoji:"\ud83c\udded\ud83c\uddf7",unicode:"U+1F1ED U+1F1F7",name:"Croatia",title:"flag for Croatia",dialCode:"+385"},{code:"HT",emoji:"\ud83c\udded\ud83c\uddf9",unicode:"U+1F1ED U+1F1F9",name:"Haiti",title:"flag for Haiti",dialCode:"+509"},{code:"HU",emoji:"\ud83c\udded\ud83c\uddfa",unicode:"U+1F1ED U+1F1FA",name:"Hungary",title:"flag for Hungary",dialCode:"+36"},{code:"ID",emoji:"\ud83c\uddee\ud83c\udde9",unicode:"U+1F1EE U+1F1E9",name:"Indonesia",title:"flag for Indonesia",dialCode:"+62"},{code:"IE",emoji:"\ud83c\uddee\ud83c\uddea",unicode:"U+1F1EE U+1F1EA",name:"Ireland",title:"flag for Ireland",dialCode:"+353"},{code:"IL",emoji:"\ud83c\uddee\ud83c\uddf1",unicode:"U+1F1EE U+1F1F1",name:"Israel",title:"flag for Israel",dialCode:"+972"},{code:"IM",emoji:"\ud83c\uddee\ud83c\uddf2",unicode:"U+1F1EE U+1F1F2",name:"Isle of Man",title:"flag for Isle of Man",dialCode:"+44"},{code:"IN",emoji:"\ud83c\uddee\ud83c\uddf3",unicode:"U+1F1EE U+1F1F3",name:"India",title:"flag for India",dialCode:"+91"},{code:"IO",emoji:"\ud83c\uddee\ud83c\uddf4",unicode:"U+1F1EE U+1F1F4",name:"British Indian Ocean Territory",title:"flag for British Indian Ocean Territory",dialCode:"+246"},{code:"IQ",emoji:"\ud83c\uddee\ud83c\uddf6",unicode:"U+1F1EE U+1F1F6",name:"Iraq",title:"flag for Iraq",dialCode:"+964"},{code:"IR",emoji:"\ud83c\uddee\ud83c\uddf7",unicode:"U+1F1EE U+1F1F7",name:"Iran",title:"flag for Iran",dialCode:"+98"},{code:"IS",emoji:"\ud83c\uddee\ud83c\uddf8",unicode:"U+1F1EE U+1F1F8",name:"Iceland",title:"flag for Iceland",dialCode:"+354"},{code:"IT",emoji:"\ud83c\uddee\ud83c\uddf9",unicode:"U+1F1EE U+1F1F9",name:"Italy",title:"flag for Italy",dialCode:"+39"},{code:"JE",emoji:"\ud83c\uddef\ud83c\uddea",unicode:"U+1F1EF U+1F1EA",name:"Jersey",title:"flag for Jersey",dialCode:"+44"},{code:"JM",emoji:"\ud83c\uddef\ud83c\uddf2",unicode:"U+1F1EF U+1F1F2",name:"Jamaica",title:"flag for Jamaica",dialCode:"+1 876"},{code:"JO",emoji:"\ud83c\uddef\ud83c\uddf4",unicode:"U+1F1EF U+1F1F4",name:"Jordan",title:"flag for Jordan",dialCode:"+962"},{code:"JP",emoji:"\ud83c\uddef\ud83c\uddf5",unicode:"U+1F1EF U+1F1F5",name:"Japan",title:"flag for Japan",dialCode:"+81"},{code:"KE",emoji:"\ud83c\uddf0\ud83c\uddea",unicode:"U+1F1F0 U+1F1EA",name:"Kenya",title:"flag for Kenya",dialCode:"+254"},{code:"KG",emoji:"\ud83c\uddf0\ud83c\uddec",unicode:"U+1F1F0 U+1F1EC",name:"Kyrgyzstan",title:"flag for Kyrgyzstan",dialCode:"+996"},{code:"KH",emoji:"\ud83c\uddf0\ud83c\udded",unicode:"U+1F1F0 U+1F1ED",name:"Cambodia",title:"flag for Cambodia",dialCode:"+855"},{code:"KI",emoji:"\ud83c\uddf0\ud83c\uddee",unicode:"U+1F1F0 U+1F1EE",name:"Kiribati",title:"flag for Kiribati",dialCode:"+686"},{code:"KM",emoji:"\ud83c\uddf0\ud83c\uddf2",unicode:"U+1F1F0 U+1F1F2",name:"Comoros",title:"flag for Comoros",dialCode:"+269"},{code:"KN",emoji:"\ud83c\uddf0\ud83c\uddf3",unicode:"U+1F1F0 U+1F1F3",name:"Saint Kitts and Nevis",title:"flag for Saint Kitts and Nevis",dialCode:"+1 869"},{code:"KP",emoji:"\ud83c\uddf0\ud83c\uddf5",unicode:"U+1F1F0 U+1F1F5",name:"North Korea",title:"flag for North Korea",dialCode:"+850"},{code:"KR",emoji:"\ud83c\uddf0\ud83c\uddf7",unicode:"U+1F1F0 U+1F1F7",name:"South Korea",title:"flag for South Korea",dialCode:"+82"},{code:"KW",emoji:"\ud83c\uddf0\ud83c\uddfc",unicode:"U+1F1F0 U+1F1FC",name:"Kuwait",title:"flag for Kuwait",dialCode:"+965"},{code:"KY",emoji:"\ud83c\uddf0\ud83c\uddfe",unicode:"U+1F1F0 U+1F1FE",name:"Cayman Islands",title:"flag for Cayman Islands",dialCode:"+ 345"},{code:"KZ",emoji:"\ud83c\uddf0\ud83c\uddff",unicode:"U+1F1F0 U+1F1FF",name:"Kazakhstan",title:"flag for Kazakhstan",dialCode:"+7 7"},{code:"LA",emoji:"\ud83c\uddf1\ud83c\udde6",unicode:"U+1F1F1 U+1F1E6",name:"Lao People's Democratic Republic",title:"flag for Lao People's Democratic Republic",dialCode:"+856"},{code:"LB",emoji:"\ud83c\uddf1\ud83c\udde7",unicode:"U+1F1F1 U+1F1E7",name:"Lebanon",title:"flag for Lebanon",dialCode:"+961"},{code:"LC",emoji:"\ud83c\uddf1\ud83c\udde8",unicode:"U+1F1F1 U+1F1E8",name:"Saint Lucia",title:"flag for Saint Lucia",dialCode:"+1 758"},{code:"LI",emoji:"\ud83c\uddf1\ud83c\uddee",unicode:"U+1F1F1 U+1F1EE",name:"Liechtenstein",title:"flag for Liechtenstein",dialCode:"+423"},{code:"LK",emoji:"\ud83c\uddf1\ud83c\uddf0",unicode:"U+1F1F1 U+1F1F0",name:"Sri Lanka",title:"flag for Sri Lanka",dialCode:"+94"},{code:"LR",emoji:"\ud83c\uddf1\ud83c\uddf7",unicode:"U+1F1F1 U+1F1F7",name:"Liberia",title:"flag for Liberia",dialCode:"+231"},{code:"LS",emoji:"\ud83c\uddf1\ud83c\uddf8",unicode:"U+1F1F1 U+1F1F8",name:"Lesotho",title:"flag for Lesotho",dialCode:"+266"},{code:"LT",emoji:"\ud83c\uddf1\ud83c\uddf9",unicode:"U+1F1F1 U+1F1F9",name:"Lithuania",title:"flag for Lithuania",dialCode:"+370"},{code:"LU",emoji:"\ud83c\uddf1\ud83c\uddfa",unicode:"U+1F1F1 U+1F1FA",name:"Luxembourg",title:"flag for Luxembourg",dialCode:"+352"},{code:"LV",emoji:"\ud83c\uddf1\ud83c\uddfb",unicode:"U+1F1F1 U+1F1FB",name:"Latvia",title:"flag for Latvia",dialCode:"+371"},{code:"LY",emoji:"\ud83c\uddf1\ud83c\uddfe",unicode:"U+1F1F1 U+1F1FE",name:"Libya",title:"flag for Libya",dialCode:"+218"},{code:"MA",emoji:"\ud83c\uddf2\ud83c\udde6",unicode:"U+1F1F2 U+1F1E6",name:"Morocco",title:"flag for Morocco",dialCode:"+212"},{code:"MC",emoji:"\ud83c\uddf2\ud83c\udde8",unicode:"U+1F1F2 U+1F1E8",name:"Monaco",title:"flag for Monaco",dialCode:"+377"},{code:"MD",emoji:"\ud83c\uddf2\ud83c\udde9",unicode:"U+1F1F2 U+1F1E9",name:"Moldova",title:"flag for Moldova",dialCode:"+373"},{code:"ME",emoji:"\ud83c\uddf2\ud83c\uddea",unicode:"U+1F1F2 U+1F1EA",name:"Montenegro",title:"flag for Montenegro",dialCode:"+382"},{code:"MF",emoji:"\ud83c\uddf2\ud83c\uddeb",unicode:"U+1F1F2 U+1F1EB",name:"Saint Martin (French Part)",title:"flag for Saint Martin (French Part)",dialCode:"+590"},{code:"MG",emoji:"\ud83c\uddf2\ud83c\uddec",unicode:"U+1F1F2 U+1F1EC",name:"Madagascar",title:"flag for Madagascar",dialCode:"+261"},{code:"MH",emoji:"\ud83c\uddf2\ud83c\udded",unicode:"U+1F1F2 U+1F1ED",name:"Marshall Islands",title:"flag for Marshall Islands",dialCode:"+692"},{code:"MK",emoji:"\ud83c\uddf2\ud83c\uddf0",unicode:"U+1F1F2 U+1F1F0",name:"Macedonia",title:"flag for Macedonia",dialCode:"+389"},{code:"ML",emoji:"\ud83c\uddf2\ud83c\uddf1",unicode:"U+1F1F2 U+1F1F1",name:"Mali",title:"flag for Mali",dialCode:"+223"},{code:"MM",emoji:"\ud83c\uddf2\ud83c\uddf2",unicode:"U+1F1F2 U+1F1F2",name:"Myanmar",title:"flag for Myanmar",dialCode:"+95"},{code:"MN",emoji:"\ud83c\uddf2\ud83c\uddf3",unicode:"U+1F1F2 U+1F1F3",name:"Mongolia",title:"flag for Mongolia",dialCode:"+976"},{code:"MO",emoji:"\ud83c\uddf2\ud83c\uddf4",unicode:"U+1F1F2 U+1F1F4",name:"Macao",title:"flag for Macao",dialCode:"+853"},{code:"MP",emoji:"\ud83c\uddf2\ud83c\uddf5",unicode:"U+1F1F2 U+1F1F5",name:"Northern Mariana Islands",title:"flag for Northern Mariana Islands",dialCode:"+1 670"},{code:"MQ",emoji:"\ud83c\uddf2\ud83c\uddf6",unicode:"U+1F1F2 U+1F1F6",name:"Martinique",title:"flag for Martinique",dialCode:"+596"},{code:"MR",emoji:"\ud83c\uddf2\ud83c\uddf7",unicode:"U+1F1F2 U+1F1F7",name:"Mauritania",title:"flag for Mauritania",dialCode:"+222"},{code:"MS",emoji:"\ud83c\uddf2\ud83c\uddf8",unicode:"U+1F1F2 U+1F1F8",name:"Montserrat",title:"flag for Montserrat",dialCode:"+1664"},{code:"MT",emoji:"\ud83c\uddf2\ud83c\uddf9",unicode:"U+1F1F2 U+1F1F9",name:"Malta",title:"flag for Malta",dialCode:"+356"},{code:"MU",emoji:"\ud83c\uddf2\ud83c\uddfa",unicode:"U+1F1F2 U+1F1FA",name:"Mauritius",title:"flag for Mauritius",dialCode:"+230"},{code:"MV",emoji:"\ud83c\uddf2\ud83c\uddfb",unicode:"U+1F1F2 U+1F1FB",name:"Maldives",title:"flag for Maldives",dialCode:"+960"},{code:"MW",emoji:"\ud83c\uddf2\ud83c\uddfc",unicode:"U+1F1F2 U+1F1FC",name:"Malawi",title:"flag for Malawi",dialCode:"+265"},{code:"MX",emoji:"\ud83c\uddf2\ud83c\uddfd",unicode:"U+1F1F2 U+1F1FD",name:"Mexico",title:"flag for Mexico",dialCode:"+52"},{code:"MY",emoji:"\ud83c\uddf2\ud83c\uddfe",unicode:"U+1F1F2 U+1F1FE",name:"Malaysia",title:"flag for Malaysia",dialCode:"+60"},{code:"MZ",emoji:"\ud83c\uddf2\ud83c\uddff",unicode:"U+1F1F2 U+1F1FF",name:"Mozambique",title:"flag for Mozambique",dialCode:"+258"},{code:"NA",emoji:"\ud83c\uddf3\ud83c\udde6",unicode:"U+1F1F3 U+1F1E6",name:"Namibia",title:"flag for Namibia",dialCode:"+264"},{code:"NC",emoji:"\ud83c\uddf3\ud83c\udde8",unicode:"U+1F1F3 U+1F1E8",name:"New Caledonia",title:"flag for New Caledonia",dialCode:"+687"},{code:"NE",emoji:"\ud83c\uddf3\ud83c\uddea",unicode:"U+1F1F3 U+1F1EA",name:"Niger",title:"flag for Niger",dialCode:"+227"},{code:"NF",emoji:"\ud83c\uddf3\ud83c\uddeb",unicode:"U+1F1F3 U+1F1EB",name:"Norfolk Island",title:"flag for Norfolk Island",dialCode:"+672"},{code:"NG",emoji:"\ud83c\uddf3\ud83c\uddec",unicode:"U+1F1F3 U+1F1EC",name:"Nigeria",title:"flag for Nigeria",dialCode:"+234"},{code:"NI",emoji:"\ud83c\uddf3\ud83c\uddee",unicode:"U+1F1F3 U+1F1EE",name:"Nicaragua",title:"flag for Nicaragua",dialCode:"+505"},{code:"NL",emoji:"\ud83c\uddf3\ud83c\uddf1",unicode:"U+1F1F3 U+1F1F1",name:"Netherlands",title:"flag for Netherlands",dialCode:"+31"},{code:"NO",emoji:"\ud83c\uddf3\ud83c\uddf4",unicode:"U+1F1F3 U+1F1F4",name:"Norway",title:"flag for Norway",dialCode:"+47"},{code:"NP",emoji:"\ud83c\uddf3\ud83c\uddf5",unicode:"U+1F1F3 U+1F1F5",name:"Nepal",title:"flag for Nepal",dialCode:"+977"},{code:"NR",emoji:"\ud83c\uddf3\ud83c\uddf7",unicode:"U+1F1F3 U+1F1F7",name:"Nauru",title:"flag for Nauru",dialCode:"+674"},{code:"NU",emoji:"\ud83c\uddf3\ud83c\uddfa",unicode:"U+1F1F3 U+1F1FA",name:"Niue",title:"flag for Niue",dialCode:"+683"},{code:"NZ",emoji:"\ud83c\uddf3\ud83c\uddff",unicode:"U+1F1F3 U+1F1FF",name:"New Zealand",title:"flag for New Zealand",dialCode:"+64"},{code:"OM",emoji:"\ud83c\uddf4\ud83c\uddf2",unicode:"U+1F1F4 U+1F1F2",name:"Oman",title:"flag for Oman",dialCode:"+968"},{code:"PA",emoji:"\ud83c\uddf5\ud83c\udde6",unicode:"U+1F1F5 U+1F1E6",name:"Panama",title:"flag for Panama",dialCode:"+507"},{code:"PE",emoji:"\ud83c\uddf5\ud83c\uddea",unicode:"U+1F1F5 U+1F1EA",name:"Peru",title:"flag for Peru",dialCode:"+51"},{code:"PF",emoji:"\ud83c\uddf5\ud83c\uddeb",unicode:"U+1F1F5 U+1F1EB",name:"French Polynesia",title:"flag for French Polynesia",dialCode:"+689"},{code:"PG",emoji:"\ud83c\uddf5\ud83c\uddec",unicode:"U+1F1F5 U+1F1EC",name:"Papua New Guinea",title:"flag for Papua New Guinea",dialCode:"+675"},{code:"PH",emoji:"\ud83c\uddf5\ud83c\udded",unicode:"U+1F1F5 U+1F1ED",name:"Philippines",title:"flag for Philippines",dialCode:"+63"},{code:"PK",emoji:"\ud83c\uddf5\ud83c\uddf0",unicode:"U+1F1F5 U+1F1F0",name:"Pakistan",title:"flag for Pakistan",dialCode:"+92"},{code:"PL",emoji:"\ud83c\uddf5\ud83c\uddf1",unicode:"U+1F1F5 U+1F1F1",name:"Poland",title:"flag for Poland",dialCode:"+48"},{code:"PM",emoji:"\ud83c\uddf5\ud83c\uddf2",unicode:"U+1F1F5 U+1F1F2",name:"Saint Pierre and Miquelon",title:"flag for Saint Pierre and Miquelon",dialCode:"+508"},{code:"PN",emoji:"\ud83c\uddf5\ud83c\uddf3",unicode:"U+1F1F5 U+1F1F3",name:"Pitcairn",title:"flag for Pitcairn",dialCode:"+872"},{code:"PR",emoji:"\ud83c\uddf5\ud83c\uddf7",unicode:"U+1F1F5 U+1F1F7",name:"Puerto Rico",title:"flag for Puerto Rico",dialCode:"+1 939"},{code:"PS",emoji:"\ud83c\uddf5\ud83c\uddf8",unicode:"U+1F1F5 U+1F1F8",name:"Palestinian Territory",title:"flag for Palestinian Territory",dialCode:"+970"},{code:"PT",emoji:"\ud83c\uddf5\ud83c\uddf9",unicode:"U+1F1F5 U+1F1F9",name:"Portugal",title:"flag for Portugal",dialCode:"+351"},{code:"PW",emoji:"\ud83c\uddf5\ud83c\uddfc",unicode:"U+1F1F5 U+1F1FC",name:"Palau",title:"flag for Palau",dialCode:"+680"},{code:"PY",emoji:"\ud83c\uddf5\ud83c\uddfe",unicode:"U+1F1F5 U+1F1FE",name:"Paraguay",title:"flag for Paraguay",dialCode:"+595"},{code:"QA",emoji:"\ud83c\uddf6\ud83c\udde6",unicode:"U+1F1F6 U+1F1E6",name:"Qatar",title:"flag for Qatar",dialCode:"+974"},{code:"RE",emoji:"\ud83c\uddf7\ud83c\uddea",unicode:"U+1F1F7 U+1F1EA",name:"R\xe9union",title:"flag for R\xe9union",dialCode:"+262"},{code:"RO",emoji:"\ud83c\uddf7\ud83c\uddf4",unicode:"U+1F1F7 U+1F1F4",name:"Romania",title:"flag for Romania",dialCode:"+40"},{code:"RS",emoji:"\ud83c\uddf7\ud83c\uddf8",unicode:"U+1F1F7 U+1F1F8",name:"Serbia",title:"flag for Serbia",dialCode:"+381"},{code:"RU",emoji:"\ud83c\uddf7\ud83c\uddfa",unicode:"U+1F1F7 U+1F1FA",name:"Russia",title:"flag for Russia",dialCode:"+7"},{code:"RW",emoji:"\ud83c\uddf7\ud83c\uddfc",unicode:"U+1F1F7 U+1F1FC",name:"Rwanda",title:"flag for Rwanda",dialCode:"+250"},{code:"SA",emoji:"\ud83c\uddf8\ud83c\udde6",unicode:"U+1F1F8 U+1F1E6",name:"Saudi Arabia",title:"flag for Saudi Arabia",dialCode:"+966"},{code:"SB",emoji:"\ud83c\uddf8\ud83c\udde7",unicode:"U+1F1F8 U+1F1E7",name:"Solomon Islands",title:"flag for Solomon Islands",dialCode:"+677"},{code:"SC",emoji:"\ud83c\uddf8\ud83c\udde8",unicode:"U+1F1F8 U+1F1E8",name:"Seychelles",title:"flag for Seychelles",dialCode:"+248"},{code:"SD",emoji:"\ud83c\uddf8\ud83c\udde9",unicode:"U+1F1F8 U+1F1E9",name:"Sudan",title:"flag for Sudan",dialCode:"+249"},{code:"SE",emoji:"\ud83c\uddf8\ud83c\uddea",unicode:"U+1F1F8 U+1F1EA",name:"Sweden",title:"flag for Sweden",dialCode:"+46"},{code:"SG",emoji:"\ud83c\uddf8\ud83c\uddec",unicode:"U+1F1F8 U+1F1EC",name:"Singapore",title:"flag for Singapore",dialCode:"+65"},{code:"SH",emoji:"\ud83c\uddf8\ud83c\udded",unicode:"U+1F1F8 U+1F1ED",name:"Saint Helena, Ascension and Tristan Da Cunha",title:"flag for Saint Helena, Ascension and Tristan Da Cunha",dialCode:"+290"},{code:"SI",emoji:"\ud83c\uddf8\ud83c\uddee",unicode:"U+1F1F8 U+1F1EE",name:"Slovenia",title:"flag for Slovenia",dialCode:"+386"},{code:"SJ",emoji:"\ud83c\uddf8\ud83c\uddef",unicode:"U+1F1F8 U+1F1EF",name:"Svalbard and Jan Mayen",title:"flag for Svalbard and Jan Mayen",dialCode:"+47"},{code:"SK",emoji:"\ud83c\uddf8\ud83c\uddf0",unicode:"U+1F1F8 U+1F1F0",name:"Slovakia",title:"flag for Slovakia",dialCode:"+421"},{code:"SL",emoji:"\ud83c\uddf8\ud83c\uddf1",unicode:"U+1F1F8 U+1F1F1",name:"Sierra Leone",title:"flag for Sierra Leone",dialCode:"+232"},{code:"SM",emoji:"\ud83c\uddf8\ud83c\uddf2",unicode:"U+1F1F8 U+1F1F2",name:"San Marino",title:"flag for San Marino",dialCode:"+378"},{code:"SN",emoji:"\ud83c\uddf8\ud83c\uddf3",unicode:"U+1F1F8 U+1F1F3",name:"Senegal",title:"flag for Senegal",dialCode:"+221"},{code:"SO",emoji:"\ud83c\uddf8\ud83c\uddf4",unicode:"U+1F1F8 U+1F1F4",name:"Somalia",title:"flag for Somalia",dialCode:"+252"},{code:"SR",emoji:"\ud83c\uddf8\ud83c\uddf7",unicode:"U+1F1F8 U+1F1F7",name:"Suriname",title:"flag for Suriname",dialCode:"+597"},{code:"SS",emoji:"\ud83c\uddf8\ud83c\uddf8",unicode:"U+1F1F8 U+1F1F8",name:"South Sudan",title:"flag for South Sudan"},{code:"ST",emoji:"\ud83c\uddf8\ud83c\uddf9",unicode:"U+1F1F8 U+1F1F9",name:"Sao Tome and Principe",title:"flag for Sao Tome and Principe",dialCode:"+239"},{code:"SV",emoji:"\ud83c\uddf8\ud83c\uddfb",unicode:"U+1F1F8 U+1F1FB",name:"El Salvador",title:"flag for El Salvador",dialCode:"+503"},{code:"SX",emoji:"\ud83c\uddf8\ud83c\uddfd",unicode:"U+1F1F8 U+1F1FD",name:"Sint Maarten (Dutch Part)",title:"flag for Sint Maarten (Dutch Part)"},{code:"SY",emoji:"\ud83c\uddf8\ud83c\uddfe",unicode:"U+1F1F8 U+1F1FE",name:"Syrian Arab Republic",title:"flag for Syrian Arab Republic",dialCode:"+963"},{code:"SZ",emoji:"\ud83c\uddf8\ud83c\uddff",unicode:"U+1F1F8 U+1F1FF",name:"Swaziland",title:"flag for Swaziland",dialCode:"+268"},{code:"TC",emoji:"\ud83c\uddf9\ud83c\udde8",unicode:"U+1F1F9 U+1F1E8",name:"Turks and Caicos Islands",title:"flag for Turks and Caicos Islands",dialCode:"+1 649"},{code:"TD",emoji:"\ud83c\uddf9\ud83c\udde9",unicode:"U+1F1F9 U+1F1E9",name:"Chad",title:"flag for Chad",dialCode:"+235"},{code:"TF",emoji:"\ud83c\uddf9\ud83c\uddeb",unicode:"U+1F1F9 U+1F1EB",name:"French Southern Territories",title:"flag for French Southern Territories"},{code:"TG",emoji:"\ud83c\uddf9\ud83c\uddec",unicode:"U+1F1F9 U+1F1EC",name:"Togo",title:"flag for Togo",dialCode:"+228"},{code:"TH",emoji:"\ud83c\uddf9\ud83c\udded",unicode:"U+1F1F9 U+1F1ED",name:"Thailand",title:"flag for Thailand",dialCode:"+66"},{code:"TJ",emoji:"\ud83c\uddf9\ud83c\uddef",unicode:"U+1F1F9 U+1F1EF",name:"Tajikistan",title:"flag for Tajikistan",dialCode:"+992"},{code:"TK",emoji:"\ud83c\uddf9\ud83c\uddf0",unicode:"U+1F1F9 U+1F1F0",name:"Tokelau",title:"flag for Tokelau",dialCode:"+690"},{code:"TL",emoji:"\ud83c\uddf9\ud83c\uddf1",unicode:"U+1F1F9 U+1F1F1",name:"Timor-Leste",title:"flag for Timor-Leste",dialCode:"+670"},{code:"TM",emoji:"\ud83c\uddf9\ud83c\uddf2",unicode:"U+1F1F9 U+1F1F2",name:"Turkmenistan",title:"flag for Turkmenistan",dialCode:"+993"},{code:"TN",emoji:"\ud83c\uddf9\ud83c\uddf3",unicode:"U+1F1F9 U+1F1F3",name:"Tunisia",title:"flag for Tunisia",dialCode:"+216"},{code:"TO",emoji:"\ud83c\uddf9\ud83c\uddf4",unicode:"U+1F1F9 U+1F1F4",name:"Tonga",title:"flag for Tonga",dialCode:"+676"},{code:"TR",emoji:"\ud83c\uddf9\ud83c\uddf7",unicode:"U+1F1F9 U+1F1F7",name:"Turkey",title:"flag for Turkey",dialCode:"+90"},{code:"TT",emoji:"\ud83c\uddf9\ud83c\uddf9",unicode:"U+1F1F9 U+1F1F9",name:"Trinidad and Tobago",title:"flag for Trinidad and Tobago",dialCode:"+1 868"},{code:"TV",emoji:"\ud83c\uddf9\ud83c\uddfb",unicode:"U+1F1F9 U+1F1FB",name:"Tuvalu",title:"flag for Tuvalu",dialCode:"+688"},{code:"TW",emoji:"\ud83c\uddf9\ud83c\uddfc",unicode:"U+1F1F9 U+1F1FC",name:"Taiwan",title:"flag for Taiwan",dialCode:"+886"},{code:"TZ",emoji:"\ud83c\uddf9\ud83c\uddff",unicode:"U+1F1F9 U+1F1FF",name:"Tanzania",title:"flag for Tanzania",dialCode:"+255"},{code:"UA",emoji:"\ud83c\uddfa\ud83c\udde6",unicode:"U+1F1FA U+1F1E6",name:"Ukraine",title:"flag for Ukraine",dialCode:"+380"},{code:"UG",emoji:"\ud83c\uddfa\ud83c\uddec",unicode:"U+1F1FA U+1F1EC",name:"Uganda",title:"flag for Uganda",dialCode:"+256"},{code:"UM",emoji:"\ud83c\uddfa\ud83c\uddf2",unicode:"U+1F1FA U+1F1F2",name:"United States Minor Outlying Islands",title:"flag for United States Minor Outlying Islands"},{code:"US",emoji:"\ud83c\uddfa\ud83c\uddf8",unicode:"U+1F1FA U+1F1F8",name:"United States",title:"flag for United States",dialCode:"+1"},{code:"UY",emoji:"\ud83c\uddfa\ud83c\uddfe",unicode:"U+1F1FA U+1F1FE",name:"Uruguay",title:"flag for Uruguay",dialCode:"+598"},{code:"UZ",emoji:"\ud83c\uddfa\ud83c\uddff",unicode:"U+1F1FA U+1F1FF",name:"Uzbekistan",title:"flag for Uzbekistan",dialCode:"+998"},{code:"VA",emoji:"\ud83c\uddfb\ud83c\udde6",unicode:"U+1F1FB U+1F1E6",name:"Vatican City",title:"flag for Vatican City",dialCode:"+379"},{code:"VC",emoji:"\ud83c\uddfb\ud83c\udde8",unicode:"U+1F1FB U+1F1E8",name:"Saint Vincent and The Grenadines",title:"flag for Saint Vincent and The Grenadines",dialCode:"+1 784"},{code:"VE",emoji:"\ud83c\uddfb\ud83c\uddea",unicode:"U+1F1FB U+1F1EA",name:"Venezuela",title:"flag for Venezuela",dialCode:"+58"},{code:"VG",emoji:"\ud83c\uddfb\ud83c\uddec",unicode:"U+1F1FB U+1F1EC",name:"Virgin Islands, British",title:"flag for Virgin Islands, British",dialCode:"+1 284"},{code:"VI",emoji:"\ud83c\uddfb\ud83c\uddee",unicode:"U+1F1FB U+1F1EE",name:"Virgin Islands, U.S.",title:"flag for Virgin Islands, U.S.",dialCode:"+1 340"},{code:"VN",emoji:"\ud83c\uddfb\ud83c\uddf3",unicode:"U+1F1FB U+1F1F3",name:"Viet Nam",title:"flag for Viet Nam",dialCode:"+84"},{code:"VU",emoji:"\ud83c\uddfb\ud83c\uddfa",unicode:"U+1F1FB U+1F1FA",name:"Vanuatu",title:"flag for Vanuatu",dialCode:"+678"},{code:"WF",emoji:"\ud83c\uddfc\ud83c\uddeb",unicode:"U+1F1FC U+1F1EB",name:"Wallis and Futuna",title:"flag for Wallis and Futuna",dialCode:"+681"},{code:"WS",emoji:"\ud83c\uddfc\ud83c\uddf8",unicode:"U+1F1FC U+1F1F8",name:"Samoa",title:"flag for Samoa",dialCode:"+685"},{code:"XK",emoji:"\ud83c\uddfd\ud83c\uddf0",unicode:"U+1F1FD U+1F1F0",name:"Kosovo",title:"flag for Kosovo",dialCode:"+383"},{code:"YE",emoji:"\ud83c\uddfe\ud83c\uddea",unicode:"U+1F1FE U+1F1EA",name:"Yemen",title:"flag for Yemen",dialCode:"+967"},{code:"YT",emoji:"\ud83c\uddfe\ud83c\uddf9",unicode:"U+1F1FE U+1F1F9",name:"Mayotte",title:"flag for Mayotte",dialCode:"+262"},{code:"ZA",emoji:"\ud83c\uddff\ud83c\udde6",unicode:"U+1F1FF U+1F1E6",name:"South Africa",title:"flag for South Africa",dialCode:"+27"},{code:"ZM",emoji:"\ud83c\uddff\ud83c\uddf2",unicode:"U+1F1FF U+1F1F2",name:"Zambia",title:"flag for Zambia",dialCode:"+260"},{code:"ZW",emoji:"\ud83c\uddff\ud83c\uddfc",unicode:"U+1F1FF U+1F1FC",name:"Zimbabwe",title:"flag for Zimbabwe",dialCode:"+263"}];class uH{container;apiKey;inputElement;inputClearButton;autocompleteItemsElement=null;focusedItemIndex;currentItems;currentPromiseReject;currentPlaceDetailsPromiseReject;currentTimeout;changeCallbacks=[];suggestionsChangeCallbacks=[];inputCallbacks=[];openCallbacks=[];closeCallbacks=[];preprocessHook;postprocessHook;suggestionsFilter;geocoderUrl="https://api.geoapify.com/v1/geocode/autocomplete";placeDetailsUrl="https://api.geoapify.com/v2/place-details";options={limit:5,debounceDelay:100};BY_COUNTRYCODE="countrycode";BY_RECT="rect";BY_CIRCLE="circle";BY_PROXIMITY="proximity";BY_PLACE="place";constructor(t,e,n){this.container=t,this.apiKey=e,this.options=n?{...this.options,...n}:this.options,this.options.filter=this.options.filter||{},this.options.bias=this.options.bias||{},this.options.countryCodes&&this.addFilterByCountry(this.options.countryCodes),this.options.position&&this.addBiasByProximity(this.options.position),this.inputElement=document.createElement("input"),this.inputElement.classList.add("geoapify-autocomplete-input"),this.inputElement.setAttribute("type","text"),this.inputElement.setAttribute("placeholder",this.options.placeholder||"Enter an address here"),this.container.appendChild(this.inputElement),this.inputClearButton=document.createElement("div"),this.inputClearButton.classList.add("geoapify-close-button"),this.addIcon(this.inputClearButton,"close"),this.inputClearButton.addEventListener("click",this.clearFieldAndNotify.bind(this),!1),this.container.appendChild(this.inputClearButton),this.inputElement.addEventListener("input",this.onUserInput.bind(this),!1),this.inputElement.addEventListener("keydown",this.onUserKeyPress.bind(this),!1),document.addEventListener("click",(t=>{t.target!==this.inputElement?this.closeDropDownList():this.autocompleteItemsElement||this.openDropdownAgain()}))}setType(t){this.options.type=t}setLang(t){this.options.lang=t}setCountryCodes(t){console.warn("WARNING! Obsolete function called. Function setCountryCodes() has been deprecated, please use the new addFilterByCountry() function instead!"),this.options.countryCodes=t}setPosition(t){console.warn("WARNING! Obsolete function called. Function setPosition() has been deprecated, please use the new addBiasByProximity() function instead!"),this.options.position=t}setLimit(t){this.options.limit=t}setValue(t){t?this.inputClearButton.classList.add("visible"):this.inputClearButton.classList.remove("visible"),this.inputElement.value=t}getValue(){return this.inputElement.value}addFilterByCountry(t){this.options.filter[this.BY_COUNTRYCODE]=t}addFilterByCircle(t){this.options.filter[this.BY_CIRCLE]=t}addFilterByRect(t){this.options.filter[this.BY_RECT]=t}addFilterByPlace(t){this.options.filter[this.BY_PLACE]=t}clearFilters(){this.options.filter={}}addBiasByCountry(t){this.options.bias[this.BY_COUNTRYCODE]=t}addBiasByCircle(t){this.options.bias[this.BY_CIRCLE]=t}addBiasByRect(t){this.options.bias[this.BY_RECT]=t}addBiasByProximity(t){this.options.bias[this.BY_PROXIMITY]=t}clearBias(){this.options.bias={}}on(t,e){"select"===t&&this.changeCallbacks.indexOf(e)<0&&this.changeCallbacks.push(e),"suggestions"===t&&this.suggestionsChangeCallbacks.indexOf(e)<0&&this.suggestionsChangeCallbacks.push(e),"input"===t&&this.inputCallbacks.indexOf(e)<0&&this.inputCallbacks.push(e),"close"===t&&this.closeCallbacks.indexOf(e)<0&&this.closeCallbacks.push(e),"open"===t&&this.openCallbacks.indexOf(e)<0&&this.openCallbacks.push(e)}off(t,e){"select"===t&&this.changeCallbacks.indexOf(e)>=0?this.changeCallbacks.splice(this.changeCallbacks.indexOf(e),1):"select"!==t||e||(this.changeCallbacks=[]),"suggestions"===t&&this.suggestionsChangeCallbacks.indexOf(e)>=0?this.suggestionsChangeCallbacks.splice(this.suggestionsChangeCallbacks.indexOf(e),1):"suggestions"!==t||e||(this.suggestionsChangeCallbacks=[]),"input"===t&&this.inputCallbacks.indexOf(e)>=0?this.inputCallbacks.splice(this.inputCallbacks.indexOf(e),1):"input"!==t||e||(this.inputCallbacks=[]),"close"===t&&this.closeCallbacks.indexOf(e)>=0?this.closeCallbacks.splice(this.closeCallbacks.indexOf(e),1):"close"!==t||e||(this.closeCallbacks=[]),"open"===t&&this.openCallbacks.indexOf(e)>=0?this.openCallbacks.splice(this.openCallbacks.indexOf(e),1):"open"!==t||e||(this.openCallbacks=[])}once(t,e){this.on(t,e);const n=this,r=()=>{n.off(t,e),n.off(t,r)};this.on(t,r)}setSuggestionsFilter(t){this.suggestionsFilter=t}setPreprocessHook(t){this.preprocessHook=t}setPostprocessHook(t){this.postprocessHook=t}isOpen(){return!!this.autocompleteItemsElement}close(){this.closeDropDownList()}open(){this.isOpen()||this.openDropdownAgain()}onUserInput(t){let e=this.inputElement.value,n=this.inputElement.value;if(this.inputCallbacks.forEach((t=>t(e))),this.closeDropDownList(),this.focusedItemIndex=-1,this.currentPromiseReject&&(this.currentPromiseReject({canceled:!0}),this.currentPromiseReject=null),this.currentTimeout&&(window.clearTimeout(this.currentTimeout),this.currentTimeout=null),!e)return this.inputClearButton.classList.remove("visible"),!1;this.inputClearButton.classList.add("visible"),this.currentTimeout=window.setTimeout((()=>{new Promise(((t,n)=>{this.currentPromiseReject=n,this.preprocessHook&&"function"==typeof this.preprocessHook&&(e=this.preprocessHook(e));let r=this.generateUrl(e);fetch(r).then((e=>{e.ok?e.json().then((e=>t(e))):e.json().then((t=>n(t)))}))})).then((e=>{e.features&&e.features.length&&e?.query?.parsed&&(this.options.allowNonVerifiedHouseNumber||this.options.allowNonVerifiedStreet)&&this.extendByNonVerifiedValues(e.features,e?.query?.parsed),this.currentItems=e.features,this.currentItems&&this.currentItems.length&&this.suggestionsFilter&&"function"==typeof this.suggestionsFilter&&(this.currentItems=this.suggestionsFilter(this.currentItems)),this.notifySuggestions(this.currentItems),this.currentItems.length&&(this.autocompleteItemsElement=document.createElement("div"),this.autocompleteItemsElement.setAttribute("class","geoapify-autocomplete-items"),this.notifyOpened(),this.container.appendChild(this.autocompleteItemsElement),this.currentItems.forEach(((e,r)=>{const i=document.createElement("div");if(i.classList.add("geoapify-autocomplete-item"),!this.options.skipIcons){const t=document.createElement("span");t.classList.add("icon"),this.addFeatureIcon(t,e.properties.result_type,e.properties.country_code),i.appendChild(t)}const o=document.createElement("span");if(o.classList.add("address"),this.postprocessHook&&"function"==typeof this.postprocessHook){const t=this.postprocessHook(e);o.innerHTML=this.getStyledAddressSingleValue(t,n)}else o.innerHTML=this.getStyledAddress(e.properties,n);i.appendChild(o),i.addEventListener("click",(e=>{t.stopPropagation(),this.setValueAndNotify(this.currentItems[r])})),this.autocompleteItemsElement.appendChild(i)})))}),(t=>{t.canceled||console.log(t)}))}),this.options.debounceDelay)}addHouseNumberToFormatted(t,e,n){const r={"{{{road}}} {{{house_number}}}":["af","ai","al","ao","ar","at","aw","ax","ba","be","bg","bi","bo","bq","br","bs","bt","bv","bw","cf","ch","cl","cm","co","cr","cu","cv","cw","cy","cz","de","dk","do","ec","ee","eh","er","et","fi","fo","gd","ge","gl","gq","gr","gt","gw","hn","hr","ht","hu","id","il","ir","is","jo","ki","km","kp","kw","lc","li","lr","lt","lv","ly","me","mk","ml","mn","mo","mx","ni","nl","no","np","pa","pe","pl","ps","pt","pw","py","qa","ro","rs","ru","sb","sd","se","si","sj","sk","so","sr","ss","st","sv","sx","sz","td","tj","tl","tr","um","uz","uy","vc","ve","vu","ws"],"{{{house_number}}} {{{road}}}":["ad","ae","ag","am","as","au","az","bb","bd","bf","bh","bl","bm","bz","ca","cc","ci","ck","cn","cx","dj","dm","dz","eg","fj","fk","fm","fr","ga","gb","gf","gg","gh","gi","gm","gn","gp","gs","gu","gy","hk","hm","ie","im","io","iq","je","jm","jp","ke","kh","kn","kr","ky","lb","lk","ls","lu","ma","mc","mf","mh","mg","mm","mp","ms","mt","mq","mv","mw","my","na","nc","ne","nf","ng","nr","nu","nz","om","pf","pg","ph","pk","pm","pr","re","rw","sa","sc","sg","sh","sl","sn","tc","tf","th","tk","tn","to","tt","tv","tw","tz","ug","us","vg","vi","wf","yt","za","zm","zw"],"{{{road}}}, {{{house_number}}}":["by","es","it","kg","kz","md","mz","sm","sy","ua","va"],"{{{house_number}}}, {{{road}}}":["bj","bn","cd","cg","in","la","mr","mu","tg","tm","vn","ye"]},i=Object.keys(r).find((e=>r[e].indexOf(t.country_code)>=0))||"{{{road}}} {{{house_number}}}";if(e){t.street=e.replace(/(^\w|\s\w|[-]\w)/g,(t=>t.toUpperCase())),t.housenumber=n;const r=i.replace("{{{road}}}",t.street).replace("{{{house_number}}}",n);t.address_line1=r,t.address_line2=t.formatted,t.formatted=r+", "+t.formatted}else{t.housenumber=n;const e=i.replace("{{{road}}}",t.street).replace("{{{house_number}}}",n);t.address_line1=t.address_line1.replace(t.street,e),t.formatted=t.formatted.replace(t.street,e)}}extendByNonVerifiedValues(t,e){t.forEach((t=>{e.housenumber&&this.options.allowNonVerifiedHouseNumber&&"match_by_street"===t.properties.rank.match_type?(this.addHouseNumberToFormatted(t.properties,null,e.housenumber),t.properties.nonVerifiedParts=["housenumber"]):e.street&&e.housenumber&&this.options.allowNonVerifiedStreet&&("match_by_city_or_disrict"===t.properties.rank.match_type||"match_by_postcode"===t.properties.rank.match_type)?(this.addHouseNumberToFormatted(t.properties,e.street,e.housenumber),t.properties.nonVerifiedParts=["housenumber","street"]):e.street&&this.options.allowNonVerifiedStreet&&("match_by_city_or_disrict"===t.properties.rank.match_type||"match_by_postcode"===t.properties.rank.match_type)&&(t.properties.street=e.street.replace(/(^\w|\s\w|[-]\w)/g,(t=>t.toUpperCase())),t.properties.address_line1=t.properties.street,t.properties.address_line2=t.properties.formatted,t.properties.formatted=t.properties.street+", "+t.properties.formatted,t.properties.nonVerifiedParts=["street"])}))}getStyledAddressSingleValue(t,e){let n=t;const r=(n||"").toLowerCase().indexOf(e.toLowerCase());return r>=0&&(n=n.substring(0,r)+`<strong>${n.substring(r,r+e.length)}</strong>`+n.substring(r+e.length)),`<span class="main-part">${n}</span>`}getStyledAddress(t,e){let n,r;const i=t.formatted.split(",").map((t=>t.trim()));if(t.name)n=i[0],r=i.slice(1).join(", ");else{const t=Math.min(2,Math.max(i.length-2,1));n=i.slice(0,t).join(", "),r=i.slice(t).join(", ")}if(t.nonVerifiedParts&&t.nonVerifiedParts.length)t.nonVerifiedParts.forEach((e=>{n=n.replace(t[e],`<span class="non-verified">${t[e]}</span>`)}));else{const t=n.toLowerCase().indexOf(e.toLowerCase());t>=0&&(n=n.substring(0,t)+`<strong>${n.substring(t,t+e.length)}</strong>`+n.substring(t+e.length))}return`<span class="main-part">${n}</span><span class="secondary-part">${r}</span>`}onUserKeyPress(t){if(this.autocompleteItemsElement){const e=this.autocompleteItemsElement.getElementsByTagName("div");"ArrowDown"===t.code?(t.preventDefault(),this.focusedItemIndex++,this.focusedItemIndex>=e.length&&(this.focusedItemIndex=0),this.setActive(e,this.focusedItemIndex)):"ArrowUp"===t.code?(t.preventDefault(),this.focusedItemIndex--,this.focusedItemIndex<0&&(this.focusedItemIndex=e.length-1),this.setActive(e,this.focusedItemIndex)):"Enter"===t.code?(t.preventDefault(),this.focusedItemIndex>-1&&(this.options.skipSelectionOnArrowKey?this.setValueAndNotify(this.currentItems[this.focusedItemIndex]):this.closeDropDownList())):"Escape"===t.code&&this.closeDropDownList()}else"ArrowDown"==t.code&&this.openDropdownAgain()}setActive(t,e){if(!t||!t.length)return!1;for(var n=0;n<t.length;n++)t[n].classList.remove("active");t[e].classList.add("active"),this.options.skipSelectionOnArrowKey||(this.inputElement.value=this.postprocessHook&&"function"==typeof this.postprocessHook?this.postprocessHook(this.currentItems[e]):this.currentItems[e].properties.formatted,this.notifyValueSelected(this.currentItems[e]))}setValueAndNotify(t){this.inputElement.value=this.postprocessHook&&"function"==typeof this.postprocessHook?this.postprocessHook(t):t.properties.formatted,this.notifyValueSelected(t),this.closeDropDownList()}clearFieldAndNotify(t){t.stopPropagation(),this.inputElement.value="",this.inputClearButton.classList.remove("visible"),this.currentPromiseReject&&(this.currentPromiseReject({canceled:!0}),this.currentPromiseReject=null),this.currentTimeout&&(window.clearTimeout(this.currentTimeout),this.currentTimeout=null),this.closeDropDownList(),this.notifyValueSelected(null)}closeDropDownList(){this.autocompleteItemsElement&&(this.container.removeChild(this.autocompleteItemsElement),this.autocompleteItemsElement=null,this.notifyClosed())}addIcon(t,e){const n={close:{path:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",viewbox:"0 0 24 24"},"map-marker":{path:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z",viewbox:"0 0 384 512"},road:{path:"M573.19 402.67l-139.79-320C428.43 71.29 417.6 64 405.68 64h-97.59l2.45 23.16c.5 4.72-3.21 8.84-7.96 8.84h-29.16c-4.75 0-8.46-4.12-7.96-8.84L267.91 64h-97.59c-11.93 0-22.76 7.29-27.73 18.67L2.8 402.67C-6.45 423.86 8.31 448 30.54 448h196.84l10.31-97.68c.86-8.14 7.72-14.32 15.91-14.32h68.8c8.19 0 15.05 6.18 15.91 14.32L348.62 448h196.84c22.23 0 36.99-24.14 27.73-45.33zM260.4 135.16a8 8 0 0 1 7.96-7.16h39.29c4.09 0 7.53 3.09 7.96 7.16l4.6 43.58c.75 7.09-4.81 13.26-11.93 13.26h-40.54c-7.13 0-12.68-6.17-11.93-13.26l4.59-43.58zM315.64 304h-55.29c-9.5 0-16.91-8.23-15.91-17.68l5.07-48c.86-8.14 7.72-14.32 15.91-14.32h45.15c8.19 0 15.05 6.18 15.91 14.32l5.07 48c1 9.45-6.41 17.68-15.91 17.68z",viewbox:"0 0 576 512"},city:{path:"M616 192H480V24c0-13.26-10.74-24-24-24H312c-13.26 0-24 10.74-24 24v72h-64V16c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v80h-64V16c0-8.84-7.16-16-16-16H80c-8.84 0-16 7.16-16 16v80H24c-13.26 0-24 10.74-24 24v360c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V216c0-13.26-10.75-24-24-24zM128 404c0 6.63-5.37 12-12 12H76c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12H76c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12H76c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm128 192c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm160 96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12V76c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm160 288c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40z",viewbox:"0 0 640 512"}};var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("viewBox",n[e].viewbox),r.setAttribute("height","24");var i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("d",n[e].path),i.setAttribute("fill","currentColor"),r.appendChild(i),t.appendChild(r)}addFeatureIcon(t,e,n){const r={unknown:"map-marker",amenity:"map-marker",building:"map-marker",street:"road",suburb:"city",district:"city",postcode:"city",city:"city",county:"city",state:"city"},i=lH.find((t=>n&&t.code.toLowerCase()===n.toLowerCase()));if("country"===e&&i){t.classList.add("emoji");const e=document.createElement("span");e.innerText=i.emoji,t.appendChild(e)}else this.addIcon(t,r[e]?r[e]:"map-marker")}notifyValueSelected(t){this.currentPlaceDetailsPromiseReject&&(this.currentPlaceDetailsPromiseReject({canceled:!0}),this.currentPlaceDetailsPromiseReject=null),this.options.skipDetails||!t||t.properties.nonVerifiedParts?.length?this.changeCallbacks.forEach((e=>e(t))):new Promise(((e,n)=>{this.currentPlaceDetailsPromiseReject=n;let r=this.generatePlacesUrlUrl(t.properties.place_id);fetch(r).then((t=>{t.ok?t.json().then((t=>e(t))):t.json().then((t=>n(t)))}))})).then((e=>{if(!e.features.length)return void this.changeCallbacks.forEach((e=>e(t)));const n=e.features[0];this.changeCallbacks.forEach((t=>t(n))),this.currentPlaceDetailsPromiseReject=null}),(t=>{t.canceled||console.log(t)}))}notifySuggestions(t){this.suggestionsChangeCallbacks.forEach((e=>e(t)))}notifyOpened(){this.openCallbacks.forEach((t=>t(!0)))}notifyClosed(){this.closeCallbacks.forEach((t=>t(!1)))}openDropdownAgain(){const t=document.createEvent("Event");t.initEvent("input",!0,!0),this.inputElement.dispatchEvent(t)}generatePlacesUrlUrl(t){let e=`${this.placeDetailsUrl}?id=${t}&apiKey=${this.apiKey}`;return this.options.lang&&(e+=`&lang=${this.options.lang}`),e}generateUrl(t){let e=`${this.geocoderUrl}?text=${encodeURIComponent(t)}&apiKey=${this.apiKey}`;this.options.type&&(e+=`&type=${this.options.type}`),this.options.limit&&(e+=`&limit=${this.options.limit}`),this.options.lang&&(e+=`&lang=${this.options.lang}`);const n=[],r=this.options.filter[this.BY_COUNTRYCODE],i=this.options.filter[this.BY_CIRCLE],o=this.options.filter[this.BY_RECT],a=this.options.filter[this.BY_PLACE];r&&r.length&&n.push(`countrycode:${r.join(",").toLowerCase()}`),i&&this.isLatitude(i.lat)&&this.isLongitude(i.lon)&&i.radiusMeters>0&&n.push(`circle:${i.lon},${i.lat},${i.radiusMeters}`),o&&this.isLatitude(o.lat1)&&this.isLongitude(o.lon1)&&this.isLatitude(o.lat2)&&this.isLongitude(o.lon2)&&n.push(`rect:${o.lon1},${o.lat1},${o.lon2},${o.lat2}`),a&&n.push(`place:${a}`),e+=n.length?`&filter=${n.join("|")}`:"";const s=[],l=this.options.bias[this.BY_COUNTRYCODE],u=this.options.bias[this.BY_CIRCLE],c=this.options.bias[this.BY_RECT],h=this.options.bias[this.BY_PROXIMITY];return l&&l.length&&s.push(`countrycode:${l.join(",").toLowerCase()}`),u&&this.isLatitude(u.lat)&&this.isLongitude(u.lon)&&u.radiusMeters>0&&s.push(`circle:${u.lon},${u.lat},${u.radiusMeters}`),c&&this.isLatitude(c.lat1)&&this.isLongitude(c.lon1)&&this.isLatitude(c.lat2)&&this.isLongitude(c.lon2)&&s.push(`rect:${c.lon1},${c.lat1},${c.lon2},${c.lat2}`),h&&this.isLatitude(h.lat)&&this.isLongitude(h.lon)&&s.push(`proximity:${h.lon},${h.lat}`),e+=s.length?`&bias=${s.join("|")}`:"",e}isLatitude(t){return""!==t&&null!==t&&isFinite(t)&&Math.abs(t)<=90}isLongitude(t){return""!==t&&null!==t&&isFinite(t)&&Math.abs(t)<=180}}const cH=e=>((0,t.useEffect)((()=>{const t=document.getElementById("autocomplete");if(t){new uH(t,iG,{limit:10}).on("select",(t=>{e.setPlace(t)}))}}),[]),(0,Rt.jsx)("div",{id:"autocomplete",className:"autocomplete-container"}));var hH=n(9297),dH=n(4377),pH=n(4522);function fH(t,e){(0,pH.Z)(2,arguments);var n=(0,hH.Z)(e);return(0,dH.Z)(t,1e3*n)}const mH=e=>{const n=AU(),[r,i]=(0,t.useState)(),o=bU((t=>Kq(t,e.tripId)));let a;const s=()=>{e.hide(!1)};return(0,Rt.jsxs)("div",{id:"add-place-container",children:[(0,Rt.jsxs)("header",{children:[(0,Rt.jsx)("img",{src:xW,id:"plus-img"}),(0,Rt.jsx)("h1",{children:"Add Place"}),(0,Rt.jsx)("button",{onClick:s,children:(0,Rt.jsx)("img",{src:wW,id:"x-img"})})]}),(0,Rt.jsxs)("div",{className:"content",children:[(0,Rt.jsx)("p",{children:"Find a place"}),(0,Rt.jsx)("div",{id:"searchAutocomplete",children:(0,Rt.jsx)(cH,{setPlace:i})}),(0,Rt.jsx)("div",{id:"selectedPlace",children:r?r.properties.address_line2:"Search for a place"})]}),(0,Rt.jsxs)("footer",{children:[(0,Rt.jsx)("button",{id:"cancel",onClick:s,children:"Cancel"}),(0,Rt.jsx)(lW,{id:"createTripLarge",text:"Add Place",src:xW,onClick:async()=>{const t={name:r.properties.address_line2,isStart:0===(null===o||void 0===o?void 0:o.numOfPlaces),departureDate:"",arrivalDate:"",coordinates:[r.properties.lat,r.properties.lon],marker:null};if(o)if(a=[...o.places],a.push(t),a.length>1){const e=a.map((t=>t.coordinates)),r=await oG(e),i=JSON.stringify(r);if(a[a.length-2].departureDate){const e=r.features[0].properties.legs,s=e[e.length-1].time,l=fH(new Date(a[a.length-2].departureDate),s).toLocaleString();a[a.length-1]={...t,arrivalDate:l,departureDate:l},n(Vq({...o,route:i,places:a,numOfPlaces:a.length}))}else n(Vq({...o,route:i,places:a,numOfPlaces:a.length}))}else n(Vq({...o,places:a,numOfPlaces:a.length}));e.hide(!1)}})]})]})};class gH extends t.Component{constructor(t){super(t)}render(){const t=this.props.place,e=this.props.showSelectTime;let n;const r=()=>{this.props.setEditTimePlace(this.props.index),e(!0)};return n=t.isStart?t.departureDate?(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)("p",{children:"LEAVE:"}),(0,Rt.jsx)("button",{onClick:r,children:t.departureDate})]}):(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)("p",{children:"LEAVE:"}),(0,Rt.jsx)("button",{onClick:r,children:"Edit time"})]}):t.arrivalDate?t.departureDate?(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)("p",{children:"ARRIVE:"}),(0,Rt.jsx)("p",{className:"time",children:t.arrivalDate}),(0,Rt.jsx)("p",{children:"LEAVE:"}),(0,Rt.jsx)("button",{onClick:r,children:t.departureDate})]}):(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)("p",{children:"ARRIVE:"}),(0,Rt.jsx)("p",{className:"time",children:t.arrivalDate})]}):(0,Rt.jsx)("p",{children:"ARRIVE:"}),(0,Rt.jsxs)("div",{id:"place-container",children:[(0,Rt.jsxs)("header",{children:[(0,Rt.jsx)("div",{className:"order",children:String.fromCharCode(65+this.props.index)}),(0,Rt.jsx)("p",{children:" Starting from "}),(0,Rt.jsx)("button",{onClick:()=>{console.log("started"),this.props.setRemovePlace(this.props.index),this.props.showDelete(!0)},children:(0,Rt.jsx)("img",{src:hW})})]}),(0,Rt.jsxs)("div",{className:"place-content",children:[(0,Rt.jsx)("div",{className:"desc",children:t.name}),(0,Rt.jsx)("div",{className:"schedule",children:n})]})]})}}const yH=gH;var vH=n(9513),_H=n.n(vH);const bH=n.p+"static/media/alert.0e706ad4248134bed6cc9972adf5cc60.svg",xH=e=>{const[n,r]=(0,t.useState)(!1),i=bU((t=>Kq(t,e.tripId))),o=null!==i&&void 0!==i&&i.route?JSON.parse(i.route).features[0].properties.legs:null,a=AU(),s=()=>{e.hide(!1)},[l,u]=(0,t.useState)(new Date);return(0,Rt.jsxs)("div",{className:"select-time-container",children:[(0,Rt.jsxs)("header",{children:[(0,Rt.jsx)("h1",{children:"Set Leaving Time"}),(0,Rt.jsx)("button",{onClick:s,children:(0,Rt.jsx)("img",{src:wW,id:"x-img"})})]}),(0,Rt.jsxs)("div",{className:"content",children:[n?(0,Rt.jsxs)("div",{className:"error",children:[(0,Rt.jsx)("img",{src:bH,alt:"alert"}),(0,Rt.jsx)("span",{children:"Leaving earlier than estimated arrival time is not allowed"})]}):(0,Rt.jsx)(Rt.Fragment,{}),(0,Rt.jsx)("p",{children:"PLANNED LEAVING"}),(0,Rt.jsx)(_H(),{selected:l,onChange:t=>{u(t),i&&i.places&&(i.places[e.index].arrivalDate&&new Date(i.places[e.index].arrivalDate)>t?r(!0):r(!1))},showTimeSelect:!0,timeIntervals:30,timeCaption:"Time",dateFormat:"h:mm aa",inline:!0})]}),(0,Rt.jsxs)("footer",{children:[(0,Rt.jsx)("button",{id:"cancel",onClick:s,children:"Cancel"}),(0,Rt.jsx)(lW,{id:"saveTime",text:"Set Departure",src:xW,onClick:()=>{const t=l.toLocaleString();if(i&&null!=e.index){let n=[...i.places];if(n[e.index].arrivalDate&&new Date(n[e.index].arrivalDate)>l)return void r(!0);n[e.index]={...n[e.index],departureDate:t};let s=l;for(let t=e.index;t<n.length-1;t++){if(s=fH(s,o[t].time),new Date(n[t+1].departureDate)>s)break;const e=s.toLocaleString();n[t+1]={...n[t+1],arrivalDate:e,departureDate:e}}a(Vq({...i,places:n}))}e.hide(!1)}})]})]})},wH=t=>{const e=AU(),n=bU((e=>Kq(e,t.tripId)));let r;const i=()=>{t.showDelete(!1)};return(0,Rt.jsxs)("div",{id:"remove-place-container",children:[(0,Rt.jsxs)("header",{children:[(0,Rt.jsx)("h1",{children:"Remove place"}),(0,Rt.jsx)("button",{onClick:i,children:(0,Rt.jsx)("img",{src:wW,id:"x-img"})})]}),(0,Rt.jsx)("div",{className:"content",children:(0,Rt.jsx)("p",{children:"Are you sure to remove this place from your trip?"})}),(0,Rt.jsxs)("footer",{children:[(0,Rt.jsx)("button",{id:"cancel",onClick:i,children:"Cancel"}),(0,Rt.jsx)(lW,{id:"removeTripLarge",text:"Remove Place",src:xW,onClick:async()=>{if(n)if(r=[...n.places],r.splice(t.index,1),0===t.index&&r.length>0&&(r[0]={...r[0],isStart:!0}),r.length>1){const t=r.map((t=>t.coordinates)),i=await oG(t),o=JSON.stringify(i);e(Vq({...n,places:r,numOfPlaces:r.length,route:o}))}else e(Vq({...n,places:r,numOfPlaces:r.length,route:null}));t.showDelete(!1)}})]})]})},EH=e=>{const[n,r]=(0,t.useState)(!1),[i,o]=(0,t.useState)(!1),[a,s]=(0,t.useState)(!1),[l,u]=(0,t.useState)(null),[c,h]=(0,t.useState)(null),d=AU(),p=bU((t=>Kq(t,e.tripId)));return(0,Rt.jsxs)("div",{id:"plan-container",children:[(0,Rt.jsxs)("header",{id:"plan-header",children:[(0,Rt.jsx)("h1",{children:"Plan"}),(0,Rt.jsxs)("div",{className:"buttons",children:[(0,Rt.jsx)(lW,{text:"Reset",id:"reset",src:aH,onClick:()=>{if(p){let t=[...p.places];for(let e=0;e<t.length;e++)t[e]={...t[e],arrivalDate:"",departureDate:""};d(Vq({...p,places:t}))}}}),(0,Rt.jsx)(lW,{text:"Add place",id:"addPlace",src:sW,onClick:()=>{r(!0)}})]})]}),0===(null===p||void 0===p?void 0:p.numOfPlaces)?(0,Rt.jsx)(sH,{show:r}):null===p||void 0===p?void 0:p.places.map(((t,e)=>(0,Rt.jsx)(yH,{index:e,place:t,showSelectTime:o,showDelete:s,setRemovePlace:u,setEditTimePlace:h},e))),n?(0,Rt.jsx)(mH,{tripId:e.tripId,hide:r}):(0,Rt.jsx)(Rt.Fragment,{}),i?(0,Rt.jsx)(xH,{tripId:e.tripId,index:c,hide:o}):(0,Rt.jsx)(Rt.Fragment,{}),a?(0,Rt.jsx)(wH,{index:l,tripId:e.tripId,showDelete:s}):(0,Rt.jsx)(Rt.Fragment,{})]})};const SH=n.p+"static/media/calendar.be92322c994cc792aca45f1fdfdb55db.svg";const CH=n.p+"static/media/todos.a0add03d438456a10b2fb41c6a00ad3d.svg";const TH=n.p+"static/media/wallet.21f3f6bef528f21d581f3db052f9392a.svg";const IH=n.p+"static/media/arrow.729cb54b5c9c084392bf887b50d06074.svg",kH=t=>{const e=bU((e=>Kq(e,t.tripId)));return(0,Rt.jsxs)("div",{className:"trip-description-container",children:[(0,Rt.jsx)("header",{children:(0,Rt.jsxs)("h1",{children:[(0,Rt.jsx)(yW,{to:"/main",children:(0,Rt.jsx)("img",{src:IH,alt:"arrow"})}),null===e||void 0===e?void 0:e.title]})}),(0,Rt.jsx)("div",{id:"trip-description-content",children:(0,Rt.jsxs)(eH,{className:"tabs",variant:"unstyled",children:[(0,Rt.jsxs)(nH,{className:"tablist",children:[(0,Rt.jsxs)(rH,{className:"singletab",_selected:{color:"white",bg:"blue.500"},children:[(0,Rt.jsx)("img",{src:SH}),"Plan"]}),(0,Rt.jsxs)(rH,{className:"singletab",children:[(0,Rt.jsx)("img",{src:CH}),"ToDos"]}),(0,Rt.jsxs)(rH,{className:"singletab",children:[(0,Rt.jsx)("img",{src:TH}),"Expenses"]})]}),(0,Rt.jsxs)(iH,{className:"tabpanels",children:[(0,Rt.jsx)(oH,{className:"panel",children:(0,Rt.jsx)(EH,{tripId:t.tripId})}),(0,Rt.jsx)(oH,{className:"panel",children:(0,Rt.jsx)("p",{children:"two!"})}),(0,Rt.jsx)(oH,{className:"panel",children:(0,Rt.jsx)("p",{children:"three!"})})]})]})})]})},AH=()=>{const{tripId:e}=function(){let{matches:e}=t.useContext(Wv),n=e[e.length-1];return n?n.params:{}}();return(0,Rt.jsxs)("div",{className:"trip-page-container",children:[(0,Rt.jsx)(kH,{tripId:e}),(0,Rt.jsx)(aW,{tripId:e})]})};const PH=function(){const[e,n]=(0,t.useState)("");return(0,t.useEffect)((()=>{!function(t,e,n,r){rC(t).onAuthStateChanged(e,n,r)}(iU,(t=>{n(t?t.uid:"")}))}),[]),(0,Rt.jsx)(Qy,{children:(0,Rt.jsx)(p_.Provider,{value:e,children:(0,Rt.jsxs)(u_,{children:[(0,Rt.jsx)(s_,{path:"/",element:(0,Rt.jsx)(f_,{})}),(0,Rt.jsx)(s_,{path:"signup",element:(0,Rt.jsx)(Jq,{})}),(0,Rt.jsx)(s_,{path:"signin",element:(0,Rt.jsx)(tG,{})}),(0,Rt.jsx)(s_,{path:"welcome",element:(0,Rt.jsx)(eG,{})}),(0,Rt.jsx)(s_,{path:"main",element:(0,Rt.jsx)(IW,{})}),(0,Rt.jsx)(s_,{path:"/main/:tripId",element:(0,Rt.jsx)(AH,{})})]})})})},DH=t=>{t&&t instanceof Function&&n.e(787).then(n.bind(n,787)).then((e=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:a}=e;n(t),r(t),i(t),o(t),a(t)}))},MH=function(t){var e,n=vq(),r=t||{},i=r.reducer,o=void 0===i?void 0:i,a=r.middleware,s=void 0===a?n():a,l=r.devTools,u=void 0===l||l,c=r.preloadedState,h=void 0===c?void 0:c,d=r.enhancers,p=void 0===d?void 0:d;if("function"===typeof o)e=o;else{if(!mq(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');e=HV(o)}var f=s;if("function"===typeof f&&(f=f(n),!_q&&!Array.isArray(f)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!_q&&f.some((function(t){return"function"!==typeof t})))throw new Error("each middleware provided to configureStore must be a function");var m=ZV.apply(void 0,f),g=XV;u&&(g=fq(cq({trace:!_q},"object"===typeof u&&u)));var y=[m];return Array.isArray(p)?y=nq([m],p):"function"===typeof p&&(y=p(y)),WV(e,h,g.apply(void 0,y))}({preloadedState:(()=>{try{const t=localStorage.getItem("state");if(null===t)return;return JSON.parse(t)}catch(t){return}})(),reducer:{trips:Xq}});MH.subscribe((()=>{(t=>{try{const e=JSON.stringify(t);localStorage.setItem("state",e)}catch(e){console.log(e)}})(MH.getState())}));const OH=MH;r.createRoot(document.getElementById("root")).render((0,Rt.jsx)(CU,{store:OH,children:(0,Rt.jsx)(mW,{basename:"/",children:(0,Rt.jsx)(PH,{})})})),DH()})()})();
//# sourceMappingURL=main.f4eb4151.js.map